!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Globe=t():e.Globe=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=194)}([function(e,t,n){"use strict";function r(e){return e>1?0:e<-1?o:Math.acos(e)}function i(e){return e>1?s:e<-1?-s:Math.asin(e)}function a(e){return(e=u(e/2))*e}Object.defineProperty(t,"__esModule",{value:!0}),t.acos=r,t.asin=i,t.haversin=a;var o=(t.epsilon=1e-6,t.epsilon2=1e-12,t.pi=Math.PI),s=t.halfPi=o/2,u=(t.quarterPi=o/4,t.tau=2*o,t.degrees=180/o,t.radians=o/180,t.abs=Math.abs,t.atan=Math.atan,t.atan2=Math.atan2,t.cos=Math.cos,t.ceil=Math.ceil,t.exp=Math.exp,t.floor=Math.floor,t.log=Math.log,t.pow=Math.pow,t.sin=Math.sin);t.sign=Math.sign||function(e){return e>0?1:e<0?-1:0},t.sqrt=Math.sqrt,t.tan=Math.tan},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.interpolateRgbBasis)(e[e.length-1])};var r=n(11)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(106);Object.defineProperty(t,"bisect",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(t,"bisectRight",{enumerable:!0,get:function(){return i.bisectRight}}),Object.defineProperty(t,"bisectLeft",{enumerable:!0,get:function(){return i.bisectLeft}});var a=n(21);Object.defineProperty(t,"ascending",{enumerable:!0,get:function(){return r(a).default}});var o=n(107);Object.defineProperty(t,"bisector",{enumerable:!0,get:function(){return r(o).default}});var s=n(225);Object.defineProperty(t,"cross",{enumerable:!0,get:function(){return r(s).default}});var u=n(226);Object.defineProperty(t,"descending",{enumerable:!0,get:function(){return r(u).default}});var c=n(109);Object.defineProperty(t,"deviation",{enumerable:!0,get:function(){return r(c).default}});var l=n(111);Object.defineProperty(t,"extent",{enumerable:!0,get:function(){return r(l).default}});var f=n(227);Object.defineProperty(t,"histogram",{enumerable:!0,get:function(){return r(f).default}});var d=n(230);Object.defineProperty(t,"thresholdFreedmanDiaconis",{enumerable:!0,get:function(){return r(d).default}});var h=n(231);Object.defineProperty(t,"thresholdScott",{enumerable:!0,get:function(){return r(h).default}});var p=n(115);Object.defineProperty(t,"thresholdSturges",{enumerable:!0,get:function(){return r(p).default}});var v=n(232);Object.defineProperty(t,"max",{enumerable:!0,get:function(){return r(v).default}});var m=n(233);Object.defineProperty(t,"mean",{enumerable:!0,get:function(){return r(m).default}});var g=n(234);Object.defineProperty(t,"median",{enumerable:!0,get:function(){return r(g).default}});var y=n(235);Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return r(y).default}});var _=n(116);Object.defineProperty(t,"min",{enumerable:!0,get:function(){return r(_).default}});var b=n(108);Object.defineProperty(t,"pairs",{enumerable:!0,get:function(){return r(b).default}});var x=n(236);Object.defineProperty(t,"permute",{enumerable:!0,get:function(){return r(x).default}});var M=n(57);Object.defineProperty(t,"quantile",{enumerable:!0,get:function(){return r(M).default}});var w=n(113);Object.defineProperty(t,"range",{enumerable:!0,get:function(){return r(w).default}});var S=n(237);Object.defineProperty(t,"scan",{enumerable:!0,get:function(){return r(S).default}});var P=n(238);Object.defineProperty(t,"shuffle",{enumerable:!0,get:function(){return r(P).default}});var T=n(239);Object.defineProperty(t,"sum",{enumerable:!0,get:function(){return r(T).default}});var E=n(114);Object.defineProperty(t,"ticks",{enumerable:!0,get:function(){return r(E).default}}),Object.defineProperty(t,"tickIncrement",{enumerable:!0,get:function(){return E.tickIncrement}}),Object.defineProperty(t,"tickStep",{enumerable:!0,get:function(){return E.tickStep}});var O=n(117);Object.defineProperty(t,"transpose",{enumerable:!0,get:function(){return r(O).default}});var A=n(110);Object.defineProperty(t,"variance",{enumerable:!0,get:function(){return r(A).default}});var L=n(240);Object.defineProperty(t,"zip",{enumerable:!0,get:function(){return r(L).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(249);Object.defineProperty(t,"create",{enumerable:!0,get:function(){return r(i).default}});var a=n(35);Object.defineProperty(t,"creator",{enumerable:!0,get:function(){return r(a).default}});var o=n(279);Object.defineProperty(t,"local",{enumerable:!0,get:function(){return r(o).default}});var s=n(120);Object.defineProperty(t,"matcher",{enumerable:!0,get:function(){return r(s).default}});var u=n(280);Object.defineProperty(t,"mouse",{enumerable:!0,get:function(){return r(u).default}});var c=n(59);Object.defineProperty(t,"namespace",{enumerable:!0,get:function(){return r(c).default}});var l=n(60);Object.defineProperty(t,"namespaces",{enumerable:!0,get:function(){return r(l).default}});var f=n(36);Object.defineProperty(t,"clientPoint",{enumerable:!0,get:function(){return r(f).default}});var d=n(118);Object.defineProperty(t,"select",{enumerable:!0,get:function(){return r(d).default}});var h=n(281);Object.defineProperty(t,"selectAll",{enumerable:!0,get:function(){return r(h).default}});var p=n(8);Object.defineProperty(t,"selection",{enumerable:!0,get:function(){return r(p).default}});var v=n(61);Object.defineProperty(t,"selector",{enumerable:!0,get:function(){return r(v).default}});var m=n(119);Object.defineProperty(t,"selectorAll",{enumerable:!0,get:function(){return r(m).default}});var g=n(123);Object.defineProperty(t,"style",{enumerable:!0,get:function(){return g.styleValue}});var y=n(282);Object.defineProperty(t,"touch",{enumerable:!0,get:function(){return r(y).default}});var _=n(283);Object.defineProperty(t,"touches",{enumerable:!0,get:function(){return r(_).default}});var b=n(62);Object.defineProperty(t,"window",{enumerable:!0,get:function(){return r(b).default}});var x=n(63);Object.defineProperty(t,"event",{enumerable:!0,get:function(){return x.event}}),Object.defineProperty(t,"customEvent",{enumerable:!0,get:function(){return x.customEvent}})},function(e,t,n){"use strict";function r(e,t,n,o){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},s.range=function(n,r,i){var a,o=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return o;do{o.push(a=new Date(+n)),t(n,i),e(n)}while(a<n&&n<r);return o},s.filter=function(n){return r(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(s.count=function(t,r){return i.setTime(+t),a.setTime(+r),e(i),e(a),Math.floor(n(i,a))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=new Date,a=new Date},function(e,t,n){"use strict";function r(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function i(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}Object.defineProperty(t,"__esModule",{value:!0}),t.initRange=r,t.initInterpolator=i},function(e,t,n){"use strict";function r(e,t){var n=a(e,t);if(n.state>f)throw new Error("too late; already scheduled");return n}function i(e,t){var n=a(e,t);if(n.state>p)throw new Error("too late; already running");return n}function a(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function o(e,t,n){function r(e){n.state=d,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}function i(r){var l,f,m,y;if(n.state!==d)return o();for(l in c)if(y=c[l],y.name===n.name){if(y.state===p)return(0,u.timeout)(i);y.state===v?(y.state=g,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete c[l]):+l<t&&(y.state=g,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete c[l])}if((0,u.timeout)(function(){n.state===p&&(n.state=v,n.timer.restart(a,n.delay,n.time),a(r))}),n.state=h,n.on.call("start",e,e.__data__,n.index,n.group),n.state===h){for(n.state=p,s=new Array(m=n.tween.length),l=0,f=-1;l<m;++l)(y=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=y);s.length=f+1}}function a(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(o),n.state=m,1),i=-1,a=s.length;++i<a;)s[i].call(e,r);n.state===m&&(n.on.call("end",e,e.__data__,n.index,n.group),o())}function o(){n.state=g,n.timer.stop(),delete c[t];for(var r in c)return;delete e.__transition}var s,c=e.__transition;c[t]=n,n.timer=(0,u.timer)(r,0,n.time)}Object.defineProperty(t,"__esModule",{value:!0}),t.ENDED=t.ENDING=t.RUNNING=t.STARTED=t.STARTING=t.SCHEDULED=t.CREATED=void 0,t.default=function(e,t,n,r,i,a){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};o(e,n,{name:t,index:r,group:i,on:c,tween:l,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:f})},t.init=r,t.set=i,t.get=a;var s=n(22),u=n(39),c=(0,s.dispatch)("start","end","cancel","interrupt"),l=[],f=t.CREATED=0,d=t.SCHEDULED=1,h=t.STARTING=2,p=t.STARTED=3,v=t.RUNNING=4,m=t.ENDING=5,g=t.ENDED=6},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){this._groups=e,this._parents=t}function a(){return new i([[document.documentElement]],pe)}Object.defineProperty(t,"__esModule",{value:!0}),t.root=void 0,t.Selection=i;var o=n(250),s=r(o),u=n(251),c=r(u),l=n(252),f=r(l),d=n(253),h=r(d),p=n(121),v=r(p),m=n(255),g=r(m),y=n(256),_=r(y),b=n(257),x=r(b),M=n(258),w=r(M),S=n(259),P=r(S),T=n(260),E=r(T),O=n(261),A=r(O),L=n(262),R=r(L),C=n(263),j=r(C),k=n(264),N=r(k),I=n(265),D=r(I),B=n(266),z=r(B),F=n(123),U=r(F),G=n(267),H=r(G),V=n(268),W=r(V),q=n(269),Y=r(q),X=n(270),Z=r(X),J=n(271),Q=r(J),K=n(272),$=r(K),ee=n(273),te=r(ee),ne=n(274),re=r(ne),ie=n(275),ae=r(ie),oe=n(276),se=r(oe),ue=n(277),ce=r(ue),le=n(63),fe=r(le),de=n(278),he=r(de),pe=t.root=[null];i.prototype=a.prototype={constructor:i,select:s.default,selectAll:c.default,filter:f.default,data:h.default,enter:v.default,exit:g.default,join:_.default,merge:x.default,order:w.default,sort:P.default,call:E.default,nodes:A.default,node:R.default,size:j.default,empty:N.default,each:D.default,attr:z.default,style:U.default,property:H.default,classed:W.default,text:Y.default,html:Z.default,raise:Q.default,lower:$.default,append:te.default,insert:re.default,remove:ae.default,clone:se.default,datum:ce.default,on:fe.default,dispatch:he.default},t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(66);Object.defineProperty(t,"color",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(t,"rgb",{enumerable:!0,get:function(){return i.rgb}}),Object.defineProperty(t,"hsl",{enumerable:!0,get:function(){return i.hsl}});var a=n(286);Object.defineProperty(t,"lab",{enumerable:!0,get:function(){return r(a).default}}),Object.defineProperty(t,"hcl",{enumerable:!0,get:function(){return a.hcl}}),Object.defineProperty(t,"lch",{enumerable:!0,get:function(){return a.lch}}),Object.defineProperty(t,"gray",{enumerable:!0,get:function(){return a.gray}});var o=n(287);Object.defineProperty(t,"cubehelix",{enumerable:!0,get:function(){return r(o).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,x.transformer)({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function a(e,t,n,r,i){function a(a,o){return a*=r,o*=i,[t+e*a,n-e*o]}return a.invert=function(a,o){return[(a-t)/e*r,(n-o)/e*i]},a}function o(e,t,n,r,i,a){function o(e,a){return e*=r,a*=i,[c*e-l*a+t,n-l*e-c*a]}var s=(0,_.cos)(a),u=(0,_.sin)(a),c=s*e,l=u*e,f=s/e,d=u/e,h=(u*n-s*t)/e,p=(u*t+s*n)/e;return o.invert=function(e,t){return[r*(f*e-d*t+h),i*(p-d*e-f*t)]},o}function s(e){return u(function(){return e})()}function u(e){function t(e){return w(e[0]*_.radians,e[1]*_.radians)}function n(e){return(e=w.invert(e[0],e[1]))&&[e[0]*_.degrees,e[1]*_.degrees]}function r(){var e=o(O,0,0,D,B,I).apply(null,u(R,C)),t=(I?o:a)(O,A-e[0],L-e[1],D,B,I);return c=(0,b.rotateRadians)(j,k,N),x=(0,m.default)(u,t),w=(0,m.default)(c,x),g=(0,S.default)(x,H),s()}function s(){return T=E=null,t}var u,c,f,h,v,g,x,w,T,E,O=150,A=480,L=250,R=0,C=0,j=0,k=0,N=0,I=0,D=1,B=1,z=null,F=l.default,U=null,G=y.default,H=.5;return t.stream=function(e){return T&&E===e?T:T=P(i(c)(F(g(G(E=e)))))},t.preclip=function(e){return arguments.length?(F=e,z=void 0,s()):F},t.postclip=function(e){return arguments.length?(G=e,U=f=h=v=null,s()):G},t.clipAngle=function(e){return arguments.length?(F=+e?(0,d.default)(z=e*_.radians):(z=null,l.default),s()):z*_.degrees},t.clipExtent=function(e){return arguments.length?(G=null==e?(U=f=h=v=null,y.default):(0,p.default)(U=+e[0][0],f=+e[0][1],h=+e[1][0],v=+e[1][1]),s()):null==U?null:[[U,f],[h,v]]},t.scale=function(e){return arguments.length?(O=+e,r()):O},t.translate=function(e){return arguments.length?(A=+e[0],L=+e[1],r()):[A,L]},t.center=function(e){return arguments.length?(R=e[0]%360*_.radians,C=e[1]%360*_.radians,r()):[R*_.degrees,C*_.degrees]},t.rotate=function(e){return arguments.length?(j=e[0]%360*_.radians,k=e[1]%360*_.radians,N=e.length>2?e[2]%360*_.radians:0,r()):[j*_.degrees,k*_.degrees,N*_.degrees]},t.angle=function(e){return arguments.length?(I=e%360*_.radians,r()):I*_.degrees},t.reflectX=function(e){return arguments.length?(D=e?-1:1,r()):D<0},t.reflectY=function(e){return arguments.length?(B=e?-1:1,r()):B<0},t.precision=function(e){return arguments.length?(g=(0,S.default)(x,H=e*e),s()):(0,_.sqrt)(H)},t.fitExtent=function(e,n){return(0,M.fitExtent)(t,e,n)},t.fitSize=function(e,n){return(0,M.fitSize)(t,e,n)},t.fitWidth=function(e,n){return(0,M.fitWidth)(t,e,n)},t.fitHeight=function(e,n){return(0,M.fitHeight)(t,e,n)},function(){return u=e.apply(this,arguments),t.invert=u.invert&&n,r()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,t.projectionMutator=u;var c=n(150),l=r(c),f=n(156),d=r(f),h=n(44),p=r(h),v=n(149),m=r(v),g=n(79),y=r(g),_=n(0),b=n(43),x=n(45),M=n(82),w=n(412),S=r(w),P=(0,x.transformer)({point:function(e,t){this.stream.point(e*_.radians,t*_.radians)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(65);Object.defineProperty(t,"interpolate",{enumerable:!0,get:function(){return r(i).default}});var a=n(130);Object.defineProperty(t,"interpolateArray",{enumerable:!0,get:function(){return r(a).default}});var o=n(68);Object.defineProperty(t,"interpolateBasis",{enumerable:!0,get:function(){return r(o).default}});var s=n(128);Object.defineProperty(t,"interpolateBasisClosed",{enumerable:!0,get:function(){return r(s).default}});var u=n(131);Object.defineProperty(t,"interpolateDate",{enumerable:!0,get:function(){return r(u).default}});var c=n(288);Object.defineProperty(t,"interpolateDiscrete",{enumerable:!0,get:function(){return r(c).default}});var l=n(289);Object.defineProperty(t,"interpolateHue",{enumerable:!0,get:function(){return r(l).default}});var f=n(37);Object.defineProperty(t,"interpolateNumber",{enumerable:!0,get:function(){return r(f).default}});var d=n(69);Object.defineProperty(t,"interpolateNumberArray",{enumerable:!0,get:function(){return r(d).default}});var h=n(132);Object.defineProperty(t,"interpolateObject",{enumerable:!0,get:function(){return r(h).default}});var p=n(290);Object.defineProperty(t,"interpolateRound",{enumerable:!0,get:function(){return r(p).default}});var v=n(133);Object.defineProperty(t,"interpolateString",{enumerable:!0,get:function(){return r(v).default}});var m=n(291);Object.defineProperty(t,"interpolateTransformCss",{enumerable:!0,get:function(){return m.interpolateTransformCss}}),Object.defineProperty(t,"interpolateTransformSvg",{enumerable:!0,get:function(){return m.interpolateTransformSvg}});var g=n(294);Object.defineProperty(t,"interpolateZoom",{enumerable:!0,get:function(){return r(g).default}});var y=n(127);Object.defineProperty(t,"interpolateRgb",{enumerable:!0,get:function(){return r(y).default}}),Object.defineProperty(t,"interpolateRgbBasis",{enumerable:!0,get:function(){return y.rgbBasis}}),Object.defineProperty(t,"interpolateRgbBasisClosed",{enumerable:!0,get:function(){return y.rgbBasisClosed}});var _=n(295);Object.defineProperty(t,"interpolateHsl",{enumerable:!0,get:function(){return r(_).default}}),Object.defineProperty(t,"interpolateHslLong",{enumerable:!0,get:function(){return _.hslLong}});var b=n(296);Object.defineProperty(t,"interpolateLab",{enumerable:!0,get:function(){return r(b).default}});var x=n(297);Object.defineProperty(t,"interpolateHcl",{enumerable:!0,get:function(){return r(x).default}}),Object.defineProperty(t,"interpolateHclLong",{enumerable:!0,get:function(){return x.hclLong}});var M=n(298);Object.defineProperty(t,"interpolateCubehelix",{enumerable:!0,get:function(){return r(M).default}}),Object.defineProperty(t,"interpolateCubehelixLong",{enumerable:!0,get:function(){return M.cubehelixLong}});var w=n(299);Object.defineProperty(t,"piecewise",{enumerable:!0,get:function(){return r(w).default}});var S=n(300);Object.defineProperty(t,"quantize",{enumerable:!0,get:function(){return r(S).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.durationSecond=1e3,t.durationMinute=6e4,t.durationHour=36e5,t.durationDay=864e5,t.durationWeek=6048e5},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function a(e){return(0,s.selection)().transition(e)}function o(){return++q}Object.defineProperty(t,"__esModule",{value:!0}),t.Transition=i,t.default=a,t.newId=o;var s=n(4),u=n(301),c=r(u),l=n(304),f=r(l),d=n(305),h=r(d),p=n(306),v=r(p),m=n(307),g=r(m),y=n(308),_=r(y),b=n(309),x=r(b),M=n(310),w=r(M),S=n(311),P=r(S),T=n(312),E=r(T),O=n(313),A=r(O),L=n(314),R=r(L),C=n(315),j=r(C),k=n(316),N=r(k),I=n(317),D=r(I),B=n(318),z=r(B),F=n(319),U=r(F),G=n(38),H=r(G),V=n(320),W=r(V),q=0,Y=s.selection.prototype;i.prototype=a.prototype={constructor:i,select:E.default,selectAll:A.default,filter:_.default,merge:x.default,selection:R.default,transition:U.default,call:Y.call,nodes:Y.nodes,node:Y.node,size:Y.size,empty:Y.empty,each:Y.each,on:w.default,attr:c.default,attrTween:f.default,style:j.default,styleTween:N.default,text:D.default,textTween:z.default,remove:P.default,tween:H.default,delay:h.default,duration:v.default,ease:g.default,end:W.default}},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e}function a(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(0,m.default)(isNaN(t)?NaN:.5)}function o(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function s(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=a(i,r),o=n(s,o)):(r=a(r,i),o=n(o,s)),function(e){return o(r(e))}}function u(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=a(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(t){var n=(0,d.bisect)(e,t,1,r)-1;return o[n](i[n](t))}}function c(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function l(){function e(){return c=Math.min(d.length,v.length)>2?u:s,l=f=null,t}function t(e){return isNaN(e=+e)?a:(l||(l=c(d.map(n),v,m)))(n(g(e)))}var n,r,a,c,l,f,d=_,v=_,m=h.interpolate,g=i;return t.invert=function(e){return g(r((f||(f=c(v,d.map(n),h.interpolateNumber)))(e)))},t.domain=function(t){return arguments.length?(d=p.map.call(t,y.default),g===i||(g=o(d)),e()):d.slice()},t.range=function(t){return arguments.length?(v=p.slice.call(t),e()):v.slice()},t.rangeRound=function(t){return v=p.slice.call(t),m=h.interpolateRound,e()},t.clamp=function(e){return arguments.length?(g=e?o(d):i,t):g!==i},t.interpolate=function(t){return arguments.length?(m=t,e()):m},t.unknown=function(e){return arguments.length?(a=e,t):a},function(t,i){return n=t,r=i,e()}}function f(e,t){return l()(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.identity=i,t.copy=c,t.transformer=l,t.default=f;var d=n(3),h=n(11),p=n(18),v=n(463),m=r(v),g=n(169),y=r(g),_=[0,1]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(343);Object.defineProperty(t,"path",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e,t){e&&s.hasOwnProperty(e.type)&&s[e.type](e,t)}function i(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function a(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)i(e[n],t,1);t.polygonEnd()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e&&o.hasOwnProperty(e.type)?o[e.type](e,t):r(e,t)};var o={Feature:function(e,t){r(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,a=n.length;++i<a;)r(n[i].geometry,t)}},s={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){i(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)i(n[r],t,0)},Polygon:function(e,t){a(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)a(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,a=n.length;++i<a;)r(n[i],t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Array.prototype;t.map=r.map,t.slice=r.slice},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.domain;return e.ticks=function(e){var n=t();return(0,o.ticks)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return(0,f.default)(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,s=i.length-1,u=i[a],c=i[s];return c<u&&(r=u,u=c,c=r,r=a,a=s,s=r),r=(0,o.tickIncrement)(u,c,n),r>0?(u=Math.floor(u/r)*r,c=Math.ceil(c/r)*r,r=(0,o.tickIncrement)(u,c,n)):r<0&&(u=Math.ceil(u*r)/r,c=Math.floor(c*r)/r,r=(0,o.tickIncrement)(u,c,n)),r>0?(i[a]=Math.floor(u/r)*r,i[s]=Math.ceil(c/r)*r,t(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[s]=Math.floor(c*r)/r,t(i)),e},e}function a(){var e=(0,u.default)(s.identity,s.identity);return e.copy=function(){return(0,s.copy)(e,a())},c.initRange.apply(e,arguments),i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.linearish=i,t.default=a;var o=n(3),s=n(15),u=r(s),c=n(6),l=n(170),f=r(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(247);Object.defineProperty(t,"dispatch",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e,t){return function(n){return e+n*t}}function i(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function a(e,t){var n=t-e;return n?r(e,n>180||n<-180?n-360*Math.round(n/360):n):(0,c.default)(isNaN(e)?t:e)}function o(e){return 1==(e=+e)?s:function(t,n){return n-t?i(t,n,e):(0,c.default)(isNaN(t)?n:t)}}function s(e,t){var n=t-e;return n?r(e,n):(0,c.default)(isNaN(e)?t:e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hue=a,t.gamma=o,t.default=s;var u=n(129),c=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";function r(){this.reset()}function i(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new r},r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(e){i(a,e,this.t),i(this,a.s,this.s),this.s?this.t+=a.t:this.s=a.t},valueOf:function(){return this.s}};var a=new r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Math.random()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null===e?NaN:+e}},function(e,t,n){"use strict";function r(e){return[(0,l.atan2)(e[1],e[0]),(0,l.asin)(e[2])]}function i(e){var t=e[0],n=e[1],r=(0,l.cos)(n);return[r*(0,l.cos)(t),r*(0,l.sin)(t),(0,l.sin)(n)]}function a(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function o(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function s(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function u(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function c(e){var t=(0,l.sqrt)(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Object.defineProperty(t,"__esModule",{value:!0}),t.spherical=r,t.cartesian=i,t.cartesianDot=a,t.cartesianCross=o,t.cartesianAddInPlace=s,t.cartesianScale=u,t.cartesianNormalizeInPlace=c;var l=n(0)},function(e,t,n){"use strict";function r(e){return function(t,n){var r=(0,a.cos)(t),i=(0,a.cos)(n),o=e(r*i);return[o*i*(0,a.sin)(t),o*(0,a.sin)(n)]}}function i(e){return function(t,n){var r=(0,a.sqrt)(t*t+n*n),i=e(r),o=(0,a.sin)(i),s=(0,a.cos)(i);return[(0,a.atan2)(t*o,r*s),(0,a.asin)(r&&n*o/r)]}}Object.defineProperty(t,"__esModule",{value:!0}),t.azimuthalRaw=r,t.azimuthalInvert=i;var a=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){for(var a,o=e.children,s=-1,u=o.length,c=e.value&&(r-t)/e.value;++s<u;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}},function(e,t,n){"use strict";function r(e){return e>1?0:e<-1?a:Math.acos(e)}function i(e){return e>=1?o:e<=-1?-o:Math.asin(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.acos=r,t.asin=i;var a=(t.abs=Math.abs,t.atan2=Math.atan2,t.cos=Math.cos,t.max=Math.max,t.min=Math.min,t.sin=Math.sin,t.sqrt=Math.sqrt,t.epsilon=1e-12,t.pi=Math.PI),o=t.halfPi=a/2;t.tau=2*a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((i=e.length)>1)for(var n,r,i,a=1,o=e[t[0]],s=o.length;a<i;++a)for(r=o,o=e[t[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}},function(e,t,n){"use strict";function r(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function i(e,t){return t[1]-e[1]||t[0]-e[0]}function a(e,n){var r,a,l,m=e.sort(i).pop();for(t.edges=v=[],t.cells=h=new Array(e.length),t.beaches=d=new f.default,t.circles=p=new f.default;;)if(l=u.firstCircle,m&&(!l||m[1]<l.y||m[1]===l.y&&m[0]<l.x))m[0]===r&&m[1]===a||((0,o.addBeach)(m),r=m[0],a=m[1]),m=e.pop();else{if(!l)break;(0,o.removeBeach)(l.arc)}if((0,s.sortCellHalfedges)(),n){var g=+n[0][0],y=+n[0][1],_=+n[1][0],b=+n[1][1];(0,c.clipEdges)(g,y,_,b),(0,s.clipCells)(g,y,_,b)}this.edges=v,this.cells=h,t.beaches=d=t.circles=p=t.edges=v=t.cells=h=null}Object.defineProperty(t,"__esModule",{value:!0}),t.edges=t.circles=t.cells=t.beaches=t.epsilon2=t.epsilon=void 0,t.default=a;var o=n(558),s=n(191),u=n(192),c=n(97),l=n(96),f=function(e){return e&&e.__esModule?e:{default:e}}(l),d=(t.epsilon=1e-6,t.epsilon2=1e-12,t.beaches=void 0),h=t.cells=void 0,p=t.circles=void 0,v=t.edges=void 0;a.prototype={constructor:a,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return(0,s.cellHalfedgeStart)(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,i){if(o=(a=n.halfedges).length)for(var a,o,s,u=n.site,c=-1,l=t[a[o-1]],f=l.left===u?l.right:l.left;++c<o;)s=f,l=t[a[c]],f=l.left===u?l.right:l.left,s&&f&&i<s.index&&i<f.index&&r(u,s,f)<0&&e.push([u.data,s.data,f.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var u=e-i.site[0],c=t-i.site[1],l=u*u+c*c;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=e-s[0],c=t-s[1],f=u*u+c*c;f<l&&(l=f,o=s.index)}})}while(null!==o);return a._found=r,null==n||l<=n*n?i.site:null}}},function(e,t,n){"use strict";function r(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===s.xhtml&&t.documentElement.namespaceURI===s.xhtml?t.createElement(e):t.createElementNS(n,e)}}function i(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.default)(e);return(t.local?i:r)(t)};var a=n(59),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(60)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}},function(e,t,n){"use strict";function r(e,t){var n,r;return function(){var i=(0,o.set)(this,e),a=i.tween;if(a!==n){r=n=a;for(var s=0,u=r.length;s<u;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function i(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=(0,o.set)(this,e),s=a.tween;if(s!==r){i=(r=s).slice();for(var u={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=u;break}c===l&&i.push(u)}a.tween=i}}function a(e,t,n){var r=e._id;return e.each(function(){var e=(0,o.set)(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return(0,o.get)(e,r).value[t]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a,s=(0,o.get)(this.node(),n).tween,u=0,c=s.length;u<c;++u)if((a=s[u]).name===e)return a.value;return null}return this.each((null==t?r:i)(n,e,t))},t.tweenValue=a;var o=n(7)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(71);Object.defineProperty(t,"now",{enumerable:!0,get:function(){return i.now}}),Object.defineProperty(t,"timer",{enumerable:!0,get:function(){return i.timer}}),Object.defineProperty(t,"timerFlush",{enumerable:!0,get:function(){return i.timerFlush}});var a=n(302);Object.defineProperty(t,"timeout",{enumerable:!0,get:function(){return r(a).default}});var o=n(303);Object.defineProperty(t,"interval",{enumerable:!0,get:function(){return r(o).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(344);Object.defineProperty(t,"nest",{enumerable:!0,get:function(){return r(i).default}});var a=n(345);Object.defineProperty(t,"set",{enumerable:!0,get:function(){return r(a).default}});var o=n(72);Object.defineProperty(t,"map",{enumerable:!0,get:function(){return r(o).default}});var s=n(346);Object.defineProperty(t,"keys",{enumerable:!0,get:function(){return r(s).default}});var u=n(347);Object.defineProperty(t,"values",{enumerable:!0,get:function(){return r(u).default}});var c=n(348);Object.defineProperty(t,"entries",{enumerable:!0,get:function(){return r(c).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e=(0,r.formatDecimalParts)(Math.abs(e)),e?e[1]:NaN};var r=n(42)},function(e,t,n){"use strict";function r(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},t.formatDecimalParts=r},function(e,t,n){"use strict";function r(e,t){return[(0,l.abs)(e)>l.pi?e+Math.round(-e/l.tau)*l.tau:e,t]}function i(e,t,n){return(e%=l.tau)?t||n?(0,c.default)(o(e),s(t,n)):o(e):t||n?s(t,n):r}function a(e){return function(t,n){return t+=e,[t>l.pi?t-l.tau:t<-l.pi?t+l.tau:t,n]}}function o(e){var t=a(e);return t.invert=a(-e),t}function s(e,t){function n(e,t){var n=(0,l.cos)(t),s=(0,l.cos)(e)*n,u=(0,l.sin)(e)*n,c=(0,l.sin)(t),f=c*r+s*i;return[(0,l.atan2)(u*a-f*o,s*r-c*i),(0,l.asin)(f*a+u*o)]}var r=(0,l.cos)(e),i=(0,l.sin)(e),a=(0,l.cos)(t),o=(0,l.sin)(t);return n.invert=function(e,t){var n=(0,l.cos)(t),s=(0,l.cos)(e)*n,u=(0,l.sin)(e)*n,c=(0,l.sin)(t),f=c*a-u*o;return[(0,l.atan2)(u*a+c*o,s*r+f*i),(0,l.asin)(f*r-s*i)]},n}Object.defineProperty(t,"__esModule",{value:!0}),t.rotateRadians=i,t.default=function(e){function t(t){return t=e(t[0]*l.radians,t[1]*l.radians),t[0]*=l.degrees,t[1]*=l.degrees,t}return e=i(e[0]*l.radians,e[1]*l.radians,e.length>2?e[2]*l.radians:0),t.invert=function(t){return t=e.invert(t[0]*l.radians,t[1]*l.radians),t[0]*=l.degrees,t[1]*=l.degrees,t},t};var u=n(149),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l=n(0);r.invert=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){function i(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function o(i,a,o,s){var c=0,l=0;if(null==i||(c=u(i,o))!==(l=u(a,o))||v(i,a)<0^o>0)do{s.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+o+4)%4)!==l);else s.point(a[0],a[1])}function u(r,i){return(0,a.abs)(r[0]-e)<a.epsilon?i>0?0:3:(0,a.abs)(r[0]-n)<a.epsilon?i>0?2:1:(0,a.abs)(r[1]-t)<a.epsilon?i>0?1:0:i>0?3:2}function l(e,t){return v(e.x,t.x)}function v(e,t){var n=u(e,1),r=u(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){function u(e,t){i(e,t)&&C.point(e,t)}function v(){for(var t=0,n=0,i=M.length;n<i;++n)for(var a,o,s=M[n],u=1,c=s.length,l=s[0],f=l[0],d=l[1];u<c;++u)a=f,o=d,l=s[u],f=l[0],d=l[1],o<=r?d>r&&(f-a)*(r-o)>(d-o)*(e-a)&&++t:d<=r&&(f-a)*(r-o)<(d-o)*(e-a)&&--t;return t}function m(){C=j,x=[],M=[],R=!0}function g(){var e=v(),t=R&&e,n=(x=(0,d.merge)(x)).length;(t||n)&&(a.polygonStart(),t&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&(0,f.default)(x,l,e,o,a),a.polygonEnd()),C=a,x=M=w=null}function y(){k.point=b,M&&M.push(w=[]),L=!0,A=!1,E=O=NaN}function _(){x&&(b(S,P),T&&A&&j.rejoin(),x.push(j.result())),k.point=u,A&&C.lineEnd()}function b(a,o){var s=i(a,o);if(M&&w.push([a,o]),L)S=a,P=o,T=s,L=!1,s&&(C.lineStart(),C.point(a,o));else if(s&&A)C.point(a,o);else{var u=[E=Math.max(p,Math.min(h,E)),O=Math.max(p,Math.min(h,O))],l=[a=Math.max(p,Math.min(h,a)),o=Math.max(p,Math.min(h,o))];(0,c.default)(u,l,e,t,n,r)?(A||(C.lineStart(),C.point(u[0],u[1])),C.point(l[0],l[1]),s||C.lineEnd(),R=!1):s&&(C.lineStart(),C.point(a,o),R=!1)}E=a,O=o,A=s}var x,M,w,S,P,T,E,O,A,L,R,C=a,j=(0,s.default)(),k={point:u,lineStart:y,lineEnd:_,polygonStart:m,polygonEnd:g};return k}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(0),o=n(152),s=r(o),u=n(402),c=r(u),l=n(153),f=r(l),d=n(3),h=1e9,p=-h},function(e,t,n){"use strict";function r(e){return function(t){var n=new i;for(var r in e)n[r]=e[r];return n.stream=t,n}}function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{stream:r(e)}},t.transformer=r,i.prototype={constructor:i,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){for(var a,o=e.children,s=-1,u=o.length,c=e.value&&(i-n)/e.value;++s<u;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5);Object.defineProperty(t,"timeInterval",{enumerable:!0,get:function(){return r(i).default}});var a=n(467);Object.defineProperty(t,"timeMillisecond",{enumerable:!0,get:function(){return r(a).default}}),Object.defineProperty(t,"timeMilliseconds",{enumerable:!0,get:function(){return a.milliseconds}}),Object.defineProperty(t,"utcMillisecond",{enumerable:!0,get:function(){return r(a).default}}),Object.defineProperty(t,"utcMilliseconds",{enumerable:!0,get:function(){return a.milliseconds}});var o=n(468);Object.defineProperty(t,"timeSecond",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(t,"timeSeconds",{enumerable:!0,get:function(){return o.seconds}}),Object.defineProperty(t,"utcSecond",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(t,"utcSeconds",{enumerable:!0,get:function(){return o.seconds}});var s=n(469);Object.defineProperty(t,"timeMinute",{enumerable:!0,get:function(){return r(s).default}}),Object.defineProperty(t,"timeMinutes",{enumerable:!0,get:function(){return s.minutes}});var u=n(470);Object.defineProperty(t,"timeHour",{enumerable:!0,get:function(){return r(u).default}}),Object.defineProperty(t,"timeHours",{enumerable:!0,get:function(){return u.hours}});var c=n(471);Object.defineProperty(t,"timeDay",{enumerable:!0,get:function(){return r(c).default}}),Object.defineProperty(t,"timeDays",{enumerable:!0,get:function(){return c.days}});var l=n(472);Object.defineProperty(t,"timeWeek",{enumerable:!0,get:function(){return l.sunday}}),Object.defineProperty(t,"timeWeeks",{enumerable:!0,get:function(){return l.sundays}}),Object.defineProperty(t,"timeSunday",{enumerable:!0,get:function(){return l.sunday}}),Object.defineProperty(t,"timeSundays",{enumerable:!0,get:function(){return l.sundays}}),Object.defineProperty(t,"timeMonday",{enumerable:!0,get:function(){return l.monday}}),Object.defineProperty(t,"timeMondays",{enumerable:!0,get:function(){return l.mondays}}),Object.defineProperty(t,"timeTuesday",{enumerable:!0,get:function(){return l.tuesday}}),Object.defineProperty(t,"timeTuesdays",{enumerable:!0,get:function(){return l.tuesdays}}),Object.defineProperty(t,"timeWednesday",{enumerable:!0,get:function(){return l.wednesday}}),Object.defineProperty(t,"timeWednesdays",{enumerable:!0,get:function(){return l.wednesdays}}),Object.defineProperty(t,"timeThursday",{enumerable:!0,get:function(){return l.thursday}}),Object.defineProperty(t,"timeThursdays",{enumerable:!0,get:function(){return l.thursdays}}),Object.defineProperty(t,"timeFriday",{enumerable:!0,get:function(){return l.friday}}),Object.defineProperty(t,"timeFridays",{enumerable:!0,get:function(){return l.fridays}}),Object.defineProperty(t,"timeSaturday",{enumerable:!0,get:function(){return l.saturday}}),Object.defineProperty(t,"timeSaturdays",{enumerable:!0,get:function(){return l.saturdays}});var f=n(473);Object.defineProperty(t,"timeMonth",{enumerable:!0,get:function(){return r(f).default}}),Object.defineProperty(t,"timeMonths",{enumerable:!0,get:function(){return f.months}});var d=n(474);Object.defineProperty(t,"timeYear",{enumerable:!0,get:function(){return r(d).default}}),Object.defineProperty(t,"timeYears",{enumerable:!0,get:function(){return d.years}});var h=n(475);Object.defineProperty(t,"utcMinute",{enumerable:!0,get:function(){return r(h).default}}),Object.defineProperty(t,"utcMinutes",{enumerable:!0,get:function(){return h.utcMinutes}});var p=n(476);Object.defineProperty(t,"utcHour",{enumerable:!0,get:function(){return r(p).default}}),Object.defineProperty(t,"utcHours",{enumerable:!0,get:function(){return p.utcHours}});var v=n(477);Object.defineProperty(t,"utcDay",{enumerable:!0,get:function(){return r(v).default}}),Object.defineProperty(t,"utcDays",{enumerable:!0,get:function(){return v.utcDays}});var m=n(478);Object.defineProperty(t,"utcWeek",{enumerable:!0,get:function(){return m.utcSunday}}),Object.defineProperty(t,"utcWeeks",{enumerable:!0,get:function(){return m.utcSundays}}),Object.defineProperty(t,"utcSunday",{enumerable:!0,get:function(){return m.utcSunday}}),Object.defineProperty(t,"utcSundays",{enumerable:!0,get:function(){return m.utcSundays}}),Object.defineProperty(t,"utcMonday",{enumerable:!0,get:function(){return m.utcMonday}}),Object.defineProperty(t,"utcMondays",{enumerable:!0,get:function(){return m.utcMondays}}),Object.defineProperty(t,"utcTuesday",{enumerable:!0,get:function(){return m.utcTuesday}}),Object.defineProperty(t,"utcTuesdays",{enumerable:!0,get:function(){return m.utcTuesdays}}),Object.defineProperty(t,"utcWednesday",{enumerable:!0,get:function(){return m.utcWednesday}}),Object.defineProperty(t,"utcWednesdays",{enumerable:!0,get:function(){return m.utcWednesdays}}),Object.defineProperty(t,"utcThursday",{enumerable:!0,get:function(){return m.utcThursday}}),Object.defineProperty(t,"utcThursdays",{enumerable:!0,get:function(){return m.utcThursdays}}),Object.defineProperty(t,"utcFriday",{enumerable:!0,get:function(){return m.utcFriday}}),Object.defineProperty(t,"utcFridays",{enumerable:!0,get:function(){return m.utcFridays}}),Object.defineProperty(t,"utcSaturday",{enumerable:!0,get:function(){return m.utcSaturday}}),Object.defineProperty(t,"utcSaturdays",{enumerable:!0,get:function(){return m.utcSaturdays}});var g=n(479);Object.defineProperty(t,"utcMonth",{enumerable:!0,get:function(){return r(g).default}}),Object.defineProperty(t,"utcMonths",{enumerable:!0,get:function(){return g.utcMonths}});var y=n(480);Object.defineProperty(t,"utcYear",{enumerable:!0,get:function(){return r(y).default}}),Object.defineProperty(t,"utcYears",{enumerable:!0,get:function(){return y.utcYears}})},function(e,t,n){"use strict";function r(e){this._context=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new r(e)},r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},function(e,t,n){"use strict";function r(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function i(e){this._context=e}Object.defineProperty(t,"__esModule",{value:!0}),t.Basis=i,t.default=function(e){return new i(e)},t.point=r,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}},function(e,t,n){"use strict";function r(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function i(e,t){this._context=e,this._k=(1-t)/6}Object.defineProperty(t,"__esModule",{value:!0}),t.Cardinal=i,t.point=r,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:r(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:r(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t.default=function e(t){function n(e){return new i(e,t)}return n.tension=function(t){return e(+t)},n}(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(98);Object.defineProperty(t,"bbox",{enumerable:!0,get:function(){return r(i).default}});var a=n(54);Object.defineProperty(t,"feature",{enumerable:!0,get:function(){return r(a).default}});var o=n(198);Object.defineProperty(t,"mesh",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(t,"meshArcs",{enumerable:!0,get:function(){return o.meshArcs}});var s=n(199);Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return r(s).default}}),Object.defineProperty(t,"mergeArcs",{enumerable:!0,get:function(){return s.mergeArcs}});var u=n(200);Object.defineProperty(t,"neighbors",{enumerable:!0,get:function(){return r(u).default}});var c=n(202);Object.defineProperty(t,"quantize",{enumerable:!0,get:function(){return r(c).default}});var l=n(53);Object.defineProperty(t,"transform",{enumerable:!0,get:function(){return r(l).default}});var f=n(101);Object.defineProperty(t,"untransform",{enumerable:!0,get:function(){return r(f).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null==e)return i.default;var t,n,r=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,i){i||(t=n=0);var u=2,c=e.length,l=new Array(c);for(l[0]=(t+=e[0])*r+o,l[1]=(n+=e[1])*a+s;u<c;)l[u]=e[u],++u;return l}};var r=n(99),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=a(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function a(e,t){function n(e,t){t.length&&t.pop();for(var n=f[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(l(n[r],r));e<0&&(0,s.default)(t,i)}function r(e){return l(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}function u(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(u)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":t=i(e.arcs);break;case"MultiLineString":t=e.arcs.map(i);break;case"Polygon":t=o(e.arcs);break;case"MultiPolygon":t=e.arcs.map(o);break;default:return null}return{type:n,coordinates:t}}var l=(0,c.default)(e.transform),f=e.arcs;return u(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return i(e,t)})}:i(e,t)},t.feature=i,t.object=a;var o=n(197),s=r(o),u=n(53),c=r(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i,a){function o(r,a){for(var o=t(r)&d,s=l[o],u=0;s!=i;){if(n(s,r))return f[o]=a;if(++u>=e)throw new Error("full hashmap");s=l[o=o+1&d]}return l[o]=r,f[o]=a,a}function s(r,a){for(var o=t(r)&d,s=l[o],u=0;s!=i;){if(n(s,r))return f[o];if(++u>=e)throw new Error("full hashmap");s=l[o=o+1&d]}return l[o]=r,f[o]=a,a}function u(r,a){for(var o=t(r)&d,s=l[o],u=0;s!=i;){if(n(s,r))return f[o];if(++u>=e)break;s=l[o=o+1&d]}return a}function c(){for(var e=[],t=0,n=l.length;t<n;++t){var r=l[t];r!=i&&e.push(r)}return e}3===arguments.length&&(r=a=Array,i=null);for(var l=new r(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),f=new a(e),d=e-1,h=0;h<e;++h)l[h]=i;return{set:o,maybeSet:s,get:u,keys:c}}},function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))/2}function i(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[0]*i[1]-t[1]*i[0];return Math.abs(a)/2}Object.defineProperty(t,"__esModule",{value:!0}),t.planarTriangleArea=r,t.planarRingArea=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(null==n&&(n=i.default),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,o=Math.floor(a),s=+n(e[o],o,e);return s+(+n(e[o+1],o+1,e)-s)*(a-o)}};var r=n(27),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(248);Object.defineProperty(t,"drag",{enumerable:!0,get:function(){return r(i).default}});var a=n(124);Object.defineProperty(t,"dragDisable",{enumerable:!0,get:function(){return r(a).default}}),Object.defineProperty(t,"dragEnable",{enumerable:!0,get:function(){return a.yesdrag}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.default.hasOwnProperty(t)?{space:i.default[t],local:e}:e};var r=n(60),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.xhtml="http://www.w3.org/1999/xhtml";t.default={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null==e?r:function(){return this.querySelector(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},function(e,t,n){"use strict";function r(e,t,n){return e=i(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function i(e,n,r){return function(i){var a=l;t.event=l=i;try{e.call(this,this.__data__,n,r)}finally{t.event=l=a}}}function a(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function o(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function s(e,t,n){var a=c.hasOwnProperty(e.type)?r:i;return function(r,i,o){var s,u=this.__on,c=a(t,i,o);if(u)for(var l=0,f=u.length;l<f;++l)if((s=u[l]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=t);this.addEventListener(e.type,c,n),s={type:e.type,name:e.name,value:t,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function u(e,n,r,i){var a=l;e.sourceEvent=l,t.event=l=e;try{return n.apply(r,i)}finally{t.event=l=a}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,i,u=a(e+""),c=u.length;{if(!(arguments.length<2)){for(l=t?s:o,null==n&&(n=!1),r=0;r<c;++r)this.each(l(u[r],t,n));return this}var l=this.node().__on;if(l)for(var f,d=0,h=l.length;d<h;++d)for(r=0,f=l[d];r<c;++r)if((i=u[r]).type===f.type&&i.name===f.name)return f.value}},t.customEvent=u;var c={},l=t.event=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(c={mouseenter:"mouseover",mouseleave:"mouseout"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e,t=r.event;e=t.sourceEvent;)t=e;return t};var r=n(63)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){var n,r=void 0===t?"undefined":i(t);return null==t||"boolean"===r?(0,y.default)(t):("number"===r?d.default:"string"===r?(n=(0,a.color)(t))?(t=n,s.default):m.default:t instanceof a.color?s.default:t instanceof Date?l.default:(0,_.isNumberArray)(t)?b.default:Array.isArray(t)?u.genericArray:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?p.default:d.default)(e,t)};var a=n(9),o=n(127),s=r(o),u=n(130),c=n(131),l=r(c),f=n(37),d=r(f),h=n(132),p=r(h),v=n(133),m=r(v),g=n(129),y=r(g),_=n(69),b=r(_)},function(e,t,n){"use strict";function r(){}function i(){return this.rgb().formatHex()}function a(){return g(this).formatHsl()}function o(){return this.rgb().formatRgb()}function s(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=T.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?u(t):3===n?new d(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?c(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?c(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=E.exec(e))?new d(t[1],t[2],t[3],1):(t=O.exec(e))?new d(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=A.exec(e))?c(t[1],t[2],t[3],t[4]):(t=L.exec(e))?c(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=R.exec(e))?m(t[1],t[2]/100,t[3]/100,1):(t=C.exec(e))?m(t[1],t[2]/100,t[3]/100,t[4]):j.hasOwnProperty(e)?u(j[e]):"transparent"===e?new d(NaN,NaN,NaN,0):null}function u(e){return new d(e>>16&255,e>>8&255,255&e,1)}function c(e,t,n,r){return r<=0&&(e=t=n=NaN),new d(e,t,n,r)}function l(e){return e instanceof r||(e=s(e)),e?(e=e.rgb(),new d(e.r,e.g,e.b,e.opacity)):new d}function f(e,t,n,r){return 1===arguments.length?l(e):new d(e,t,n,null==r?1:r)}function d(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function h(){return"#"+v(this.r)+v(this.g)+v(this.b)}function p(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function v(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function m(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _(e,t,n,r)}function g(e){if(e instanceof _)return new _(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=s(e)),!e)return new _;if(e instanceof _)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),o=Math.max(t,n,i),u=NaN,c=o-a,l=(o+a)/2;return c?(u=t===o?(n-i)/c+6*(n<i):n===o?(i-t)/c+2:(t-n)/c+4,c/=l<.5?o+a:2-o-a,u*=60):c=l>0&&l<1?0:u,new _(u,c,l,e.opacity)}function y(e,t,n,r){return 1===arguments.length?g(e):new _(e,t,n,null==r?1:r)}function _(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function b(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Object.defineProperty(t,"__esModule",{value:!0}),t.brighter=t.darker=void 0,t.Color=r,t.default=s,t.rgbConvert=l,t.rgb=f,t.Rgb=d,t.hslConvert=g,t.hsl=y;var x=n(67),M=function(e){return e&&e.__esModule?e:{default:e}}(x);t.darker=.7;t.brighter=1/.7;var w="\\s*([+-]?\\d+)\\s*",S="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",P="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",T=/^#([0-9a-f]{3,8})$/,E=new RegExp("^rgb\\("+[w,w,w]+"\\)$"),O=new RegExp("^rgb\\("+[P,P,P]+"\\)$"),A=new RegExp("^rgba\\("+[w,w,w,S]+"\\)$"),L=new RegExp("^rgba\\("+[P,P,P,S]+"\\)$"),R=new RegExp("^hsl\\("+[S,P,P]+"\\)$"),C=new RegExp("^hsla\\("+[S,P,P,S]+"\\)$"),j={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};(0,M.default)(r,s,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:i,formatHex:i,formatHsl:a,formatRgb:o,toString:o}),(0,M.default)(d,f,(0,x.extend)(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new d(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new d(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h,formatHex:h,formatRgb:p,toString:p})),(0,M.default)(_,y,(0,x.extend)(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new _(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new _(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new d(b(e>=240?e-240:e+120,i,r),b(e,i,r),b(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},function(e,t,n){"use strict";function r(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e},t.extend=r},function(e,t,n){"use strict";function r(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}Object.defineProperty(t,"__esModule",{value:!0}),t.basis=r,t.default=function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[i],o=e[i+1],s=i>0?e[i-1]:2*a-o,u=i<t-1?e[i+2]:2*o-a;return r((n-i/t)*t,s,a,o,u)}}},function(e,t,n){"use strict";function r(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}},t.isNumberArray=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.interrupt=t.active=t.transition=void 0;var i=n(13);Object.defineProperty(t,"transition",{enumerable:!0,get:function(){return r(i).default}});var a=n(321);Object.defineProperty(t,"active",{enumerable:!0,get:function(){return r(a).default}});var o=n(135);Object.defineProperty(t,"interrupt",{enumerable:!0,get:function(){return r(o).default}}),n(322)},function(e,t,n){"use strict";function r(){return b||(w(i),b=M.now()+x)}function i(){b=0}function a(){this._call=this._time=this._next=null}function o(e,t,n){var r=new a;return r.restart(e,t,n),r}function s(){r(),++v;for(var e,t=h;t;)(e=b-t._time)>=0&&t._call.call(null,e),t=t._next;--v}function u(){b=(_=M.now())+x,v=m=0;try{s()}finally{v=0,l(),b=0}}function c(){var e=M.now(),t=e-_;t>y&&(x-=t,_=e)}function l(){for(var e,t,n=h,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:h=t);p=e,f(r)}function f(e){if(!v){m&&(m=clearTimeout(m));e-b>24?(e<1/0&&(m=setTimeout(u,e-M.now()-x)),g&&(g=clearInterval(g))):(g||(_=M.now(),g=setInterval(c,y)),v=1,w(u))}}Object.defineProperty(t,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.now=r,t.Timer=a,t.timer=o,t.timerFlush=s;var h,p,v=0,m=0,g=0,y=1e3,_=0,b=0,x=0,M="object"===("undefined"==typeof performance?"undefined":d(performance))&&performance.now?performance:Date,w="object"===("undefined"==typeof window?"undefined":d(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};a.prototype=o.prototype={constructor:a,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?r():+n)+(null==t?0:+t),this._next||p===this||(p?p._next=this:h=this,p=this),this._call=e,this._time=n,f()},stop:function(){this._call&&(this._call=null,this._time=1/0,f())}}},function(e,t,n){"use strict";function r(){}function i(e,t){var n=new r;if(e instanceof r)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var i,a=-1,o=e.length;if(null==t)for(;++a<o;)n.set(a,e[a]);else for(;++a<o;)n.set(t(i=e[a],a,e),i)}else if(e)for(var s in e)n.set(s,e[s]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=t.prefix="$";r.prototype=i.prototype={constructor:r,has:function(e){return a+e in this},get:function(e){return this[a+e]},set:function(e,t){return this[a+e]=t,this},remove:function(e){var t=a+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===a&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===a&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===a&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===a&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===a&&++e;return e},empty:function(){for(var e in this)if(e[0]===a)return!1;return!0},each:function(e){for(var t in this)t[0]===a&&e(this[t],t.slice(1),this)}},t.default=i},function(e,t,n){"use strict";function r(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function i(e,t){var n=r(e);return function(r,i){return t(n(r),i,e)}}function a(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function o(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function s(e){return e<0?"-"+o(-e,6):e>9999?"+"+o(e,6):o(e,4)}function u(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":s(e.getUTCFullYear(),4)+"-"+o(e.getUTCMonth()+1,2)+"-"+o(e.getUTCDate(),2)+(i?"T"+o(t,2)+":"+o(n,2)+":"+o(r,2)+"."+o(i,3)+"Z":r?"T"+o(t,2)+":"+o(n,2)+":"+o(r,2)+"Z":n||t?"T"+o(t,2)+":"+o(n,2)+"Z":"")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e,t){var a,o,s=n(e,function(e,n){if(a)return a(e,n-1);o=e,a=t?i(e,t):r(e)});return s.columns=o||[],s}function n(e,t){function n(){if(u)return l;if(p)return p=!1,c;var t,n,r=o;if(e.charCodeAt(r)===f){for(;o++<a&&e.charCodeAt(o)!==f||e.charCodeAt(++o)===f;);return(t=o)>=a?u=!0:(n=e.charCodeAt(o++))===d?p=!0:n===h&&(p=!0,e.charCodeAt(o)===d&&++o),e.slice(r+1,t-1).replace(/""/g,'"')}for(;o<a;){if((n=e.charCodeAt(t=o++))===d)p=!0;else if(n===h)p=!0,e.charCodeAt(o)===d&&++o;else if(n!==_)continue;return e.slice(r,t)}return u=!0,e.slice(r,a)}var r,i=[],a=e.length,o=0,s=0,u=a<=0,p=!1;for(e.charCodeAt(a-1)===d&&--a,e.charCodeAt(a-1)===h&&--a;(r=n())!==l;){for(var v=[];r!==c&&r!==l;)v.push(r),r=n();t&&null==(v=t(v,s++))||i.push(v)}return i}function o(t,n){return t.map(function(t){return n.map(function(e){return g(t[e])}).join(e)})}function s(t,n){return null==n&&(n=a(t)),[n.map(g).join(e)].concat(o(t,n)).join("\n")}function p(e,t){return null==t&&(t=a(e)),o(e,t).join("\n")}function v(e){return e.map(m).join("\n")}function m(t){return t.map(g).join(e)}function g(e){return null==e?"":e instanceof Date?u(e):y.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var y=new RegExp('["'+e+"\n\r]"),_=e.charCodeAt(0);return{parse:t,parseRows:n,format:s,formatBody:p,formatRows:v,formatRow:m,formatValue:g}};var c={},l={},f=34,d=10,h=13},function(e,t,n){"use strict";function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return fetch(e,t).then(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return 1e-6*(Math.random()-.5)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(369);Object.defineProperty(t,"quadtree",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(387);Object.defineProperty(t,"formatDefaultLocale",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(t,"format",{enumerable:!0,get:function(){return i.format}}),Object.defineProperty(t,"formatPrefix",{enumerable:!0,get:function(){return i.formatPrefix}});var a=n(144);Object.defineProperty(t,"formatLocale",{enumerable:!0,get:function(){return r(a).default}});var o=n(145);Object.defineProperty(t,"formatSpecifier",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(t,"FormatSpecifier",{enumerable:!0,get:function(){return o.FormatSpecifier}});var s=n(394);Object.defineProperty(t,"precisionFixed",{enumerable:!0,get:function(){return r(s).default}});var u=n(395);Object.defineProperty(t,"precisionPrefix",{enumerable:!0,get:function(){return r(u).default}});var c=n(396);Object.defineProperty(t,"precisionRound",{enumerable:!0,get:function(){return r(c).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,n){"use strict";function r(e,t){function n(e,t){var n=(0,i.sqrt)(s-2*a*(0,i.sin)(t))/a;return[n*(0,i.sin)(e*=a),u-n*(0,i.cos)(e)]}var r=(0,i.sin)(e),a=(r+(0,i.sin)(t))/2;if((0,i.abs)(a)<i.epsilon)return(0,o.cylindricalEqualAreaRaw)(e);var s=1+r*(2*a-r),u=(0,i.sqrt)(s)/a;return n.invert=function(e,t){var n=u-t,r=(0,i.atan2)(e,(0,i.abs)(n))*(0,i.sign)(n);return n*a<0&&(r-=i.pi*(0,i.sign)(e)*(0,i.sign)(n)),[r/a,(0,i.asin)((s-(e*e+n*n)*a*a)/(2*a))]},n}Object.defineProperty(t,"__esModule",{value:!0}),t.conicEqualAreaRaw=r,t.default=function(){return(0,a.conicProjection)(r).scale(155.424).center([0,33.6442])};var i=n(0),a=n(81),o=n(413)},function(e,t,n){"use strict";function r(e){var t=0,n=i.pi/3,r=(0,a.projectionMutator)(e),o=r(t,n);return o.parallels=function(e){return arguments.length?r(t=e[0]*i.radians,n=e[1]*i.radians):[t*i.degrees,n*i.degrees]},o}Object.defineProperty(t,"__esModule",{value:!0}),t.conicProjection=r;var i=n(0),a=n(10)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),(0,l.default)(n,e.stream(d.default)),t(d.default.result()),null!=r&&e.clipExtent(r),e}function a(e,t,n){return i(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,s])},n)}function o(e,t,n){return a(e,[[0,0],t],n)}function s(e,t,n){return i(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])},n)}function u(e,t,n){return i(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])},n)}Object.defineProperty(t,"__esModule",{value:!0}),t.fitExtent=a,t.fitSize=o,t.fitWidth=s,t.fitHeight=u;var c=n(17),l=r(c),f=n(159),d=r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return[e,(0,o.log)((0,o.tan)((o.halfPi+t)/2))]}function a(e){function t(){var t=o.pi*f(),c=s((0,u.default)(s.rotate()).invert([0,0]));return h(null==p?[[c[0]-t,c[1]-t],[c[0]+t,c[1]+t]]:e===i?[[Math.max(c[0]-t,p),n],[Math.min(c[0]+t,r),a]]:[[p,Math.max(c[1]-t,n)],[r,Math.min(c[1]+t,a)]])}var n,r,a,s=(0,l.default)(e),c=s.center,f=s.scale,d=s.translate,h=s.clipExtent,p=null;return s.scale=function(e){return arguments.length?(f(e),t()):f()},s.translate=function(e){return arguments.length?(d(e),t()):d()},s.center=function(e){return arguments.length?(c(e),t()):c()},s.clipExtent=function(e){return arguments.length?(null==e?p=n=r=a=null:(p=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),t()):null==p?null:[[p,n],[r,a]]},t()}Object.defineProperty(t,"__esModule",{value:!0}),t.mercatorRaw=i,t.default=function(){return a(i).scale(961/o.tau)},t.mercatorProjection=a;var o=n(0),s=n(43),u=r(s),c=n(10),l=r(c);i.invert=function(e,t){return[e,2*(0,o.atan)((0,o.exp)(t))-o.halfPi]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n,r,i,a,s,l=new c(e),f=+e.value&&(l.value=e.value),d=[l];for(null==t&&(t=o);n=d.pop();)if(f&&(n.value=+n.data.value),(i=t(n.data))&&(s=i.length))for(n.children=new Array(s),a=s-1;a>=0;--a)d.push(r=n.children[a]=new c(i[a])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(u)}function a(){return i(this).eachBefore(s)}function o(e){return e.children}function s(e){e.data=e.data.data}function u(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function c(e){this.data=e,this.depth=this.height=0,this.parent=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.computeHeight=u,t.Node=c;var l=n(428),f=r(l),d=n(429),h=r(d),p=n(430),v=r(p),m=n(431),g=r(m),y=n(432),_=r(y),b=n(433),x=r(b),M=n(434),w=r(M),S=n(435),P=r(S),T=n(436),E=r(T),O=n(437),A=r(O),L=n(438),R=r(L);c.prototype=i.prototype={constructor:c,count:f.default,each:h.default,eachAfter:g.default,eachBefore:v.default,sum:_.default,sort:x.default,path:w.default,ancestors:P.default,descendants:E.default,leaves:A.default,links:R.default,copy:a}},function(e,t,n){"use strict";function r(e){return null==e?null:i(e)}function i(e){if("function"!=typeof e)throw new Error;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.optional=r,t.required=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,i,a){for(var s,c,l,f,d,h,p,v,m,g,y,_=[],b=t.children,x=0,M=0,w=b.length,S=t.value;x<w;){l=i-n,f=a-r;do{d=b[M++].value}while(!d&&M<w);for(h=p=d,g=Math.max(f/l,l/f)/(S*e),y=d*d*g,m=Math.max(p/y,y/h);M<w;++M){if(d+=c=b[M].value,c<h&&(h=c),c>p&&(p=c),y=d*d*g,(v=Math.max(p/y,y/h))>m){d-=c;break}m=v}_.push(s={value:d,dice:l<f,children:b.slice(x,M)}),s.dice?(0,o.default)(s,n,r,i,S?r+=f*d/S:a):(0,u.default)(s,n,r,S?n+=l*d/S:i,a),S-=d,x=M}return _}Object.defineProperty(t,"__esModule",{value:!0}),t.phi=void 0,t.squarifyRatio=i;var a=n(30),o=r(a),s=n(46),u=r(s),c=t.phi=(1+Math.sqrt(5))/2;t.default=function e(t){function n(e,n,r,a,o){i(t,e,n,r,a,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(c)},function(e,t,n){"use strict";function r(e){return Math.log(e)}function i(e){return Math.exp(e)}function a(e){return-Math.log(-e)}function o(e){return-Math.exp(-e)}function s(e){return isFinite(e)?+("1e"+e):e<0?0:e}function u(e){return 10===e?s:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function c(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function l(e){return function(t){return-e(-t)}}function f(e){function t(){return n=c(v),s=u(v),d()[0]<0?(n=l(n),s=l(s),e(a,o)):e(r,i),f}var n,s,f=e(r,i),d=f.domain,v=10;return f.base=function(e){return arguments.length?(v=+e,t()):v},f.domain=function(e){return arguments.length?(d(e),t()):d()},f.ticks=function(e){var t,r=d(),i=r[0],a=r[r.length-1];(t=a<i)&&(l=i,i=a,a=l);var o,u,c,l=n(i),f=n(a),p=null==e?10:+e,m=[];if(!(v%1)&&f-l<p){if(l=Math.round(l)-1,f=Math.round(f)+1,i>0){for(;l<f;++l)for(u=1,o=s(l);u<v;++u)if(!((c=o*u)<i)){if(c>a)break;m.push(c)}}else for(;l<f;++l)for(u=v-1,o=s(l);u>=1;--u)if(!((c=o*u)<i)){if(c>a)break;m.push(c)}}else m=(0,h.ticks)(l,f,Math.min(f-l,p)).map(s);return t?m.reverse():m},f.tickFormat=function(e,t){if(null==t&&(t=10===v?".0e":","),"function"!=typeof t&&(t=(0,p.format)(t)),e===1/0)return t;null==e&&(e=10);var r=Math.max(1,v*e/f.ticks().length);return function(e){var i=e/s(Math.round(n(e)));return i*v<v-.5&&(i*=v),i<=r?t(e):""}},f.nice=function(){return d((0,m.default)(d(),{floor:function(e){return s(Math.floor(n(e)))},ceil:function(e){return s(Math.ceil(n(e)))}}))},f}function d(){var e=f((0,g.transformer)()).domain([1,10]);return e.copy=function(){return(0,g.copy)(e,d()).base(e.base())},y.initRange.apply(e,arguments),e}Object.defineProperty(t,"__esModule",{value:!0}),t.loggish=f,t.default=d;var h=n(3),p=n(78),v=n(171),m=function(e){return e&&e.__esModule?e:{default:e}}(v),g=n(15),y=n(6)},function(e,t,n){"use strict";function r(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function i(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function a(e){var t=1,n=e(r(t),i(t));return n.constant=function(n){return arguments.length?e(r(t=+n),i(t)):t},(0,s.linearish)(n)}function o(){var e=a((0,u.transformer)());return e.copy=function(){return(0,u.copy)(e,o()).constant(e.constant())},c.initRange.apply(e,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.symlogish=a,t.default=o;var s=n(19),u=n(15),c=n(6)},function(e,t,n){"use strict";function r(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function i(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function a(e){return e<0?-e*e:e*e}function o(e){function t(){return 1===o?e(l.identity,l.identity):.5===o?e(i,a):e(r(o),r(1/o))}var n=e(l.identity,l.identity),o=1;return n.exponent=function(e){return arguments.length?(o=+e,t()):o},(0,c.linearish)(n)}function s(){var e=o((0,l.transformer)());return e.copy=function(){return(0,l.copy)(e,s()).exponent(e.exponent())},f.initRange.apply(e,arguments),e}function u(){return s.apply(null,arguments).exponent(.5)}Object.defineProperty(t,"__esModule",{value:!0}),t.powish=o,t.default=s,t.sqrt=u;var c=n(19),l=n(15),f=n(6)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(91);Object.defineProperty(t,"timeFormatDefaultLocale",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(t,"timeFormat",{enumerable:!0,get:function(){return i.timeFormat}}),Object.defineProperty(t,"timeParse",{enumerable:!0,get:function(){return i.timeParse}}),Object.defineProperty(t,"utcFormat",{enumerable:!0,get:function(){return i.utcFormat}}),Object.defineProperty(t,"utcParse",{enumerable:!0,get:function(){return i.utcParse}});var a=n(173);Object.defineProperty(t,"timeFormatLocale",{enumerable:!0,get:function(){return r(a).default}});var o=n(174);Object.defineProperty(t,"isoFormat",{enumerable:!0,get:function(){return r(o).default}});var s=n(481);Object.defineProperty(t,"isoParse",{enumerable:!0,get:function(){return r(s).default}})},function(e,t,n){"use strict";function r(e){return i=(0,o.default)(e),t.timeFormat=s=i.format,t.timeParse=u=i.parse,t.utcFormat=c=i.utcFormat,t.utcParse=l=i.utcParse,i}Object.defineProperty(t,"__esModule",{value:!0}),t.utcParse=t.utcFormat=t.timeParse=t.timeFormat=void 0,t.default=r;var i,a=n(173),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=t.timeFormat=void 0,u=t.timeParse=void 0,c=t.utcFormat=void 0,l=t.utcParse=void 0;r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var o,u,c,f=e.length,d=!1;for(null==a&&(l=s(c=(0,i.path)())),o=0;o<=f;++o)!(o<f&&r(u=e[o],o,e))===d&&((d=!d)?l.lineStart():l.lineEnd()),d&&l.point(+t(u,o,e),+n(u,o,e));if(c)return l=null,c+""||null}var t=c.x,n=c.y,r=(0,o.default)(!0),a=null,s=u.default,l=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:(0,o.default)(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:(0,o.default)(+t),e):n},e.defined=function(t){return arguments.length?(r="function"==typeof t?t:(0,o.default)(!!t),e):r},e.curve=function(t){return arguments.length?(s=t,null!=a&&(l=s(a)),e):s},e.context=function(t){return arguments.length?(null==t?a=l=null:l=s(a=t),e):a},e};var i=n(16),a=n(20),o=r(a),s=n(48),u=r(s),c=n(93)},function(e,t,n){"use strict";function r(e){return e[0]}function i(e){return e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.x=r,t.y=i},function(e,t,n){"use strict";function r(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>a.epsilon){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>a.epsilon){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/f,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function i(e,t){this._context=e,this._alpha=t}Object.defineProperty(t,"__esModule",{value:!0}),t.point=void 0;var a=n(31),o=n(51);t.point=r,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:r(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t.default=function e(t){function n(e){return t?new i(e,t):new o.Cardinal(e,0)}return n.alpha=function(t){return e(+t)},n}(.5)},function(e,t,n){"use strict";function r(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.map(r);return(0,a.default)(e).sort(function(e,n){return t[e]-t[n]})},t.sum=r;var i=n(33),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(){this._=null}function i(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function a(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function o(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function s(e){for(;e.L;)e=e.L;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.RedBlackNode=i,r.prototype={constructor:r,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=s(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(a(this,n),e=n,n=e.U),n.C=!1,r.C=!0,o(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(o(this,n),e=n,n=e.U),n.C=!1,r.C=!0,a(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,u=e.L,c=e.R;if(n=u?c?s(c):u:c,i?i.L===e?i.L=n:i.R=n:this._=n,u&&c?(r=n.C,n.C=e.C,n.L=u,u.U=n,n!==c?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=c,c.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,a(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,o(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,a(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,o(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,a(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,o(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},t.default=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=[null,null],o=c.edges.push(i)-1;return i.left=e,i.right=t,n&&a(i,e,t,n),r&&a(i,t,e,r),c.cells[e.index].halfedges.push(o),c.cells[t.index].halfedges.push(o),i}function i(e,t,n){var r=[t,n];return r.left=e,r}function a(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function o(e,t,n,r,i){var a,o=e[0],s=e[1],u=o[0],c=o[1],l=s[0],f=s[1],d=0,h=1,p=l-u,v=f-c;if(a=t-u,p||!(a>0)){if(a/=p,p<0){if(a<d)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=r-u,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<h&&(h=a)}if(a=n-c,v||!(a>0)){if(a/=v,v<0){if(a<d)return;a<h&&(h=a)}else if(v>0){if(a>h)return;a>d&&(d=a)}if(a=i-c,v||!(a<0)){if(a/=v,v<0){if(a>h)return;a>d&&(d=a)}else if(v>0){if(a<d)return;a<h&&(h=a)}return!(d>0||h<1)||(d>0&&(e[0]=[u+d*p,c+d*v]),h<1&&(e[1]=[u+h*p,c+h*v]),!0)}}}}}function s(e,t,n,r,i){var a=e[1];if(a)return!0;var o,s,u=e[0],c=e.left,l=e.right,f=c[0],d=c[1],h=l[0],p=l[1],v=(f+h)/2,m=(d+p)/2;if(p===d){if(v<t||v>=r)return;if(f>h){if(u){if(u[1]>=i)return}else u=[v,n];a=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];a=[v,n]}}else if(o=(f-h)/(p-d),s=m-o*v,o<-1||o>1)if(f>h){if(u){if(u[1]>=i)return}else u=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/o,i];a=[(n-s)/o,n]}else if(d<p){if(u){if(u[0]>=r)return}else u=[t,o*t+s];a=[r,o*r+s]}else{if(u){if(u[0]<t)return}else u=[r,o*r+s];a=[t,o*t+s]}return e[0]=u,e[1]=a,!0}function u(e,t,n,r){for(var i,a=c.edges.length;a--;)s(i=c.edges[a],e,t,n,r)&&o(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>c.epsilon||Math.abs(i[0][1]-i[1][1])>c.epsilon)||delete c.edges[a]}Object.defineProperty(t,"__esModule",{value:!0}),t.createEdge=r,t.createBorderEdge=i,t.setEdgeEnd=a,t.clipEdges=u;var c=n(34)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){e=a(e),e[0]<o&&(o=e[0]),e[0]>u&&(u=e[0]),e[1]<s&&(s=e[1]),e[1]>c&&(c=e[1])}function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Point":t(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(t)}}var r,a=(0,i.default)(e.transform),o=1/0,s=o,u=-o,c=-o;e.arcs.forEach(function(e){for(var t,n=-1,r=e.length;++n<r;)t=a(e[n],n),t[0]<o&&(o=t[0]),t[0]>u&&(u=t[0]),t[1]<s&&(s=t[1]),t[1]>c&&(c=t[1])});for(r in e.objects)n(e.objects[r]);return[o,s,u,c]};var r=n(53),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),s.push(r)}}var i={},a={},o={},s=[],u=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++u],t[u]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),s=i[0],u=i[1];if(t=o[s])if(delete o[t.end],t.push(e),t.end=u,r=a[u]){delete a[r.start];var c=r===t?t:t.concat(r);a[c.start=t.start]=o[c.end=r.end]=c}else a[t.start]=o[t.end]=t;else if(t=a[u])if(delete a[t.start],t.unshift(e),t.start=s,r=o[s]){delete o[r.end];var l=r===t?t:r.concat(t);a[l.start=r.start]=o[l.end=t.end]=l}else a[t.start]=o[t.end]=t;else t=[e],a[t.start=s]=o[t.end=u]=t}),r(o,a),r(a,o),t.forEach(function(e){i[e<0?~e:e]||s.push([e])}),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null==e)return i.default;var t,n,r=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,i){i||(t=n=0);var u=2,c=e.length,l=new Array(c),f=Math.round((e[0]-o)/r),d=Math.round((e[1]-s)/a);for(l[0]=f-t,t=f,l[1]=d-n,n=d;u<c;)l[u]=e[u],++u;return l}};var r=n(99),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e[0]===t[0]&&e[1]===t[1]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){i[0]=e[0],i[1]=e[1];var t=a[0]^a[1];return 2147483647&(t=t<<5^t>>7^a[2]^a[3])};var r=new ArrayBuffer(16),i=new Float64Array(r),a=new Uint32Array(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}function n(e){for(var t=0,n=e.length;t<n;++t,++a)for(var r=e[t],o=0,s=r.length;o<s;++o){var u=r[o];u<0&&(u=~u);var c=i[u];null==c?i[u]=a:c!==a&&(i[u]=-1)}}var r,i=new Array(e.arcs.length),a=0;for(r in e.objects)t(e.objects[r]);return function(e){for(var t,n=0,r=e.length;n<r;++n)if(-1===i[(t=e[n])<0?~t:t])return!0;return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return t=null==t?Number.MIN_VALUE:+t,null==n&&(n=i.planarRingArea),function(i,a){return n((0,r.feature)(e,{type:"Polygon",arcs:[i]}).geometry.coordinates[0],a)>=t}};var r=n(52),i=n(56)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.bisectLeft=t.bisectRight=void 0;var i=n(21),a=r(i),o=n(107),s=r(o),u=(0,s.default)(a.default),c=t.bisectRight=u.right;t.bisectLeft=u.left;t.default=c},function(e,t,n){"use strict";function r(e){return function(t,n){return(0,a.default)(e(t),n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return 1===e.length&&(e=r(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}};var i=n(21),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e,t){return[e,t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){null==t&&(t=r);for(var n=0,i=e.length-1,a=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(a,a=e[++n]);return o},t.pair=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.default)(e,t);return n?Math.sqrt(n):n};var r=n(110),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r,a=e.length,o=0,s=-1,u=0,c=0;if(null==t)for(;++s<a;)isNaN(n=(0,i.default)(e[s]))||(r=n-u,u+=r/++o,c+=r*(n-u));else for(;++s<a;)isNaN(n=(0,i.default)(t(e[s],s,e)))||(r=n-u,u+=r/++o,c+=r*(n-u));if(o>1)return c/(o-1)};var r=n(27),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Array.prototype;t.slice=r.slice,t.map=r.map},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}},function(e,t,n){"use strict";function r(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),u=r/Math.pow(10,i);return i>=0?(u>=a?10:u>=o?5:u>=s?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(u>=a?10:u>=o?5:u>=s?2:1)}function i(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/i;return u>=a?i*=10:u>=o?i*=5:u>=s&&(i*=2),t<e?-i:i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i,a,o,s,u=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(s=r(e,t,n))||!isFinite(s))return[];if(s>0)for(e=Math.ceil(e/s),t=Math.floor(t/s),o=new Array(a=Math.ceil(t-e+1));++u<a;)o[u]=(e+u)*s;else for(e=Math.floor(e*s),t=Math.ceil(t*s),o=new Array(a=Math.ceil(e-t+1));++u<a;)o[u]=(e-u)/s;return i&&o.reverse(),o},t.tickIncrement=r,t.tickStep=i;var a=Math.sqrt(50),o=Math.sqrt(10),s=Math.sqrt(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r>n&&(r=n);return r}},function(e,t,n){"use strict";function r(e){return e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(o=e.length))return[];for(var t=-1,n=(0,a.default)(e,r),i=new Array(n);++t<n;)for(var o,s=-1,u=i[t]=new Array(o);++s<o;)u[s]=e[s][t];return i};var i=n(116),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e?new r.Selection([[document.querySelector(e)]],[document.documentElement]):new r.Selection([[e]],r.root)};var r=n(8)},function(e,t,n){"use strict";function r(){return[]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null==e?r:function(){return this.querySelectorAll(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return this.matches(e)}}},function(e,t,n){"use strict";function r(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new o.Selection(this._enter||this._groups.map(a.default),this._parents)},t.EnterNode=r;var i=n(122),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(8);r.prototype={constructor:r,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Array(e.length)}},function(e,t,n){"use strict";function r(e){return function(){this.style.removeProperty(e)}}function i(e,t,n){return function(){this.style.setProperty(e,t,n)}}function a(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function o(e,t){return e.style.getPropertyValue(t)||(0,u.default)(e).getComputedStyle(e,null).getPropertyValue(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return arguments.length>1?this.each((null==t?r:"function"==typeof t?a:i)(e,t,null==n?"":n)):o(this.node(),e)},t.styleValue=o;var s=n(62),u=function(e){return e&&e.__esModule?e:{default:e}}(s)},function(e,t,n){"use strict";function r(e,t){var n=e.document.documentElement,r=(0,i.select)(e).on("dragstart.drag",null);t&&(r.on("click.drag",o.default,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.document.documentElement,n=(0,i.select)(e).on("dragstart.drag",o.default,!0);"onselectstart"in t?n.on("selectstart.drag",o.default,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")},t.yesdrag=r;var i=n(4),a=n(125),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(){i.event.stopImmediatePropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.nopropagation=r,t.default=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()};var i=n(4)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.deg2rad=Math.PI/180,t.rad2deg=180/Math.PI},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(t){var n,r,i=t.length,o=new Array(i),s=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=(0,a.rgb)(t[n]),o[n]=r.r||0,s[n]=r.g||0,u[n]=r.b||0;return o=e(o),s=e(s),u=e(u),r.opacity=1,function(e){return r.r=o(e),r.g=s(e),r.b=u(e),r+""}}}Object.defineProperty(t,"__esModule",{value:!0}),t.rgbBasisClosed=t.rgbBasis=void 0;var a=n(9),o=n(68),s=r(o),u=n(128),c=r(u),l=n(23),f=r(l);t.default=function e(t){function n(e,t){var n=r((e=(0,a.rgb)(e)).r,(t=(0,a.rgb)(t)).r),i=r(e.g,t.g),o=r(e.b,t.b),s=(0,f.default)(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=o(t),e.opacity=s(t),e+""}}var r=(0,l.gamma)(t);return n.gamma=e,n}(1);t.rgbBasis=i(s.default),t.rgbBasisClosed=i(c.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),a=e[(i+t-1)%t],o=e[i%t],s=e[(i+1)%t],u=e[(i+2)%t];return(0,r.basis)((n-i/t)*t,a,o,s,u)}};var r=n(68)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),s=new Array(r);for(n=0;n<i;++n)a[n]=(0,o.default)(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<i;++n)s[n]=a[n](e);return s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return((0,s.isNumberArray)(t)?u.default:i)(e,t)},t.genericArray=i;var a=n(65),o=r(a),s=n(69),u=r(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){var n,i={},o={};null!==e&&"object"===(void 0===e?"undefined":r(e))||(e={}),null!==t&&"object"===(void 0===t?"undefined":r(t))||(t={});for(n in t)n in e?i[n]=(0,a.default)(e[n],t[n]):o[n]=t[n];return function(e){for(n in i)o[n]=i[n](e);return o}};var i=n(65),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e){return function(){return e}}function i(e){return function(t){return e(t)+""}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,a,c,l=s.lastIndex=u.lastIndex=0,f=-1,d=[],h=[];for(e+="",t+="";(n=s.exec(e))&&(a=u.exec(t));)(c=a.index)>l&&(c=t.slice(l,c),d[f]?d[f]+=c:d[++f]=c),(n=n[0])===(a=a[0])?d[f]?d[f]+=a:d[++f]=a:(d[++f]=null,h.push({i:f,x:(0,o.default)(n,a)})),l=u.lastIndex;return l<t.length&&(c=t.slice(l),d[f]?d[f]+=c:d[++f]=c),d.length<2?h[0]?i(h[0].x):r(t):(t=h.length,function(e){for(var n,r=0;r<t;++r)d[(n=h[r]).i]=n.x(e);return d.join("")})};var a=n(37),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,u=new RegExp(s.source,"g")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n;return("number"==typeof t?i.interpolateNumber:t instanceof r.color?i.interpolateRgb:(n=(0,r.color)(t))?(t=n,i.interpolateRgb):i.interpolateString)(e,t)};var r=n(9),i=n(11)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,i,a,o=e.__transition,s=!0;if(o){t=null==t?null:t+"";for(a in o)(n=o[a]).name===t?(i=n.state>r.STARTING&&n.state<r.ENDING,n.state=r.ENDED,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[a]):s=!1;s&&delete e.__transition}};var r=n(7)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(325);Object.defineProperty(t,"easeLinear",{enumerable:!0,get:function(){return r.linear}});var i=n(326);Object.defineProperty(t,"easeQuad",{enumerable:!0,get:function(){return i.quadInOut}}),Object.defineProperty(t,"easeQuadIn",{enumerable:!0,get:function(){return i.quadIn}}),Object.defineProperty(t,"easeQuadOut",{enumerable:!0,get:function(){return i.quadOut}}),Object.defineProperty(t,"easeQuadInOut",{enumerable:!0,get:function(){return i.quadInOut}});var a=n(327);Object.defineProperty(t,"easeCubic",{enumerable:!0,get:function(){return a.cubicInOut}}),Object.defineProperty(t,"easeCubicIn",{enumerable:!0,get:function(){return a.cubicIn}}),Object.defineProperty(t,"easeCubicOut",{enumerable:!0,get:function(){return a.cubicOut}}),Object.defineProperty(t,"easeCubicInOut",{enumerable:!0,get:function(){return a.cubicInOut}});var o=n(328);Object.defineProperty(t,"easePoly",{enumerable:!0,get:function(){return o.polyInOut}}),Object.defineProperty(t,"easePolyIn",{enumerable:!0,get:function(){return o.polyIn}}),Object.defineProperty(t,"easePolyOut",{enumerable:!0,get:function(){return o.polyOut}}),Object.defineProperty(t,"easePolyInOut",{enumerable:!0,get:function(){return o.polyInOut}});var s=n(329);Object.defineProperty(t,"easeSin",{enumerable:!0,get:function(){return s.sinInOut}}),Object.defineProperty(t,"easeSinIn",{enumerable:!0,get:function(){return s.sinIn}}),Object.defineProperty(t,"easeSinOut",{enumerable:!0,get:function(){return s.sinOut}}),Object.defineProperty(t,"easeSinInOut",{enumerable:!0,get:function(){return s.sinInOut}});var u=n(330);Object.defineProperty(t,"easeExp",{enumerable:!0,get:function(){return u.expInOut}}),Object.defineProperty(t,"easeExpIn",{enumerable:!0,get:function(){return u.expIn}}),Object.defineProperty(t,"easeExpOut",{enumerable:!0,get:function(){return u.expOut}}),Object.defineProperty(t,"easeExpInOut",{enumerable:!0,get:function(){return u.expInOut}});var c=n(331);Object.defineProperty(t,"easeCircle",{enumerable:!0,get:function(){return c.circleInOut}}),Object.defineProperty(t,"easeCircleIn",{enumerable:!0,get:function(){return c.circleIn}}),Object.defineProperty(t,"easeCircleOut",{enumerable:!0,get:function(){return c.circleOut}}),Object.defineProperty(t,"easeCircleInOut",{enumerable:!0,get:function(){return c.circleInOut}});var l=n(332);Object.defineProperty(t,"easeBounce",{enumerable:!0,get:function(){return l.bounceOut}}),Object.defineProperty(t,"easeBounceIn",{enumerable:!0,get:function(){return l.bounceIn}}),Object.defineProperty(t,"easeBounceOut",{enumerable:!0,get:function(){return l.bounceOut}}),Object.defineProperty(t,"easeBounceInOut",{enumerable:!0,get:function(){return l.bounceInOut}});var f=n(333);Object.defineProperty(t,"easeBack",{enumerable:!0,get:function(){return f.backInOut}}),Object.defineProperty(t,"easeBackIn",{enumerable:!0,get:function(){return f.backIn}}),Object.defineProperty(t,"easeBackOut",{enumerable:!0,get:function(){return f.backOut}}),Object.defineProperty(t,"easeBackInOut",{enumerable:!0,get:function(){return f.backInOut}});var d=n(334);Object.defineProperty(t,"easeElastic",{enumerable:!0,get:function(){return d.elasticOut}}),Object.defineProperty(t,"easeElasticIn",{enumerable:!0,get:function(){return d.elasticIn}}),Object.defineProperty(t,"easeElasticOut",{enumerable:!0,get:function(){return d.elasticOut}}),Object.defineProperty(t,"easeElasticInOut",{enumerable:!0,get:function(){return d.elasticInOut}})},function(e,t,n){"use strict";function r(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}Object.defineProperty(t,"__esModule",{value:!0}),t.tpmt=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.cos=Math.cos,t.sin=Math.sin,t.pi=Math.PI);t.halfPi=r/2,t.tau=2*r,t.max=Math.max},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var n=d(e);if(Array.isArray(n))n=n.slice().sort(s.default);else{var r=(0,i.extent)(e),a=r[0],o=r[1];n=(0,i.tickStep)(a,o,n),n=(0,i.range)(Math.floor(a/n)*n,Math.floor(o/n)*n,n)}return n.map(function(n){return t(e,n)})}function t(e,t){var r=[],i=[];return n(e,t,function(n){p(n,e,t),(0,c.default)(n)>0?r.push([n]):i.push(n)}),i.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(-1!==(0,h.default)((t=r[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:t,coordinates:r}}function n(e,t,n){function i(e){var t,i,s=[e[0][0]+a,e[0][1]+o],u=[e[1][0]+a,e[1][1]+o],c=r(s),l=r(u);(t=p[c])?(i=h[l])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(u),n(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(u),p[t.end=l]=t):(t=h[l])?(i=p[c])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(u),n(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(s),h[t.start=c]=t):h[c]=p[l]={start:c,end:l,ring:[s,u]}}var a,o,s,c,f,d,h=new Array,p=new Array;for(a=o=-1,c=e[0]>=t,m[c<<1].forEach(i);++a<u-1;)s=c,c=e[a+1]>=t,m[s|c<<1].forEach(i);for(m[c<<0].forEach(i);++o<l-1;){for(a=-1,c=e[o*u+u]>=t,f=e[o*u]>=t,m[c<<1|f<<2].forEach(i);++a<u-1;)s=c,c=e[o*u+u+a+1]>=t,d=f,f=e[o*u+a+1]>=t,m[s|c<<1|f<<2|d<<3].forEach(i);m[c|f<<3].forEach(i)}for(a=-1,f=e[o*u]>=t,m[f<<2].forEach(i);++a<u-1;)d=f,f=e[o*u+a+1]>=t,m[f<<2|d<<3].forEach(i);m[f<<3].forEach(i)}function r(e){return 2*e[0]+e[1]*(u+1)*4}function o(e,t,n){e.forEach(function(e){var r,i=e[0],a=e[1],o=0|i,s=0|a,c=t[s*u+o];i>0&&i<u&&o===i&&(r=t[s*u+o-1],e[0]=i+(n-r)/(c-r)-.5),a>0&&a<l&&s===a&&(r=t[(s-1)*u+o],e[1]=a+(n-r)/(c-r)-.5)})}var u=1,l=1,d=i.thresholdSturges,p=o;return e.contour=t,e.size=function(t){if(!arguments.length)return[u,l];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(n>0&&r>0))throw new Error("invalid size");return u=n,l=r,e},e.thresholds=function(t){return arguments.length?(d="function"==typeof t?t:Array.isArray(t)?(0,f.default)(a.slice.call(t)):(0,f.default)(t),e):d},e.smooth=function(t){return arguments.length?(p=t?o:v.default,e):p===o},e};var i=n(3),a=n(140),o=n(350),s=r(o),u=n(351),c=r(u),l=n(141),f=r(l),d=n(352),h=r(d),p=n(353),v=r(p),m=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Array.prototype;t.slice=r.slice},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(73);Object.defineProperty(t,"dsvFormat",{enumerable:!0,get:function(){return r(i).default}});var a=n(356);Object.defineProperty(t,"csvParse",{enumerable:!0,get:function(){return a.csvParse}}),Object.defineProperty(t,"csvParseRows",{enumerable:!0,get:function(){return a.csvParseRows}}),Object.defineProperty(t,"csvFormat",{enumerable:!0,get:function(){return a.csvFormat}}),Object.defineProperty(t,"csvFormatBody",{enumerable:!0,get:function(){return a.csvFormatBody}}),Object.defineProperty(t,"csvFormatRows",{enumerable:!0,get:function(){return a.csvFormatRows}}),Object.defineProperty(t,"csvFormatRow",{enumerable:!0,get:function(){return a.csvFormatRow}}),Object.defineProperty(t,"csvFormatValue",{enumerable:!0,get:function(){return a.csvFormatValue}});var o=n(357);Object.defineProperty(t,"tsvParse",{enumerable:!0,get:function(){return o.tsvParse}}),Object.defineProperty(t,"tsvParseRows",{enumerable:!0,get:function(){return o.tsvParseRows}}),Object.defineProperty(t,"tsvFormat",{enumerable:!0,get:function(){return o.tsvFormat}}),Object.defineProperty(t,"tsvFormatBody",{enumerable:!0,get:function(){return o.tsvFormatBody}}),Object.defineProperty(t,"tsvFormatRows",{enumerable:!0,get:function(){return o.tsvFormatRows}}),Object.defineProperty(t,"tsvFormatRow",{enumerable:!0,get:function(){return o.tsvFormatRow}}),Object.defineProperty(t,"tsvFormatValue",{enumerable:!0,get:function(){return o.tsvFormatValue}});var s=n(358);Object.defineProperty(t,"autoType",{enumerable:!0,get:function(){return r(s).default}})},function(e,t,n){"use strict";function r(e){return e.x}function i(e){return e.y}function a(e){function t(){n(),y.call("tick",a),f<d&&(g.stop(),y.call("end",a))}function n(t){var n,r,i=e.length;void 0===t&&(t=1);for(var o=0;o<t;++o)for(f+=(p-f)*h,m.each(function(e){e(f)}),n=0;n<i;++n)r=e[n],null==r.fx?r.x+=r.vx*=v:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=v:(r.y=r.fy,r.vy=0);return a}function r(){for(var t,n=0,r=e.length;n<r;++n){if(t=e[n],t.index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=c*Math.sqrt(n),a=n*l;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function i(t){return t.initialize&&t.initialize(e),t}var a,f=1,d=.001,h=1-Math.pow(d,1/300),p=0,v=.6,m=(0,s.map)(),g=(0,u.timer)(t),y=(0,o.dispatch)("tick","end");return null==e&&(e=[]),r(),a={tick:n,restart:function(){return g.restart(t),a},stop:function(){return g.stop(),a},nodes:function(t){return arguments.length?(e=t,r(),m.each(i),a):e},alpha:function(e){return arguments.length?(f=+e,a):f},alphaMin:function(e){return arguments.length?(d=+e,a):d},alphaDecay:function(e){return arguments.length?(h=+e,a):+h},alphaTarget:function(e){return arguments.length?(p=+e,a):p},velocityDecay:function(e){return arguments.length?(v=1-e,a):1-v},force:function(e,t){return arguments.length>1?(null==t?m.remove(e):m.set(e,i(t)),a):m.get(e)},find:function(t,n,r){var i,a,o,s,u,c=0,l=e.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)s=e[c],i=t-s.x,a=n-s.y,(o=i*i+a*a)<r&&(u=s,r=o);return u},on:function(e,t){return arguments.length>1?(y.on(e,t),a):y.on(e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.x=r,t.y=i;var o=n(22),s=n(40),u=n(39),c=10,l=Math.PI*(3-Math.sqrt(5));t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){function t(e){var t,i,o,c=P,f=T;if("c"===S)f=E(e)+f,e="";else{e=+e;var d=e<0||1/e<0;if(e=isNaN(e)?g:E(Math.abs(e),M),w&&(e=(0,h.default)(e)),d&&0==+e&&"+"!==s&&(d=!1),c=(d?"("===s?s:p:"-"===s||"("===s?"":s)+c,f=("s"===S?b[8+m.prefixExponent/3]:"")+f+(d&&"("===s?")":""),O)for(t=-1,i=e.length;++t<i;)if(48>(o=e.charCodeAt(t))||o>57){f=(46===o?u+e.slice(t+1):e.slice(t))+f,e=e.slice(0,t);break}}x&&!y&&(e=r(e,1/0));var v=c.length+e.length+f.length,A=v<_?new Array(_-v+1).join(n):"";switch(x&&y&&(e=r(A+e,A.length?_-f.length:1/0),A=""),a){case"<":e=c+e+f+A;break;case"=":e=c+A+e+f;break;case"^":e=A.slice(0,v=A.length>>1)+c+e+f+A.slice(v);break;default:e=A+c+e+f}return l(e)}e=(0,f.default)(e);var n=e.fill,a=e.align,s=e.sign,c=e.symbol,y=e.zero,_=e.width,x=e.comma,M=e.precision,w=e.trim,S=e.type;"n"===S?(x=!0,S="g"):v.default[S]||(void 0===M&&(M=12),w=!0,S="g"),(y||"0"===n&&"="===a)&&(y=!0,n="0",a="=");var P="$"===c?i:"#"===c&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",T="$"===c?o:/[%p]/.test(S)?d:"",E=v.default[S],O=/[defgprs%]/.test(S);return M=void 0===M?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M)),t.toString=function(){return e+""},t}function n(e,n){var r=t((e=(0,f.default)(e),e.type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor((0,a.default)(n)/3))),o=Math.pow(10,-i),s=b[8+i/3];return function(e){return r(o*e)+s}}var r=void 0===e.grouping||void 0===e.thousands?y.default:(0,s.default)(_.call(e.grouping,Number),e.thousands+""),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",u=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?y.default:(0,c.default)(_.call(e.numerals,String)),d=void 0===e.percent?"%":e.percent+"",p=void 0===e.minus?"-":e.minus+"",g=void 0===e.nan?"NaN":e.nan+"";return{format:t,formatPrefix:n}};var i=n(41),a=r(i),o=n(388),s=r(o),u=n(389),c=r(u),l=n(145),f=r(l),d=n(390),h=r(d),p=n(391),v=r(p),m=n(146),g=n(393),y=r(g),_=Array.prototype.map,b=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"]},function(e,t,n){"use strict";function r(e){if(!(t=a.exec(e)))throw new Error("invalid format: "+e);var t;return new i({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function i(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.FormatSpecifier=i;var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;r.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prefixExponent=void 0,t.default=function(e,n){var a=(0,r.formatDecimalParts)(e,n);if(!a)return e+"";var o=a[0],s=a[1],u=s-(t.prefixExponent=i=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,c=o.length;return u===c?o:u>c?o+new Array(u-c+1).join("0"):u>0?o.slice(0,u)+"."+o.slice(u):"0."+new Array(1-u).join("0")+(0,r.formatDecimalParts)(e,Math.max(0,n+u-1))[0]};var r=n(42),i=t.prefixExponent=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){M.point=o}function a(){s(u,c)}function o(e,t){M.point=s,u=e,c=t,e*=v.radians,t*=v.radians,l=e,f=(0,v.cos)(t=t/2+v.quarterPi),d=(0,v.sin)(t)}function s(e,t){e*=v.radians,t*=v.radians,t=t/2+v.quarterPi;var n=e-l,r=n>=0?1:-1,i=r*n,a=(0,v.cos)(t),o=(0,v.sin)(t),s=d*o,u=f*a+s*(0,v.cos)(i),c=s*r*(0,v.sin)(i);b.add((0,v.atan2)(c,u)),l=e,f=a,d=o}Object.defineProperty(t,"__esModule",{value:!0}),t.areaStream=t.areaRingSum=void 0,t.default=function(e){return x.reset(),(0,_.default)(e,M),2*x};var u,c,l,f,d,h=n(25),p=r(h),v=n(0),m=n(14),g=r(m),y=n(17),_=r(y),b=t.areaRingSum=(0,p.default)(),x=(0,p.default)(),M=t.areaStream={point:g.default,lineStart:g.default,lineEnd:g.default,polygonStart:function(){b.reset(),M.lineStart=i,M.lineEnd=a},polygonEnd:function(){var e=+b;x.add(e<0?v.tau+e:e),this.lineStart=this.lineEnd=this.point=g.default},sphere:function(){x.add(v.tau)}}},function(e,t,n){"use strict";function r(e,t,n,r,o,s){if(n){var c=(0,u.cos)(t),l=(0,u.sin)(t),f=r*n;null==o?(o=t+r*u.tau,s=t-f/2):(o=i(c,o),s=i(c,s),(r>0?o<s:o>s)&&(o+=r*u.tau));for(var d,h=o;r>0?h>s:h<s;h-=f)d=(0,a.spherical)([c,-l*(0,u.cos)(h),-l*(0,u.sin)(h)]),e.point(d[0],d[1])}}function i(e,t){t=(0,a.cartesian)(t),t[0]-=e,(0,a.cartesianNormalizeInPlace)(t);var n=(0,u.acos)(-t[1]);return((-t[2]<0?-n:n)+u.tau-u.epsilon)%u.tau}Object.defineProperty(t,"__esModule",{value:!0}),t.circleStream=r,t.default=function(){function e(e,t){n.push(e=i(e,t)),e[0]*=u.degrees,e[1]*=u.degrees}function t(){var e=a.apply(this,arguments),t=o.apply(this,arguments)*u.radians,s=l.apply(this,arguments)*u.radians;return n=[],i=(0,c.rotateRadians)(-e[0]*u.radians,-e[1]*u.radians,0).invert,r(f,t,s,1),e={type:"Polygon",coordinates:[n]},n=i=null,e}var n,i,a=(0,s.default)([0,0]),o=(0,s.default)(90),l=(0,s.default)(6),f={point:e};return t.center=function(e){return arguments.length?(a="function"==typeof e?e:(0,s.default)([+e[0],+e[1]]),t):a},t.radius=function(e){return arguments.length?(o="function"==typeof e?e:(0,s.default)(+e),t):o},t.precision=function(e){return arguments.length?(l="function"==typeof e?e:(0,s.default)(+e),t):l},t};var a=n(28),o=n(400),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=n(0),c=n(43)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}},function(e,t,n){"use strict";function r(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,s){var c=o>0?u.pi:-u.pi,l=(0,u.abs)(o-n);(0,u.abs)(l-u.pi)<u.epsilon?(e.point(n,r=(r+s)/2>0?u.halfPi:-u.halfPi),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(c,r),e.point(o,r),t=0):a!==c&&l>=u.pi&&((0,u.abs)(n-a)<u.epsilon&&(n-=a*u.epsilon),(0,u.abs)(o-c)<u.epsilon&&(o-=c*u.epsilon),r=i(n,r,o,s),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(c,r),t=0),e.point(n=o,r=s),a=c},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function i(e,t,n,r){var i,a,o=(0,u.sin)(e-n);return(0,u.abs)(o)>u.epsilon?(0,u.atan)(((0,u.sin)(t)*(a=(0,u.cos)(r))*(0,u.sin)(n)-(0,u.sin)(r)*(i=(0,u.cos)(t))*(0,u.sin)(e))/(i*a*o)):(t+r)/2}function a(e,t,n,r){var i;if(null==e)i=n*u.halfPi,r.point(-u.pi,i),r.point(0,i),r.point(u.pi,i),r.point(u.pi,0),r.point(u.pi,-i),r.point(0,-i),r.point(-u.pi,-i),r.point(-u.pi,0),r.point(-u.pi,i);else if((0,u.abs)(e[0]-t[0])>u.epsilon){var a=e[0]<t[0]?u.pi:-u.pi;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}Object.defineProperty(t,"__esModule",{value:!0});var o=n(151),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=n(0);t.default=(0,s.default)(function(){return!0},r,a,[-u.pi,-u.halfPi])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.length>1}function a(e,t){return((e=e.x)[0]<0?e[1]-l.halfPi-l.epsilon:l.halfPi-e[1])-((t=t.x)[0]<0?t[1]-l.halfPi-l.epsilon:l.halfPi-t[1])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){return function(o){function u(t,n){e(t,n)&&o.point(t,n)}function l(e,t){x.point(e,t)}function f(){P.point=l,x.lineStart()}function p(){P.point=u,x.lineEnd()}function v(e,t){b.push([e,t]),w.point(e,t)}function m(){w.lineStart(),b=[]}function g(){v(b[0][0],b[0][1]),w.lineEnd();var e,t,n,r,a=w.clean(),s=M.result(),u=s.length;if(b.pop(),y.push(b),b=null,u)if(1&a){if(n=s[0],(t=n.length-1)>0){for(S||(o.polygonStart(),S=!0),o.lineStart(),e=0;e<t;++e)o.point((r=n[e])[0],r[1]);o.lineEnd()}}else u>1&&2&a&&s.push(s.pop().concat(s.shift())),_.push(s.filter(i))}var y,_,b,x=t(o),M=(0,s.default)(),w=t(M),S=!1,P={point:u,lineStart:f,lineEnd:p,polygonStart:function(){P.point=v,P.lineStart=m,P.lineEnd=g,_=[],y=[]},polygonEnd:function(){P.point=u,P.lineStart=f,P.lineEnd=p,_=(0,h.merge)(_);var e=(0,d.default)(y,r);_.length?(S||(o.polygonStart(),S=!0),(0,c.default)(_,a,e,n,o)):e&&(S||(o.polygonStart(),S=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),S&&(o.polygonEnd(),S=!1),_=y=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return P}};var o=n(152),s=r(o),u=n(153),c=r(u),l=n(0),f=n(155),d=r(f),h=n(3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:i.default,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}};var r=n(14),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function i(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,u){var c,l,f=[],d=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if((0,o.default)(i,a)){if(!i[2]&&!a[2]){for(u.lineStart(),c=0;c<t;++c)u.point((i=e[c])[0],i[1]);return void u.lineEnd()}a[0]+=2*s.epsilon}f.push(n=new r(i,e,null,!0)),d.push(n.o=new r(i,null,n,!1)),f.push(n=new r(a,e,null,!1)),d.push(n.o=new r(a,null,n,!0))}}),f.length){for(d.sort(t),i(f),i(d),c=0,l=d.length;c<l;++c)d[c].e=n=!n;for(var h,p,v=f[0];;){for(var m=v,g=!0;m.v;)if((m=m.n)===v)return;h=m.z,u.lineStart();do{if(m.v=m.o.v=!0,m.e){if(g)for(c=0,l=h.length;c<l;++c)u.point((p=h[c])[0],p[1]);else a(m.x,m.n.x,1,u);m=m.n}else{if(g)for(h=m.p.z,c=h.length-1;c>=0;--c)u.point((p=h[c])[0],p[1]);else a(m.x,m.p.x,-1,u);m=m.p}m=m.o,h=m.z,g=!g}while(!m.v);u.lineEnd()}}};var a=n(154),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.abs)(e[0]-t[0])<r.epsilon&&(0,r.abs)(e[1]-t[1])<r.epsilon};var r=n(0)},function(e,t,n){"use strict";function r(e){return(0,s.abs)(e[0])<=s.pi?e[0]:(0,s.sign)(e[0])*(((0,s.abs)(e[0])+s.pi)%s.tau-s.pi)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=r(t),i=t[1],a=(0,s.sin)(i),c=[(0,s.sin)(n),-(0,s.cos)(n),0],l=0,f=0;u.reset(),1===a?i=s.halfPi+s.epsilon:-1===a&&(i=-s.halfPi-s.epsilon);for(var d=0,h=e.length;d<h;++d)if(v=(p=e[d]).length)for(var p,v,m=p[v-1],g=r(m),y=m[1]/2+s.quarterPi,_=(0,s.sin)(y),b=(0,s.cos)(y),x=0;x<v;++x,g=w,_=P,b=T,m=M){var M=p[x],w=r(M),S=M[1]/2+s.quarterPi,P=(0,s.sin)(S),T=(0,s.cos)(S),E=w-g,O=E>=0?1:-1,A=O*E,L=A>s.pi,R=_*P;if(u.add((0,s.atan2)(R*O*(0,s.sin)(A),b*T+R*(0,s.cos)(A))),l+=L?E+O*s.tau:E,L^g>=n^w>=n){var C=(0,o.cartesianCross)((0,o.cartesian)(m),(0,o.cartesian)(M));(0,o.cartesianNormalizeInPlace)(C);var j=(0,o.cartesianCross)(c,C);(0,o.cartesianNormalizeInPlace)(j);var k=(L^E>=0?-1:1)*(0,s.asin)(j[2]);(i>k||i===k&&(C[0]||C[1]))&&(f+=L^E>=0?1:-1)}}return(l<-s.epsilon||l<s.epsilon&&u<-s.epsilon)^1&f};var i=n(25),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(28),s=n(0),u=(0,a.default)()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i){(0,a.circleStream)(i,e,d,r,t,n)}function n(e,t){return(0,o.cos)(e)*(0,o.cos)(t)>f}function r(e){var t,r,i,a,l;return{lineStart:function(){a=i=!1,l=1},point:function(f,d){var v,m=[f,d],g=n(f,d),y=h?g?0:c(f,d):g?c(f+(f<0?o.pi:-o.pi),d):0;if(!t&&(a=i=g)&&e.lineStart(),g!==i&&(!(v=s(t,m))||(0,u.default)(t,v)||(0,u.default)(m,v))&&(m[2]=1),g!==i)l=0,g?(e.lineStart(),v=s(m,t),e.point(v[0],v[1])):(v=s(t,m),e.point(v[0],v[1],2),e.lineEnd()),t=v;else if(p&&t&&h^g){var _;y&r||!(_=s(m,t,!0))||(l=0,h?(e.lineStart(),e.point(_[0][0],_[0][1]),e.point(_[1][0],_[1][1]),e.lineEnd()):(e.point(_[1][0],_[1][1]),e.lineEnd(),e.lineStart(),e.point(_[0][0],_[0][1],3)))}!g||t&&(0,u.default)(t,m)||e.point(m[0],m[1]),t=m,i=g,r=y},lineEnd:function(){i&&e.lineEnd(),t=null},clean:function(){return l|(a&&i)<<1}}}function s(e,t,n){var r=(0,i.cartesian)(e),a=(0,i.cartesian)(t),s=[1,0,0],u=(0,i.cartesianCross)(r,a),c=(0,i.cartesianDot)(u,u),l=u[0],d=c-l*l;if(!d)return!n&&e;var h=f*c/d,p=-f*l/d,v=(0,i.cartesianCross)(s,u),m=(0,i.cartesianScale)(s,h),g=(0,i.cartesianScale)(u,p);(0,i.cartesianAddInPlace)(m,g);var y=v,_=(0,i.cartesianDot)(m,y),b=(0,i.cartesianDot)(y,y),x=_*_-b*((0,i.cartesianDot)(m,m)-1);if(!(x<0)){var M=(0,o.sqrt)(x),w=(0,i.cartesianScale)(y,(-_-M)/b);if((0,i.cartesianAddInPlace)(w,m),w=(0,i.spherical)(w),!n)return w;var S,P=e[0],T=t[0],E=e[1],O=t[1];T<P&&(S=P,P=T,T=S);var A=T-P,L=(0,o.abs)(A-o.pi)<o.epsilon,R=L||A<o.epsilon;if(!L&&O<E&&(S=E,E=O,O=S),R?L?E+O>0^w[1]<((0,o.abs)(w[0]-P)<o.epsilon?E:O):E<=w[1]&&w[1]<=O:A>o.pi^(P<=w[0]&&w[0]<=T)){var C=(0,i.cartesianScale)(y,(-_+M)/b);return(0,i.cartesianAddInPlace)(C,m),[w,(0,i.spherical)(C)]}}}function c(t,n){var r=h?e:o.pi-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var f=(0,o.cos)(e),d=6*o.radians,h=f>0,p=(0,o.abs)(f)>o.epsilon;return(0,l.default)(n,r,t,h?[0,-e]:[-o.pi,e-o.pi])};var i=n(28),a=n(148),o=n(0),s=n(154),u=r(s),c=n(151),l=r(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return a[0]=e,a[1]=t,(0,i.default)(o)};var r=n(158),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=[null,null],o={type:"LineString",coordinates:a}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){_.point=o,_.lineEnd=a}function a(){_.point=_.lineEnd=v.default}function o(e,t){e*=h.radians,t*=h.radians,u=e,c=(0,h.sin)(t),l=(0,h.cos)(t),_.point=s}function s(e,t){e*=h.radians,t*=h.radians;var n=(0,h.sin)(t),r=(0,h.cos)(t),i=(0,h.abs)(e-u),a=(0,h.cos)(i),o=(0,h.sin)(i),s=r*o,f=l*n-c*r*a,d=c*n+l*r*a;y.add((0,h.atan2)((0,h.sqrt)(s*s+f*f),d)),u=e,c=n,l=r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return y.reset(),(0,g.default)(e,_),+y};var u,c,l,f=n(25),d=r(f),h=n(0),p=n(14),v=r(p),m=n(17),g=r(m),y=(0,d.default)(),_={sphere:v.default,point:v.default,lineStart:i,lineEnd:v.default,polygonStart:v.default,polygonEnd:v.default}},function(e,t,n){"use strict";function r(e,t){e<o&&(o=e),e>u&&(u=e),t<s&&(s=t),t>c&&(c=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=1/0,s=o,u=-o,c=u,l={point:r,lineStart:a.default,lineEnd:a.default,polygonStart:a.default,polygonEnd:a.default,result:function(){var e=[[o,s],[u,c]];return u=c=-(s=o=1/0),e}};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.default)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var r=n(80),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e,t){return[e,t]}Object.defineProperty(t,"__esModule",{value:!0}),t.equirectangularRaw=r,t.default=function(){return(0,a.default)(r).scale(152.63)};var i=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.invert=r},function(e,t,n){"use strict";function r(e,t,n){var r,i,a,o,s=e.x-t.x,u=e.y-t.y,c=s*s+u*u;c?(i=t.r+n.r,i*=i,o=e.r+n.r,o*=o,i>o?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*s-a*u,n.y=e.y-r*u+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*s-a*u,n.y=t.y+r*u+a*s)):(n.x=t.x+n.r,n.y=t.y)}function i(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function a(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function o(e){this._=e,this.next=null,this.previous=null}function s(e){if(!(u=e.length))return 0;var t,n,s,u,l,f,d,h,p,v,m;if(t=e[0],t.x=0,t.y=0,!(u>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(u>2))return t.r+n.r;r(n,t,s=e[2]),t=new o(t),n=new o(n),s=new o(s),t.next=s.previous=n,n.next=t.previous=s,s.next=n.previous=t;e:for(d=3;d<u;++d){r(t._,n._,s=e[d]),s=new o(s),h=n.next,p=t.previous,v=n._.r,m=t._.r;do{if(v<=m){if(i(h._,s._)){n=h,t.next=n,n.previous=t,--d;continue e}v+=h._.r,h=h.next}else{if(i(p._,s._)){t=p,t.next=n,n.previous=t,--d;continue e}m+=p._.r,p=p.previous}}while(h!==p.next);for(s.previous=t,s.next=n,t.next=n.previous=n=s,l=a(t);(s=s.next)!==n;)(f=a(s))<l&&(t=s,l=f);n=t.next}for(t=[n._],s=n;(s=s.next)!==n;)t.push(s._);for(s=(0,c.default)(t),d=0;d<u;++d)t=e[d],t.x-=s.x,t.y-=s.y;return s.r}Object.defineProperty(t,"__esModule",{value:!0}),t.packEnclose=s,t.default=function(e){return s(e),e};var u=n(163),c=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e,t){var n,r;if(o(t,e))return[t];for(n=0;n<e.length;++n)if(i(t,e[n])&&o(c(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(i(c(e[n],e[r]),t)&&i(c(e[n],t),e[r])&&i(c(e[r],t),e[n])&&o(l(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function i(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function a(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function o(e,t){for(var n=0;n<t.length;++n)if(!a(e,t[n]))return!1;return!0}function s(e){switch(e.length){case 1:return u(e[0]);case 2:return c(e[0],e[1]);case 3:return l(e[0],e[1],e[2])}}function u(e){return{x:e.x,y:e.y,r:e.r}}function c(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,s=t.r,u=a-n,c=o-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+a+u/f*l)/2,y:(r+o+c/f*l)/2,r:(f+i+s)/2}}function l(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,u=t.r,c=n.x,l=n.y,f=n.r,d=r-o,h=r-c,p=i-s,v=i-l,m=u-a,g=f-a,y=r*r+i*i-a*a,_=y-o*o-s*s+u*u,b=y-c*c-l*l+f*f,x=h*p-d*v,M=(p*b-v*_)/(2*x)-r,w=(v*m-p*g)/x,S=(h*_-d*b)/(2*x)-i,P=(d*g-h*m)/x,T=w*w+P*P-1,E=2*(a+M*w+S*P),O=M*M+S*S-a*a,A=-(T?(E+Math.sqrt(E*E-4*T*O))/(2*T):O/E);return{x:r+M+w*A,y:i+S+P*A,r:A}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n,i=0,o=(e=(0,f.shuffle)(f.slice.call(e))).length,u=[];i<o;)t=e[i],n&&a(n,t)?++i:(n=s(u=r(u,t)),i=0);return n};var f=n(440)},function(e,t,n){"use strict";function r(){return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.constantZero=r,t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function e(t){function n(e,n){var r,i;return e=null==e?0:+e,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*t()-1,a=2*t()-1,i=r*r+a*a}while(!i||i>1);return e+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=e,n}(i.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function e(t){function n(e){return function(){for(var n=0,r=0;r<e;++r)n+=t();return n}}return n.source=e,n}(i.default)},function(e,t,n){"use strict";function r(){function e(e){var r=e+"",i=t.get(r);if(!i){if(c!==s)return c;t.set(r,i=n.push(e))}return u[(i-1)%u.length]}var t=(0,i.map)(),n=[],u=[],c=s;return e.domain=function(r){if(!arguments.length)return n.slice();n=[],t=(0,i.map)();for(var a,o,s=-1,u=r.length;++s<u;)t.has(o=(a=r[s])+"")||t.set(o,n.push(a));return e},e.range=function(t){return arguments.length?(u=a.slice.call(t),e):u.slice()},e.unknown=function(t){return arguments.length?(c=t,e):c},e.copy=function(){return r(n,u).unknown(c)},o.initRange.apply(e,arguments),e}Object.defineProperty(t,"__esModule",{value:!0}),t.implicit=void 0,t.default=r;var i=n(40),a=n(18),o=n(6),s=t.implicit={name:"implicit"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){var o,s=(0,r.tickStep)(e,t,n);switch(a=(0,i.formatSpecifier)(null==a?",f":a),a.type){case"s":var u=Math.max(Math.abs(e),Math.abs(t));return null!=a.precision||isNaN(o=(0,i.precisionPrefix)(s,u))||(a.precision=o),(0,i.formatPrefix)(a,u);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(o=(0,i.precisionRound)(s,Math.max(Math.abs(e),Math.abs(t))))||(a.precision=o-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(o=(0,i.precisionFixed)(s))||(a.precision=o-2*("%"===a.type))}return(0,i.format)(a)};var r=n(3),i=n(78)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e=e.slice();var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return new Date(e)}function a(e){return e instanceof Date?+e:+new Date(+e)}function o(e,t,n,r,u,c,h,p,w){function S(i){return(h(i)<i?A:c(i)<i?L:u(i)<i?R:r(i)<i?C:t(i)<i?n(i)<i?j:k:e(i)<i?N:I)(i)}function P(t,n,r,i){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-n)/t,o=(0,s.bisector)(function(e){return e[2]}).right(D,a);o===D.length?(i=(0,s.tickStep)(n/M,r/M,t),t=e):o?(o=D[a/D[o-1][2]<D[o][2]/a?o-1:o],i=o[1],t=o[0]):(i=Math.max((0,s.tickStep)(n,r,t),1),t=p)}return null==i?t:t.every(i)}var T=(0,d.default)(f.identity,f.identity),E=T.invert,O=T.domain,A=w(".%L"),L=w(":%S"),R=w("%I:%M"),C=w("%I %p"),j=w("%a %d"),k=w("%b %d"),N=w("%B"),I=w("%Y"),D=[[h,1,m],[h,5,5*m],[h,15,15*m],[h,30,30*m],[c,1,g],[c,5,5*g],[c,15,15*g],[c,30,30*g],[u,1,y],[u,3,3*y],[u,6,6*y],[u,12,12*y],[r,1,_],[r,2,2*_],[n,1,b],[t,1,x],[t,3,3*x],[e,1,M]];return T.invert=function(e){return new Date(E(e))},T.domain=function(e){return arguments.length?O(l.map.call(e,a)):O().map(i)},T.ticks=function(e,t){var n,r=O(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=P(e,i,a,t),n=n?n.range(i,a+1):[],o?n.reverse():n},T.tickFormat=function(e,t){return null==t?S:w(t)},T.nice=function(e,t){var n=O();return(e=P(e,n[0],n[n.length-1],t))?O((0,v.default)(n,e)):T},T.copy=function(){return(0,f.copy)(T,o(e,t,n,r,u,c,h,p,w))},T}Object.defineProperty(t,"__esModule",{value:!0}),t.calendar=o,t.default=function(){return h.initRange.apply(o(u.timeYear,u.timeMonth,u.timeWeek,u.timeDay,u.timeHour,u.timeMinute,u.timeSecond,u.timeMillisecond,c.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)};var s=n(3),u=n(47),c=n(90),l=n(18),f=n(15),d=r(f),h=n(6),p=n(171),v=r(p),m=1e3,g=60*m,y=60*g,_=24*y,b=7*_,x=30*_,M=365*_},function(e,t,n){"use strict";function r(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function i(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function a(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function o(e){function t(e,t){return function(n){var r,i,a,o=[],s=-1,u=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=xe[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function n(e,t){return function(n){var s,u,c=a(1900,void 0,1),l=o(c,e,n+="",0);if(l!=n.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(!t||"Z"in c||(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(s=i(a(c.y,0,1)),u=s.getUTCDay(),s=u>4||0===u?be.utcMonday.ceil(s):(0,be.utcMonday)(s),s=be.utcDay.offset(s,7*(c.V-1)),c.y=s.getUTCFullYear(),c.m=s.getUTCMonth(),c.d=s.getUTCDate()+(c.w+6)%7):(s=r(a(c.y,0,1)),u=s.getDay(),s=u>4||0===u?be.timeMonday.ceil(s):(0,be.timeMonday)(s),s=be.timeDay.offset(s,7*(c.V-1)),c.y=s.getFullYear(),c.m=s.getMonth(),c.d=s.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),u="Z"in c?i(a(c.y,0,1)).getUTCDay():r(a(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(u+5)%7:c.w+7*c.U-(u+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,i(c)):r(c)}}function o(e,t,n,r){for(var i,a,o=0,s=t.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=it[i in xe?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(e,t,n){var r=qe.exec(t.slice(n));return r?(e.p=Ye[r[0].toLowerCase()],n+r[0].length):-1}function u(e,t,n){var r=Je.exec(t.slice(n));return r?(e.w=Qe[r[0].toLowerCase()],n+r[0].length):-1}function G(e,t,n){var r=Xe.exec(t.slice(n));return r?(e.w=Ze[r[0].toLowerCase()],n+r[0].length):-1}function ue(e,t,n){var r=et.exec(t.slice(n));return r?(e.m=tt[r[0].toLowerCase()],n+r[0].length):-1}function Me(e,t,n){var r=Ke.exec(t.slice(n));return r?(e.m=$e[r[0].toLowerCase()],n+r[0].length):-1}function we(e,t,n){return o(e,Be,t,n)}function Se(e,t,n){return o(e,ze,t,n)}function Pe(e,t,n){return o(e,Fe,t,n)}function Te(e){return He[e.getDay()]}function Ee(e){return Ge[e.getDay()]}function Oe(e){return We[e.getMonth()]}function Ae(e){return Ve[e.getMonth()]}function Le(e){return Ue[+(e.getHours()>=12)]}function Re(e){return 1+~~(e.getMonth()/3)}function Ce(e){return He[e.getUTCDay()]}function je(e){return Ge[e.getUTCDay()]}function ke(e){return We[e.getUTCMonth()]}function Ne(e){return Ve[e.getUTCMonth()]}function Ie(e){return Ue[+(e.getUTCHours()>=12)]}function De(e){return 1+~~(e.getUTCMonth()/3)}var Be=e.dateTime,ze=e.date,Fe=e.time,Ue=e.periods,Ge=e.days,He=e.shortDays,Ve=e.months,We=e.shortMonths,qe=c(Ue),Ye=l(Ue),Xe=c(Ge),Ze=l(Ge),Je=c(He),Qe=l(He),Ke=c(Ve),$e=l(Ve),et=c(We),tt=l(We),nt={a:Te,A:Ee,b:Oe,B:Ae,c:null,d:R,e:R,f:I,g:Y,G:Z,H:C,I:j,j:k,L:N,m:D,M:B,p:Le,q:Re,Q:ye,s:_e,S:z,u:F,U:U,V:H,w:V,W:W,x:null,X:null,y:q,Y:X,Z:J,"%":ge},rt={a:Ce,A:je,b:ke,B:Ne,c:null,d:Q,e:Q,f:ne,g:he,G:ve,H:K,I:$,j:ee,L:te,m:re,M:ie,p:Ie,q:De,Q:ye,s:_e,S:ae,u:oe,U:se,V:ce,w:le,W:fe,x:null,X:null,y:de,Y:pe,Z:me,"%":ge},it={a:u,A:G,b:ue,B:Me,c:we,d:x,e:x,f:E,g:g,G:m,H:w,I:w,j:M,L:T,m:b,M:S,p:s,q:_,Q:A,s:L,S:P,u:d,U:h,V:p,w:f,W:v,x:Se,X:Pe,y:g,Y:m,Z:y,"%":O};return nt.x=t(ze,nt),nt.X=t(Fe,nt),nt.c=t(Be,nt),rt.x=t(ze,rt),rt.X=t(Fe,rt),rt.c=t(Be,rt),{format:function(e){var n=t(e+="",nt);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",rt);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e+="",!0);return t.toString=function(){return e},t}}}function s(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function u(e){return e.replace(Se,"\\$&")}function c(e){return new RegExp("^(?:"+e.map(u).join("|")+")","i")}function l(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function f(e,t,n){var r=Me.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function d(e,t,n){var r=Me.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function h(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function p(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function v(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function m(e,t,n){var r=Me.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function g(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function y(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _(e,t,n){var r=Me.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function b(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function x(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function M(e,t,n){var r=Me.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function w(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function S(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function P(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function T(e,t,n){var r=Me.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function E(e,t,n){var r=Me.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function O(e,t,n){var r=we.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function A(e,t,n){var r=Me.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function L(e,t,n){var r=Me.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function R(e,t){return s(e.getDate(),t,2)}function C(e,t){return s(e.getHours(),t,2)}function j(e,t){return s(e.getHours()%12||12,t,2)}function k(e,t){return s(1+be.timeDay.count((0,be.timeYear)(e),e),t,3)}function N(e,t){return s(e.getMilliseconds(),t,3)}function I(e,t){return N(e,t)+"000"}function D(e,t){return s(e.getMonth()+1,t,2)}function B(e,t){return s(e.getMinutes(),t,2)}function z(e,t){return s(e.getSeconds(),t,2)}function F(e){var t=e.getDay();return 0===t?7:t}function U(e,t){return s(be.timeSunday.count((0,be.timeYear)(e)-1,e),t,2)}function G(e){var t=e.getDay();return t>=4||0===t?(0,be.timeThursday)(e):be.timeThursday.ceil(e)}function H(e,t){return e=G(e),s(be.timeThursday.count((0,be.timeYear)(e),e)+(4===(0,be.timeYear)(e).getDay()),t,2)}function V(e){return e.getDay()}function W(e,t){return s(be.timeMonday.count((0,be.timeYear)(e)-1,e),t,2)}function q(e,t){return s(e.getFullYear()%100,t,2)}function Y(e,t){return e=G(e),s(e.getFullYear()%100,t,2)}function X(e,t){return s(e.getFullYear()%1e4,t,4)}function Z(e,t){var n=e.getDay();return e=n>=4||0===n?(0,be.timeThursday)(e):be.timeThursday.ceil(e),s(e.getFullYear()%1e4,t,4)}function J(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+s(t/60|0,"0",2)+s(t%60,"0",2)}function Q(e,t){return s(e.getUTCDate(),t,2)}function K(e,t){return s(e.getUTCHours(),t,2)}function $(e,t){return s(e.getUTCHours()%12||12,t,2)}function ee(e,t){return s(1+be.utcDay.count((0,be.utcYear)(e),e),t,3)}function te(e,t){return s(e.getUTCMilliseconds(),t,3)}function ne(e,t){return te(e,t)+"000"}function re(e,t){return s(e.getUTCMonth()+1,t,2)}function ie(e,t){return s(e.getUTCMinutes(),t,2)}function ae(e,t){return s(e.getUTCSeconds(),t,2)}function oe(e){var t=e.getUTCDay();return 0===t?7:t}function se(e,t){return s(be.utcSunday.count((0,be.utcYear)(e)-1,e),t,2)}function ue(e){var t=e.getUTCDay();return t>=4||0===t?(0,be.utcThursday)(e):be.utcThursday.ceil(e)}function ce(e,t){return e=ue(e),s(be.utcThursday.count((0,be.utcYear)(e),e)+(4===(0,be.utcYear)(e).getUTCDay()),t,2)}function le(e){return e.getUTCDay()}function fe(e,t){return s(be.utcMonday.count((0,be.utcYear)(e)-1,e),t,2)}function de(e,t){return s(e.getUTCFullYear()%100,t,2)}function he(e,t){return e=ue(e),s(e.getUTCFullYear()%100,t,2)}function pe(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function ve(e,t){var n=e.getUTCDay();return e=n>=4||0===n?(0,be.utcThursday)(e):be.utcThursday.ceil(e),s(e.getUTCFullYear()%1e4,t,4)}function me(){return"+0000"}function ge(){return"%"}function ye(e){return+e}function _e(e){return Math.floor(+e/1e3)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var be=n(47),xe={"-":"",_:" ",0:"0"},Me=/^\s*\d+/,we=/^%/,Se=/[\\^$*+?|[\]().{}]/g},function(e,t,n){"use strict";function r(e){return e.toISOString()}Object.defineProperty(t,"__esModule",{value:!0}),t.isoSpecifier=void 0;var i=n(91),a=t.isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ",o=Date.prototype.toISOString?r:(0,i.utcFormat)(a);t.default=o},function(e,t,n){"use strict";function r(){function e(e){return isNaN(e=+e)?a:u(0===r?.5:(e=(i(e)-t)*r,c?Math.max(0,Math.min(1,e)):e))}var t,n,r,i,a,o=0,s=1,u=l.identity,c=!1;return e.domain=function(a){return arguments.length?(t=i(o=+a[0]),n=i(s=+a[1]),r=t===n?0:1/(n-t),e):[o,s]},e.clamp=function(t){return arguments.length?(c=!!t,e):c},e.interpolator=function(t){return arguments.length?(u=t,e):u},e.unknown=function(t){return arguments.length?(a=t,e):a},function(a){return i=a,t=a(o),n=a(s),r=t===n?0:1/(n-t),e}}function i(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function a(){var e=(0,d.linearish)(r()(l.identity));return e.copy=function(){return i(e,a())},f.initInterpolator.apply(e,arguments)}function o(){var e=(0,h.loggish)(r()).domain([1,10]);return e.copy=function(){return i(e,o()).base(e.base())},f.initInterpolator.apply(e,arguments)}function s(){var e=(0,p.symlogish)(r());return e.copy=function(){return i(e,s()).constant(e.constant())},f.initInterpolator.apply(e,arguments)}function u(){var e=(0,v.powish)(r());return e.copy=function(){return i(e,u()).exponent(e.exponent())},f.initInterpolator.apply(e,arguments)}function c(){return u.apply(null,arguments).exponent(.5)}Object.defineProperty(t,"__esModule",{value:!0}),t.copy=i,t.default=a,t.sequentialLog=o,t.sequentialSymlog=s,t.sequentialPow=u,t.sequentialSqrt=c;var l=n(15),f=n(6),d=n(19),h=n(87),p=n(88),v=n(89)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var t,o,u,l,f,v=e.length,m=!1,g=new Array(v),y=new Array(v);for(null==d&&(p=h(f=(0,i.path)())),t=0;t<=v;++t){if(!(t<v&&c(l=e[t],t,e))===m)if(m=!m)o=t,p.areaStart(),p.lineStart();else{for(p.lineEnd(),p.lineStart(),u=t-1;u>=o;--u)p.point(g[u],y[u]);p.lineEnd(),p.areaEnd()}m&&(g[t]=+n(l,t,e),y[t]=+a(l,t,e),p.point(r?+r(l,t,e):g[t],s?+s(l,t,e):y[t]))}if(f)return p=null,f+""||null}function t(){return(0,l.default)().defined(c).curve(h).context(d)}var n=f.x,r=null,a=(0,o.default)(0),s=f.y,c=(0,o.default)(!0),d=null,h=u.default,p=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:(0,o.default)(+t),r=null,e):n},e.x0=function(t){return arguments.length?(n="function"==typeof t?t:(0,o.default)(+t),e):n},e.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:(0,o.default)(+t),e):r},e.y=function(t){return arguments.length?(a="function"==typeof t?t:(0,o.default)(+t),s=null,e):a},e.y0=function(t){return arguments.length?(a="function"==typeof t?t:(0,o.default)(+t),e):a},e.y1=function(t){return arguments.length?(s=null==t?null:"function"==typeof t?t:(0,o.default)(+t),e):s},e.lineX0=e.lineY0=function(){return t().x(n).y(a)},e.lineY1=function(){return t().x(n).y(s)},e.lineX1=function(){return t().x(r).y(a)},e.defined=function(t){return arguments.length?(c="function"==typeof t?t:(0,o.default)(!!t),e):c},e.curve=function(t){return arguments.length?(h=t,null!=d&&(p=h(d)),e):h},e.context=function(t){return arguments.length?(null==t?d=p=null:p=h(d=t),e):d},e};var i=n(16),a=n(20),o=r(a),s=n(48),u=r(s),c=n(92),l=r(c),f=n(93)},function(e,t,n){"use strict";function r(e){this._curve=e}function i(e){function t(t){return new r(e(t))}return t._curve=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.curveRadialLinear=void 0,t.default=i;var a=n(48),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.curveRadialLinear=i(o.default);r.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t((0,o.default)(e)):t()._curve},e}Object.defineProperty(t,"__esModule",{value:!0}),t.lineRadial=i,t.default=function(){return i((0,u.default)().curve(a.curveRadialLinear))};var a=n(177),o=r(a),s=n(92),u=r(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.slice=Array.prototype.slice},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31);t.default={draw:function(e,t){var n=Math.sqrt(t/r.pi);e.moveTo(n,0),e.arc(0,0,n,0,r.tau)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.sqrt(1/3),i=2*r;t.default={draw:function(e,t){var n=Math.sqrt(t/i),a=n*r;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=Math.sin(r.pi/10)/Math.sin(7*r.pi/10),a=Math.sin(r.tau/10)*i,o=-Math.cos(r.tau/10)*i;t.default={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),i=a*n,s=o*n;e.moveTo(0,-n),e.lineTo(i,s);for(var u=1;u<5;++u){var c=r.tau*u/5,l=Math.cos(c),f=Math.sin(c);e.lineTo(f*n,-l*n),e.lineTo(l*i-f*s,f*i+l*s)}e.closePath()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.sqrt(3);t.default={draw:function(e,t){var n=-Math.sqrt(t/(3*r));e.moveTo(0,2*n),e.lineTo(-r*n,-n),e.lineTo(r*n,-n),e.closePath()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=-.5,i=Math.sqrt(3)/2,a=1/Math.sqrt(12),o=3*(a/2+1);t.default={draw:function(e,t){var n=Math.sqrt(t/o),s=n/2,u=n*a,c=s,l=n*a+n,f=-c,d=l;e.moveTo(s,u),e.lineTo(c,l),e.lineTo(f,d),e.lineTo(r*s-i*u,i*s+r*u),e.lineTo(r*c-i*l,i*c+r*l),e.lineTo(r*f-i*d,i*f+r*d),e.lineTo(r*s+i*u,r*u-i*s),e.lineTo(r*c+i*l,r*l-i*c),e.lineTo(r*f+i*d,r*d-i*f),e.closePath()}}},function(e,t,n){"use strict";function r(e,t){this._context=e,this._k=(1-t)/6}Object.defineProperty(t,"__esModule",{value:!0}),t.CardinalClosed=r;var i=n(49),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(51);r.prototype={areaStart:a.default,areaEnd:a.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:(0,o.point)(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t.default=function e(t){function n(e){return new r(e,t)}return n.tension=function(t){return e(+t)},n}(0)},function(e,t,n){"use strict";function r(e,t){this._context=e,this._k=(1-t)/6}Object.defineProperty(t,"__esModule",{value:!0}),t.CardinalOpen=r;var i=n(51);r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,i.point)(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t.default=function e(t){function n(e){return new r(e,t)}return n.tension=function(t){return e(+t)},n}(0)},function(e,t,n){"use strict";function r(e){for(var t,n=-1,r=0,i=e.length,a=-1/0;++n<i;)(t=+e[n][1])>a&&(a=t,r=n);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.map(r);return(0,a.default)(e).sort(function(e,n){return t[e]-t[n]})};var i=n(33),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e){return l.cells[e.index]={site:e,halfedges:[]}}function i(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function a(e,t){return t[+(t.left!==e.site)]}function o(e,t){return t[+(t.left===e.site)]}function s(){for(var e,t,n,r,a=0,o=l.cells.length;a<o;++a)if((e=l.cells[a])&&(r=(t=e.halfedges).length)){var s=new Array(r),u=new Array(r);for(n=0;n<r;++n)s[n]=n,u[n]=i(e,l.edges[t[n]]);for(s.sort(function(e,t){return u[t]-u[e]}),n=0;n<r;++n)u[n]=t[s[n]];for(n=0;n<r;++n)t[n]=u[n]}}function u(e,t,n,r){var i,s,u,f,d,h,p,v,m,g,y,_,b=l.cells.length,x=!0;for(i=0;i<b;++i)if(s=l.cells[i]){for(u=s.site,d=s.halfedges,f=d.length;f--;)l.edges[d[f]]||d.splice(f,1);for(f=0,h=d.length;f<h;)g=o(s,l.edges[d[f]]),y=g[0],_=g[1],p=a(s,l.edges[d[++f%h]]),v=p[0],m=p[1],(Math.abs(y-v)>l.epsilon||Math.abs(_-m)>l.epsilon)&&(d.splice(f,0,l.edges.push((0,c.createBorderEdge)(u,g,Math.abs(y-e)<l.epsilon&&r-_>l.epsilon?[e,Math.abs(v-e)<l.epsilon?m:r]:Math.abs(_-r)<l.epsilon&&n-y>l.epsilon?[Math.abs(m-r)<l.epsilon?v:n,r]:Math.abs(y-n)<l.epsilon&&_-t>l.epsilon?[n,Math.abs(v-n)<l.epsilon?m:t]:Math.abs(_-t)<l.epsilon&&y-e>l.epsilon?[Math.abs(m-t)<l.epsilon?v:e,t]:null))-1),++h);h&&(x=!1)}if(x){var M,w,S,P=1/0;for(i=0,x=null;i<b;++i)(s=l.cells[i])&&(u=s.site,M=u[0]-e,w=u[1]-t,(S=M*M+w*w)<P&&(P=S,x=s));if(x){var T=[e,t],E=[e,r],O=[n,r],A=[n,t];x.halfedges.push(l.edges.push((0,c.createBorderEdge)(u=x.site,T,E))-1,l.edges.push((0,c.createBorderEdge)(u,E,O))-1,l.edges.push((0,c.createBorderEdge)(u,O,A))-1,l.edges.push((0,c.createBorderEdge)(u,A,T))-1)}}for(i=0;i<b;++i)(s=l.cells[i])&&(s.halfedges.length||delete l.cells[i])}Object.defineProperty(t,"__esModule",{value:!0}),t.createCell=r,t.cellHalfedgeStart=a,t.cellHalfedgeEnd=o,t.sortCellHalfedges=s,t.clipCells=u;var c=n(97),l=n(34)},function(e,t,n){"use strict";function r(){(0,o.RedBlackNode)(this),this.x=this.y=this.arc=this.site=this.cy=null}function i(e){var n=e.P,i=e.N;if(n&&i){var a=n.site,o=e.site,l=i.site;if(a!==l){var f=o[0],d=o[1],h=a[0]-f,p=a[1]-d,v=l[0]-f,m=l[1]-d,g=2*(h*m-p*v);if(!(g>=-s.epsilon2)){var y=h*h+p*p,_=v*v+m*m,b=(m*y-p*_)/g,x=(h*_-v*y)/g,M=u.pop()||new r;M.arc=e,M.site=o,M.x=b+f,M.y=(M.cy=x+d)+Math.sqrt(b*b+x*x),e.circle=M;for(var w=null,S=s.circles._;S;)if(M.y<S.y||M.y===S.y&&M.x<=S.x){if(!S.L){w=S.P;break}S=S.L}else{if(!S.R){w=S;break}S=S.R}s.circles.insert(w,M),w||(t.firstCircle=c=M)}}}}function a(e){var n=e.circle;n&&(n.P||(t.firstCircle=c=n.N),s.circles.remove(n),u.push(n),(0,o.RedBlackNode)(n),e.circle=null)}Object.defineProperty(t,"__esModule",{value:!0}),t.firstCircle=void 0,t.attachCircle=i,t.detachCircle=a;var o=n(96),s=n(34),u=[],c=t.firstCircle=void 0},function(e,t,n){"use strict";function r(e,t,n){this.k=e,this.x=t,this.y=n}function i(e){for(;!e.__zoom;)if(!(e=e.parentNode))return a;return e.__zoom}Object.defineProperty(t,"__esModule",{value:!0}),t.Transform=r,t.default=i,r.prototype={constructor:r,scale:function(e){return 1===e?this:new r(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new r(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var a=t.identity=new r(1,0,0);i.prototype=r.prototype},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(195),s=r(o),u=n(196),c=r(u),l=n(223),f=r(l),d=n(564),h=r(d),p=n(566),v=function(){function e(t){i(this,e),this.container=t,this.boundBox=this.container.getBoundingClientRect(),this.pointColor=251094,this.pointOpacity=.4,this.chinaColor=this.pointColor,this.time=2e3,this.stopTime=5e3,this.needRotate=!0}return a(e,[{key:"setPointColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:251094,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:251094;this.pointColor=e,this.pointOpacity=t,this.chinaColor=n}},{key:"setAnimationTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;this.time=e}},{key:"setStopTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this.stopTime=e}},{key:"initScene",value:function(){this.scene=new s.Scene,this.group=new s.Group,this.scene.add(this.group),this.geometry_land_target=new s.Geometry,this.geometry_china_target=new s.Geometry,this.totalPointGeometry=new s.Geometry;var e=new s.WebGLRenderer({antialias:!0,alpha:!0});e.setPixelRatio(window.devicePixelRatio),e.setSize(this.boundBox.width,this.boundBox.height),e.setClearColor(2105376,0),e.domElement.style.position="absolute",this.container.appendChild(e.domElement),this.renderer=e,this.camera=new s.PerspectiveCamera(50,this.boundBox.width/this.boundBox.height,1,1e4),this.camera.position.set(0,200,600),this.camera.lookAt(0,0,0)}},{key:"loadJson",value:function(e){return f.json(e)}},{key:"generatePoints",value:function(e){for(var t=new s.Geometry,n=new s.Geometry,r=c.feature(e,e.objects.countries),i=(0,p.geo)(r.features),a=new s.SphereGeometry(230,150,150),o=new s.Spherical,u=0,l=a.vertices.length;u<l;u++){var f=a.vertices[u];o.setFromVector3(f);var d=s.Math.radToDeg(Math.PI/2-o.phi),h=s.Math.radToDeg(o.theta),v=i.search(d,h);if(null!==v){"China"===v.code?this.geometry_china_target.vertices.push(f):this.geometry_land_target.vertices.push(f);var m=new s.Vector3;m.x=1200*Math.random()-600,m.y=1200*Math.random()-600,m.z=1200*Math.random()-600,this.totalPointGeometry.vertices.push(m)}}var g=new s.PointsMaterial({size:4,color:this.pointColor,transparent:!0,opacity:this.pointOpacity}),y=new s.PointsMaterial({size:4,color:this.pointColor,transparent:!0,opacity:this.pointOpacity});y.needsUpdate=!0,this.material_china=y;for(var _=this.totalPointGeometry.vertices.length,b=this.geometry_land_target.vertices.length,x=0;x<_;x++)x<b?t.vertices.push(this.totalPointGeometry.vertices[x].clone()):n.vertices.push(this.totalPointGeometry.vertices[x].clone());var M=new s.Points(t,g),w=new s.Points(n,y);this.group.add(M),this.group.add(w),this.geometry_land=t,this.geometry_china=n,this.geometryArray=[this.geometry_land,this.geometry_china]}},{key:"render",value:function(){var e=this;if(h.default.update(),this.geometryArray.forEach(function(e){e.verticesNeedUpdate=!0}),this.needRotate){this.group.rotation.y+=.01;var t=250*Math.PI/180-this.group.rotation.y;t<.01&&t>0&&(this.needRotate=!1,this.changeChinaColor(),setTimeout(function(){e.needRotate=!0},this.stopTime))}this.renderer.render(this.scene,this.camera),requestAnimationFrame(function(t){e.render()})}},{key:"changeChinaColor",value:function(){var e=this,t=new s.Color(this.chinaColor),n=.3*this.stopTime;setTimeout(function(){e.material_china.color=t},100),new h.Tween(this.material_china).to({opacity:1},.7*this.stopTime).easing(h.Easing.Quadratic.InOut).delay(n).start()}},{key:"pointAnimation",value:function(){for(var e=this.time,t=this.totalPointGeometry.vertices.length,n=this.geometry_land_target.vertices.length,r=0;r<t;r++){var i=null,a=null;if(r<n)i=this.geometry_land.vertices[r],a=this.geometry_land_target.vertices[r];else{var o=r-n;i=this.geometry_china.vertices[o],a=this.geometry_china_target.vertices[o]}var s=e*Math.random();new h.Tween(i).to({x:a.x,y:a.y,z:a.z},e).easing(h.Easing.Quadratic.InOut).delay(s).start()}}},{key:"reset",value:function(){this.geometry_land.vertices=[],this.geometry_china.vertices=[];for(var e=this.totalPointGeometry.vertices.length,t=this.geometry_land_target.vertices.length,n=0;n<e;n++)n<t?this.geometry_land.vertices.push(this.totalPointGeometry.vertices[n].clone()):this.geometry_china.vertices.push(this.totalPointGeometry.vertices[n].clone());this.pointAnimation()}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zo,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zo,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vo,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:qo,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ss,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Yo,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:uu;Object.defineProperty(this,"id",{value:ju++}),this.uuid=Ou.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=s,this.offset=new Au(0,0),this.repeat=new Au(1,1),this.center=new Au(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Lu,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.version=0,this.onUpdate=null}function c(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Cu.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}function l(e,t,n){this.width=e,this.height=t,this.scissor=new ku(0,0,e,t),this.scissorTest=!1,this.viewport=new ku(0,0,e,t),n=n||{},this.texture=new u(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Vo,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function f(e,t,n){l.call(this,e,t,n),this.samples=4}function d(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){Ku.fromArray(e,a);var s=i.x*Math.abs(Ku.x)+i.y*Math.abs(Ku.y)+i.z*Math.abs(Ku.z),u=t.dot(Ku),c=n.dot(Ku),l=r.dot(Ku);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}function h(){function e(){i.setFromEuler(r,!1)}function t(){r.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:xc++}),this.uuid=Ou.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=h.DefaultUp.clone();var n=new Iu,r=new gc,i=new Nu,a=new Iu(1,1,1);r._onChange(e),i._onChange(t),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new cc},normalMatrix:{value:new Lu}}),this.matrix=new cc,this.matrixWorld=new cc,this.matrixAutoUpdate=h.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new bc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}function p(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function v(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function m(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function g(){Object.defineProperty(this,"id",{value:el++}),this.uuid=Ou.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Ya,this.side=Ha,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=so,this.blendDst=uo,this.blendEquation=Ka,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=yo,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xu,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bu,this.stencilZFail=bu,this.stencilZPass=bu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function y(e){g.call(this),this.type="MeshBasicMaterial",this.color=new Kc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}function _(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Mu,this.updateRange={offset:0,count:-1},this.version=0}function b(e,t,n){_.call(this,new Int8Array(e),t,n)}function x(e,t,n){_.call(this,new Uint8Array(e),t,n)}function M(e,t,n){_.call(this,new Uint8ClampedArray(e),t,n)}function w(e,t,n){_.call(this,new Int16Array(e),t,n)}function S(e,t,n){_.call(this,new Uint16Array(e),t,n)}function P(e,t,n){_.call(this,new Int32Array(e),t,n)}function T(e,t,n){_.call(this,new Uint32Array(e),t,n)}function E(e,t,n){_.call(this,new Uint16Array(e),t,n)}function O(e,t,n){_.call(this,new Float32Array(e),t,n)}function A(e,t,n){_.call(this,new Float64Array(e),t,n)}function L(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function R(e,t){return new il[e](t)}function C(){Object.defineProperty(this,"id",{value:al+=2}),this.uuid=Ou.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new y;h.call(this),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}function k(e,t,n,r,i,a,o,s){if(null===(t.side===Va?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==Wa,s)))return null;Ol.copy(s),Ol.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Ol);return u<n.near||u>n.far?null:{distance:u,point:Ol.clone(),object:e}}function N(e,t,n,r,i,a,o,s,u,c,l,f){vl.fromBufferAttribute(i,c),ml.fromBufferAttribute(i,l),gl.fromBufferAttribute(i,f);var d=e.morphTargetInfluences;if(t.morphTargets&&a&&d){xl.set(0,0,0),Ml.set(0,0,0),wl.set(0,0,0);for(var h=0,p=a.length;h<p;h++){var v=d[h],m=a[h];0!==v&&(yl.fromBufferAttribute(m,c),_l.fromBufferAttribute(m,l),bl.fromBufferAttribute(m,f),o?(xl.addScaledVector(yl,v),Ml.addScaledVector(_l,v),wl.addScaledVector(bl,v)):(xl.addScaledVector(yl.sub(vl),v),Ml.addScaledVector(_l.sub(ml),v),wl.addScaledVector(bl.sub(gl),v)))}vl.add(xl),ml.add(Ml),gl.add(wl)}e.isSkinnedMesh&&(e.boneTransform(c,vl),e.boneTransform(l,ml),e.boneTransform(f,gl));var g=k(e,t,n,r,vl,ml,gl,El);if(g){s&&(Sl.fromBufferAttribute(s,c),Pl.fromBufferAttribute(s,l),Tl.fromBufferAttribute(s,f),g.uv=Xc.getUV(El,vl,ml,gl,Sl,Pl,Tl,new Au)),u&&(Sl.fromBufferAttribute(u,c),Pl.fromBufferAttribute(u,l),Tl.fromBufferAttribute(u,f),g.uv2=Xc.getUV(El,vl,ml,gl,Sl,Pl,Tl,new Au));var y=new $c(c,l,f);Xc.getNormal(vl,ml,gl,y.normal),g.face=y}return g}function I(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function D(e){for(var t={},n=0;n<e.length;n++){var r=I(e[n]);for(var i in r)t[i]=r[i]}return t}function B(e){g.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Rl,this.fragmentShader=Cl,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function z(){h.call(this),this.type="Camera",this.matrixWorldInverse=new cc,this.projectionMatrix=new cc,this.projectionMatrixInverse=new cc}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;z.call(this),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function U(e,t,n){if(h.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;var r=new F(jl,kl,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Iu(1,0,0)),this.add(r);var i=new F(jl,kl,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Iu(-1,0,0)),this.add(i);var a=new F(jl,kl,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Iu(0,1,0)),this.add(a);var o=new F(jl,kl,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Iu(0,-1,0)),this.add(o);var s=new F(jl,kl,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Iu(0,0,1)),this.add(s);var u=new F(jl,kl,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Iu(0,0,-1)),this.add(u),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var c=e.xr.enabled,l=e.getRenderTarget();e.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(l),e.xr.enabled=c}}function G(e,t,n,r,i,a,o,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:Co,o=void 0!==o?o:os,u.call(this,e,t,n,r,i,a,o,s,c,l),this.flipY=!1,this._needsFlipEnvMap=!0}function H(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),l.call(this,e,e,t),t=t||{},this.texture=new G(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}function V(e,t,n,r,i,a,o,s,c,l,f,d){u.call(this,null,a,o,s,c,l,r,i,f,d),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==c?c:Uo,this.minFilter=void 0!==l?l:Uo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}function W(){function e(n,a){r(n,a),i=t.requestAnimationFrame(e)}var t=null,n=!1,r=null,i=null;return{start:function(){!0!==n&&null!==r&&(i=t.requestAnimationFrame(e),n=!0)},stop:function(){t.cancelAnimationFrame(i),n=!1},setAnimationLoop:function(e){r=e},setContext:function(e){t=e}}}function q(e,t){function n(t,n){var r=t.array,i=t.usage,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,r,i),t.onUploadCallback();var o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?t.isFloat16BufferAttribute?s?o=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:r instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function r(t,n,r){var i=n.array,a=n.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,i):(s?e.bufferSubData(r,a.offset*i.BYTES_PER_ELEMENT,i,a.offset,a.count):e.bufferSubData(r,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count)),a.count=-1)}function i(e){return e.isInterleavedBufferAttribute&&(e=e.data),u.get(e)}function a(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=u.get(t);n&&(e.deleteBuffer(n.buffer),u.delete(t))}function o(e,t){if(e.isGLBufferAttribute){var i=u.get(e);return void((!i||i.version<e.version)&&u.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);var a=u.get(e);void 0===a?u.set(e,n(e,t)):a.version<e.version&&(r(a.buffer,e,t),a.version=e.version)}var s=t.isWebGL2,u=new WeakMap;return{get:i,remove:a,update:o}}function Y(e,t,n,r,i){function a(n,i,a,p){var v=!0===i.isScene?i.background:null;v&&v.isTexture&&(v=t.get(v));var m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(v=null),null===v?o(s,u):v&&v.isColor&&(o(v,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.isWebGLCubeRenderTarget||v.mapping===Io)?(void 0===l&&(l=new j(new Al(1,1,1),new B({name:"BackgroundCubeMaterial",uniforms:I(Ul.cube.uniforms),vertexShader:Ul.cube.vertexShader,fragmentShader:Ul.cube.fragmentShader,side:Va,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),v.isWebGLCubeRenderTarget&&(v=v.texture),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v._needsFlipEnvMap?-1:1,f===v&&d===v.version&&h===e.toneMapping||(l.material.needsUpdate=!0,f=v,d=v.version,h=e.toneMapping),n.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(void 0===c&&(c=new j(new Bl(2,2),new B({name:"BackgroundMaterial",uniforms:I(Ul.background.uniforms),vertexShader:Ul.background.vertexShader,fragmentShader:Ul.background.fragmentShader,side:Ha,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),c.material.uniforms.uvTransform.value.copy(v.matrix),f===v&&d===v.version&&h===e.toneMapping||(c.material.needsUpdate=!0,f=v,d=v.version,h=e.toneMapping),n.unshift(c,c.geometry,c.material,0,0,null))}function o(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}var s=new Kc(0),u=0,c=void 0,l=void 0,f=null,d=0,h=null;return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),u=t,o(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,o(s,u)},render:a}}function X(e,t,n,r){function i(t,r,i,a,s){var c=!1;if(P){var d=u(a,i,r);O!==d&&(O=d,o(O.object)),c=l(a,s),c&&f(a,s)}else{var h=!0===r.wireframe;O.geometry===a.id&&O.program===i.id&&O.wireframe===h||(O.geometry=a.id,O.program=i.id,O.wireframe=h,c=!0)}!0===t.isInstancedMesh&&(c=!0),null!==s&&n.update(s,34963),c&&(g(t,r,i,a),null!==s&&e.bindBuffer(34963,n.get(s).buffer))}function a(){return r.isWebGL2?e.createVertexArray():S.createVertexArrayOES()}function o(t){return r.isWebGL2?e.bindVertexArray(t):S.bindVertexArrayOES(t)}function s(t){return r.isWebGL2?e.deleteVertexArray(t):S.deleteVertexArrayOES(t)}function u(e,t,n){var r=!0===n.wireframe,i=T[e.id];void 0===i&&(i={},T[e.id]=i);var o=i[t.id];void 0===o&&(o={},i[t.id]=o);var s=o[r];return void 0===s&&(s=c(a()),o[r]=s),s}function c(e){for(var t=[],n=[],r=[],i=0;i<w;i++)t[i]=0,n[i]=0,r[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function l(e,t){var n=O.attributes,r=e.attributes,i=0;for(var a in r){var o=n[a],s=r[a];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;i++}return O.attributesNum!==i||O.index!==t}function f(e,t){var n={},r=e.attributes,i=0;for(var a in r){var o=r[a],s={};s.attribute=o,o.data&&(s.data=o.data),n[a]=s,i++}O.attributes=n,O.attributesNum=i,O.index=t}function d(){for(var e=O.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function h(e){p(e,0)}function p(n,i){var a=O.newAttributes,o=O.enabledAttributes,s=O.attributeDivisors;if(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function v(){for(var t=O.newAttributes,n=O.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function m(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function g(i,a,o,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){d();var u=s.attributes,c=o.getAttributes(),l=a.defaultAttributeValues;for(var f in c){var g=c[f];if(g>=0){var y=u[f];if(void 0!==y){var _=y.normalized,b=y.itemSize,x=n.get(y);if(void 0===x)continue;var M=x.buffer,w=x.type,S=x.bytesPerElement;if(y.isInterleavedBufferAttribute){var P=y.data,T=P.stride,E=y.offset;P&&P.isInstancedInterleavedBuffer?(p(g,P.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=P.meshPerAttribute*P.count)):h(g),e.bindBuffer(34962,M),m(g,b,w,_,T*S,E*S)}else y.isInstancedBufferAttribute?(p(g,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):h(g),e.bindBuffer(34962,M),m(g,b,w,_,0,0)}else if("instanceMatrix"===f){var O=n.get(i.instanceMatrix);if(void 0===O)continue;var A=O.buffer,L=O.type;p(g+0,1),p(g+1,1),p(g+2,1),p(g+3,1),e.bindBuffer(34962,A),e.vertexAttribPointer(g+0,4,L,!1,64,0),e.vertexAttribPointer(g+1,4,L,!1,64,16),e.vertexAttribPointer(g+2,4,L,!1,64,32),e.vertexAttribPointer(g+3,4,L,!1,64,48)}else if("instanceColor"===f){var R=n.get(i.instanceColor);if(void 0===R)continue;var C=R.buffer,j=R.type;p(g,1),e.bindBuffer(34962,C),e.vertexAttribPointer(g,3,j,!1,12,0)}else if(void 0!==l){var k=l[f];if(void 0!==k)switch(k.length){case 2:e.vertexAttrib2fv(g,k);break;case 3:e.vertexAttrib3fv(g,k);break;case 4:e.vertexAttrib4fv(g,k);break;default:e.vertexAttrib1fv(g,k)}}}}v()}}function y(){x();for(var e in T){var t=T[e];for(var n in t){var r=t[n];for(var i in r)s(r[i].object),delete r[i];delete t[n]}delete T[e]}}function _(e){if(void 0!==T[e.id]){var t=T[e.id];for(var n in t){var r=t[n];for(var i in r)s(r[i].object),delete r[i];delete t[n]}delete T[e.id]}}function b(e){for(var t in T){var n=T[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)s(r[i].object),delete r[i];delete n[e.id]}}}function x(){M(),O!==E&&(O=E,o(O.object))}function M(){E.geometry=null,E.program=null,E.wireframe=!1}var w=e.getParameter(34921),S=r.isWebGL2?null:t.get("OES_vertex_array_object"),P=r.isWebGL2||null!==S,T={},E=c(null),O=E;return{setup:i,reset:x,resetDefaultState:M,dispose:y,releaseStatesOfGeometry:_,releaseStatesOfProgram:b,initAttributes:d,enableAttribute:h,disableUnusedAttributes:v}}function Z(e,t,n,r){function i(e){u=e}function a(t,r){e.drawArrays(u,t,r),n.update(r,u,1)}function o(r,i,a){if(0!==a){var o=void 0,c=void 0;if(s)o=e,c="drawArraysInstanced";else if(o=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o[c](u,r,i,a),n.update(i,u,a)}}var s=r.isWebGL2,u=void 0;this.setMode=i,this.render=a,this.renderInstances=o}function J(e,t,n){function r(){if(void 0!==a)return a;var n=t.get("EXT_texture_filter_anisotropic");return a=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a=void 0,o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",u=i(s);u!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",u,"instead."),s=u);var c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),f=e.getParameter(35660),d=e.getParameter(3379),h=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=f>0,_=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:r,getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:o?e.getParameter(36183):0}}function Q(e){function t(){l.value!==i&&(l.value=i,l.needsUpdate=a>0),r.numPlanes=a,r.numIntersection=0}function n(e,t,n,i){var a=null!==e?e.length:0,o=null;if(0!==a){if(o=l.value,!0!==i||null===o){var s=n+4*a,f=t.matrixWorldInverse;c.getNormalMatrix(f),(null===o||o.length<s)&&(o=new Float32Array(s));for(var d=0,h=n;d!==a;++d,h+=4)u.copy(e[d]).applyMatrix4(f,c),u.normal.toArray(o,h),o[h+3]=u.constant}l.value=o,l.needsUpdate=!0}return r.numPlanes=a,r.numIntersection=0,o}var r=this,i=null,a=0,o=!1,s=!1,u=new Dc,c=new Lu,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,r){var s=0!==e.length||t||0!==a||o;return o=t,i=n(e,r,0),a=e.length,s},this.beginShadows=function(){s=!0,n(null)},this.endShadows=function(){s=!1,t()},this.setState=function(r,u,c){var f=r.clippingPlanes,d=r.clipIntersection,h=r.clipShadows,p=e.get(r);if(!o||null===f||0===f.length||s&&!h)s?n(null):t();else{var v=s?0:a,m=4*v,g=p.clippingState||null;l.value=g,g=n(f,u,m,c);for(var y=0;y!==m;++y)g[y]=i[y];p.clippingState=g,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}}}function K(e){function t(e,t){return t===ko?e.mapping=Co:t===No&&(e.mapping=jo),e}function n(n){if(n&&n.isTexture){var i=n.mapping;if(i===ko||i===No){if(a.has(n)){return t(a.get(n).texture,n.mapping)}var o=n.image;if(o&&o.height>0){var s=e.getRenderList(),u=e.getRenderTarget(),c=new H(o.height/2);return c.fromEquirectangularTexture(e,n),a.set(n,c),e.setRenderTarget(u),e.setRenderList(s),n.addEventListener("dispose",r),t(c.texture,n.mapping)}return null}}return n}function r(e){var t=e.target;t.removeEventListener("dispose",r);var n=a.get(t);void 0!==n&&(a.delete(t),n.dispose())}function i(){a=new WeakMap}var a=new WeakMap;return{get:n,dispose:i}}function $(e){var t={};return{has:function(n){if(void 0!==t[n])return null!==t[n];var r=void 0;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,null!==r},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function ee(e,t,n,r){function i(e){var a=e.target,o=c.get(a);null!==o.index&&t.remove(o.index);for(var s in o.attributes)t.remove(o.attributes[s]);a.removeEventListener("dispose",i),c.delete(a);var u=l.get(o);u&&(t.remove(u),l.delete(o)),r.releaseStatesOfGeometry(o),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e,t){var r=c.get(t);return r||(t.addEventListener("dispose",i),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new C).setFromObject(e)),r=t._bufferGeometry),c.set(t,r),n.memory.geometries++,r)}function o(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)t.update(o[s],34962)}function s(e){var n=[],r=e.index,i=e.attributes.position,a=0;if(null!==r){var o=r.array;a=r.version;for(var s=0,u=o.length;s<u;s+=3){var c=o[s+0],f=o[s+1],d=o[s+2];n.push(c,f,f,d,d,c)}}else{var h=i.array;a=i.version;for(var p=0,v=h.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var _=new(L(n)>65535?T:S)(n,1);_.version=a;var b=l.get(e);b&&t.remove(b),l.set(e,_)}function u(e){var t=l.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return l.get(e)}var c=new WeakMap,l=new WeakMap;return{get:a,update:o,getWireframeAttribute:u}}function te(e,t,n,r){function i(e){c=e}function a(e){l=e.type,f=e.bytesPerElement}function o(t,r){e.drawElements(c,r,l,t*f),n.update(r,c,1)}function s(r,i,a){if(0!==a){var o=void 0,s=void 0;if(u)o=e,s="drawElementsInstanced";else if(o=t.get("ANGLE_instanced_arrays"),s="drawElementsInstancedANGLE",null===o)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o[s](c,i,l,r*f,a),n.update(i,c,a)}}var u=r.isWebGL2,c=void 0,l=void 0,f=void 0;this.setMode=i,this.setIndex=a,this.render=o,this.renderInstances=s}function ne(e){function t(e,t,n){switch(i.calls++,t){case 4:i.triangles+=n*(e/3);break;case 1:i.lines+=n*(e/2);break;case 3:i.lines+=n*(e-1);break;case 2:i.lines+=n*e;break;case 0:i.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t)}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}var r={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:r,render:i,programs:null,autoReset:!0,reset:n,update:t}}function re(e,t){return e[0]-t[0]}function ie(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ae(e){function t(t,a,o,s){var u=t.morphTargetInfluences,c=void 0===u?0:u.length,l=n[a.id];if(void 0===l){l=[];for(var f=0;f<c;f++)l[f]=[f,0];n[a.id]=l}for(var d=0;d<c;d++){var h=l[d];h[0]=d,h[1]=u[d]}l.sort(ie);for(var p=0;p<8;p++)p<c&&l[p][1]?(i[p][0]=l[p][0],i[p][1]=l[p][1]):(i[p][0]=Number.MAX_SAFE_INTEGER,i[p][1]=0);i.sort(re);for(var v=o.morphTargets&&a.morphAttributes.position,m=o.morphNormals&&a.morphAttributes.normal,g=0,y=0;y<8;y++){var _=i[y],b=_[0],x=_[1];b!==Number.MAX_SAFE_INTEGER&&x?(v&&a.getAttribute("morphTarget"+y)!==v[b]&&a.setAttribute("morphTarget"+y,v[b]),m&&a.getAttribute("morphNormal"+y)!==m[b]&&a.setAttribute("morphNormal"+y,m[b]),r[y]=x,g+=x):(v&&!0===a.hasAttribute("morphTarget"+y)&&a.deleteAttribute("morphTarget"+y),m&&!0===a.hasAttribute("morphNormal"+y)&&a.deleteAttribute("morphNormal"+y),r[y]=0)}var M=a.morphTargetsRelative?1:1-g;s.getUniforms().setValue(e,"morphTargetBaseInfluence",M),s.getUniforms().setValue(e,"morphTargetInfluences",r)}for(var n={},r=new Float32Array(8),i=[],a=0;a<8;a++)i[a]=[a,0];return{update:t}}function oe(e,t,n,r){function i(e){var i=r.render.frame,a=e.geometry,u=t.get(e,a);return s.get(u)!==i&&(a.isGeometry&&u.updateFromObject(e),t.update(u),s.set(u,i)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u}function a(){s=new WeakMap}function o(e){var t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}var s=new WeakMap;return{update:i,dispose:a}}function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;u.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=Uo,this.minFilter=Uo,this.wrapR=zo,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;u.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=Uo,this.minFilter=Uo,this.wrapR=zo,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function ce(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=ql[i];if(void 0===a&&(a=new Float32Array(i),ql[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function le(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function fe(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function de(e,t){var n=Yl[t];void 0===n&&(n=new Int32Array(t),Yl[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function he(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function pe(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(le(n,t))return;e.uniform2fv(this.addr,t),fe(n,t)}}function ve(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(le(n,t))return;e.uniform3fv(this.addr,t),fe(n,t)}}function me(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(le(n,t))return;e.uniform4fv(this.addr,t),fe(n,t)}}function ge(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(le(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),fe(n,t)}else{if(le(n,r))return;Jl.set(r),e.uniformMatrix2fv(this.addr,!1,Jl),fe(n,r)}}function ye(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(le(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),fe(n,t)}else{if(le(n,r))return;Zl.set(r),e.uniformMatrix3fv(this.addr,!1,Zl),fe(n,r)}}function _e(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(le(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),fe(n,t)}else{if(le(n,r))return;Xl.set(r),e.uniformMatrix4fv(this.addr,!1,Xl),fe(n,r)}}function be(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Gl,i)}function xe(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Hl,i)}function Me(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Vl,i)}function we(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Wl,i)}function Se(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Pe(e,t){var n=this.cache;le(n,t)||(e.uniform2iv(this.addr,t),fe(n,t))}function Te(e,t){var n=this.cache;le(n,t)||(e.uniform3iv(this.addr,t),fe(n,t))}function Ee(e,t){var n=this.cache;le(n,t)||(e.uniform4iv(this.addr,t),fe(n,t))}function Oe(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ae(e){switch(e){case 5126:return he;case 35664:return pe;case 35665:return ve;case 35666:return me;case 35674:return ge;case 35675:return ye;case 35676:return _e;case 5124:case 35670:return Se;case 35667:case 35671:return Pe;case 35668:case 35672:return Te;case 35669:case 35673:return Ee;case 5125:return Oe;case 35678:case 36198:case 36298:case 36306:case 35682:return be;case 35679:case 36299:case 36307:return Me;case 35680:case 36300:case 36308:case 36293:return we;case 36289:case 36303:case 36311:case 36292:return xe}}function Le(e,t){e.uniform1fv(this.addr,t)}function Re(e,t){e.uniform1iv(this.addr,t)}function Ce(e,t){e.uniform2iv(this.addr,t)}function je(e,t){e.uniform3iv(this.addr,t)}function ke(e,t){e.uniform4iv(this.addr,t)}function Ne(e,t){var n=ce(t,this.size,2);e.uniform2fv(this.addr,n)}function Ie(e,t){var n=ce(t,this.size,3);e.uniform3fv(this.addr,n)}function De(e,t){var n=ce(t,this.size,4);e.uniform4fv(this.addr,n)}function Be(e,t){var n=ce(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function ze(e,t){var n=ce(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Fe(e,t){var n=ce(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ue(e,t,n){var r=t.length,i=de(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||Gl,i[a])}function Ge(e,t,n){var r=t.length,i=de(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||Wl,i[a])}function He(e){switch(e){case 5126:return Le;case 35664:return Ne;case 35665:return Ie;case 35666:return De;case 35674:return Be;case 35675:return ze;case 35676:return Fe;case 5124:case 35670:return Re;case 35667:case 35671:return Ce;case 35668:case 35672:return je;case 35669:case 35673:return ke;case 35678:case 36198:case 36298:case 36306:case 35682:return Ue;case 35680:case 36300:case 36308:case 36293:return Ge}}function Ve(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Ae(t.type)}function We(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=He(t.type)}function qe(e){this.id=e,this.seq=[],this.map={}}function Ye(e,t){e.seq.push(t),e.map[t.id]=t}function Xe(e,t,n){var r=e.name,i=r.length;for(Ql.lastIndex=0;;){var a=Ql.exec(r),o=Ql.lastIndex,s=a[1],u="]"===a[2],c=a[3];if(u&&(s|=0),void 0===c||"["===c&&o+2===i){Ye(n,void 0===c?new Ve(s,e,t):new We(s,e,t));break}var l=n.map,f=l[s];void 0===f&&(f=new qe(s),Ye(n,f)),n=f}}function Ze(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);Xe(i,e.getUniformLocation(t,i.name),this)}}function Je(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function Qe(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Ke(e){switch(e){case uu:return["Linear","( value )"];case cu:return["sRGB","( value )"];case fu:return["RGBE","( value )"];case hu:return["RGBM","( value, 7.0 )"];case pu:return["RGBM","( value, 16.0 )"];case vu:return["RGBD","( value, 256.0 )"];case lu:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case du:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function $e(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+Qe(e.getShaderSource(t))}function et(e,t){var n=Ke(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function tt(e,t){var n=Ke(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function nt(e,t){var n=void 0;switch(t){case Eo:n="Linear";break;case Oo:n="Reinhard";break;case Ao:n="OptimizedCineon";break;case Lo:n="ACESFilmic";break;case Ro:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function rt(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ot).join("\n")}function it(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function at(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name;n[o]=e.getAttribLocation(t,o)}return n}function ot(e){return""!==e}function st(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ut(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function ct(e){return e.replace($l,lt)}function lt(e,t){var n=zl[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ct(n)}function ft(e){return e.replace(tf,ht).replace(ef,dt)}function dt(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ht(e,t,n,r)}function ht(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function pt(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function vt(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Fa?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Ua?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Ga&&(t="SHADOWMAP_TYPE_VSM"),t}function mt(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Co:case jo:t="ENVMAP_TYPE_CUBE";break;case Io:case Do:t="ENVMAP_TYPE_CUBE_UV"}return t}function gt(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case jo:case Do:t="ENVMAP_MODE_REFRACTION"}return t}function yt(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case wo:t="ENVMAP_BLENDING_MULTIPLY";break;case So:t="ENVMAP_BLENDING_MIX";break;case Po:t="ENVMAP_BLENDING_ADD"}return t}function _t(e,t,n,r){var i=e.getContext(),a=n.defines,o=n.vertexShader,s=n.fragmentShader,u=vt(n),c=mt(n),l=gt(n),f=yt(n),d=e.gammaFactor>0?e.gammaFactor:1,h=n.isWebGL2?"":rt(n),p=it(a),v=i.createProgram(),m=void 0,g=void 0,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(m=[p].filter(ot).join("\n"),m.length>0&&(m+="\n"),g=[h,p].filter(ot).join("\n"),g.length>0&&(g+="\n")):(m=[pt(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ot).join("\n"),g=[h,pt(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+l:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==To?"#define TONE_MAPPING":"",n.toneMapping!==To?zl.tonemapping_pars_fragment:"",n.toneMapping!==To?nt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",zl.encodings_pars_fragment,n.map?et("mapTexelToLinear",n.mapEncoding):"",n.matcap?et("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?et("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?et("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?et("lightMapTexelToLinear",n.lightMapEncoding):"",tt("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ot).join("\n")),o=ct(o),o=st(o,n),o=ut(o,n),s=ct(s),s=st(s,n),s=ut(s,n),o=ft(o),s=ft(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",m=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#define varying in",n.glslVersion===Su?"":"out highp vec4 pc_fragColor;",n.glslVersion===Su?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);var _=y+m+o,b=y+g+s,x=Je(i,35633,_),M=Je(i,35632,b);if(i.attachShader(v,x),i.attachShader(v,M),void 0!==n.index0AttributeName?i.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v),e.debug.checkShaderErrors){var w=i.getProgramInfoLog(v).trim(),S=i.getShaderInfoLog(x).trim(),P=i.getShaderInfoLog(M).trim(),T=!0,E=!0;if(!1===i.getProgramParameter(v,35714)){T=!1;var O=$e(i,x,"vertex"),A=$e(i,M,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(v,35715),"gl.getProgramInfoLog",w,O,A)}else""!==w?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",w):""!==S&&""!==P||(E=!1);E&&(this.diagnostics={runnable:T,programLog:w,vertexShader:{log:S,prefix:m},fragmentShader:{log:P,prefix:g}})}i.deleteShader(x),i.deleteShader(M);var L=void 0;this.getUniforms=function(){return void 0===L&&(L=new Ze(i,v)),L};var R=void 0;return this.getAttributes=function(){return void 0===R&&(R=at(i,v)),R},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Kl++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=x,this.fragmentShader=M,this}function bt(e,t,n,r,i,a){function o(e){var t=e.skeleton,n=t.bones;if(m)return 1024;var r=g,i=Math.floor((r-20)/4),a=Math.min(i,n.length);return a<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+a+"."),0):a}function s(e){var t=void 0;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=uu,t}function u(i,u,c,l,f){var d=l.fog,h=i.isMeshStandardMaterial?l.environment:null,g=t.get(i.envMap||h),x=b[i.type],M=f.isSkinnedMesh?o(f):0;null!==i.precision&&(_=r.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",_,"instead.");var w=void 0,S=void 0;if(x){var P=Ul[x];w=P.vertexShader,S=P.fragmentShader}else w=i.vertexShader,S=i.fragmentShader;var T=e.getRenderTarget();return{isWebGL2:p,shaderID:x,shaderName:i.type,vertexShader:w,fragmentShader:S,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:_,instancing:!0===f.isInstancedMesh,instancingColor:!0===f.isInstancedMesh&&null!==f.instanceColor,supportsVertexTextures:y,outputEncoding:null!==T?s(T.texture):e.outputEncoding,map:!!i.map,mapEncoding:s(i.map),matcap:!!i.matcap,matcapEncoding:s(i.matcap),envMap:!!g,envMapMode:g&&g.mapping,envMapEncoding:s(g),envMapCubeUV:!!g&&(g.mapping===Io||g.mapping===Do),lightMap:!!i.lightMap,lightMapEncoding:s(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:s(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===_u,tangentSpaceNormalMap:i.normalMapType===yu,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!d,useFog:i.fog,fogExp2:d&&d.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:v,skinning:i.skinning&&M>0,maxBones:M,useVertexTexture:m,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:To,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===Wa,flipSided:i.side===Va,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:p||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}}function c(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var i=0;i<x.length;i++)n.push(t[x[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()}function l(e){var t=b[e.type],n=void 0;if(t){var r=Ul[t];n=Ll.clone(r.uniforms)}else n=e.uniforms;return n}function f(t,n){for(var r=void 0,a=0,o=h.length;a<o;a++){var s=h[a];if(s.cacheKey===n){r=s,++r.usedTimes;break}}return void 0===r&&(r=new _t(e,n,t,i),h.push(r)),r}function d(e){if(0==--e.usedTimes){var t=h.indexOf(e);h[t]=h[h.length-1],h.pop(),e.destroy()}}var h=[],p=r.isWebGL2,v=r.logarithmicDepthBuffer,m=r.floatVertexTextures,g=r.maxVertexUniforms,y=r.vertexTextures,_=r.precision,b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},x=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];return{getParameters:u,getProgramCacheKey:c,getUniforms:l,acquireProgram:f,releaseProgram:d,programs:h}}function xt(){function e(e){var t=i.get(e);return void 0===t&&(t={},i.set(e,t)),t}function t(e){i.delete(e)}function n(e,t,n){i.get(e)[t]=n}function r(){i=new WeakMap}var i=new WeakMap;return{get:e,remove:t,update:n,dispose:r}}function Mt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function wt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function St(e){function t(){u=0,c.length=0,l.length=0}function n(t,n,r,i,a,o){var c=s[u],l=e.get(r);return void 0===c?(c={id:t.id,object:t,geometry:n,material:r,program:l.program||f,groupOrder:i,renderOrder:t.renderOrder,z:a,group:o},s[u]=c):(c.id=t.id,c.object=t,c.geometry=n,c.material=r,c.program=l.program||f,c.groupOrder=i,c.renderOrder=t.renderOrder,c.z=a,c.group=o),u++,c}function r(e,t,r,i,a,o){var s=n(e,t,r,i,a,o);(!0===r.transparent?l:c).push(s)}function i(e,t,r,i,a,o){var s=n(e,t,r,i,a,o);(!0===r.transparent?l:c).unshift(s)}function a(e,t){c.length>1&&c.sort(e||Mt),l.length>1&&l.sort(t||wt)}function o(){for(var e=u,t=s.length;e<t;e++){var n=s[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}}var s=[],u=0,c=[],l=[],f={id:-1};return{opaque:c,transparent:l,init:t,push:r,unshift:i,finish:o,sort:a}}function Pt(e){function t(t,n){var i=r.get(t),a=void 0;return void 0===i?(a=new St(e),r.set(t,new WeakMap),r.get(t).set(n,a)):void 0===(a=i.get(n))&&(a=new St(e),i.set(n,a)),a}function n(){r=new WeakMap}var r=new WeakMap;return{get:t,dispose:n}}function Tt(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n=void 0;switch(t.type){case"DirectionalLight":n={direction:new Iu,color:new Kc};break;case"SpotLight":n={position:new Iu,direction:new Iu,color:new Kc,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Iu,color:new Kc,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Iu,skyColor:new Kc,groundColor:new Kc};break;case"RectAreaLight":n={color:new Kc,position:new Iu,halfWidth:new Iu,halfHeight:new Iu}}return e[t.id]=n,n}}}function Et(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n=void 0;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Au};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Au,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}function Ot(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function At(e,t){function n(n){for(var r=0,s=0,u=0,c=0;c<9;c++)o.probe[c].set(0,0,0);var l=0,f=0,d=0,h=0,p=0,v=0,m=0,g=0;n.sort(Ot);for(var y=0,_=n.length;y<_;y++){var b=n[y],x=b.color,M=b.intensity,w=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)r+=x.r*M,s+=x.g*M,u+=x.b*M;else if(b.isLightProbe)for(var P=0;P<9;P++)o.probe[P].addScaledVector(b.sh.coefficients[P],M);else if(b.isDirectionalLight){var T=i.get(b);if(T.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){var E=b.shadow,O=a.get(b);O.shadowBias=E.bias,O.shadowNormalBias=E.normalBias,O.shadowRadius=E.radius,O.shadowMapSize=E.mapSize,o.directionalShadow[l]=O,o.directionalShadowMap[l]=S,o.directionalShadowMatrix[l]=b.shadow.matrix,v++}o.directional[l]=T,l++}else if(b.isSpotLight){var A=i.get(b);if(A.position.setFromMatrixPosition(b.matrixWorld),A.color.copy(x).multiplyScalar(M),A.distance=w,A.coneCos=Math.cos(b.angle),A.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),A.decay=b.decay,b.castShadow){var L=b.shadow,R=a.get(b);R.shadowBias=L.bias,R.shadowNormalBias=L.normalBias,R.shadowRadius=L.radius,R.shadowMapSize=L.mapSize,o.spotShadow[d]=R,o.spotShadowMap[d]=S,o.spotShadowMatrix[d]=b.shadow.matrix,g++}o.spot[d]=A,d++}else if(b.isRectAreaLight){var C=i.get(b);C.color.copy(x).multiplyScalar(M),C.halfWidth.set(.5*b.width,0,0),C.halfHeight.set(0,.5*b.height,0),o.rectArea[h]=C,h++}else if(b.isPointLight){var j=i.get(b);if(j.color.copy(b.color).multiplyScalar(b.intensity),j.distance=b.distance,j.decay=b.decay,b.castShadow){var k=b.shadow,N=a.get(b);N.shadowBias=k.bias,N.shadowNormalBias=k.normalBias,N.shadowRadius=k.radius,N.shadowMapSize=k.mapSize,N.shadowCameraNear=k.camera.near,N.shadowCameraFar=k.camera.far,o.pointShadow[f]=N,o.pointShadowMap[f]=S,o.pointShadowMatrix[f]=b.shadow.matrix,m++}o.point[f]=j,f++}else if(b.isHemisphereLight){var I=i.get(b);I.skyColor.copy(b.color).multiplyScalar(M),I.groundColor.copy(b.groundColor).multiplyScalar(M),o.hemi[p]=I,p++}}h>0&&(t.isWebGL2?(o.rectAreaLTC1=Fl.LTC_FLOAT_1,o.rectAreaLTC2=Fl.LTC_FLOAT_2):!0===e.has("OES_texture_float_linear")?(o.rectAreaLTC1=Fl.LTC_FLOAT_1,o.rectAreaLTC2=Fl.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=Fl.LTC_HALF_1,o.rectAreaLTC2=Fl.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=r,o.ambient[1]=s,o.ambient[2]=u;var D=o.hash;D.directionalLength===l&&D.pointLength===f&&D.spotLength===d&&D.rectAreaLength===h&&D.hemiLength===p&&D.numDirectionalShadows===v&&D.numPointShadows===m&&D.numSpotShadows===g||(o.directional.length=l,o.spot.length=d,o.rectArea.length=h,o.point.length=f,o.hemi.length=p,o.directionalShadow.length=v,o.directionalShadowMap.length=v,o.pointShadow.length=m,o.pointShadowMap.length=m,o.spotShadow.length=g,o.spotShadowMap.length=g,o.directionalShadowMatrix.length=v,o.pointShadowMatrix.length=m,o.spotShadowMatrix.length=g,D.directionalLength=l,D.pointLength=f,D.spotLength=d,D.rectAreaLength=h,D.hemiLength=p,D.numDirectionalShadows=v,D.numPointShadows=m,D.numSpotShadows=g,o.version=nf++)}function r(e,t){for(var n=0,r=0,i=0,a=0,s=0,f=t.matrixWorldInverse,d=0,h=e.length;d<h;d++){var p=e[d];if(p.isDirectionalLight){var v=o.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),u.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(u),v.direction.transformDirection(f),n++}else if(p.isSpotLight){var m=o.spot[i];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(f),m.direction.setFromMatrixPosition(p.matrixWorld),u.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(u),m.direction.transformDirection(f),i++}else if(p.isRectAreaLight){var g=o.rectArea[a];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(f),l.identity(),c.copy(p.matrixWorld),c.premultiply(f),l.extractRotation(c),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),a++}else if(p.isPointLight){var y=o.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(f),r++}else if(p.isHemisphereLight){var _=o.hemi[s];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(f),_.direction.normalize(),s++}}}for(var i=new Tt,a=Et(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},s=0;s<9;s++)o.probe.push(new Iu);var u=new Iu,c=new cc,l=new cc;return{setup:n,setupView:r,state:o}}function Lt(e,t){function n(){u.length=0,c.length=0}function r(e){u.push(e)}function i(e){c.push(e)}function a(){s.setup(u)}function o(e){s.setupView(u,e)}var s=new At(e,t),u=[],c=[];return{init:n,state:{lightsArray:u,shadowsArray:c,lights:s},setupLights:a,setupLightsView:o,pushLight:r,pushShadow:i}}function Rt(e,t){function n(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=void 0;return!1===i.has(n)?(a=new Lt(e,t),i.set(n,[]),i.get(n).push(a)):r>=i.get(n).length?(a=new Lt(e,t),i.get(n).push(a)):a=i.get(n)[r],a}function r(){i=new WeakMap}var i=new WeakMap;return{get:n,dispose:r}}function Ct(e){g.call(this),this.type="MeshDepthMaterial",this.depthPacking=mu,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function jt(e){g.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Iu,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}function kt(e,t,n){function r(n,r){var i=t.update(x);g.uniforms.shadow_pass.value=n.map.texture,g.uniforms.resolution.value=n.mapSize,g.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,g,x,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,y,x,null)}function i(e,t,n){var r=e<<0|t<<1|n<<2,i=h[r];return void 0===i&&(i=new Ct({depthPacking:gu,morphTargets:e,skinning:t}),h[r]=i),i}function a(e,t,n){var r=e<<0|t<<1|n<<2,i=p[r];return void 0===i&&(i=new jt({morphTargets:e,skinning:t}),p[r]=i),i}function o(t,n,r,o,s,u,c){var l=null,f=i,d=t.customDepthMaterial;if(!0===o.isPointLight&&(f=a,d=t.customDistanceMaterial),void 0===d){var h=!1;!0===r.morphTargets&&(h=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var p=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?p=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t));l=f(h,p,!0===t.isInstancedMesh)}else l=d;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var g=l.uuid,y=r.uuid,_=v[g];void 0===_&&(_={},v[g]=_);var b=_[y];void 0===b&&(b=l.clone(),_[y]=b),l=b}return l.visible=r.visible,l.wireframe=r.wireframe,l.side=c===Ga?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:m[r.side],l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,!0===o.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(o.matrixWorld),l.nearDistance=s,l.farDistance=u),l}function s(n,r,i,a,c){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&c===Ga)&&(!n.frustumCulled||u.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var l=t.update(n),f=n.material;if(Array.isArray(f))for(var d=l.groups,h=0,p=d.length;h<p;h++){var v=d[h],m=f[v.materialIndex];if(m&&m.visible){var g=o(n,l,m,a,i.near,i.far,c);e.renderBufferDirect(i,null,l,g,n,v)}}else if(f.visible){var y=o(n,l,f,a,i.near,i.far,c);e.renderBufferDirect(i,null,l,y,n,null)}}for(var _=n.children,b=0,x=_.length;b<x;b++)s(_[b],r,i,a,c)}}var u=new Dl,c=new Au,f=new Au,d=new ku,h=[],p=[],v={},m={0:Va,1:Ha,2:Wa},g=new B({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Au},radius:{value:4}},vertexShader:af,fragmentShader:rf}),y=g.clone();y.defines.HORIZONTAL_PASS=1;var b=new C;b.setAttribute("position",new _(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var x=new j(b,g),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fa,this.render=function(t,i,a){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==t.length){var o=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),v=e.state;v.setBlending(qa),v.buffers.color.setClear(1,1,1,1),v.buffers.depth.setTest(!0),v.setScissorTest(!1);for(var m=0,g=t.length;m<g;m++){var y=t[m],_=y.shadow;if(void 0!==_){if(!1!==_.autoUpdate||!1!==_.needsUpdate){c.copy(_.mapSize);var b=_.getFrameExtents();if(c.multiply(b),f.copy(_.mapSize),(c.x>n||c.y>n)&&(c.x>n&&(f.x=Math.floor(n/b.x),c.x=f.x*b.x,_.mapSize.x=f.x),c.y>n&&(f.y=Math.floor(n/b.y),c.y=f.y*b.y,_.mapSize.y=f.y)),null===_.map&&!_.isPointLightShadow&&this.type===Ga){var x={minFilter:Vo,magFilter:Vo,format:ss};_.map=new l(c.x,c.y,x),_.map.texture.name=y.name+".shadowMap",_.mapPass=new l(c.x,c.y,x),_.camera.updateProjectionMatrix()}if(null===_.map){var w={minFilter:Uo,magFilter:Uo,format:ss};_.map=new l(c.x,c.y,w),_.map.texture.name=y.name+".shadowMap",_.camera.updateProjectionMatrix()}e.setRenderTarget(_.map),e.clear();for(var S=_.getViewportCount(),P=0;P<S;P++){var T=_.getViewport(P);d.set(f.x*T.x,f.y*T.y,f.x*T.z,f.y*T.w),v.viewport(d),_.updateMatrices(y,P),u=_.getFrustum(),s(i,a,_.camera,y,this.type)}_.isPointLightShadow||this.type!==Ga||r(_,a),_.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",y,"has no shadow.")}M.needsUpdate=!1,e.setRenderTarget(o,h,p)}}}function Nt(e,t,n){function i(){var t=!1,n=new ku,r=null,i=new ku(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}}function a(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?u(2929):c(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case vo:e.depthFunc(512);break;case mo:e.depthFunc(519);break;case go:e.depthFunc(513);break;case yo:e.depthFunc(515);break;case _o:e.depthFunc(514);break;case bo:e.depthFunc(518);break;case xo:e.depthFunc(516);break;case Mo:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function o(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,f=null;return{setTest:function(e){t||(e?u(2960):c(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){f!==t&&(e.clearStencil(t),f=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,f=null}}}function s(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}function u(t){!0!==j[t]&&(e.enable(t),j[t]=!0)}function c(t){!1!==j[t]&&(e.disable(t),j[t]=!1)}function l(t){return k!==t&&(e.useProgram(t),k=t,!0)}function f(t,n,r,i,a,o,s,l){if(t===qa)return void(N&&(c(3042),N=!1));if(N||(u(3042),N=!0),t===Qa)a=a||n,o=o||r,s=s||i,n===D&&a===F||(e.blendEquationSeparate(ie[n],ie[a]),D=n,F=a),r===B&&i===z&&o===U&&s===G||(e.blendFuncSeparate(oe[r],oe[i],oe[o],oe[s]),B=r,z=i,U=o,G=s),I=t,H=null;else if(t!==I||l!==H){if(D===Ka&&F===Ka||(e.blendEquation(32774),D=Ka,F=Ka),l)switch(t){case Ya:e.blendFuncSeparate(1,771,1,771);break;case Xa:e.blendFunc(1,1);break;case Za:e.blendFuncSeparate(0,0,769,771);break;case Ja:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Ya:e.blendFuncSeparate(770,771,1,771);break;case Xa:e.blendFunc(770,1);break;case Za:e.blendFunc(0,769);break;case Ja:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}B=null,z=null,U=null,G=null,I=t,H=l}}function d(e,t){e.side===Wa?c(2884):u(2884);var n=e.side===Va;t&&(n=!n),h(n),e.blending===Ya&&!1===e.transparent?f(qa):f(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),R.setFunc(e.depthFunc),R.setTest(e.depthTest),R.setMask(e.depthWrite),L.setMask(e.colorWrite);var r=e.stencilWrite;C.setTest(r),r&&(C.setMask(e.stencilWriteMask),C.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),C.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),m(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function h(t){V!==t&&(t?e.frontFace(2304):e.frontFace(2305),V=t)}function p(t){t!==Da?(u(2884),t!==W&&(t===Ba?e.cullFace(1029):t===za?e.cullFace(1028):e.cullFace(1032))):c(2884),W=t}function v(t){t!==q&&(J&&e.lineWidth(t),q=t)}function m(t,n,r){t?(u(32823),Y===n&&X===r||(e.polygonOffset(n,r),Y=n,X=r)):c(32823)}function g(e){e?u(3089):c(3089)}function y(t){void 0===t&&(t=33984+Z-1),$!==t&&(e.activeTexture(t),$=t)}function _(t,n){null===$&&y();var r=ee[$];void 0===r&&(r={type:void 0,texture:void 0},ee[$]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||re[t]),r.type=t,r.texture=n)}function b(){var t=ee[$];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function x(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function M(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function w(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function S(t){!1===te.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),te.copy(t))}function P(t){!1===ne.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ne.copy(t))}function T(){j={},$=null,ee={},k=null,N=null,I=null,D=null,B=null,z=null,F=null,U=null,G=null,H=!1,V=null,W=null,q=null,Y=null,X=null,L.reset(),R.reset(),C.reset()}var E,O,A=n.isWebGL2,L=new i,R=new a,C=new o,j={},k=null,N=null,I=null,D=null,B=null,z=null,F=null,U=null,G=null,H=!1,V=null,W=null,q=null,Y=null,X=null,Z=e.getParameter(35661),J=!1,Q=0,K=e.getParameter(7938);-1!==K.indexOf("WebGL")?(Q=parseFloat(/^WebGL (\d)/.exec(K)[1]),J=Q>=1):-1!==K.indexOf("OpenGL ES")&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),J=Q>=2);var $=null,ee={},te=new ku,ne=new ku,re={};re[3553]=s(3553,3553,1),re[34067]=s(34067,34069,6),L.setClear(0,0,0,1),R.setClear(1),C.setClear(0),u(2929),R.setFunc(yo),h(!1),p(Ba),u(2884),f(qa);var ie=(E={},r(E,Ka,32774),r(E,$a,32778),r(E,eo,32779),E);if(A)ie[to]=32775,ie[no]=32776;else{var ae=t.get("EXT_blend_minmax");null!==ae&&(ie[to]=ae.MIN_EXT,ie[no]=ae.MAX_EXT)}var oe=(O={},r(O,ro,0),r(O,io,1),r(O,ao,768),r(O,so,770),r(O,po,776),r(O,fo,774),r(O,co,772),r(O,oo,769),r(O,uo,771),r(O,ho,775),r(O,lo,773),O);return{buffers:{color:L,depth:R,stencil:C},enable:u,disable:c,useProgram:l,setBlending:f,setMaterial:d,setFlipSided:h,setCullFace:p,setLineWidth:v,setPolygonOffset:m,setScissorTest:g,activeTexture:y,bindTexture:_,unbindTexture:b,compressedTexImage2D:x,texImage2D:M,texImage3D:w,scissor:S,viewport:P,reset:T}}function It(e,t,n,i,a,o,s){function u(e,t){return J?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function c(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Ou.floorPowerOfTwo:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===Z&&(Z=u(o,s));var c=n?u(o,s):Z;c.width=o,c.height=s;return c.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function l(e){return Ou.isPowerOfTwo(e.width)&&Ou.isPowerOfTwo(e.height)}function f(e){return!H&&(e.wrapS!==zo||e.wrapT!==zo||e.minFilter!==Uo&&e.minFilter!==Vo)}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==Uo&&e.minFilter!==Vo}function h(t,n,r,a){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function p(n,r,i){if(!1===H)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function v(e){return e===Uo||e===Go||e===Ho?9728:9729}function m(e){var t=e.target;t.removeEventListener("dispose",m),y(t),t.isVideoTexture&&X.delete(t),s.memory.textures--}function g(e){var t=e.target;t.removeEventListener("dispose",g),_(t),s.memory.textures--}function y(t){var n=i.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),i.remove(t))}function _(t){var n=i.get(t),r=i.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(t.texture),i.remove(t)}}function b(){Q=0}function x(){var e=Q;return e>=V&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+V),Q+=1,e}function M(e,t){var r=i.get(e);if(e.isVideoTexture&&B(e),e.version>0&&r.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void O(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function w(e,t){var r=i.get(e);if(e.version>0&&r.__version!==e.version)return void O(r,e,t);n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture)}function S(e,t){var r=i.get(e);if(e.version>0&&r.__version!==e.version)return void O(r,e,t);n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture)}function P(e,t){var r=i.get(e);if(e.version>0&&r.__version!==e.version)return void A(r,e,t);n.activeTexture(33984+t),n.bindTexture(34067,r.__webglTexture)}function T(n,r,o){o?(e.texParameteri(n,10242,K[r.wrapS]),e.texParameteri(n,10243,K[r.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,K[r.wrapR]),e.texParameteri(n,10240,$[r.magFilter]),e.texParameteri(n,10241,$[r.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),r.wrapS===zo&&r.wrapT===zo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,v(r.magFilter)),e.texParameteri(n,10241,v(r.minFilter)),r.minFilter!==Uo&&r.minFilter!==Vo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(r.type===$o&&null===t.get("OES_texture_float_linear"))return;if(r.type===es&&null===(H||t.get("OES_texture_half_float_linear")))return;(r.anisotropy>1||i.get(r).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,a.getMaxAnisotropy())),i.get(r).__currentAnisotropy=r.anisotropy)}}function E(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),s.memory.textures++)}function O(t,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),E(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var s=f(r)&&!1===l(r.image),u=c(r.image,s,!1,q),v=l(u)||H,m=o.convert(r.format),g=o.convert(r.type),y=p(r.internalFormat,m,g);T(a,r,v);var _=void 0,b=r.mipmaps;if(r.isDepthTexture)y=6402,H?y=r.type===$o?36012:r.type===Ko?33190:r.type===is?35056:33189:r.type===$o&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===fs&&6402===y&&r.type!==Jo&&r.type!==Ko&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Jo,g=o.convert(r.type)),r.format===ds&&6402===y&&(y=34041,r.type!==is&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=is,g=o.convert(r.type))),n.texImage2D(3553,0,y,u.width,u.height,0,m,g,null);else if(r.isDataTexture)if(b.length>0&&v){for(var x=0,M=b.length;x<M;x++)_=b[x],n.texImage2D(3553,x,y,_.width,_.height,0,m,g,_.data);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,y,u.width,u.height,0,m,g,u.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var w=0,S=b.length;w<S;w++)_=b[w],r.format!==ss&&r.format!==os?null!==m?n.compressedTexImage2D(3553,w,y,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,w,y,_.width,_.height,0,m,g,_.data);t.__maxMipLevel=b.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,y,u.width,u.height,u.depth,0,m,g,u.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,y,u.width,u.height,u.depth,0,m,g,u.data),t.__maxMipLevel=0;else if(b.length>0&&v){for(var P=0,O=b.length;P<O;P++)_=b[P],n.texImage2D(3553,P,y,m,g,_);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,y,m,g,u),t.__maxMipLevel=0;d(r,v)&&h(a,r,u.width,u.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function A(t,r,i){if(6===r.image.length){E(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY);for(var a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],f=0;f<6;f++)u[f]=a||s?s?r.image[f].image:r.image[f]:c(r.image[f],!1,!0,W);var v=u[0],m=l(v)||H,g=o.convert(r.format),y=o.convert(r.type),_=p(r.internalFormat,g,y);T(34067,r,m);var b=void 0;if(a){for(var x=0;x<6;x++){b=u[x].mipmaps;for(var M=0;M<b.length;M++){var w=b[M];r.format!==ss&&r.format!==os?null!==g?n.compressedTexImage2D(34069+x,M,_,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+x,M,_,w.width,w.height,0,g,y,w.data)}}t.__maxMipLevel=b.length-1}else{b=r.mipmaps;for(var S=0;S<6;S++)if(s){n.texImage2D(34069+S,0,_,u[S].width,u[S].height,0,g,y,u[S].data);for(var P=0;P<b.length;P++){var O=b[P],A=O.image[S].image;n.texImage2D(34069+S,P+1,_,A.width,A.height,0,g,y,A.data)}}else{n.texImage2D(34069+S,0,_,g,y,u[S]);for(var L=0;L<b.length;L++){var R=b[L];n.texImage2D(34069+S,L+1,_,g,y,R.image[S])}}t.__maxMipLevel=b.length}d(r,m)&&h(34067,r,v.width,v.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}}function L(t,r,a,s){var u=o.convert(r.texture.format),c=o.convert(r.texture.type),l=p(r.texture.internalFormat,u,c);n.texImage2D(s,0,l,r.width,r.height,0,u,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function R(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var a=n.depthTexture;a&&a.isDepthTexture&&(a.type===$o?i=36012:a.type===Ko&&(i=33190));var s=D(n);e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=D(n);e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var c=o.convert(n.texture.format),l=o.convert(n.texture.type),f=p(n.texture.internalFormat,c,l);if(r){var d=D(n);e.renderbufferStorageMultisample(36161,d,f,n.width,n.height)}else e.renderbufferStorage(36161,f,n.width,n.height)}e.bindRenderbuffer(36161,null)}function C(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),M(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===fs)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==ds)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}function j(t){var n=i.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");C(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),R(n.__webglDepthbuffer[a],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),R(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function k(t){var r=i.get(t),a=i.get(t.texture);t.addEventListener("dispose",g),a.__webglTexture=e.createTexture(),s.memory.textures++;var u=!0===t.isWebGLCubeRenderTarget,c=!0===t.isWebGLMultisampleRenderTarget,f=l(t)||H;if(!H||t.texture.format!==os||t.texture.type!==$o&&t.texture.type!==es||(t.texture.format=ss,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),u){r.__webglFramebuffer=[];for(var v=0;v<6;v++)r.__webglFramebuffer[v]=e.createFramebuffer()}else if(r.__webglFramebuffer=e.createFramebuffer(),c)if(H){r.__webglMultisampledFramebuffer=e.createFramebuffer(),r.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,r.__webglColorRenderbuffer);var m=o.convert(t.texture.format),y=o.convert(t.texture.type),_=p(t.texture.internalFormat,m,y),b=D(t);e.renderbufferStorageMultisample(36161,b,_,t.width,t.height),e.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(r.__webglDepthRenderbuffer=e.createRenderbuffer(),R(r.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,a.__webglTexture),T(34067,t.texture,f);for(var x=0;x<6;x++)L(r.__webglFramebuffer[x],t,36064,34069+x);d(t.texture,f)&&h(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,a.__webglTexture),T(3553,t.texture,f),L(r.__webglFramebuffer,t,36064,3553),d(t.texture,f)&&h(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&j(t)}function N(e){var t=e.texture;if(d(t,l(e)||H)){var r=e.isWebGLCubeRenderTarget?34067:3553,a=i.get(t).__webglTexture;n.bindTexture(r,a),h(r,t,e.width,e.height),n.bindTexture(r,null)}}function I(t){if(t.isWebGLMultisampleRenderTarget)if(H){var n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var r=t.width,a=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,r,a,0,0,r,a,o,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function D(e){return H&&e.isWebGLMultisampleRenderTarget?Math.min(Y,e.samples):0}function B(e){var t=s.render.frame;X.get(e)!==t&&(X.set(e,t),e.update())}function z(e,t){e&&e.isWebGLRenderTarget&&(!1===ee&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ee=!0),e=e.texture),M(e,t)}function F(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===te&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),te=!0),e=e.texture),P(e,t)}var U,G,H=a.isWebGL2,V=a.maxTextures,W=a.maxCubemapSize,q=a.maxTextureSize,Y=a.maxSamples,X=new WeakMap,Z=void 0,J=!1;try{J="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}var Q=0,K=(U={},r(U,Bo,10497),r(U,zo,33071),r(U,Fo,33648),U),$=(G={},r(G,Uo,9728),r(G,Go,9984),r(G,Ho,9986),r(G,Vo,9729),r(G,Wo,9985),r(G,qo,9987),G),ee=!1,te=!1;this.allocateTextureUnit=x,this.resetTextureUnits=b,this.setTexture2D=M,this.setTexture2DArray=w,this.setTexture3D=S,this.setTextureCube=P,this.setupRenderTarget=k,this.updateRenderTargetMipmap=N,this.updateMultisampleRenderTarget=I,this.safeSetTexture2D=z,this.safeSetTextureCube=F}function Dt(e,t,n){function r(e){var n=void 0;if(e===Yo)return 5121;if(e===ts)return 32819;if(e===ns)return 32820;if(e===rs)return 33635;if(e===Xo)return 5120;if(e===Zo)return 5122;if(e===Jo)return 5123;if(e===Qo)return 5124;if(e===Ko)return 5125;if(e===$o)return 5126;if(e===es)return i?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===as)return 6406;if(e===os)return 6407;if(e===ss)return 6408;if(e===us)return 6409;if(e===cs)return 6410;if(e===fs)return 6402;if(e===ds)return 34041;if(e===hs)return 6403;if(e===ps)return 36244;if(e===vs)return 33319;if(e===ms)return 33320;if(e===gs)return 36248;if(e===ys)return 36249;if(e===_s||e===bs||e===xs||e===Ms){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===_s)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===bs)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===xs)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Ms)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===ws||e===Ss||e===Ps||e===Ts){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===ws)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Ss)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Ps)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Ts)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Es)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===Os||e===As)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(e===Os)return n.COMPRESSED_RGB8_ETC2;if(e===As)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===Ls||e===Rs||e===Cs||e===js||e===ks||e===Ns||e===Is||e===Ds||e===Bs||e===zs||e===Fs||e===Us||e===Gs||e===Hs||e===Ws||e===qs||e===Ys||e===Xs||e===Zs||e===Js||e===Qs||e===Ks||e===$s||e===eu||e===tu||e===nu||e===ru||e===iu?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===Vs?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===is?i?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}var i=n.isWebGL2;return{convert:r}}function Bt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];F.call(this),this.cameras=e}function zt(){h.call(this),this.type="Group"}function Ft(){this._targetRay=null,this._grip=null,this._hand=null}function Ut(e,t){function n(e){var t=m.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function r(){m.forEach(function(e,t){e.disconnect(t)}),m.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),T.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function i(e){d=e,T.setContext(l),T.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}function a(e){for(var t=l.inputSources,n=0;n<v.length;n++)m.set(t[n],v[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],a=m.get(i);a&&(a.dispatchEvent({type:"disconnected",data:i}),m.delete(i))}for(var o=0;o<e.added.length;o++){var s=e.added[o],u=m.get(s);u&&u.dispatchEvent({type:"connected",data:s})}}function o(e,t,n){w.setFromMatrixPosition(t.matrixWorld),S.setFromMatrixPosition(n.matrixWorld);var r=w.distanceTo(S),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],f=(a[8]+1)/a[0],d=o*l,h=o*f,p=r/(-l+f),v=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=d-v,_=h+(r-v),b=u*s/g*m,x=c*s/g*m;e.projectionMatrix.makePerspective(y,_,b,x,m,g)}function s(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}function u(t,n){if(null!==(p=n.getViewerPose(d))){var r=p.views,i=l.renderState.baseLayer;e.setFramebuffer(i.framebuffer);var a=!1;r.length!==b.cameras.length&&(b.cameras.length=0,a=!0);for(var o=0;o<r.length;o++){var s=r[o],u=i.getViewport(s),c=_[o];c.matrix.fromArray(s.transform.matrix),c.projectionMatrix.fromArray(s.projectionMatrix),c.viewport.set(u.x,u.y,u.width,u.height),0===o&&b.matrix.copy(c.matrix),!0===a&&b.cameras.push(c)}}for(var f=l.inputSources,h=0;h<v.length;h++){var m=v[h],g=f[h];m.update(g,n,d)}P&&P(t,n)}var c=this,l=null,f=1,d=null,h="local-floor",p=null,v=[],m=new Map,g=new F;g.layers.enable(1),g.viewport=new ku;var y=new F;y.layers.enable(2),y.viewport=new ku;var _=[g,y],b=new Bt;b.layers.enable(1),b.layers.enable(2);var x=null,M=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=v[e];return void 0===t&&(t=new Ft,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){var t=v[e];return void 0===t&&(t=new Ft,v[e]=t),t.getGripSpace()},this.getHand=function(e){var t=v[e];return void 0===t&&(t=new Ft,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){f=e,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){h=e,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d},this.getSession=function(){return l},this.setSession=function(e){if(null!==(l=e)){l.addEventListener("select",n),l.addEventListener("selectstart",n),l.addEventListener("selectend",n),l.addEventListener("squeeze",n),l.addEventListener("squeezestart",n),l.addEventListener("squeezeend",n),l.addEventListener("end",r);var o=t.getContextAttributes();!0!==o.xrCompatible&&t.makeXRCompatible();var s={antialias:o.antialias,alpha:o.alpha,depth:o.depth,stencil:o.stencil,framebufferScaleFactor:f},u=new XRWebGLLayer(l,t,s);l.updateRenderState({baseLayer:u}),l.requestReferenceSpace(h).then(i),l.addEventListener("inputsourceschange",a)}};var w=new Iu,S=new Iu;this.getCamera=function(e){b.near=y.near=g.near=e.near,b.far=y.far=g.far=e.far,x===b.near&&M===b.far||(l.updateRenderState({depthNear:b.near,depthFar:b.far}),x=b.near,M=b.far);var t=e.parent,n=b.cameras;s(b,t);for(var r=0;r<n.length;r++)s(n[r],t);e.matrixWorld.copy(b.matrixWorld);for(var i=e.children,a=0,u=i.length;a<u;a++)i[a].updateMatrixWorld(!0);return 2===n.length?o(b,g,y):b.projectionMatrix.copy(g.projectionMatrix),b};var P=null,T=new W;T.setAnimationLoop(u),this.setAnimationLoop=function(e){P=e},this.dispose=function(){}}function Gt(e){function t(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function n(e,t,n,g){t.isMeshBasicMaterial?r(e,t):t.isMeshLambertMaterial?(r(e,t),u(e,t)):t.isMeshToonMaterial?(r(e,t),l(e,t)):t.isMeshPhongMaterial?(r(e,t),c(e,t)):t.isMeshStandardMaterial?(r(e,t),t.isMeshPhysicalMaterial?d(e,t):f(e,t)):t.isMeshMatcapMaterial?(r(e,t),h(e,t)):t.isMeshDepthMaterial?(r(e,t),p(e,t)):t.isMeshDistanceMaterial?(r(e,t),v(e,t)):t.isMeshNormalMaterial?(r(e,t),m(e,t)):t.isLineBasicMaterial?(i(e,t),t.isLineDashedMaterial&&a(e,t)):t.isPointsMaterial?o(e,t,n,g):t.isSpriteMaterial?s(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function r(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity);var a=void 0;n.map?a=n.map:n.specularMap?a=n.specularMap:n.displacementMap?a=n.displacementMap:n.normalMap?a=n.normalMap:n.bumpMap?a=n.bumpMap:n.roughnessMap?a=n.roughnessMap:n.metalnessMap?a=n.metalnessMap:n.alphaMap?a=n.alphaMap:n.emissiveMap?a=n.emissiveMap:n.clearcoatMap?a=n.clearcoatMap:n.clearcoatNormalMap?a=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(a=n.clearcoatRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uvTransform.value.copy(a.matrix));var o=void 0;n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function i(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}function a(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function o(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap);var i=void 0;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function s(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n=void 0;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function u(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function c(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Va&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Va&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function l(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Va&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Va&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function f(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===Va&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===Va&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}function d(e,t){f(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===Va&&e.clearcoatNormalScale.value.negate()),e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}function h(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Va&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Va&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function p(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function v(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function m(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Va&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Va&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function Ht(){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}function Vt(e){function t(){return null===I?ie:1}function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=y.getContext(r,t);if(null!==i)return i}return null}function r(){xe=new $(ye),Me=new J(ye,xe,e),!1===Me.isWebGL2&&(xe.get("WEBGL_depth_texture"),xe.get("OES_texture_float"),xe.get("OES_texture_half_float"),xe.get("OES_texture_half_float_linear"),xe.get("OES_standard_derivatives"),xe.get("OES_element_index_uint"),xe.get("OES_vertex_array_object"),xe.get("ANGLE_instanced_arrays")),xe.get("OES_texture_float_linear"),Fe=new Dt(ye,xe,Me),we=new Nt(ye,xe,Me),we.scissor(U.copy(le).multiplyScalar(ie).floor()),we.viewport(F.copy(ce).multiplyScalar(ie).floor()),Se=new ne(ye),Pe=new xt,Te=new It(ye,xe,we,Pe,Me,Fe,Se),Ee=new K(R),Oe=new q(ye,Me),Ue=new X(ye,xe,Oe,Me),Ae=new ee(ye,Oe,Se,Ue),Le=new oe(ye,Ae,Oe,Se),De=new ae(ye),Ne=new Q(Pe),Re=new bt(R,Ee,xe,Me,Ue,Ne),Ce=new Gt(Pe),je=new Pt(Pe),ke=new Rt(xe,Me),Ie=new Y(R,Ee,we,Le,S),Be=new Z(ye,xe,Se,Me),ze=new te(ye,xe,Se,Me),Se.programs=Re.programs,R.capabilities=Me,R.extensions=xe,R.properties=Pe,R.renderLists=je,R.state=we,R.info=Se}function i(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function a(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1,r()}function o(e){var t=e.target;t.removeEventListener("dispose",o),s(t)}function s(e){u(e),Pe.remove(e)}function u(e){var t=Pe.get(e).program;void 0!==t&&Re.releaseProgram(t)}function c(e,t){e.render(function(e){R.renderBufferImmediate(e,t)})}function l(e){Ge.isPresenting||Ve&&Ve(e)}function f(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)A.pushLight(e),e.castShadow&&A.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||de.intersectsSprite(e)){r&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ve);var i=Le.update(e),a=e.material;a.visible&&O.push(e,i,a,n,me.z,null)}}else if(e.isImmediateRenderObject)r&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ve),O.push(e,null,e.material,n,me.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Se.render.frame&&(e.skeleton.update(),e.skeleton.frame=Se.render.frame),!e.frustumCulled||de.intersectsObject(e))){r&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ve);var o=Le.update(e),s=e.material;if(Array.isArray(s))for(var u=o.groups,c=0,l=u.length;c<l;c++){var d=u[c],h=s[d.materialIndex];h&&h.visible&&O.push(e,o,h,n,me.z,d)}else s.visible&&O.push(e,o,s,n,me.z,null)}for(var p=e.children,v=0,m=p.length;v<m;v++)f(p[v],t,n,r)}}function d(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,c=null===r?o.material:r,l=o.group;if(n.isArrayCamera)for(var f=n.cameras,d=0,p=f.length;d<p;d++){var v=f[d];s.layers.test(v.layers)&&(we.viewport(F.copy(v.viewport)),A.setupLightsView(v),h(s,t,v,u,c,l))}else h(s,t,n,u,c,l)}}function h(e,t,n,r,i,a){if(e.onBeforeRender(R,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=v(n,t,i,e);we.setMaterial(i),Ue.reset(),c(e,o)}else R.renderBufferDirect(n,t,r,i,e,a);e.onAfterRender(R,t,n,r,i,a)}function p(e,t,n){!0!==t.isScene&&(t=ge);var r=Pe.get(e),i=A.state.lights,a=A.state.shadowsArray,s=i.state.version,c=Re.getParameters(e,i.state,a,t,n),l=Re.getProgramCacheKey(c),f=r.program,d=!0;if(void 0===f)e.addEventListener("dispose",o);else if(f.cacheKey!==l)u(e);else if(r.lightsStateVersion!==s)d=!1;else{if(void 0!==c.shaderID){var h=e.isMeshStandardMaterial?t.environment:null;return void(r.envMap=Ee.get(e.envMap||h))}d=!1}d&&(c.uniforms=Re.getUniforms(e),e.onBeforeCompile(c,R),f=Re.acquireProgram(c,l),r.program=f,r.uniforms=c.uniforms,r.outputEncoding=c.outputEncoding);var p=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=Ne.numPlanes,r.numIntersection=Ne.numIntersection,p.clippingPlanes=Ne.uniform),r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=Ee.get(e.envMap||r.environment),r.needsLights=g(e),r.lightsStateVersion=s,r.needsLights&&(p.ambientLightColor.value=i.state.ambient,p.lightProbe.value=i.state.probe,p.directionalLights.value=i.state.directional,p.directionalLightShadows.value=i.state.directionalShadow,p.spotLights.value=i.state.spot,p.spotLightShadows.value=i.state.spotShadow,p.rectAreaLights.value=i.state.rectArea,p.ltc_1.value=i.state.rectAreaLTC1,p.ltc_2.value=i.state.rectAreaLTC2,p.pointLights.value=i.state.point,p.pointLightShadows.value=i.state.pointShadow,p.hemisphereLights.value=i.state.hemi,p.directionalShadowMap.value=i.state.directionalShadowMap,p.directionalShadowMatrix.value=i.state.directionalShadowMatrix,p.spotShadowMap.value=i.state.spotShadowMap,p.spotShadowMatrix.value=i.state.spotShadowMatrix,p.pointShadowMap.value=i.state.pointShadowMap,p.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),m=Ze.seqWithValue(v.seq,p);r.uniformsList=m}function v(e,t,n,r){!0!==t.isScene&&(t=ge),Te.resetTextureUnits();var i=t.fog,a=n.isMeshStandardMaterial?t.environment:null,o=null===I?R.outputEncoding:I.texture.encoding,s=Ee.get(n.envMap||a),u=Pe.get(n),c=A.state.lights;if(!0===he&&(!0===pe||e!==z)){var l=e===z&&n.id===B;Ne.setState(n,e,l)}n.version===u.__version?n.fog&&u.fog!==i?p(n,t,r):u.environment!==a?p(n,t,r):u.needsLights&&u.lightsStateVersion!==c.state.version?p(n,t,r):void 0===u.numClippingPlanes||u.numClippingPlanes===Ne.numPlanes&&u.numIntersection===Ne.numIntersection?u.outputEncoding!==o?p(n,t,r):u.envMap!==s&&p(n,t,r):p(n,t,r):(p(n,t,r),u.__version=n.version);var f=!1,d=!1,h=!1,v=u.program,g=v.getUniforms(),y=u.uniforms;if(we.useProgram(v.program)&&(f=!0,d=!0,h=!0),n.id!==B&&(B=n.id,d=!0),f||z!==e){if(g.setValue(ye,"projectionMatrix",e.projectionMatrix),Me.logarithmicDepthBuffer&&g.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),z!==e&&(z=e,d=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var _=g.map.cameraPosition;void 0!==_&&_.setValue(ye,me.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&g.setValue(ye,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){g.setOptional(ye,r,"bindMatrix"),g.setOptional(ye,r,"bindMatrixInverse");var b=r.skeleton;if(b){var x=b.bones;if(Me.floatVertexTextures){if(null===b.boneTexture){var M=Math.sqrt(4*x.length);M=Ou.ceilPowerOfTwo(M),M=Math.max(M,4);var w=new Float32Array(M*M*4);w.set(b.boneMatrices);var S=new V(w,M,M,ss,$o);b.boneMatrices=w,b.boneTexture=S,b.boneTextureSize=M}g.setValue(ye,"boneTexture",b.boneTexture,Te),g.setValue(ye,"boneTextureSize",b.boneTextureSize)}else g.setOptional(ye,b,"boneMatrices")}}return(d||u.receiveShadow!==r.receiveShadow)&&(u.receiveShadow=r.receiveShadow,g.setValue(ye,"receiveShadow",r.receiveShadow)),d&&(g.setValue(ye,"toneMappingExposure",R.toneMappingExposure),u.needsLights&&m(y,h),i&&n.fog&&Ce.refreshFogUniforms(y,i),Ce.refreshMaterialUniforms(y,n,ie,re),Ze.upload(ye,u.uniformsList,y,Te)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Ze.upload(ye,u.uniformsList,y,Te),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(ye,"center",r.center),g.setValue(ye,"modelViewMatrix",r.modelViewMatrix),g.setValue(ye,"normalMatrix",r.normalMatrix),g.setValue(ye,"modelMatrix",r.matrixWorld),v}function m(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function g(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}e=e||{};var y=void 0!==e.canvas?e.canvas:Ht(),_=void 0!==e.context?e.context:null,b=void 0!==e.alpha&&e.alpha,x=void 0===e.depth||e.depth,M=void 0===e.stencil||e.stencil,w=void 0!==e.antialias&&e.antialias,S=void 0===e.premultipliedAlpha||e.premultipliedAlpha,P=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,T=void 0!==e.powerPreference?e.powerPreference:"default",E=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,O=null,A=null,L=[];this.domElement=y,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=uu,this.physicallyCorrectLights=!1,this.toneMapping=To,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var R=this,C=!1,j=null,k=0,N=0,I=null,D=null,B=-1,z=null,F=new ku,U=new ku,G=null,H=y.width,re=y.height,ie=1,se=null,ue=null,ce=new ku(0,0,H,re),le=new ku(0,0,H,re),fe=!1,de=new Dl,he=!1,pe=!1,ve=new cc,me=new Iu,ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ye=_;try{var _e={alpha:b,depth:x,stencil:M,antialias:w,premultipliedAlpha:S,preserveDrawingBuffer:P,powerPreference:T,failIfMajorPerformanceCaveat:E};if(y.addEventListener("webglcontextlost",i,!1),y.addEventListener("webglcontextrestored",a,!1),null===ye){var be=["webgl2","webgl","experimental-webgl"];if(!0===R.isWebGL1Renderer&&be.shift(),null===(ye=n(be,_e)))throw n(be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ye.getShaderPrecisionFormat&&(ye.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}var xe=void 0,Me=void 0,we=void 0,Se=void 0,Pe=void 0,Te=void 0,Ee=void 0,Oe=void 0,Ae=void 0,Le=void 0,Re=void 0,Ce=void 0,je=void 0,ke=void 0,Ne=void 0,Ie=void 0,De=void 0,Be=void 0,ze=void 0,Fe=void 0,Ue=void 0;r();var Ge=new Ut(R,ye);this.xr=Ge;var He=new kt(R,Le,Me.maxTextureSize);this.shadowMap=He,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){var e=xe.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=xe.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ie},this.setPixelRatio=function(e){void 0!==e&&(ie=e,this.setSize(H,re,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Au),e.set(H,re)},this.setSize=function(e,t,n){if(Ge.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");H=e,re=t,y.width=Math.floor(e*ie),y.height=Math.floor(t*ie),!1!==n&&(y.style.width=e+"px",y.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Au),e.set(H*ie,re*ie).floor()},this.setDrawingBufferSize=function(e,t,n){H=e,re=t,ie=n,y.width=Math.floor(e*n),y.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new ku),e.copy(F)},this.getViewport=function(e){return e.copy(ce)},this.setViewport=function(e,t,n,r){e.isVector4?ce.set(e.x,e.y,e.z,e.w):ce.set(e,t,n,r),we.viewport(F.copy(ce).multiplyScalar(ie).floor())},this.getScissor=function(e){return e.copy(le)},this.setScissor=function(e,t,n,r){e.isVector4?le.set(e.x,e.y,e.z,e.w):le.set(e,t,n,r),we.scissor(U.copy(le).multiplyScalar(ie).floor())},this.getScissorTest=function(){return fe},this.setScissorTest=function(e){we.setScissorTest(fe=e)},this.setOpaqueSort=function(e){se=e},this.setTransparentSort=function(e){ue=e},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new Kc),e.copy(Ie.getClearColor())},this.setClearColor=function(){Ie.setClearColor.apply(Ie,arguments)},this.getClearAlpha=function(){return Ie.getClearAlpha()},this.setClearAlpha=function(){Ie.setClearAlpha.apply(Ie,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ye.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){y.removeEventListener("webglcontextlost",i,!1),y.removeEventListener("webglcontextrestored",a,!1),je.dispose(),ke.dispose(),Pe.dispose(),Ee.dispose(),Le.dispose(),Ue.dispose(),Ge.dispose(),We.stop()},this.renderBufferImmediate=function(e,t){Ue.initAttributes();var n=Pe.get(e);e.hasPositions&&!n.position&&(n.position=ye.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ye.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ye.createBuffer()),e.hasColors&&!n.color&&(n.color=ye.createBuffer());var r=t.getAttributes();e.hasPositions&&(ye.bindBuffer(34962,n.position),ye.bufferData(34962,e.positionArray,35048),Ue.enableAttribute(r.position),ye.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(ye.bindBuffer(34962,n.normal),ye.bufferData(34962,e.normalArray,35048),Ue.enableAttribute(r.normal),ye.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(ye.bindBuffer(34962,n.uv),ye.bufferData(34962,e.uvArray,35048),Ue.enableAttribute(r.uv),ye.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(ye.bindBuffer(34962,n.color),ye.bufferData(34962,e.colorArray,35048),Ue.enableAttribute(r.color),ye.vertexAttribPointer(r.color,3,5126,!1,0,0)),Ue.disableUnusedAttributes(),ye.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,r,i,a,o){null===n&&(n=ge);var s=a.isMesh&&a.matrixWorld.determinant()<0,u=v(e,n,i,a);we.setMaterial(i,s);var c=r.index,l=r.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;var f=1;!0===i.wireframe&&(c=Ae.getWireframeAttribute(r),f=2),(i.morphTargets||i.morphNormals)&&De.update(a,r,i,u),Ue.setup(a,i,u,r,c);var d=void 0,h=Be;null!==c&&(d=Oe.get(c),h=ze,h.setIndex(d));var p=null!==c?c.count:l.count,m=r.drawRange.start*f,g=r.drawRange.count*f,y=null!==o?o.start*f:0,_=null!==o?o.count*f:1/0,b=Math.max(m,y),x=Math.min(p,m+g,y+_)-1,M=Math.max(0,x-b+1);if(0!==M){if(a.isMesh)!0===i.wireframe?(we.setLineWidth(i.wireframeLinewidth*t()),h.setMode(1)):h.setMode(4);else if(a.isLine){var w=i.linewidth;void 0===w&&(w=1),we.setLineWidth(w*t()),a.isLineSegments?h.setMode(1):a.isLineLoop?h.setMode(2):h.setMode(3)}else a.isPoints?h.setMode(0):a.isSprite&&h.setMode(4);if(a.isInstancedMesh)h.renderInstances(b,M,a.count);else if(r.isInstancedBufferGeometry){var S=Math.min(r.instanceCount,r._maxInstanceCount);h.renderInstances(b,M,S)}else h.render(b,M)}},this.compile=function(e,t){A=ke.get(e),A.init(),e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(A.pushLight(e),e.castShadow&&A.pushShadow(e))}),A.setupLights();var n=new WeakMap;e.traverse(function(t){var r=t.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){var a=r[i];!1===n.has(a)&&(p(a,e,t),n.set(a))}else!1===n.has(r)&&(p(r,e,t),n.set(r))})};var Ve=null,We=new W;We.setAnimationLoop(l),"undefined"!=typeof window&&We.setContext(window),this.setAnimationLoop=function(e){Ve=e,Ge.setAnimationLoop(e),null===e?We.stop():We.start()},this.render=function(e,t){var n=void 0,r=void 0;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0!==C){Ue.resetDefaultState(),B=-1,z=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===Ge.enabled&&!0===Ge.isPresenting&&(t=Ge.getCamera(t)),!0===e.isScene&&e.onBeforeRender(R,e,t,n||I),A=ke.get(e,L.length),A.init(),L.push(A),ve.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),de.setFromProjectionMatrix(ve),pe=this.localClippingEnabled,he=Ne.init(this.clippingPlanes,pe,t),O=je.get(e,t),O.init(),f(e,t,0,R.sortObjects),O.finish(),!0===R.sortObjects&&O.sort(se,ue),!0===he&&Ne.beginShadows();var i=A.state.shadowsArray;He.render(i,e,t),A.setupLights(),A.setupLightsView(t),!0===he&&Ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),Ie.render(O,e,t,r);var a=O.opaque,o=O.transparent;a.length>0&&d(a,e,t),o.length>0&&d(o,e,t),!0===e.isScene&&e.onAfterRender(R,e,t),null!==I&&(Te.updateRenderTargetMipmap(I),Te.updateMultisampleRenderTarget(I)),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1),L.pop(),A=L.length>0?L[L.length-1]:null,O=null}},this.setFramebuffer=function(e){j!==e&&null===I&&ye.bindFramebuffer(36160,e),j=e},this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return N},this.getRenderList=function(){return O},this.setRenderList=function(e){O=e},this.getRenderTarget=function(){return I},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;I=e,k=t,N=n,e&&void 0===Pe.get(e).__webglFramebuffer&&Te.setupRenderTarget(e);var r=j,i=!1;if(e){var a=Pe.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=a[t],i=!0):r=e.isWebGLMultisampleRenderTarget?Pe.get(e).__webglMultisampledFramebuffer:a,F.copy(e.viewport),U.copy(e.scissor),G=e.scissorTest}else F.copy(ce).multiplyScalar(ie).floor(),U.copy(le).multiplyScalar(ie).floor(),G=fe;if(D!==r&&(ye.bindFramebuffer(36160,r),D=r),we.viewport(F),we.scissor(U),we.setScissorTest(G),i){var o=Pe.get(e.texture);ye.framebufferTexture2D(36160,36064,34069+t,o.__webglTexture,n)}},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=Pe.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){var u=!1;s!==D&&(ye.bindFramebuffer(36160,s),u=!0);try{var c=e.texture,l=c.format,f=c.type;if(l!==ss&&Fe.convert(l)!==ye.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(f===Yo||Fe.convert(f)===ye.getParameter(35738)||f===$o&&(Me.isWebGL2||xe.get("OES_texture_float")||xe.get("WEBGL_color_buffer_float"))||f===es&&(Me.isWebGL2?xe.get("EXT_color_buffer_float"):xe.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ye.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ye.readPixels(t,n,r,i,Fe.convert(l),Fe.convert(f),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&ye.bindFramebuffer(36160,D)}}},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r),o=Fe.convert(t.format);Te.setTexture2D(t,0),ye.copyTexImage2D(3553,n,o,e.x,e.y,i,a,0),we.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=Fe.convert(n.format),s=Fe.convert(n.type);Te.setTexture2D(n,0),ye.pixelStorei(37440,n.flipY),ye.pixelStorei(37441,n.premultiplyAlpha),ye.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ye.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?ye.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ye.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&ye.generateMipmap(3553),we.unbindTexture()},this.initTexture=function(e){Te.setTexture2D(e,0),we.unbindTexture()},this.resetState=function(){we.reset(),Ue.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Wt(e){Vt.call(this,e)}function qt(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Mu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ou.generateUUID()}function Yt(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Xt(e){g.call(this),this.type="SpriteMaterial",this.color=new Kc(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}function Zt(e){if(h.call(this),this.type="Sprite",void 0===lf){lf=new C;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new qt(t,5);lf.setIndex([0,1,2,0,2,3]),lf.setAttribute("position",new Yt(n,3,0,!1)),lf.setAttribute("uv",new Yt(n,2,3,!1))}this.geometry=lf,this.material=void 0!==e?e:new Xt,this.center=new Au(.5,.5)}function Jt(e,t,n,r,i,a){pf.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(vf.x=a*pf.x-i*pf.y,vf.y=i*pf.x+a*pf.y):vf.copy(pf),e.copy(t),e.x+=vf.x,e.y+=vf.y,e.applyMatrix4(mf)}function Qt(){h.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Kt(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),j.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new cc,this.bindMatrixInverse=new cc}function $t(){h.call(this),this.type="Bone"}function en(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Ou.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}function tn(e,t,n){j.call(this,e,t),this.instanceMatrix=new _(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function nn(e){g.call(this),this.type="LineBasicMaterial",this.color=new Kc(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}function rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new nn;h.call(this),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}function an(e,t){rn.call(this,e,t),this.type="LineSegments"}function on(e,t){rn.call(this,e,t),this.type="LineLoop"}function sn(e){g.call(this),this.type="PointsMaterial",this.color=new Kc(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}function un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sn;h.call(this),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}function cn(e,t,n,r,i,a,o){var s=Vf.distanceSqToPoint(e);if(s<n){var u=new Iu;Vf.closestPointToPoint(e,u),u.applyMatrix4(r);var c=i.ray.origin.distanceTo(u);if(c<i.near||c>i.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}function ln(e,t,n,r,i,a,o,s,c){function l(){f.needsUpdate=!0,e.requestVideoFrameCallback(l)}u.call(this,e,t,n,r,i,a,o,s,c),this.format=void 0!==o?o:os,this.minFilter=void 0!==a?a:Vo,this.magFilter=void 0!==i?i:Vo,this.generateMipmaps=!1;var f=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(l)}function fn(e,t,n,r,i,a,o,s,c,l,f,d){u.call(this,null,a,o,s,c,l,r,i,f,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function dn(e,t,n,r,i,a,o,s,c){u.call(this,e,t,n,r,i,a,o,s,c),this.needsUpdate=!0}function hn(e,t,n,r,i,a,o,s,c,l){if((l=void 0!==l?l:fs)!==fs&&l!==ds)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===fs&&(n=Jo),void 0===n&&l===ds&&(n=is),u.call(this,null,r,i,a,o,s,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==o?o:Uo,this.minFilter=void 0!==s?s:Uo,this.flipY=!1,this.generateMipmaps=!1}function pn(){Object.defineProperty(this,"id",{value:Yf+=2}),this.uuid=Ou.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function vn(e,t,n,r,i){var a=void 0,o=void 0;if(i===Wn(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Gn(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Gn(a,e[a],e[a+1],o);return o&&kn(o,o.next)&&(Hn(o),o=o.next),o}function mn(e,t){if(!e)return e;t||(t=e);var n=e,r=void 0;do{if(r=!1,n.steiner||!kn(n,n.next)&&0!==jn(n.prev,n,n.next))n=n.next;else{if(Hn(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function gn(e,t,n,r,i,a,o){if(e){!o&&a&&En(e,r,i,a);for(var s=e,u=void 0,c=void 0;e.prev!==e.next;)if(u=e.prev,c=e.next,a?_n(e,r,i,a):yn(e))t.push(u.i/n),t.push(e.i/n),t.push(c.i/n),Hn(e),e=c.next,s=c.next;else if((e=c)===s){o?1===o?(e=bn(mn(e),t,n),gn(e,t,n,r,i,a,2)):2===o&&xn(e,t,n,r,i,a):gn(mn(e),t,n,r,i,a,1);break}}}function yn(e){var t=e.prev,n=e,r=e.next;if(jn(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Rn(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&jn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function _n(e,t,n,r){var i=e.prev,a=e,o=e.next;if(jn(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,l=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=An(s,u,t,n,r),d=An(c,l,t,n,r),h=e.prevZ,p=e.nextZ;h&&h.z>=f&&p&&p.z<=d;){if(h!==e.prev&&h!==e.next&&Rn(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&jn(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==e.prev&&p!==e.next&&Rn(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=f;){if(h!==e.prev&&h!==e.next&&Rn(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&jn(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&Rn(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function bn(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!kn(i,a)&&Nn(i,r,r.next,a)&&zn(i,a)&&zn(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Hn(r),Hn(r.next),r=e=a),r=r.next}while(r!==e);return mn(r)}function xn(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Cn(o,s)){var u=Un(o,s);return o=mn(o,o.next),u=mn(u,u.next),gn(o,t,n,r,i,a),void gn(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function Mn(e,t,n,r){var i=[],a=void 0,o=void 0,s=void 0,u=void 0,c=void 0;for(a=0,o=t.length;a<o;a++)s=t[a]*r,u=a<o-1?t[a+1]*r:e.length,c=vn(e,s,u,r,!1),c===c.next&&(c.steiner=!0),i.push(Ln(c));for(i.sort(wn),a=0;a<i.length;a++)Sn(i[a],n),n=mn(n,n.next);return n}function wn(e,t){return e.x-t.x}function Sn(e,t){if(t=Pn(e,t)){var n=Un(t,e);mn(t,t.next),mn(n,n.next)}}function Pn(e,t){var n=t,r=e.x,i=e.y,a=-1/0,o=void 0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var s=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o;var u=o,c=o.x,l=o.y,f=1/0,d=void 0;n=o;do{r>=n.x&&n.x>=c&&r!==n.x&&Rn(i<l?r:a,i,c,l,i<l?a:r,i,n.x,n.y)&&(d=Math.abs(i-n.y)/(r-n.x),zn(n,e)&&(d<f||d===f&&(n.x>o.x||n.x===o.x&&Tn(o,n)))&&(o=n,f=d)),n=n.next}while(n!==u);return o}function Tn(e,t){return jn(e.prev,e,t.prev)<0&&jn(t.next,e,e.next)<0}function En(e,t,n,r){var i=e;do{null===i.z&&(i.z=An(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,On(i)}function On(e){var t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1);return e}function An(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function Ln(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Rn(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Cn(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Bn(e,t)&&(zn(e,t)&&zn(t,e)&&Fn(e,t)&&(jn(e.prev,e,t.prev)||jn(e,t.prev,t))||kn(e,t)&&jn(e.prev,e,e.next)>0&&jn(t.prev,t,t.next)>0)}function jn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function kn(e,t){return e.x===t.x&&e.y===t.y}function Nn(e,t,n,r){var i=Dn(jn(e,t,n)),a=Dn(jn(e,t,r)),o=Dn(jn(n,r,e)),s=Dn(jn(n,r,t));return i!==a&&o!==s||(!(0!==i||!In(e,n,t))||(!(0!==a||!In(e,r,t))||(!(0!==o||!In(n,e,r))||!(0!==s||!In(n,t,r)))))}function In(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Dn(e){return e>0?1:e<0?-1:0}function Bn(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Nn(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function zn(e,t){return jn(e.prev,e,e.next)<0?jn(e,t,e.next)>=0&&jn(e,e.prev,t)>=0:jn(e,t,e.prev)<0||jn(e,e.next,t)<0}function Fn(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function Un(e,t){var n=new Vn(e.i,e.x,e.y),r=new Vn(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Gn(e,t,n,r){var i=new Vn(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Hn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Vn(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wn(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function qn(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Yn(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Xn(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Zn(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Jn(e,t,n){C.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r=[],i=[],a=[],o=[],s=new Iu,u=new Iu,c=new Iu,l=new Iu,f=new Iu;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var d=t+1,h=0;h<=n;h++)for(var p=h/n,v=0;v<=t;v++){var m=v/t;e(m,p,u),i.push(u.x,u.y,u.z),m-1e-5>=0?(e(m-1e-5,p,c),l.subVectors(u,c)):(e(m+1e-5,p,c),l.subVectors(c,u)),p-1e-5>=0?(e(m,p-1e-5,c),f.subVectors(u,c)):(e(m,p+1e-5,c),f.subVectors(c,u)),s.crossVectors(l,f).normalize(),a.push(s.x,s.y,s.z),o.push(m,p)}for(var g=0;g<n;g++)for(var y=0;y<t;y++){var _=g*d+y,b=g*d+y+1,x=(g+1)*d+y+1,M=(g+1)*d+y;r.push(_,b,M),r.push(b,x,M)}this.setIndex(r),this.setAttribute("position",new O(i,3)),this.setAttribute("normal",new O(a,3)),this.setAttribute("uv",new O(o,2))}function Qn(e,t,n){pn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Jn(e,t,n)),this.mergeVertices()}function Kn(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function $n(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function er(e){g.call(this),this.type="ShadowMaterial",this.color=new Kc(0),this.transparent=!0,this.setValues(e)}function tr(e){B.call(this,e),this.type="RawShaderMaterial"}function nr(e){g.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Kc(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function rr(e){nr.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Au(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Ou.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function ir(e){g.call(this),this.type="MeshPhongMaterial",this.color=new Kc(16777215),this.specular=new Kc(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ar(e){g.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Kc(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function or(e){g.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function sr(e){g.call(this),this.type="MeshLambertMaterial",this.color=new Kc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ur(e){g.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Kc(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Au(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function cr(e){nn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function lr(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function fr(e,t,n,r){lr.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function dr(e,t,n,r){lr.call(this,e,t,n,r)}function hr(e,t,n,r){lr.call(this,e,t,n,r)}function pr(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Vd.convertArray(t,this.TimeBufferType),this.values=Vd.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function vr(e,t,n){pr.call(this,e,t,n)}function mr(e,t,n,r){pr.call(this,e,t,n,r)}function gr(e,t,n,r){pr.call(this,e,t,n,r)}function yr(e,t,n,r){lr.call(this,e,t,n,r)}function _r(e,t,n,r){pr.call(this,e,t,n,r)}function br(e,t,n,r){pr.call(this,e,t,n,r)}function xr(e,t,n,r){pr.call(this,e,t,n,r)}function Mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:su;this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Ou.generateUUID(),this.duration<0&&this.resetDuration()}function wr(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gr;case"vector":case"vector2":case"vector3":case"vector4":return xr;case"color":return mr;case"quaternion":return _r;case"bool":case"boolean":return vr;case"string":return br}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Sr(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=wr(e.type);if(void 0===e.times){var n=[],r=[];Vd.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function Pr(e,t,n){var r=this,i=!1,a=0,o=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var r=u[t],i=u[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}}function Tr(e){this.manager=void 0!==e?e:qd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}function Er(e){Tr.call(this,e)}function Or(e){Tr.call(this,e)}function Ar(e){Tr.call(this,e)}function Lr(e){Tr.call(this,e)}function Rr(e){Tr.call(this,e)}function Cr(e){Tr.call(this,e)}function jr(e){Tr.call(this,e)}function kr(){this.type="Curve",this.arcLengthDivisions=200}function Nr(e,t,n,r,i,a,o,s){kr.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Ir(e,t,n,r,i,a){Nr.call(this,e,t,n,n,r,i,a),this.type="ArcCurve"}function Dr(){function e(e,a,o,s){t=e,n=o,r=-3*e+3*a-2*o-s,i=2*e-2*a+o+s}var t=0,n=0,r=0,i=0;return{initCatmullRom:function(t,n,r,i,a){e(n,r,a*(r-t),a*(i-n))},initNonuniformCatmullRom:function(t,n,r,i,a,o,s){var u=(n-t)/a-(r-t)/(a+o)+(r-n)/o,c=(r-n)/o-(i-n)/(o+s)+(i-r)/s;u*=o,c*=o,e(n,r,u,c)},calc:function(e){var a=e*e;return t+n*e+r*a+i*(a*e)}}}function Br(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;kr.call(this),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}function zr(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function Fr(e,t){var n=1-e;return n*n*t}function Ur(e,t){return 2*(1-e)*e*t}function Gr(e,t){return e*e*t}function Hr(e,t,n,r){return Fr(e,t)+Ur(e,n)+Gr(e,r)}function Vr(e,t){var n=1-e;return n*n*n*t}function Wr(e,t){var n=1-e;return 3*n*n*e*t}function qr(e,t){return 3*(1-e)*e*e*t}function Yr(e,t){return e*e*e*t}function Xr(e,t,n,r,i){return Vr(e,t)+Wr(e,n)+qr(e,r)+Yr(e,i)}function Zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Au,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Au,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Au,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Au;kr.call(this),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}function Jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Iu,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Iu,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Iu;kr.call(this),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Au,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Au;kr.call(this),this.type="LineCurve",this.v1=e,this.v2=t}function Kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Iu;kr.call(this),this.type="LineCurve3",this.v1=e,this.v2=t}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Au,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Au,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Au;kr.call(this),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}function ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Iu,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Iu;kr.call(this),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];kr.call(this),this.type="SplineCurve",this.points=e}function ni(){kr.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ri(e){ni.call(this),this.type="Path",this.currentPoint=new Au,e&&this.setFromPoints(e)}function ii(e){ri.call(this,e),this.uuid=Ou.generateUUID(),this.type="Shape",this.holes=[]}function ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;h.call(this),this.type="Light",this.color=new Kc(e),this.intensity=t}function oi(e,t,n){ai.call(this,e,n),this.type="HemisphereLight",this.position.copy(h.DefaultUp),this.updateMatrix(),this.groundColor=new Kc(t)}function si(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Au(512,512),this.map=null,this.mapPass=null,this.matrix=new cc,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Dl,this._frameExtents=new Au(1,1),this._viewportCount=1,this._viewports=[new ku(0,0,1,1)]}function ui(){si.call(this,new F(50,1,.5,500)),this.focus=1}function ci(e,t,n,r,i,a){ai.call(this,e,t),this.type="SpotLight",this.position.copy(h.DefaultUp),this.updateMatrix(),this.target=new h,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new ui}function li(){si.call(this,new F(90,1,.5,500)),this._frameExtents=new Au(4,2),this._viewportCount=6,this._viewports=[new ku(2,1,1,1),new ku(0,1,1,1),new ku(3,1,1,1),new ku(1,1,1,1),new ku(3,0,1,1),new ku(1,0,1,1)],this._cubeDirections=[new Iu(1,0,0),new Iu(-1,0,0),new Iu(0,0,1),new Iu(0,0,-1),new Iu(0,1,0),new Iu(0,-1,0)],this._cubeUps=[new Iu(0,1,0),new Iu(0,1,0),new Iu(0,1,0),new Iu(0,1,0),new Iu(0,0,1),new Iu(0,0,-1)]}function fi(e,t,n,r){ai.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new li}function di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;z.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}function hi(){si.call(this,new di(-5,5,5,-5,.5,500))}function pi(e,t){ai.call(this,e,t),this.type="DirectionalLight",this.position.copy(h.DefaultUp),this.updateMatrix(),this.target=new h,this.shadow=new hi}function vi(e,t){ai.call(this,e,t),this.type="AmbientLight"}function mi(e,t,n,r){ai.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function gi(e,t){ai.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new $d}function yi(e){Tr.call(this,e),this.textures={}}function _i(){C.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function bi(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),_.call(this,e,t,n),this.meshPerAttribute=r||1}function xi(e){Tr.call(this,e)}function Mi(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Tr.call(this,e),this.options={premultiplyAlpha:"none"}}function wi(){this.type="ShapePath",this.color=new Kc,this.subPaths=[],this.currentPath=null}function Si(e){this.type="Font",this.data=e}function Pi(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,u=0,c=0;c<r.length;c++){var l=r[c];if("\n"===l)s=0,u-=a;else{var f=Ti(l,i,s,u,n);s+=f.offsetX,o.push(f.path)}}return o}function Ti(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(!a)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");var o=new wi,s=void 0,u=void 0,c=void 0,l=void 0,f=void 0,d=void 0,h=void 0,p=void 0;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),m=0,g=v.length;m<g;){var y=v[m++];switch(y){case"m":s=v[m++]*t+n,u=v[m++]*t+r,o.moveTo(s,u);break;case"l":s=v[m++]*t+n,u=v[m++]*t+r,o.lineTo(s,u);break;case"q":c=v[m++]*t+n,l=v[m++]*t+r,f=v[m++]*t+n,d=v[m++]*t+r,o.quadraticCurveTo(f,d,c,l);break;case"b":c=v[m++]*t+n,l=v[m++]*t+r,f=v[m++]*t+n,d=v[m++]*t+r,h=v[m++]*t+n,p=v[m++]*t+r,o.bezierCurveTo(f,d,h,p,c,l)}}return{offsetX:a.ha*t,path:o}}function Ei(e){Tr.call(this,e)}function Oi(e){Tr.call(this,e)}function Ai(e,t,n){gi.call(this,void 0,n);var r=(new Kc).set(e),i=(new Kc).set(t),a=new Iu(r.r,r.g,r.b),o=new Iu(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(u)}function Li(e,t){gi.call(this,void 0,t);var n=(new Kc).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Ri(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new F,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new F,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Ci(){return("undefined"==typeof performance?Date:performance).now()}function ji(e,t,n){this.binding=e,this.valueSize=n;var r=void 0,i=void 0,a=void 0;switch(t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}function ki(e,t,n){var r=n||Ni.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Ni(e,t,n){this.path=t,this.parsedPath=n||Ni.parseTrackName(t),this.node=Ni.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ii(){this.uuid=Ou.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Di(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Bi(e,t,n){qt.call(this,e,t),this.meshPerAttribute=n||1}function zi(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function Fi(e,t,n,r){this.ray=new uc(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new bc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ui(e,t){return e.distance-t.distance}function Gi(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)Gi(i[a],t,n,!0)}function Hi(e){h.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}function Vi(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Vi(e.children[n]));return t}function Wi(e,t,n,r,i,a,o){ip.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),c=0,l=s.length;c<l;c++)u.setXYZ(s[c],ip.x,ip.y,ip.z)}function qi(e){return void 0!==e&&e.type===Yo&&(e.encoding===uu||e.encoding===cu||e.encoding===lu)}function Yi(e){var t=new l(3*xp,3*xp,e);return t.texture.mapping=Io,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Xi(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Zi(e){return new tr({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(e)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new Iu(0,1,0)},inputEncoding:{value:Pp[uu]},outputEncoding:{value:Pp[uu]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:qa,depthTest:!1,depthWrite:!1})}function Ji(){return new tr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Au(1,1)},inputEncoding:{value:Pp[uu]},outputEncoding:{value:Pp[uu]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:qa,depthTest:!1,depthWrite:!1})}function Qi(){return new tr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Pp[uu]},outputEncoding:{value:Pp[uu]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:qa,depthTest:!1,depthWrite:!1})}function Ki(e,t,n,r,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new $c(e,t,n,i,a,o)}function $i(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function ea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function ta(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new un(e,t)}function na(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Zt(e)}function ra(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new un(e,t)}function ia(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new sn(e)}function aa(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new sn(e)}function oa(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new sn(e)}function sa(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Iu(e,t,n)}function ua(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new _(e,t).setUsage(wu)}function ca(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new b(e,t)}function la(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new x(e,t)}function fa(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new M(e,t)}function da(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new w(e,t)}function ha(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new S(e,t)}function pa(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new P(e,t)}function va(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new T(e,t)}function ma(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new O(e,t)}function ga(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new A(e,t)}function ya(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Br.call(this,e),this.type="catmullrom",this.closed=!0}function _a(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Br.call(this,e),this.type="catmullrom"}function ba(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Br.call(this,e),this.type="catmullrom"}function xa(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new vp(e)}function Ma(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new up(e,t)}function wa(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new an(new fd(e.geometry),new nn({color:void 0!==t?t:16777215}))}function Sa(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new an(new Ud(e.geometry),new nn({color:void 0!==t?t:16777215}))}function Pa(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Er(e)}function Ta(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Cr(e)}function Ea(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new H(e,n)}function Oa(){console.error("THREE.CanvasRenderer has been removed")}function Aa(){console.error("THREE.JSONLoader has been removed.")}function La(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}Object.defineProperty(t,"__esModule",{value:!0});var Ra,Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ja=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},ka=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Na={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ia={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Da=0,Ba=1,za=2,Fa=1,Ua=2,Ga=3,Ha=0,Va=1,Wa=2,qa=0,Ya=1,Xa=2,Za=3,Ja=4,Qa=5,Ka=100,$a=101,eo=102,to=103,no=104,ro=200,io=201,ao=202,oo=203,so=204,uo=205,co=206,lo=207,fo=208,ho=209,po=210,vo=0,mo=1,go=2,yo=3,_o=4,bo=5,xo=6,Mo=7,wo=0,So=1,Po=2,To=0,Eo=1,Oo=2,Ao=3,Lo=4,Ro=5,Co=301,jo=302,ko=303,No=304,Io=306,Do=307,Bo=1e3,zo=1001,Fo=1002,Uo=1003,Go=1004,Ho=1005,Vo=1006,Wo=1007,qo=1008,Yo=1009,Xo=1010,Zo=1011,Jo=1012,Qo=1013,Ko=1014,$o=1015,es=1016,ts=1017,ns=1018,rs=1019,is=1020,as=1021,os=1022,ss=1023,us=1024,cs=1025,ls=ss,fs=1026,ds=1027,hs=1028,ps=1029,vs=1030,ms=1031,gs=1032,ys=1033,_s=33776,bs=33777,xs=33778,Ms=33779,ws=35840,Ss=35841,Ps=35842,Ts=35843,Es=36196,Os=37492,As=37496,Ls=37808,Rs=37809,Cs=37810,js=37811,ks=37812,Ns=37813,Is=37814,Ds=37815,Bs=37816,zs=37817,Fs=37818,Us=37819,Gs=37820,Hs=37821,Vs=36492,Ws=37840,qs=37841,Ys=37842,Xs=37843,Zs=37844,Js=37845,Qs=37846,Ks=37847,$s=37848,eu=37849,tu=37850,nu=37851,ru=37852,iu=37853,au=2201,ou=2400,su=2500,uu=3e3,cu=3001,lu=3007,fu=3002,du=3003,hu=3004,pu=3005,vu=3006,mu=3200,gu=3201,yu=0,_u=1,bu=7680,xu=519,Mu=35044,wu=35048,Su="300 es";Object.assign(s.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=n.slice(0),i=0,a=r.length;i<a;i++)r[i].call(this,e)}}}});for(var Pu=[],Tu=0;Tu<256;Tu++)Pu[Tu]=(Tu<16?"0":"")+Tu.toString(16);var Eu=1234567,Ou={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Pu[255&e]+Pu[e>>8&255]+Pu[e>>16&255]+Pu[e>>24&255]+"-"+Pu[255&t]+Pu[t>>8&255]+"-"+Pu[t>>16&15|64]+Pu[t>>24&255]+"-"+Pu[63&n|128]+Pu[n>>8&255]+"-"+Pu[n>>16&255]+Pu[n>>24&255]+Pu[255&r]+Pu[r>>8&255]+Pu[r>>16&255]+Pu[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Eu=e%2147483647),((Eu=16807*Eu%2147483647)-1)/2147483646},degToRad:function(e){return e*Ou.DEG2RAD},radToDeg:function(e){return e*Ou.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),c=a((t+r)/2),l=o((t+r)/2),f=a((t-r)/2),d=o((t-r)/2),h=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*l,u*f,u*d,s*c);break;case"YZY":e.set(u*d,s*l,u*f,s*c);break;case"ZXZ":e.set(u*f,u*d,s*l,s*c);break;case"XZX":e.set(s*l,u*p,u*h,s*c);break;case"YXY":e.set(u*h,s*l,u*p,s*c);break;case"ZYZ":e.set(u*p,u*h,s*l,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}},Au=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,e),Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=n}return ka(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}}]),e}(),Lu=function(){function e(){o(this,e),Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return ka(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],c=n[4],l=n[7],f=n[2],d=n[5],h=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],_=r[7],b=r[2],x=r[5],M=r[8];return i[0]=a*p+o*g+s*b,i[3]=a*v+o*y+s*x,i[6]=a*m+o*_+s*M,i[1]=u*p+c*g+l*b,i[4]=u*v+c*y+l*x,i[7]=u*m+c*_+l*M,i[2]=f*p+d*g+h*b,i[5]=f*v+d*y+h*x,i[8]=f*m+d*_+h*M,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-n*i*c+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=c*a-o*u,f=o*s-c*i,d=u*i-a*s,h=t*l+n*f+r*d;if(0===h)return this.set(0,0,0,0,0,0,0,0,0);var p=1/h;return e[0]=l*p,e[1]=(r*u-c*n)*p,e[2]=(o*n-r*a)*p,e[3]=f*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=d*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e=void 0,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*u,r[6]=t*o+n*c,r[1]=-n*i+t*s,r[4]=-n*a+t*u,r[7]=-n*o+t*c,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}]),e}(),Ru=void 0,Cu={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t=void 0;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ru&&(Ru=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ru.width=e.width,Ru.height=e.height;var n=Ru.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ru}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},ju=0;u.DEFAULT_IMAGE=void 0,u.DEFAULT_MAPPING=300,u.prototype=Object.assign(Object.create(s.prototype),{constructor:u,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Ou.generateUUID()),!t&&void 0===e.images[r.uuid]){var i=void 0;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(c(r[a].image)):i.push(c(r[a]))}else i=c(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Bo:e.x=e.x-Math.floor(e.x);break;case zo:e.x=e.x<0?0:1;break;case Fo:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Bo:e.y=e.y-Math.floor(e.y);break;case zo:e.y=e.y<0?0:1;break;case Fo:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(u.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});var ku=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;o(this,e),Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=n,this.z=r,this.w=i}return ka(e,[{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,a=e.elements,o=a[0],s=a[4],u=a[8],c=a[1],l=a[5],f=a[9],d=a[2],h=a[6],p=a[10];if(Math.abs(s-c)<.01&&Math.abs(u-d)<.01&&Math.abs(f-h)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+d)<.1&&Math.abs(f+h)<.1&&Math.abs(o+l+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var v=(o+1)/2,m=(l+1)/2,g=(p+1)/2,y=(s+c)/4,_=(u+d)/4,b=(f+h)/4;return v>m&&v>g?v<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(v),r=y/n,i=_/n):m>g?m<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(m),n=y/r,i=b/r):g<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=_/i,r=b/i),this.set(n,r,i,t),this}var x=Math.sqrt((h-f)*(h-f)+(u-d)*(u-d)+(c-s)*(c-s));return Math.abs(x)<.001&&(x=1),this.x=(h-f)/x,this.y=(u-d)/x,this.z=(c-s)/x,this.w=Math.acos((o+l+p-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}}]),e}();l.prototype=Object.assign(Object.create(s.prototype),{constructor:l,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),f.prototype=Object.assign(Object.create(l.prototype),{constructor:f,isWebGLMultisampleRenderTarget:!0,copy:function(e){return l.prototype.copy.call(this,e),this.samples=e.samples,this}});var Nu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;o(this,e),Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=n,this._z=r,this._w=i}return ka(e,[{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),c=o(r/2),l=o(i/2),f=s(n/2),d=s(r/2),h=s(i/2);switch(a){case"XYZ":this._x=f*c*l+u*d*h,this._y=u*d*l-f*c*h,this._z=u*c*h+f*d*l,this._w=u*c*l-f*d*h;break;case"YXZ":this._x=f*c*l+u*d*h,this._y=u*d*l-f*c*h,this._z=u*c*h-f*d*l,this._w=u*c*l+f*d*h;break;case"ZXY":this._x=f*c*l-u*d*h,this._y=u*d*l+f*c*h,this._z=u*c*h+f*d*l,this._w=u*c*l-f*d*h;break;case"ZYX":this._x=f*c*l-u*d*h,this._y=u*d*l+f*c*h,this._z=u*c*h-f*d*l,this._w=u*c*l+f*d*h;break;case"YZX":this._x=f*c*l+u*d*h,this._y=u*d*l+f*c*h,this._z=u*c*h-f*d*l,this._w=u*c*l-f*d*h;break;case"XZY":this._x=f*c*l-u*d*h,this._y=u*d*l-f*c*h,this._z=u*c*h+f*d*l,this._w=u*c*l+f*d*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],c=t[6],l=t[10],f=n+o+l;if(f>0){var d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-s)*d,this._y=(i-u)*d,this._z=(a-r)*d}else if(n>o&&n>l){var h=2*Math.sqrt(1+n-o-l);this._w=(c-s)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(i+u)/h}else if(o>l){var p=2*Math.sqrt(1+o-n-l);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+c)/p}else{var v=2*Math.sqrt(1+l-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+c)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Ou.clamp(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+a*o+r*u-i*s,this._y=r*c+a*s+i*o-n*u,this._z=i*c+a*u+n*s-r*o,this._w=a*c-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,o),f=Math.sin((1-t)*l)/c,d=Math.sin(t*l)/c;return this._w=a*f+this._w*d,this._x=n*f+this._x*d,this._y=r*f+this._y*d,this._z=i*f+this._z*d,this._onChangeCallback(),this}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}],[{key:"slerp",value:function(e,t,n,r){return n.copy(e).slerp(t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],f=i[a+0],d=i[a+1],h=i[a+2],p=i[a+3];if(l!==p||s!==f||u!==d||c!==h){var v=1-o,m=s*f+u*d+c*h+l*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,m*g);v=Math.sin(v*b)/_,o=Math.sin(o*b)/_}var x=o*g;if(s=s*v+f*x,u=u*v+d*x,c=c*v+h*x,l=l*v+p*x,v===1-o){var M=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=M,u*=M,c*=M,l*=M}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],c=n[r+3],l=i[a],f=i[a+1],d=i[a+2],h=i[a+3];return e[t]=o*h+c*l+s*d-u*f,e[t+1]=s*h+c*f+u*l-o*d,e[t+2]=u*h+c*d+o*f-s*l,e[t+3]=c*h-o*l-s*f-u*d,e}}]),e}(),Iu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,e),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=n,this.z=r}return ka(e,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Bu.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Bu.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,c=s*n+o*t-i*r,l=s*r+i*n-a*t,f=-i*t-a*n-o*r;return this.x=u*s+f*-i+c*-o-l*-a,this.y=c*s+f*-a+l*-i-u*-o,this.z=l*s+f*-o+u*-a-c*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Du.copy(this).projectOnVector(e),this.sub(Du)}},{key:"reflect",value:function(e){return this.sub(Du.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Ou.clamp(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),e}(),Du=new Iu,Bu=new Nu,zu=function(){function e(t,n){o(this,e),Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new Iu(1/0,1/0,1/0),this.max=void 0!==n?n:new Iu(-1/0,-1/0,-1/0)}return ka(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],f=e[s+2];c<t&&(t=c),l<n&&(n=l),f<r&&(r=f),c>i&&(i=c),l>a&&(a=l),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),f=e.getZ(s);c<t&&(t=c),l<n&&(n=l),f<r&&(r=f),c>i&&(i=c),l>a&&(a=l),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Uu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Iu),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Iu),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Gu.copy(t.boundingBox),Gu.applyMatrix4(e.matrixWorld),this.union(Gu));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Iu),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Uu),Uu.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t=void 0,n=void 0;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Zu),Ju.subVectors(this.max,Zu),Hu.subVectors(e.a,Zu),Vu.subVectors(e.b,Zu),Wu.subVectors(e.c,Zu),qu.subVectors(Vu,Hu),Yu.subVectors(Wu,Vu),Xu.subVectors(Hu,Wu);var t=[0,-qu.z,qu.y,0,-Yu.z,Yu.y,0,-Xu.z,Xu.y,qu.z,0,-qu.x,Yu.z,0,-Yu.x,Xu.z,0,-Xu.x,-qu.y,qu.x,0,-Yu.y,Yu.x,0,-Xu.y,Xu.x,0];return!!d(t,Hu,Vu,Wu,Ju)&&(t=[1,0,0,0,1,0,0,0,1],!!d(t,Hu,Vu,Wu,Ju)&&(Qu.crossVectors(qu,Yu),t=[Qu.x,Qu.y,Qu.z],d(t,Hu,Vu,Wu,Ju)))}},{key:"clampPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Iu),t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Uu.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Uu).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()?this:(Fu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fu),this)}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Fu=[new Iu,new Iu,new Iu,new Iu,new Iu,new Iu,new Iu,new Iu],Uu=new Iu,Gu=new zu,Hu=new Iu,Vu=new Iu,Wu=new Iu,qu=new Iu,Yu=new Iu,Xu=new Iu,Zu=new Iu,Ju=new Iu,Qu=new Iu,Ku=new Iu,$u=new zu,ec=function(){function e(t,n){o(this,e),this.center=void 0!==t?t:new Iu,this.radius=void 0!==n?n:-1}return ka(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):$u.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Iu),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new zu),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}]),e}(),tc=new Iu,nc=new Iu,rc=new Iu,ic=new Iu,ac=new Iu,oc=new Iu,sc=new Iu,uc=function(){function e(t,n){o(this,e),this.origin=void 0!==t?t:new Iu,this.direction=void 0!==n?n:new Iu(0,0,-1)}return ka(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Iu),t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,tc)),this}},{key:"closestPointToPoint",value:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Iu),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=tc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(tc.copy(this.direction).multiplyScalar(t).add(this.origin),tc.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){nc.copy(e).add(t).multiplyScalar(.5),rc.copy(t).sub(e).normalize(),ic.copy(this.origin).sub(nc);var i=.5*e.distanceTo(t),a=-this.direction.dot(rc),o=ic.dot(this.direction),s=-ic.dot(rc),u=ic.lengthSq(),c=Math.abs(1-a*a),l=void 0,f=void 0,d=void 0,h=void 0;if(c>0)if(l=a*s-o,f=a*o-s,h=i*c,l>=0)if(f>=-h)if(f<=h){var p=1/c;l*=p,f*=p,d=l*(l+a*f+2*o)+f*(a*l+f+2*s)+u}else f=i,l=Math.max(0,-(a*f+o)),d=-l*l+f*(f+2*s)+u;else f=-i,l=Math.max(0,-(a*f+o)),d=-l*l+f*(f+2*s)+u;else f<=-h?(l=Math.max(0,-(-a*i+o)),f=l>0?-i:Math.min(Math.max(-i,-s),i),d=-l*l+f*(f+2*s)+u):f<=h?(l=0,f=Math.min(Math.max(-i,-s),i),d=f*(f+2*s)+u):(l=Math.max(0,-(a*i+o)),f=l>0?i:Math.min(Math.max(-i,-s),i),d=-l*l+f*(f+2*s)+u);else f=a>0?-i:i,l=Math.max(0,-(a*f+o)),d=-l*l+f*(f+2*s)+u;return n&&n.copy(this.direction).multiplyScalar(l).add(this.origin),r&&r.copy(rc).multiplyScalar(f).add(nc),d}},{key:"intersectSphere",value:function(e,t){tc.subVectors(e.center,this.origin);var n=tc.dot(this.direction),r=tc.dot(tc)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),c>=0?(i=(e.min.y-f.y)*c,a=(e.max.y-f.y)*c):(i=(e.max.y-f.y)*c,a=(e.min.y-f.y)*c),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),l>=0?(o=(e.min.z-f.z)*l,s=(e.max.z-f.z)*l):(o=(e.max.z-f.z)*l,s=(e.min.z-f.z)*l),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,tc)}},{key:"intersectTriangle",value:function(e,t,n,r,i){ac.subVectors(t,e),oc.subVectors(n,e),sc.crossVectors(ac,oc);var a=this.direction.dot(sc),o=void 0;if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}ic.subVectors(this.origin,e);var s=o*this.direction.dot(oc.crossVectors(ic,oc));if(s<0)return null;var u=o*this.direction.dot(ac.cross(ic));if(u<0)return null;if(s+u>a)return null;var c=-o*ic.dot(sc);return c<0?null:this.at(c/a,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}]),e}(),cc=function(){function e(){o(this,e),Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return ka(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,c,l,f,d,h,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=c,m[10]=l,m[14]=f,m[3]=d,m[7]=h,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/lc.setFromMatrixColumn(e,0).length(),i=1/lc.setFromMatrixColumn(e,1).length(),a=1/lc.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var f=a*c,d=a*l,h=o*c,p=o*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=d+h*u,t[5]=f-p*u,t[9]=-o*s,t[2]=p-f*u,t[6]=h+d*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*c,m=s*l,g=u*c,y=u*l;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*u,t[1]=a*l,t[5]=a*c,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var _=s*c,b=s*l,x=u*c,M=u*l;t[0]=_-M*o,t[4]=-a*l,t[8]=x+b*o,t[1]=b+x*o,t[5]=a*c,t[9]=M-_*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var w=a*c,S=a*l,P=o*c,T=o*l;t[0]=s*c,t[4]=P*u-S,t[8]=w*u+T,t[1]=s*l,t[5]=T*u+w,t[9]=S*u-P,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var E=a*s,O=a*u,A=o*s,L=o*u;t[0]=s*c,t[4]=L-E*l,t[8]=A*l+O,t[1]=l,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=O*l+A,t[10]=E-L*l}else if("XZY"===e.order){var R=a*s,C=a*u,j=o*s,k=o*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=R*l+k,t[5]=a*c,t[9]=C*l-j,t[2]=j*l-C,t[6]=o*c,t[10]=k*l+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(dc,e,hc)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return mc.subVectors(e,t),0===mc.lengthSq()&&(mc.z=1),mc.normalize(),pc.crossVectors(n,mc),0===pc.lengthSq()&&(1===Math.abs(n.z)?mc.x+=1e-4:mc.z+=1e-4,mc.normalize(),pc.crossVectors(n,mc)),pc.normalize(),vc.crossVectors(mc,pc),r[0]=pc.x,r[4]=vc.x,r[8]=mc.x,r[1]=pc.y,r[5]=vc.y,r[9]=mc.y,r[2]=pc.z,r[6]=vc.z,r[10]=mc.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],c=n[1],l=n[5],f=n[9],d=n[13],h=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],_=n[11],b=n[15],x=r[0],M=r[4],w=r[8],S=r[12],P=r[1],T=r[5],E=r[9],O=r[13],A=r[2],L=r[6],R=r[10],C=r[14],j=r[3],k=r[7],N=r[11],I=r[15];return i[0]=a*x+o*P+s*A+u*j,i[4]=a*M+o*T+s*L+u*k,i[8]=a*w+o*E+s*R+u*N,i[12]=a*S+o*O+s*C+u*I,i[1]=c*x+l*P+f*A+d*j,i[5]=c*M+l*T+f*L+d*k,i[9]=c*w+l*E+f*R+d*N,i[13]=c*S+l*O+f*C+d*I,i[2]=h*x+p*P+v*A+m*j,i[6]=h*M+p*T+v*L+m*k,i[10]=h*w+p*E+v*R+m*N,i[14]=h*S+p*O+v*C+m*I,i[3]=g*x+y*P+_*A+b*j,i[7]=g*M+y*T+_*L+b*k,i[11]=g*w+y*E+_*R+b*N,i[15]=g*S+y*O+_*C+b*I,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],c=e[2],l=e[6],f=e[10],d=e[14];return e[3]*(+i*s*l-r*u*l-i*o*f+n*u*f+r*o*d-n*s*d)+e[7]*(+t*s*d-t*u*f+i*a*f-r*a*d+r*u*c-i*s*c)+e[11]*(+t*u*l-t*o*d-i*a*l+n*a*d+i*o*c-n*u*c)+e[15]*(-r*o*c-t*s*l+t*o*f+r*a*l-n*a*f+n*s*c)}},{key:"transpose",value:function(){var e=this.elements,t=void 0;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11],h=e[12],p=e[13],v=e[14],m=e[15],g=l*v*u-p*f*u+p*s*d-o*v*d-l*s*m+o*f*m,y=h*f*u-c*v*u-h*s*d+a*v*d+c*s*m-a*f*m,_=c*p*u-h*l*u+h*o*d-a*p*d-c*o*m+a*l*m,b=h*l*s-c*p*s-h*o*f+a*p*f+c*o*v-a*l*v,x=t*g+n*y+r*_+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var M=1/x;return e[0]=g*M,e[1]=(p*f*i-l*v*i-p*r*d+n*v*d+l*r*m-n*f*m)*M,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*m+n*s*m)*M,e[3]=(l*s*i-o*f*i-l*r*u+n*f*u+o*r*d-n*s*d)*M,e[4]=y*M,e[5]=(c*v*i-h*f*i+h*r*d-t*v*d-c*r*m+t*f*m)*M,e[6]=(h*s*i-a*v*i-h*r*u+t*v*u+a*r*m-t*s*m)*M,e[7]=(a*f*i-c*s*i+c*r*u-t*f*u-a*r*d+t*s*d)*M,e[8]=_*M,e[9]=(h*l*i-c*p*i-h*n*d+t*p*d+c*n*m-t*l*m)*M,e[10]=(a*p*i-h*o*i+h*n*u-t*p*u-a*n*m+t*o*m)*M,e[11]=(c*o*i-a*l*i-c*n*u+t*l*u+a*n*d-t*o*d)*M,e[12]=b*M,e[13]=(c*p*r-h*l*r+h*n*f-t*p*f-c*n*v+t*l*v)*M,e[14]=(h*o*r-a*p*r-h*n*s+t*p*s+a*n*v-t*o*v)*M,e[15]=(a*l*r-c*o*r+c*n*s-t*l*s-a*n*f+t*o*f)*M,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,c=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,c*o+n,c*s-r*a,0,u*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,c=a+a,l=o+o,f=i*u,d=i*c,h=i*l,p=a*c,v=a*l,m=o*l,g=s*u,y=s*c,_=s*l,b=n.x,x=n.y,M=n.z;return r[0]=(1-(p+m))*b,r[1]=(d+_)*b,r[2]=(h-y)*b,r[3]=0,r[4]=(d-_)*x,r[5]=(1-(f+m))*x,r[6]=(v+g)*x,r[7]=0,r[8]=(h+y)*M,r[9]=(v-g)*M,r[10]=(1-(f+p))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=lc.set(r[0],r[1],r[2]).length(),a=lc.set(r[4],r[5],r[6]).length(),o=lc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],fc.copy(this);var s=1/i,u=1/a,c=1/o;return fc.elements[0]*=s,fc.elements[1]*=s,fc.elements[2]*=s,fc.elements[4]*=u,fc.elements[5]*=u,fc.elements[6]*=u,fc.elements[8]*=c,fc.elements[9]*=c,fc.elements[10]*=c,t.setFromRotationMatrix(fc),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),f=-(a+i)/(a-i),d=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),c=1/(a-i),l=(t+e)*s,f=(n+r)*u,d=(a+i)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),lc=new Iu,fc=new cc,dc=new Iu(0,0,0),hc=new Iu(1,1,1),pc=new Iu,vc=new Iu,mc=new Iu,gc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;o(this,e),Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=n,this._z=r,this._order=i}return ka(e,[{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e,t,n){var r=Ou.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],u=i[1],c=i[5],l=i[9],f=i[2],d=i[6],h=i[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-l,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return yc.makeRotationFromQuaternion(e),this.setFromRotationMatrix(yc,t,n)}},{key:"setFromVector3",value:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)}},{key:"reorder",value:function(e){return _c.setFromEuler(this),this.setFromQuaternion(_c,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new Iu(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}]),e}();gc.DefaultOrder="XYZ",gc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var yc=new cc,_c=new Nu,bc=function(){function e(){o(this,e),this.mask=1}return ka(e,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}}]),e}(),xc=0,Mc=new Iu,wc=new Nu,Sc=new cc,Pc=new Iu,Tc=new Iu,Ec=new Iu,Oc=new Nu,Ac=new Iu(1,0,0),Lc=new Iu(0,1,0),Rc=new Iu(0,0,1),Cc={type:"added"},jc={type:"removed"};h.DefaultUp=new Iu(0,1,0),h.DefaultMatrixAutoUpdate=!0,h.prototype=Object.assign(Object.create(s.prototype),{constructor:h,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return wc.setFromAxisAngle(e,t),this.quaternion.multiply(wc),this},rotateOnWorldAxis:function(e,t){return wc.setFromAxisAngle(e,t),this.quaternion.premultiply(wc),this},rotateX:function(e){return this.rotateOnAxis(Ac,e)},rotateY:function(e){return this.rotateOnAxis(Lc,e)},rotateZ:function(e){return this.rotateOnAxis(Rc,e)},translateOnAxis:function(e,t){return Mc.copy(e).applyQuaternion(this.quaternion),this.position.add(Mc.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Ac,e)},translateY:function(e){return this.translateOnAxis(Lc,e)},translateZ:function(e){return this.translateOnAxis(Rc,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Sc.copy(this.matrixWorld).invert())},lookAt:function(e,t,n){e.isVector3?Pc.copy(e):Pc.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Tc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sc.lookAt(Tc,Pc,this.up):Sc.lookAt(Pc,Tc,this.up),this.quaternion.setFromRotationMatrix(Sc),r&&(Sc.extractRotation(r.matrixWorld),wc.setFromRotationMatrix(Sc),this.quaternion.premultiply(wc.invert()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Cc)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(jc)),this},clear:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(jc)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),Sc.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Sc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sc),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],a=i.getObjectByProperty(e,t);if(void 0!==a)return a}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Iu),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Nu),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tc,e,Ec),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Iu),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tc,Oc,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Iu),this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){function t(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function n(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var r=void 0===e||"string"==typeof e,i={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){a.geometry=t(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var s=o.shapes;if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++){var l=s[u];t(e.shapes,l)}else t(e.shapes,s)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(t(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var f=[],d=0,h=this.material.length;d<h;d++)f.push(t(e.materials,this.material[d]));a.material=f}else a.material=t(e.materials,this.material);if(this.children.length>0){a.children=[];for(var p=0;p<this.children.length;p++)a.children.push(this.children[p].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(var v=0;v<this.animations.length;v++){var m=this.animations[v];a.animations.push(t(e.animations,m))}}if(r){var g=n(e.geometries),y=n(e.materials),_=n(e.textures),b=n(e.images),x=n(e.shapes),M=n(e.skeletons),w=n(e.animations);g.length>0&&(i.geometries=g),y.length>0&&(i.materials=y),_.length>0&&(i.textures=_),b.length>0&&(i.images=b),x.length>0&&(i.shapes=x),M.length>0&&(i.skeletons=M),w.length>0&&(i.animations=w)}return i.object=a,i},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});var kc=new Iu,Nc=new Iu,Ic=new Lu,Dc=function(){function e(t,n){o(this,e),Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new Iu(1,0,0),this.constant=void 0!==n?n:0}return ka(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=kc.subVectors(n,t).cross(Nc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Iu),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Iu);var n=e.delta(kc),r=this.normal.dot(n);if(0!==r){var i=-(e.start.dot(this.normal)+this.constant)/r;if(!(i<0||i>1))return t.copy(n).multiplyScalar(i).add(e.start)}else if(0===this.distanceToPoint(e.start))return t.copy(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Iu),e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Ic.getNormalMatrix(e),r=this.coplanarPoint(kc).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}]),e}(),Bc=new Iu,zc=new Iu,Fc=new Iu,Uc=new Iu,Gc=new Iu,Hc=new Iu,Vc=new Iu,Wc=new Iu,qc=new Iu,Yc=new Iu,Xc=function(){function e(t,n,r){o(this,e),this.a=void 0!==t?t:new Iu,this.b=void 0!==n?n:new Iu,this.c=void 0!==r?r:new Iu}return ka(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Bc.subVectors(this.c,this.b),zc.subVectors(this.a,this.b),.5*Bc.cross(zc).length()}},{key:"getMidpoint",value:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Iu),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Dc),e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Iu);var n=this.a,r=this.b,i=this.c,a=void 0,o=void 0;Gc.subVectors(r,n),Hc.subVectors(i,n),Wc.subVectors(e,n);var s=Gc.dot(Wc),u=Hc.dot(Wc);if(s<=0&&u<=0)return t.copy(n);qc.subVectors(e,r);var c=Gc.dot(qc),l=Hc.dot(qc);if(c>=0&&l<=c)return t.copy(r);var f=s*l-c*u;if(f<=0&&s>=0&&c<=0)return a=s/(s-c),t.copy(n).addScaledVector(Gc,a);Yc.subVectors(e,i);var d=Gc.dot(Yc),h=Hc.dot(Yc);if(h>=0&&d<=h)return t.copy(i);var p=d*u-s*h;if(p<=0&&u>=0&&h<=0)return o=u/(u-h),t.copy(n).addScaledVector(Hc,o);var v=c*h-d*l;if(v<=0&&l-c>=0&&d-h>=0)return Vc.subVectors(i,r),o=(l-c)/(l-c+(d-h)),t.copy(r).addScaledVector(Vc,o);var m=1/(v+p+f);return a=p*m,o=f*m,t.copy(n).addScaledVector(Gc,a).addScaledVector(Hc,o)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Iu),r.subVectors(n,t),Bc.subVectors(e,t),r.cross(Bc);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Bc.subVectors(r,t),zc.subVectors(n,t),Fc.subVectors(e,t);var a=Bc.dot(Bc),o=Bc.dot(zc),s=Bc.dot(Fc),u=zc.dot(zc),c=zc.dot(Fc),l=a*u-o*o;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Iu),0===l)return i.set(-2,-1,-1);var f=1/l,d=(u*s-o*c)*f,h=(a*c-o*s)*f;return i.set(1-d-h,h,d)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,Uc),Uc.x>=0&&Uc.y>=0&&Uc.x+Uc.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,Uc),s.set(0,0),s.addScaledVector(i,Uc.x),s.addScaledVector(a,Uc.y),s.addScaledVector(o,Uc.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Bc.subVectors(n,t),zc.subVectors(e,t),Bc.cross(zc).dot(r)<0}}]),e}(),Zc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jc={h:0,s:0,l:0},Qc={h:0,s:0,l:0},Kc=function(){function e(t,n,r){return o(this,e),Object.defineProperty(this,"isColor",{value:!0}),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return ka(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=Ou.euclideanModulo(e,1),t=Ou.clamp(t,0,1),n=Ou.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=p(i,r,e+1/3),this.g=p(i,r,e),this.b=p(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n=void 0;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r=void 0,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=Zc[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=v(e.r),this.g=v(e.g),this.b=v(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=m(e.r),this.g=m(e.g),this.b=m(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),a=Math.min(t,n,r),o=void 0,s=void 0,u=(a+i)/2;if(a===i)o=0,s=0;else{var c=i-a;switch(s=u<=.5?c/(i+a):c/(2-i-a),i){case t:o=(n-r)/c+(n<r?6:0);break;case n:o=(r-t)/c+2;break;case r:o=(t-n)/c+4}o/=6}return e.h=o,e.s=s,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Jc),Jc.h+=e,Jc.s+=t,Jc.l+=n,this.setHSL(Jc.h,Jc.s,Jc.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Jc),e.getHSL(Qc);var n=Ou.lerp(Jc.h,Qc.h,t),r=Ou.lerp(Jc.s,Qc.s,t),i=Ou.lerp(Jc.l,Qc.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();Kc.NAMES=Zc,Kc.prototype.r=1,Kc.prototype.g=1,Kc.prototype.b=1;var $c=function(){function e(t,n,r,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;o(this,e),this.a=t,this.b=n,this.c=r,this.normal=i&&i.isVector3?i:new Iu,this.vertexNormals=Array.isArray(i)?i:[],this.color=a&&a.isColor?a:new Kc,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=s}return ka(e,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var r=0,i=e.vertexColors.length;r<i;r++)this.vertexColors[r]=e.vertexColors[r].clone();return this}}]),e}(),el=0;g.prototype=Object.assign(Object.create(s.prototype),{constructor:g,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e||"string"==typeof e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ya&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==Ha&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.morphNormals&&(r.morphNormals=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n){var i=t(e.textures),a=t(e.images);i.length>0&&(r.textures=i),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(g.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.prototype.isMeshBasicMaterial=!0,y.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var tl=new Iu,nl=new Au;Object.defineProperty(_.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(_.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Kc),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Au),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new Iu),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new ku),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)nl.fromBufferAttribute(this,t),nl.applyMatrix3(e),this.setXY(t,nl.x,nl.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)tl.fromBufferAttribute(this,r),tl.applyMatrix3(e),this.setXYZ(r,tl.x,tl.y,tl.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)tl.x=this.getX(t),tl.y=this.getY(t),tl.z=this.getZ(t),tl.applyMatrix4(e),this.setXYZ(t,tl.x,tl.y,tl.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)tl.x=this.getX(t),tl.y=this.getY(t),tl.z=this.getZ(t),tl.applyNormalMatrix(e),this.setXYZ(t,tl.x,tl.y,tl.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)tl.x=this.getX(t),tl.y=this.getY(t),tl.z=this.getZ(t),tl.transformDirection(e),this.setXYZ(t,tl.x,tl.y,tl.z);return this},set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),b.prototype=Object.create(_.prototype),b.prototype.constructor=b,x.prototype=Object.create(_.prototype),x.prototype.constructor=x,M.prototype=Object.create(_.prototype),M.prototype.constructor=M,w.prototype=Object.create(_.prototype),w.prototype.constructor=w,S.prototype=Object.create(_.prototype),S.prototype.constructor=S,P.prototype=Object.create(_.prototype),P.prototype.constructor=P,T.prototype=Object.create(_.prototype),T.prototype.constructor=T,E.prototype=Object.create(_.prototype),E.prototype.constructor=E,E.prototype.isFloat16BufferAttribute=!0,O.prototype=Object.create(_.prototype),O.prototype.constructor=O,A.prototype=Object.create(_.prototype),A.prototype.constructor=A;var rl=function(){function e(){o(this,e),this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}return ka(e,[{key:"computeGroups",value:function(e){var t=[],n=void 0,r=void 0,i=void 0,a=e.faces;for(r=0;r<a.length;r++){var o=a[r];o.materialIndex!==i&&(i=o.materialIndex,void 0!==n&&(n.count=3*r-n.start,t.push(n)),n={start:3*r,materialIndex:i})}void 0!==n&&(n.count=3*r-n.start,t.push(n)),this.groups=t}},{key:"fromGeometry",value:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,o=e.morphTargets,s=o.length,u=void 0;if(s>0){u=[];for(var c=0;c<s;c++)u[c]={name:o[c].name,data:[]};this.morphTargets.position=u}var l=e.morphNormals,f=l.length,d=void 0;if(f>0){d=[];for(var h=0;h<f;h++)d[h]={name:l[h].name,data:[]};this.morphTargets.normal=d}var p=e.skinIndices,v=e.skinWeights,m=p.length===n.length,g=v.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var y=0;y<t.length;y++){var _=t[y];this.vertices.push(n[_.a],n[_.b],n[_.c]);var b=_.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var x=_.normal;this.normals.push(x,x,x)}var M=_.vertexColors;if(3===M.length)this.colors.push(M[0],M[1],M[2]);else{var w=_.color;this.colors.push(w,w,w)}if(!0===i){var S=r[0][y];void 0!==S?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",y),this.uvs.push(new Au,new Au,new Au))}if(!0===a){var P=r[1][y];void 0!==P?this.uvs2.push(P[0],P[1],P[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",y),this.uvs2.push(new Au,new Au,new Au))}for(var T=0;T<s;T++){var E=o[T].vertices;u[T].data.push(E[_.a],E[_.b],E[_.c])}for(var O=0;O<f;O++){var A=l[O].vertexNormals[y];d[O].data.push(A.a,A.b,A.c)}m&&this.skinIndices.push(p[_.a],p[_.b],p[_.c]),g&&this.skinWeights.push(v[_.a],v[_.b],v[_.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}]),e}(),il={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},al=1,ol=new cc,sl=new h,ul=new Iu,cl=new zu,ll=new zu,fl=new Iu;C.prototype=Object.assign(Object.create(s.prototype),{constructor:C,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(L(e)>65535?T:S)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},hasAttribute:function(e){return void 0!==this.attributes[e]},addGroup:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Lu).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return ol.makeRotationX(e),this.applyMatrix4(ol),this},rotateY:function(e){return ol.makeRotationY(e),this.applyMatrix4(ol),this},rotateZ:function(e){return ol.makeRotationZ(e),this.applyMatrix4(ol),this},translate:function(e,t,n){return ol.makeTranslation(e,t,n),this.applyMatrix4(ol),this},scale:function(e,t,n){return ol.makeScale(e,t,n),this.applyMatrix4(ol),this},lookAt:function(e){return sl.lookAt(e),sl.updateMatrix(),this.applyMatrix4(sl.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ul).negate(),this.translate(ul.x,ul.y,ul.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new O(3*t.vertices.length,3),r=new O(3*t.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new O(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new O(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}if(!0===t.verticesNeedUpdate){var r=this.attributes.position;void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){var i=this.attributes.normal;void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){var a=this.attributes.color;void 0!==a&&(a.copyColorsArray(t.colors),a.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){var o=this.attributes.uv;void 0!==o&&(o.copyVector2sArray(t.uvs),o.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){var s=this.attributes.lineDistance;void 0!==s&&(s.copyArray(t.lineDistances),s.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new rl).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new _(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.setAttribute("normal",new _(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.setAttribute("color",new _(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new _(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new _(a,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(var o in e.morphTargets){for(var s=[],u=e.morphTargets[o],c=0,l=u.length;c<l;c++){var f=u[c],d=new O(3*f.data.length,3);d.name=f.name,s.push(d.copyVector3sArray(f.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var h=new O(4*e.skinIndices.length,4);this.setAttribute("skinIndex",h.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new O(4*e.skinWeights.length,4);this.setAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new zu);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Iu(-1/0,-1/0,-1/0),new Iu(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];cl.setFromBufferAttribute(i),this.morphTargetsRelative?(fl.addVectors(this.boundingBox.min,cl.min),this.boundingBox.expandByPoint(fl),fl.addVectors(this.boundingBox.max,cl.max),this.boundingBox.expandByPoint(fl)):(this.boundingBox.expandByPoint(cl.min),this.boundingBox.expandByPoint(cl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ec);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Iu,1/0);if(e){var n=this.boundingSphere.center;if(cl.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];ll.setFromBufferAttribute(a),this.morphTargetsRelative?(fl.addVectors(cl.min,ll.min),cl.expandByPoint(fl),fl.addVectors(cl.max,ll.max),cl.expandByPoint(fl)):(cl.expandByPoint(ll.min),cl.expandByPoint(ll.max))}cl.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)fl.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(fl));if(t)for(var c=0,l=t.length;c<l;c++)for(var f=t[c],d=this.morphTargetsRelative,h=0,p=f.count;h<p;h++)fl.fromBufferAttribute(f,h),d&&(ul.fromBufferAttribute(e,h),fl.add(ul)),o=Math.max(o,n.distanceToSquared(fl));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new _(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Iu,o=new Iu,s=new Iu,u=new Iu,c=new Iu,l=new Iu,f=new Iu,d=new Iu;if(e)for(var h=0,p=e.count;h<p;h+=3){var v=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),f.subVectors(s,o),d.subVectors(a,o),f.cross(d),u.fromBufferAttribute(n,v),c.fromBufferAttribute(n,m),l.fromBufferAttribute(n,g),u.add(f),c.add(f),l.add(f),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,c.x,c.y,c.z),n.setXYZ(g,l.x,l.y,l.z)}else for(var y=0,b=t.count;y<b;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),f.subVectors(s,o),d.subVectors(a,o),f.cross(d),n.setXYZ(y+0,f.x,f.y,f.z),n.setXYZ(y+1,f.x,f.y,f.z),n.setXYZ(y+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r],a=i.array,o=e.attributes[r],s=o.array,u=o.itemSize*t,c=Math.min(s.length,a.length-u),l=0,f=u;l<c;l++,f++)a[f]=s[l];return this},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)fl.fromBufferAttribute(e,t),fl.normalize(),e.setXYZ(t,fl.x,fl.y,fl.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,c=t.length;u<c;u++){o=t[u]*r;for(var l=0;l<r;l++)a[s++]=n[o++]}return new _(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new C,n=this.index.array,r=this.attributes;for(var i in r){var a=r[i],o=e(a,n);t.setAttribute(i,o)}var s=this.morphAttributes;for(var u in s){for(var c=[],l=s[u],f=0,d=l.length;f<d;f++){var h=l[f],p=e(h,n);c.push(p)}t.morphAttributes[u]=c}t.morphTargetsRelative=this.morphTargetsRelative;for(var v=this.groups,m=0,g=v.length;m<g;m++){var y=v[m];t.addGroup(y.start,y.count,y.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a],s=o.toJSON(e.data);""!==o.name&&(s.name=o.name),e.data.attributes[a]=s}var u={},c=!1;for(var l in this.morphAttributes){for(var f=this.morphAttributes[l],d=[],h=0,p=f.length;h<p;h++){var v=f[h],m=v.toJSON(e.data);""!==v.name&&(m.name=v.name),d.push(m)}d.length>0&&(u[l]=d,c=!0)}c&&(e.data.morphAttributes=u,e.data.morphTargetsRelative=this.morphTargetsRelative);var g=this.groups;g.length>0&&(e.data.groups=JSON.parse(JSON.stringify(g)));var y=this.boundingSphere;return null!==y&&(e.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),e},clone:function(){return(new C).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],c=o[s],l=0,f=c.length;l<f;l++)u.push(c[l].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,h=0,p=d.length;h<p;h++){var v=d[h];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var dl=new cc,hl=new uc,pl=new ec,vl=new Iu,ml=new Iu,gl=new Iu,yl=new Iu,_l=new Iu,bl=new Iu,xl=new Iu,Ml=new Iu,wl=new Iu,Sl=new Au,Pl=new Au,Tl=new Au,El=new Iu,Ol=new Iu;j.prototype=Object.assign(Object.create(h.prototype),{constructor:j,isMesh:!0,copy:function(e){return h.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),pl.copy(n.boundingSphere),pl.applyMatrix4(i),!1!==e.ray.intersectsSphere(pl)&&(dl.copy(i).invert(),hl.copy(e.ray).applyMatrix4(dl),null===n.boundingBox||!1!==hl.intersectsBox(n.boundingBox)))){var a=void 0;if(n.isBufferGeometry){var o=n.index,s=n.attributes.position,u=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,f=n.attributes.uv2,d=n.groups,h=n.drawRange;if(null!==o)if(Array.isArray(r))for(var p=0,v=d.length;p<v;p++)for(var m=d[p],g=r[m.materialIndex],y=Math.max(m.start,h.start),_=Math.min(m.start+m.count,h.start+h.count),b=y,x=_;b<x;b+=3){var M=o.getX(b),w=o.getX(b+1),S=o.getX(b+2);a=N(this,g,e,hl,s,u,c,l,f,M,w,S),a&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=m.materialIndex,t.push(a))}else for(var P=Math.max(0,h.start),T=Math.min(o.count,h.start+h.count),E=P,O=T;E<O;E+=3){var A=o.getX(E),L=o.getX(E+1),R=o.getX(E+2);a=N(this,r,e,hl,s,u,c,l,f,A,L,R),a&&(a.faceIndex=Math.floor(E/3),t.push(a))}else if(void 0!==s)if(Array.isArray(r))for(var C=0,j=d.length;C<j;C++)for(var I=d[C],D=r[I.materialIndex],B=Math.max(I.start,h.start),z=Math.min(I.start+I.count,h.start+h.count),F=B,U=z;F<U;F+=3){var G=F,H=F+1,V=F+2;a=N(this,D,e,hl,s,u,c,l,f,G,H,V),a&&(a.faceIndex=Math.floor(F/3),a.face.materialIndex=I.materialIndex,t.push(a))}else for(var W=Math.max(0,h.start),q=Math.min(s.count,h.start+h.count),Y=W,X=q;Y<X;Y+=3){var Z=Y,J=Y+1,Q=Y+2;a=N(this,r,e,hl,s,u,c,l,f,Z,J,Q),a&&(a.faceIndex=Math.floor(Y/3),t.push(a))}}else if(n.isGeometry){var K=Array.isArray(r),$=n.vertices,ee=n.faces,te=void 0,ne=n.faceVertexUvs[0];ne.length>0&&(te=ne);for(var re=0,ie=ee.length;re<ie;re++){var ae=ee[re],oe=K?r[ae.materialIndex]:r;if(void 0!==oe){var se=$[ae.a],ue=$[ae.b],ce=$[ae.c];if(a=k(this,oe,e,hl,se,ue,ce,El)){if(te&&te[re]){var le=te[re];Sl.copy(le[0]),Pl.copy(le[1]),Tl.copy(le[2]),a.uv=Xc.getUV(El,se,ue,ce,Sl,Pl,Tl,new Au)}a.face=ae,a.faceIndex=re,t.push(a)}}}}}}});var Al=function(e){function t(){function e(e,t,n,r,i,a,o,s,u,c,l){for(var y=a/u,_=o/c,b=a/2,x=o/2,M=s/2,w=u+1,S=c+1,P=0,T=0,E=new Iu,O=0;O<S;O++)for(var A=O*_-x,L=0;L<w;L++){var R=L*y-b;E[e]=R*r,E[t]=A*i,E[n]=M,h.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=s>0?1:-1,p.push(E.x,E.y,E.z),v.push(L/u),v.push(1-O/c),P+=1}for(var C=0;C<c;C++)for(var j=0;j<u;j++){var k=m+j+w*C,N=m+j+w*(C+1),I=m+(j+1)+w*(C+1),D=m+(j+1)+w*C;d.push(k,N,D),d.push(N,I,D),T+=6}f.addGroup(g,T,l),g+=T,m+=P}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;o(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));l.type="BoxBufferGeometry",l.parameters={width:n,height:r,depth:a,widthSegments:s,heightSegments:u,depthSegments:c};var f=l;s=Math.floor(s),u=Math.floor(u),c=Math.floor(c);var d=[],h=[],p=[],v=[],m=0,g=0;return e("z","y","x",-1,-1,a,r,n,c,u,0),e("z","y","x",1,-1,a,r,-n,c,u,1),e("x","z","y",1,1,n,a,r,s,c,2),e("x","z","y",1,-1,n,a,-r,s,c,3),e("x","y","z",1,-1,n,r,a,s,u,4),e("x","y","z",-1,-1,n,r,-a,s,u,5),l.setIndex(d),l.setAttribute("position",new O(h,3)),l.setAttribute("normal",new O(p,3)),l.setAttribute("uv",new O(v,2)),l}return a(t,e),t}(C),Ll={clone:I,merge:D},Rl="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Cl="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";B.prototype=Object.create(g.prototype),B.prototype.constructor=B,B.prototype.isShaderMaterial=!0,B.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=I(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},B.prototype.toJSON=function(e){var t=g.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(var n in this.uniforms){var r=this.uniforms[n],i=r.value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t},z.prototype=Object.assign(Object.create(h.prototype),{constructor:z,isCamera:!0,copy:function(e,t){return h.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Iu),this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){h.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(e,t){h.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),F.prototype=Object.assign(Object.create(z.prototype),{constructor:F,isPerspectiveCamera:!0,copy:function(e,t){return z.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ou.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ou.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ou.RAD2DEG*Math.atan(Math.tan(.5*Ou.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ou.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){var t=h.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var jl=90,kl=1;U.prototype=Object.create(h.prototype),U.prototype.constructor=U,G.prototype=Object.create(u.prototype),G.prototype.constructor=G,G.prototype.isCubeTexture=!0,Object.defineProperty(G.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),H.prototype=Object.create(l.prototype),H.prototype.constructor=H,H.prototype.isWebGLCubeRenderTarget=!0,H.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=ss,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},r=new Al(5,5,5),i=new B({name:"CubemapFromEquirect",uniforms:I(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Va,blending:qa});i.uniforms.tEquirect.value=t;var a=new j(r,i),o=t.minFilter;return t.minFilter===qo&&(t.minFilter=Vo),new U(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this},H.prototype.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)},V.prototype=Object.create(u.prototype),V.prototype.constructor=V,V.prototype.isDataTexture=!0;var Nl=new ec,Il=new Iu,Dl=function(){function e(t,n,r,i,a,s){o(this,e),this.planes=[void 0!==t?t:new Dc,void 0!==n?n:new Dc,void 0!==r?r:new Dc,void 0!==i?i:new Dc,void 0!==a?a:new Dc,void 0!==s?s:new Dc]}return ka(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],d=n[9],h=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,l-s,p-f,y-v).normalize(),t[1].setComponents(o+r,l+s,p+f,y+v).normalize(),t[2].setComponents(o+i,l+u,p+d,y+m).normalize(),t[3].setComponents(o-i,l-u,p-d,y-m).normalize(),t[4].setComponents(o-a,l-c,p-h,y-g).normalize(),t[5].setComponents(o+a,l+c,p+h,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Nl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Nl)}},{key:"intersectsSprite",value:function(e){return Nl.center.set(0,0,0),Nl.radius=.7071067811865476,Nl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Nl)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Il.x=r.normal.x>0?e.max.x:e.min.x,Il.y=r.normal.y>0?e.max.y:e.min.y,Il.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Il)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}]),e}(),Bl=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.type="PlaneBufferGeometry",s.parameters={width:e,height:n,widthSegments:r,heightSegments:a};for(var u=e/2,c=n/2,l=Math.floor(r),f=Math.floor(a),d=l+1,h=f+1,p=e/l,v=n/f,m=[],g=[],y=[],_=[],b=0;b<h;b++)for(var x=b*v-c,M=0;M<d;M++){var w=M*p-u;g.push(w,-x,0),y.push(0,0,1),_.push(M/l),_.push(1-b/f)}for(var S=0;S<f;S++)for(var P=0;P<l;P++){var T=P+d*S,E=P+d*(S+1),A=P+1+d*(S+1),L=P+1+d*S;m.push(T,E,L),m.push(E,A,L)}return s.setIndex(m),s.setAttribute("position",new O(g,3)),s.setAttribute("normal",new O(y,3)),s.setAttribute("uv",new O(_,2)),s}return a(t,e),t}(C),zl={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Fl={common:{diffuse:{value:new Kc(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Lu},uv2Transform:{value:new Lu},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Au(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Kc(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Kc(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Lu}},sprite:{diffuse:{value:new Kc(15658734)},opacity:{value:1},center:{value:new Au(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Lu}}},Ul={basic:{uniforms:D([Fl.common,Fl.specularmap,Fl.envmap,Fl.aomap,Fl.lightmap,Fl.fog]),vertexShader:zl.meshbasic_vert,fragmentShader:zl.meshbasic_frag},lambert:{uniforms:D([Fl.common,Fl.specularmap,Fl.envmap,Fl.aomap,Fl.lightmap,Fl.emissivemap,Fl.fog,Fl.lights,{emissive:{value:new Kc(0)}}]),vertexShader:zl.meshlambert_vert,fragmentShader:zl.meshlambert_frag},phong:{uniforms:D([Fl.common,Fl.specularmap,Fl.envmap,Fl.aomap,Fl.lightmap,Fl.emissivemap,Fl.bumpmap,Fl.normalmap,Fl.displacementmap,Fl.fog,Fl.lights,{emissive:{value:new Kc(0)},specular:{value:new Kc(1118481)},shininess:{value:30}}]),vertexShader:zl.meshphong_vert,fragmentShader:zl.meshphong_frag},standard:{uniforms:D([Fl.common,Fl.envmap,Fl.aomap,Fl.lightmap,Fl.emissivemap,Fl.bumpmap,Fl.normalmap,Fl.displacementmap,Fl.roughnessmap,Fl.metalnessmap,Fl.fog,Fl.lights,{emissive:{value:new Kc(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zl.meshphysical_vert,fragmentShader:zl.meshphysical_frag},toon:{uniforms:D([Fl.common,Fl.aomap,Fl.lightmap,Fl.emissivemap,Fl.bumpmap,Fl.normalmap,Fl.displacementmap,Fl.gradientmap,Fl.fog,Fl.lights,{emissive:{value:new Kc(0)}}]),vertexShader:zl.meshtoon_vert,fragmentShader:zl.meshtoon_frag},matcap:{uniforms:D([Fl.common,Fl.bumpmap,Fl.normalmap,Fl.displacementmap,Fl.fog,{matcap:{value:null}}]),vertexShader:zl.meshmatcap_vert,fragmentShader:zl.meshmatcap_frag},points:{uniforms:D([Fl.points,Fl.fog]),vertexShader:zl.points_vert,fragmentShader:zl.points_frag},dashed:{uniforms:D([Fl.common,Fl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zl.linedashed_vert,fragmentShader:zl.linedashed_frag},depth:{uniforms:D([Fl.common,Fl.displacementmap]),vertexShader:zl.depth_vert,fragmentShader:zl.depth_frag},normal:{uniforms:D([Fl.common,Fl.bumpmap,Fl.normalmap,Fl.displacementmap,{opacity:{value:1}}]),vertexShader:zl.normal_vert,fragmentShader:zl.normal_frag},sprite:{uniforms:D([Fl.sprite,Fl.fog]),vertexShader:zl.sprite_vert,fragmentShader:zl.sprite_frag},background:{uniforms:{uvTransform:{value:new Lu},t2D:{value:null}},vertexShader:zl.background_vert,fragmentShader:zl.background_frag},cube:{uniforms:D([Fl.envmap,{opacity:{value:1}}]),vertexShader:zl.cube_vert,fragmentShader:zl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zl.equirect_vert,fragmentShader:zl.equirect_frag},distanceRGBA:{uniforms:D([Fl.common,Fl.displacementmap,{referencePosition:{value:new Iu},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zl.distanceRGBA_vert,fragmentShader:zl.distanceRGBA_frag},shadow:{uniforms:D([Fl.lights,Fl.fog,{color:{value:new Kc(0)},opacity:{value:1}}]),vertexShader:zl.shadow_vert,fragmentShader:zl.shadow_frag}};Ul.physical={uniforms:D([Ul.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Au(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Kc(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:zl.meshphysical_vert,fragmentShader:zl.meshphysical_frag},se.prototype=Object.create(u.prototype),se.prototype.constructor=se,se.prototype.isDataTexture2DArray=!0,ue.prototype=Object.create(u.prototype),ue.prototype.constructor=ue,ue.prototype.isDataTexture3D=!0;var Gl=new u,Hl=new se,Vl=new ue,Wl=new G,ql=[],Yl=[],Xl=new Float32Array(16),Zl=new Float32Array(9),Jl=new Float32Array(4);We.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),fe(t,e)},qe.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var Ql=/(\w+)(\])?(\[|\.)?/g;Ze.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Ze.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Ze.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},Ze.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var Kl=0,$l=/^[ \t]*#include +<([\w\d.\/]+)>/gm,ef=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,tf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,nf=0;Ct.prototype=Object.create(g.prototype),Ct.prototype.constructor=Ct,Ct.prototype.isMeshDepthMaterial=!0,Ct.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},jt.prototype=Object.create(g.prototype),jt.prototype.constructor=jt,jt.prototype.isMeshDistanceMaterial=!0,jt.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var rf="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",af="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";Bt.prototype=Object.assign(Object.create(F.prototype),{constructor:Bt,isArrayCamera:!0}),zt.prototype=Object.assign(Object.create(h.prototype),{constructor:zt,isGroup:!0}),Object.assign(Ft.prototype,{constructor:Ft,getHandSpace:function(){if(null===this._hand&&(this._hand=new zt,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){var t=new zt;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new zt,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new zt,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(u&&e.hand){a=!0;for(var c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(e.hand[c]){var l=t.getJointPose(e.hand[c],n),f=u.joints[c];null!==l&&(f.matrix.fromArray(l.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.jointRadius=l.radius),f.visible=null!==l;var d=u.joints[window.XRHand.INDEX_PHALANX_TIP],h=u.joints[window.XRHand.THUMB_PHALANX_TIP],p=d.position.distanceTo(h.position);u.inputState.pinching&&p>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==o&&null!==(r=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale));return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==a),this}}),Object.assign(Ut.prototype,s.prototype),Wt.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Wt,isWebGL1Renderer:!0});var of=function(){function e(t,n){o(this,e),Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Kc(t),this.density=void 0!==n?n:25e-5}return ka(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),sf=function(){function e(t,n,r){o(this,e),Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Kc(t),this.near=void 0!==n?n:1,this.far=void 0!==r?r:1e3}return ka(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),uf=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperty(e,"isScene",{value:!0}),e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:e})),e}return a(t,e),ka(t,[{key:"copy",value:function(e,n){return ja(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e,n),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var n=ja(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this,e);return null!==this.background&&(n.object.background=this.background.toJSON(e)),null!==this.environment&&(n.object.environment=this.environment.toJSON(e)),null!==this.fog&&(n.object.fog=this.fog.toJSON()),n}}]),t}(h);Object.defineProperty(qt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(qt.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ou.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new qt(t,this.stride);return n.setUsage(this.usage),n},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ou.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var cf=new Iu;Object.defineProperties(Yt.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(Yt.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)cf.x=this.getX(t),cf.y=this.getY(t),cf.z=this.getZ(t),cf.applyMatrix4(e),this.setXYZ(t,cf.x,cf.y,cf.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return new _(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Yt(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Xt.prototype=Object.create(g.prototype),Xt.prototype.constructor=Xt,Xt.prototype.isSpriteMaterial=!0,Xt.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var lf=void 0,ff=new Iu,df=new Iu,hf=new Iu,pf=new Au,vf=new Au,mf=new cc,gf=new Iu,yf=new Iu,_f=new Iu,bf=new Au,xf=new Au,Mf=new Au;Zt.prototype=Object.assign(Object.create(h.prototype),{constructor:Zt,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),df.setFromMatrixScale(this.matrixWorld),mf.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),hf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&df.multiplyScalar(-hf.z);var n=this.material.rotation,r=void 0,i=void 0;0!==n&&(i=Math.cos(n),r=Math.sin(n));var a=this.center;Jt(gf.set(-.5,-.5,0),hf,a,df,r,i),Jt(yf.set(.5,-.5,0),hf,a,df,r,i),Jt(_f.set(.5,.5,0),hf,a,df,r,i),bf.set(0,0),xf.set(1,0),Mf.set(1,1);var o=e.ray.intersectTriangle(gf,yf,_f,!1,ff);if(null!==o||(Jt(yf.set(-.5,.5,0),hf,a,df,r,i),xf.set(0,1),null!==(o=e.ray.intersectTriangle(gf,_f,yf,!1,ff)))){var s=e.ray.origin.distanceTo(ff);s<e.near||s>e.far||t.push({distance:s,point:ff.clone(),uv:Xc.getUV(ff,gf,yf,_f,bf,xf,Mf,new Au),face:null,object:this})}},copy:function(e){return h.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});var wf=new Iu,Sf=new Iu;Qt.prototype=Object.assign(Object.create(h.prototype),{constructor:Qt,isLOD:!0,copy:function(e){h.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n=this.levels,r=void 0;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){var n=void 0,r=void 0;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){wf.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(wf);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){wf.setFromMatrixPosition(e.matrixWorld),Sf.setFromMatrixPosition(this.matrixWorld);var n=wf.distanceTo(Sf)/e.zoom;t[0].object.visible=!0;var r=void 0,i=void 0;for(r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){var t=h.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}});var Pf=new Iu,Tf=new ku,Ef=new ku,Of=new Iu,Af=new cc;Kt.prototype=Object.assign(Object.create(j.prototype),{constructor:Kt,isSkinnedMesh:!0,copy:function(e){return j.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new ku,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){j.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(e,t){var n=this.skeleton,r=this.geometry;Tf.fromBufferAttribute(r.attributes.skinIndex,e),Ef.fromBufferAttribute(r.attributes.skinWeight,e),Pf.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=Ef.getComponent(i);if(0!==a){var o=Tf.getComponent(i);Af.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Of.copy(Pf).applyMatrix4(Af),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}),$t.prototype=Object.assign(Object.create(h.prototype),{constructor:$t,isBone:!0});var Lf=new cc,Rf=new cc;Object.assign(en.prototype,{init:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new cc)}},calculateInverses:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new cc;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}},pose:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:Rf;Lf.multiplyMatrices(o,t[i]),Lf.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)},clone:function(){return new en(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new $t),this.bones.push(a),this.boneInverses.push((new cc).fromArray(e.boneInverses[n]))}return this.init(),this},toJSON:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}});var Cf=new cc,jf=new cc,kf=[],Nf=new j;tn.prototype=Object.assign(Object.create(j.prototype),{constructor:tn,isInstancedMesh:!0,copy:function(e){return j.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},getColorAt:function(e,t){t.fromArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,r=this.count;if(Nf.geometry=this.geometry,Nf.material=this.material,void 0!==Nf.material)for(var i=0;i<r;i++){this.getMatrixAt(i,Cf),jf.multiplyMatrices(n,Cf),Nf.matrixWorld=jf,Nf.raycast(e,kf);for(var a=0,o=kf.length;a<o;a++){var s=kf[a];s.instanceId=i,s.object=this,t.push(s)}kf.length=0}},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new _(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}}),nn.prototype=Object.create(g.prototype),nn.prototype.constructor=nn,nn.prototype.isLineBasicMaterial=!0,nn.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};var If=new Iu,Df=new Iu,Bf=new cc,zf=new uc,Ff=new ec;rn.prototype=Object.assign(Object.create(h.prototype),{constructor:rn,isLine:!0,copy:function(e){return h.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)If.fromBufferAttribute(t,r-1),Df.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=If.distanceTo(Df);e.setAttribute("lineDistance",new O(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices,o=e.lineDistances;o[0]=0;for(var s=1,u=a.length;s<u;s++)o[s]=o[s-1],o[s]+=a[s-1].distanceTo(a[s])}return this},raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ff.copy(n.boundingSphere),Ff.applyMatrix4(r),Ff.radius+=i,!1!==e.ray.intersectsSphere(Ff)){Bf.copy(r).invert(),zf.copy(e.ray).applyMatrix4(Bf);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new Iu,u=new Iu,c=new Iu,l=new Iu,f=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,h=n.attributes,p=h.position;if(null!==d)for(var v=d.array,m=0,g=v.length-1;m<g;m+=f){var y=v[m],_=v[m+1];s.fromBufferAttribute(p,y),u.fromBufferAttribute(p,_);var b=zf.distanceSqToSegment(s,u,l,c);if(!(b>o)){l.applyMatrix4(this.matrixWorld);var x=e.ray.origin.distanceTo(l);x<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var M=0,w=p.count-1;M<w;M+=f){s.fromBufferAttribute(p,M),u.fromBufferAttribute(p,M+1);var S=zf.distanceSqToSegment(s,u,l,c);if(!(S>o)){l.applyMatrix4(this.matrixWorld);var P=e.ray.origin.distanceTo(l);P<e.near||P>e.far||t.push({distance:P,point:c.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry)for(var T=n.vertices,E=T.length,O=0;O<E-1;O+=f){var A=zf.distanceSqToSegment(T[O],T[O+1],l,c);if(!(A>o)){l.applyMatrix4(this.matrixWorld);var L=e.ray.origin.distanceTo(l);L<e.near||L>e.far||t.push({distance:L,point:c.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var Uf=new Iu,Gf=new Iu;an.prototype=Object.assign(Object.create(rn.prototype),{constructor:an,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Uf.fromBufferAttribute(t,r),Gf.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Uf.distanceTo(Gf);e.setAttribute("lineDistance",new O(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(var a=e.vertices,o=e.lineDistances,s=0,u=a.length;s<u;s+=2)Uf.copy(a[s]),Gf.copy(a[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+Uf.distanceTo(Gf);return this}}),on.prototype=Object.assign(Object.create(rn.prototype),{constructor:on,isLineLoop:!0}),sn.prototype=Object.create(g.prototype),sn.prototype.constructor=sn,sn.prototype.isPointsMaterial=!0,sn.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Hf=new cc,Vf=new uc,Wf=new ec,qf=new Iu;un.prototype=Object.assign(Object.create(h.prototype),{constructor:un,isPoints:!0,copy:function(e){return h.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Wf.copy(n.boundingSphere),Wf.applyMatrix4(r),Wf.radius+=i,!1!==e.ray.intersectsSphere(Wf)){Hf.copy(r).invert(),Vf.copy(e.ray).applyMatrix4(Hf);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,u=n.attributes,c=u.position;if(null!==s)for(var l=s.array,f=0,d=l.length;f<d;f++){var h=l[f];qf.fromBufferAttribute(c,h),cn(qf,h,o,r,e,t,this)}else for(var p=0,v=c.count;p<v;p++)qf.fromBufferAttribute(c,p),cn(qf,p,o,r,e,t,this)}else for(var m=n.vertices,g=0,y=m.length;g<y;g++)cn(m[g],g,o,r,e,t,this)}},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),ln.prototype=Object.assign(Object.create(u.prototype),{constructor:ln,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){var e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),fn.prototype=Object.create(u.prototype),fn.prototype.constructor=fn,fn.prototype.isCompressedTexture=!0,dn.prototype=Object.create(u.prototype),dn.prototype.constructor=dn,dn.prototype.isCanvasTexture=!0,hn.prototype=Object.create(u.prototype),hn.prototype.constructor=hn,hn.prototype.isDepthTexture=!0;var Yf=0,Xf=new cc,Zf=new h,Jf=new Iu;pn.prototype=Object.assign(Object.create(s.prototype),{constructor:pn,isGeometry:!0,applyMatrix4:function(e){for(var t=(new Lu).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(var i=0,a=this.faces.length;i<a;i++){var o=this.faces[i];o.normal.applyMatrix3(t).normalize();for(var s=0,u=o.vertexNormals.length;s<u;s++)o.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Xf.makeRotationX(e),this.applyMatrix4(Xf),this},rotateY:function(e){return Xf.makeRotationY(e),this.applyMatrix4(Xf),this},rotateZ:function(e){return Xf.makeRotationZ(e),this.applyMatrix4(Xf),this},translate:function(e,t,n){return Xf.makeTranslation(e,t,n),this.applyMatrix4(Xf),this},scale:function(e,t,n){return Xf.makeScale(e,t,n),this.applyMatrix4(Xf),this},lookAt:function(e){return Zf.lookAt(e),Zf.updateMatrix(),this.applyMatrix4(Zf.matrix),this},fromBufferGeometry:function(e){function t(e,t,r,i){var a=void 0===s?[]:[n.colors[e].clone(),n.colors[t].clone(),n.colors[r].clone()],l=void 0===o?[]:[(new Iu).fromBufferAttribute(o,e),(new Iu).fromBufferAttribute(o,t),(new Iu).fromBufferAttribute(o,r)],f=new $c(e,t,r,l,a,i);n.faces.push(f),void 0!==u&&n.faceVertexUvs[0].push([(new Au).fromBufferAttribute(u,e),(new Au).fromBufferAttribute(u,t),(new Au).fromBufferAttribute(u,r)]),void 0!==c&&n.faceVertexUvs[1].push([(new Au).fromBufferAttribute(c,e),(new Au).fromBufferAttribute(c,t),(new Au).fromBufferAttribute(c,r)])}var n=this,r=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var a=i.position,o=i.normal,s=i.color,u=i.uv,c=i.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var l=0;l<a.count;l++)n.vertices.push((new Iu).fromBufferAttribute(a,l)),void 0!==s&&n.colors.push((new Kc).fromBufferAttribute(s,l));var f=e.groups;if(f.length>0)for(var d=0;d<f.length;d++)for(var h=f[d],p=h.start,v=h.count,m=p,g=p+v;m<g;m+=3)void 0!==r?t(r.getX(m),r.getX(m+1),r.getX(m+2),h.materialIndex):t(m,m+1,m+2,h.materialIndex);else if(void 0!==r)for(var y=0;y<r.count;y+=3)t(r.getX(y),r.getX(y+1),r.getX(y+2));else for(var _=0;_<a.count;_+=3)t(_,_+1,_+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jf).negate(),this.translate(Jf.x,Jf.y,Jf.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new cc;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var e=new Iu,t=new Iu,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new Array(this.vertices.length),n=0,r=this.vertices.length;n<r;n++)t[n]=new Iu;if(e)for(var i=new Iu,a=new Iu,o=0,s=this.faces.length;o<s;o++){var u=this.faces[o],c=this.vertices[u.a],l=this.vertices[u.b],f=this.vertices[u.c];i.subVectors(f,l),a.subVectors(c,l),i.cross(a),t[u.a].add(i),t[u.b].add(i),t[u.c].add(i)}else{this.computeFaceNormals();for(var d=0,h=this.faces.length;d<h;d++){var p=this.faces[d];t[p.a].add(p.normal),t[p.b].add(p.normal),t[p.c].add(p.normal)}}for(var v=0,m=this.vertices.length;v<m;v++)t[v].normalize();for(var g=0,y=this.faces.length;g<y;g++){var _=this.faces[g],b=_.vertexNormals;3===b.length?(b[0].copy(t[_.a]),b[1].copy(t[_.b]),b[2].copy(t[_.c])):(b[0]=t[_.a].clone(),b[1]=t[_.b].clone(),b[2]=t[_.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e],r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var e=0,t=this.faces.length;e<t;e++){var n=this.faces[e];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var r=0,i=n.vertexNormals.length;r<i;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var a=new pn;a.faces=this.faces;for(var o=0,s=this.morphTargets.length;o<s;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];for(var u=this.morphNormals[o].faceNormals,c=this.morphNormals[o].vertexNormals,l=0,f=this.faces.length;l<f;l++){var d=new Iu,h={a:new Iu,b:new Iu,c:new Iu};u.push(d),c.push(h)}}var p=this.morphNormals[o];a.vertices=this.morphTargets[o].vertices,a.computeFaceNormals(),a.computeVertexNormals();for(var v=0,m=this.faces.length;v<m;v++){var g=this.faces[v],y=p.faceNormals[v],_=p.vertexNormals[v];y.copy(g.normal),_.a.copy(g.vertexNormals[0]),_.b.copy(g.vertexNormals[1]),_.c.copy(g.vertexNormals[2])}}for(var b=0,x=this.faces.length;b<x;b++){var M=this.faces[b];M.normal=M.__originalFaceNormal,M.vertexNormals=M.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new zu),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ec),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r=void 0,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,u=e.faces,c=this.colors,l=e.colors;void 0!==t&&(r=(new Lu).getNormalMatrix(t));for(var f=0,d=o.length;f<d;f++){var h=o[f],p=h.clone();void 0!==t&&p.applyMatrix4(t),a.push(p)}for(var v=0,m=l.length;v<m;v++)c.push(l[v].clone());for(var g=0,y=u.length;g<y;g++){var _=u[g],b=void 0,x=void 0,M=_.vertexNormals,w=_.vertexColors,S=new $c(_.a+i,_.b+i,_.c+i);S.normal.copy(_.normal),void 0!==r&&S.normal.applyMatrix3(r).normalize();for(var P=0,T=M.length;P<T;P++)b=M[P].clone(),void 0!==r&&b.applyMatrix3(r).normalize(),S.vertexNormals.push(b);S.color.copy(_.color);for(var E=0,O=w.length;E<O;E++)x=w[E],S.vertexColors.push(x.clone());S.materialIndex=_.materialIndex+n,s.push(S)}for(var A=0,L=e.faceVertexUvs.length;A<L;A++){var R=e.faceVertexUvs[A];void 0===this.faceVertexUvs[A]&&(this.faceVertexUvs[A]=[]);for(var C=0,j=R.length;C<j;C++){for(var k=R[C],N=[],I=0,D=k.length;I<D;I++)N.push(k[I].clone());this.faceVertexUvs[A].push(N)}}},mergeMesh:function(e){if(!e||!e.isMesh)return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t={},n=[],r=[],i=Math.pow(10,e),a=0,o=this.vertices.length;a<o;a++){var s=this.vertices[a],u=Math.round(s.x*i)+"_"+Math.round(s.y*i)+"_"+Math.round(s.z*i);void 0===t[u]?(t[u]=a,n.push(this.vertices[a]),r[a]=n.length-1):r[a]=r[t[u]]}for(var c=[],l=0,f=this.faces.length;l<f;l++){var d=this.faces[l];d.a=r[d.a],d.b=r[d.b],d.c=r[d.c];for(var h=[d.a,d.b,d.c],p=0;p<3;p++)if(h[p]===h[(p+1)%3]){c.push(l);break}}for(var v=c.length-1;v>=0;v--){var m=c[v];this.faces.splice(m,1);for(var g=0,y=this.faceVertexUvs.length;g<y;g++)this.faceVertexUvs[g].splice(m,1)}var _=this.vertices.length-n.length;return this.vertices=n,_},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Iu(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,r=0;r<n;r++)t[r]._id=r;t.sort(e);var i=this.faceVertexUvs[0],a=this.faceVertexUvs[1],o=void 0,s=void 0;i&&i.length===n&&(o=[]),a&&a.length===n&&(s=[]);for(var u=0;u<n;u++){var c=t[u]._id;o&&o.push(i[c]),s&&s.push(a[c])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==d[t]?d[t]:(d[t]=f.length/3,f.push(e.x,e.y,e.z),d[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=h.length,h.push(e.getHex()),p[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==m[t]?m[t]:(m[t]=v.length/2,v.push(e.x,e.y),m[t])}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(var s=[],u=0;u<this.vertices.length;u++){var c=this.vertices[u];s.push(c.x,c.y,c.z)}for(var l=[],f=[],d={},h=[],p={},v=[],m={},g=0;g<this.faces.length;g++){var y=this.faces[g],_=void 0!==this.faceVertexUvs[0][g],b=y.normal.length()>0,x=y.vertexNormals.length>0,M=1!==y.color.r||1!==y.color.g||1!==y.color.b,w=y.vertexColors.length>0,S=0;if(S=e(S,0,0),S=e(S,1,!0),S=e(S,2,!1),S=e(S,3,_),S=e(S,4,b),S=e(S,5,x),S=e(S,6,M),S=e(S,7,w),l.push(S),l.push(y.a,y.b,y.c),l.push(y.materialIndex),_){var P=this.faceVertexUvs[0][g];l.push(r(P[0]),r(P[1]),r(P[2]))}if(b&&l.push(t(y.normal)),x){var T=y.vertexNormals;l.push(t(T[0]),t(T[1]),t(T[2]))}if(M&&l.push(n(y.color)),w){var E=y.vertexColors;l.push(n(E[0]),n(E[1]),n(E[2]))}}return i.data={},i.data.vertices=s,i.data.normals=f,h.length>0&&(i.data.colors=h),v.length>0&&(i.data.uvs=[v]),i.data.faces=l,i},clone:function(){return(new pn).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());for(var i=e.colors,a=0,o=i.length;a<o;a++)this.colors.push(i[a].clone());for(var s=e.faces,u=0,c=s.length;u<c;u++)this.faces.push(s[u].clone());for(var l=0,f=e.faceVertexUvs.length;l<f;l++){var d=e.faceVertexUvs[l];void 0===this.faceVertexUvs[l]&&(this.faceVertexUvs[l]=[]);for(var h=0,p=d.length;h<p;h++){for(var v=d[h],m=[],g=0,y=v.length;g<y;g++){var _=v[g];m.push(_.clone())}this.faceVertexUvs[l].push(m)}}for(var b=e.morphTargets,x=0,M=b.length;x<M;x++){var w={};if(w.name=b[x].name,void 0!==b[x].vertices){w.vertices=[];for(var S=0,P=b[x].vertices.length;S<P;S++)w.vertices.push(b[x].vertices[S].clone())}if(void 0!==b[x].normals){w.normals=[];for(var T=0,E=b[x].normals.length;T<E;T++)w.normals.push(b[x].normals[T].clone())}this.morphTargets.push(w)}for(var O=e.morphNormals,A=0,L=O.length;A<L;A++){var R={};if(void 0!==O[A].vertexNormals){R.vertexNormals=[];for(var C=0,j=O[A].vertexNormals.length;C<j;C++){var k=O[A].vertexNormals[C],N={};N.a=k.a.clone(),N.b=k.b.clone(),N.c=k.c.clone(),R.vertexNormals.push(N)}}if(void 0!==O[A].faceNormals){R.faceNormals=[];for(var I=0,D=O[A].faceNormals.length;I<D;I++)R.faceNormals.push(O[A].faceNormals[I].clone())}this.morphNormals.push(R)}for(var B=e.skinWeights,z=0,F=B.length;z<F;z++)this.skinWeights.push(B[z].clone());for(var U=e.skinIndices,G=0,H=U.length;G<H;G++)this.skinIndices.push(U[G].clone());for(var V=e.lineDistances,W=0,q=V.length;W<q;W++)this.lineDistances.push(V[W]);var Y=e.boundingBox;null!==Y&&(this.boundingBox=Y.clone());var X=e.boundingSphere;return null!==X&&(this.boundingSphere=X.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Qf=function(e){function t(e,n,r,a,s,u){o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return c.type="BoxGeometry",c.parameters={width:e,height:n,depth:r,widthSegments:a,heightSegments:s,depthSegments:u},c.fromBufferGeometry(new Al(e,n,r,a,s,u)),c.mergeVertices(),c}return a(t,e),t}(pn),Kf=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.type="CircleBufferGeometry",s.parameters={radius:e,segments:n,thetaStart:r,thetaLength:a},n=Math.max(3,n);var u=[],c=[],l=[],f=[],d=new Iu,h=new Au;c.push(0,0,0),l.push(0,0,1),f.push(.5,.5);for(var p=0,v=3;p<=n;p++,v+=3){var m=r+p/n*a;d.x=e*Math.cos(m),d.y=e*Math.sin(m),c.push(d.x,d.y,d.z),l.push(0,0,1),h.x=(c[v]/e+1)/2,h.y=(c[v+1]/e+1)/2,f.push(h.x,h.y)}for(var g=1;g<=n;g++)u.push(g,g+1,0);return s.setIndex(u),s.setAttribute("position",new O(c,3)),s.setAttribute("normal",new O(l,3)),s.setAttribute("uv",new O(f,2)),s}return a(t,e),t}(C),$f=function(e){function t(e,n,r,a){o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.type="CircleGeometry",s.parameters={radius:e,segments:n,thetaStart:r,thetaLength:a},s.fromBufferGeometry(new Kf(e,n,r,a)),s.mergeVertices(),s}return a(t,e),t}(pn),ed=function(e){function t(){function e(e){for(var t=y,i=new Au,a=new Iu,o=0,u=!0===e?n:r,c=!0===e?1:-1,d=1;d<=s;d++)v.push(0,b*c,0),m.push(0,c,0),g.push(.5,.5),y++;for(var _=y,M=0;M<=s;M++){var w=M/s,S=w*f+l,P=Math.cos(S),T=Math.sin(S);a.x=u*T,a.y=b*c,a.z=u*P,v.push(a.x,a.y,a.z),m.push(0,c,0),i.x=.5*P+.5,i.y=.5*T*c+.5,g.push(i.x,i.y),y++}for(var E=0;E<s;E++){var O=t+E,A=_+E;!0===e?p.push(A,A+1,O):p.push(A+1,A,O),o+=3}h.addGroup(x,o,!0===e?1:2),x+=o}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;o(this,t);var d=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));d.type="CylinderBufferGeometry",d.parameters={radiusTop:n,radiusBottom:r,height:a,radialSegments:s,heightSegments:u,openEnded:c,thetaStart:l,thetaLength:f};var h=d;s=Math.floor(s),u=Math.floor(u);var p=[],v=[],m=[],g=[],y=0,_=[],b=a/2,x=0;return function(){for(var e=new Iu,t=new Iu,i=0,o=(r-n)/a,c=0;c<=u;c++){for(var d=[],M=c/u,w=M*(r-n)+n,S=0;S<=s;S++){var P=S/s,T=P*f+l,E=Math.sin(T),O=Math.cos(T);t.x=w*E,t.y=-M*a+b,t.z=w*O,v.push(t.x,t.y,t.z),e.set(E,o,O).normalize(),m.push(e.x,e.y,e.z),g.push(P,1-M),d.push(y++)}_.push(d)}for(var A=0;A<s;A++)for(var L=0;L<u;L++){var R=_[L][A],C=_[L+1][A],j=_[L+1][A+1],k=_[L][A+1];p.push(R,C,k),p.push(C,j,k),i+=6}h.addGroup(x,i,0),x+=i}(),!1===c&&(n>0&&e(!0),r>0&&e(!1)),d.setIndex(p),d.setAttribute("position",new O(v,3)),d.setAttribute("normal",new O(m,3)),d.setAttribute("uv",new O(g,2)),d}return a(t,e),t}(C),td=function(e){function t(e,n,r,a,s,u,c,l){o(this,t);var f=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return f.type="CylinderGeometry",f.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:a,heightSegments:s,openEnded:u,thetaStart:c,thetaLength:l},f.fromBufferGeometry(new ed(e,n,r,a,s,u,c,l)),f.mergeVertices(),f}return a(t,e),t}(pn),nd=function(e){function t(e,n,r,a,s,u,c){o(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,e,n,r,a,s,u,c));return l.type="ConeGeometry",l.parameters={radius:e,height:n,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:u,thetaLength:c},l}return a(t,e),t}(td),rd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;o(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,e,n,r,a,s,u,c));return l.type="ConeBufferGeometry",l.parameters={radius:e,height:n,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:u,thetaLength:c},l}return a(t,e),t}(ed),id=function(e){function t(e,n){function r(e,t,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var u=e.clone().lerp(n,o/i),c=t.clone().lerp(n,o/i),l=i-o,f=0;f<=l;f++)a[o][f]=0===f&&o===i?u:u.clone().lerp(c,f/l)}for(var d=0;d<i;d++)for(var h=0;h<2*(i-d)-1;h++){var p=Math.floor(h/2);h%2==0?(s(a[d][p+1]),s(a[d+1][p]),s(a[d][p])):(s(a[d][p+1]),s(a[d+1][p+1]),s(a[d+1][p]))}}function a(){for(var e=0;e<g.length;e+=6){var t=g[e+0],n=g[e+2],r=g[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(g[e+0]+=1),n<.2&&(g[e+2]+=1),r<.2&&(g[e+4]+=1))}}function s(e){m.push(e.x,e.y,e.z)}function u(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(){for(var e=new Iu,t=new Iu,n=new Iu,r=new Iu,i=new Au,a=new Au,o=new Au,s=0,u=0;s<m.length;s+=9,u+=6){e.set(m[s+0],m[s+1],m[s+2]),t.set(m[s+3],m[s+4],m[s+5]),n.set(m[s+6],m[s+7],m[s+8]),i.set(g[u+0],g[u+1]),a.set(g[u+2],g[u+3]),o.set(g[u+4],g[u+5]),r.copy(e).add(t).add(n).divideScalar(3);var c=f(r);l(i,u+0,e,c),l(a,u+2,t,c),l(o,u+4,n,c)}}function l(e,t,n,r){r<0&&1===e.x&&(g[t]=e.x-1),0===n.x&&0===n.z&&(g[t]=r/2/Math.PI+.5)}function f(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,t);var v=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));v.type="PolyhedronBufferGeometry",v.parameters={vertices:e,indices:n,radius:h,detail:p};var m=[],g=[];return function(e){for(var t=new Iu,i=new Iu,a=new Iu,o=0;o<n.length;o+=3)u(n[o+0],t),u(n[o+1],i),u(n[o+2],a),r(t,i,a,e)}(p),function(e){for(var t=new Iu,n=0;n<m.length;n+=3)t.x=m[n+0],t.y=m[n+1],t.z=m[n+2],t.normalize().multiplyScalar(e),m[n+0]=t.x,m[n+1]=t.y,m[n+2]=t.z}(h),function(){for(var e=new Iu,t=0;t<m.length;t+=3){e.x=m[t+0],e.y=m[t+1],e.z=m[t+2];var n=f(e)/2/Math.PI+.5,r=d(e)/Math.PI+.5;g.push(n,1-r)}c(),a()}(),v.setAttribute("position",new O(m,3)),v.setAttribute("normal",new O(m.slice(),3)),v.setAttribute("uv",new O(g,2)),0===p?v.computeVertexNormals():v.normalizeNormals(),v}return a(t,e),t}(C),ad=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,t);var r=(1+Math.sqrt(5))/2,a=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-r,0,-a,r,0,a,-r,0,a,r,-a,-r,0,-a,r,0,a,-r,0,a,r,0,-r,0,-a,r,0,-a,-r,0,a,r,0,a],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,u,e,n));return c.type="DodecahedronBufferGeometry",c.parameters={radius:e,detail:n},c}return a(t,e),t}(id),od=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.type="DodecahedronGeometry",r.parameters={radius:e,detail:n},r.fromBufferGeometry(new ad(e,n)),r.mergeVertices(),r}return a(t,e),t}(pn),sd=new Iu,ud=new Iu,cd=new Iu,ld=new Xc,fd=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.type="EdgesGeometry",r.parameters={thresholdAngle:n},n=void 0!==n?n:1,e.isGeometry&&(e=(new C).fromGeometry(e));for(var a=Math.pow(10,4),s=Math.cos(Ou.DEG2RAD*n),u=e.getIndex(),c=e.getAttribute("position"),l=u?u.count:c.count,f=[0,0,0],d=["a","b","c"],h=new Array(3),p={},v=[],m=0;m<l;m+=3){u?(f[0]=u.getX(m),f[1]=u.getX(m+1),f[2]=u.getX(m+2)):(f[0]=m,f[1]=m+1,f[2]=m+2);var g=ld.a,y=ld.b,_=ld.c;if(g.fromBufferAttribute(c,f[0]),y.fromBufferAttribute(c,f[1]),_.fromBufferAttribute(c,f[2]),ld.getNormal(cd),h[0]=Math.round(g.x*a)+","+Math.round(g.y*a)+","+Math.round(g.z*a),h[1]=Math.round(y.x*a)+","+Math.round(y.y*a)+","+Math.round(y.z*a),h[2]=Math.round(_.x*a)+","+Math.round(_.y*a)+","+Math.round(_.z*a),h[0]!==h[1]&&h[1]!==h[2]&&h[2]!==h[0])for(var b=0;b<3;b++){var x=(b+1)%3,M=h[b],w=h[x],S=ld[d[b]],P=ld[d[x]],T=M+"_"+w,E=w+"_"+M;E in p&&p[E]?(cd.dot(p[E].normal)<=s&&(v.push(S.x,S.y,S.z),v.push(P.x,P.y,P.z)),p[E]=null):T in p||(p[T]={index0:f[b],index1:f[x],normal:cd.clone()})}}for(var A in p)if(p[A]){var L=p[A],R=L.index0,j=L.index1;sd.fromBufferAttribute(c,R),ud.fromBufferAttribute(c,j),v.push(sd.x,sd.y,sd.z),v.push(ud.x,ud.y,ud.z)}return r.setAttribute("position",new O(v,3)),r}return a(t,e),t}(C),dd={triangulate:function(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,a=vn(e,0,i,n,!0),o=[];if(!a||a.next===a.prev)return o;var s=void 0,u=void 0,c=void 0,l=void 0,f=void 0,d=void 0,h=void 0;if(r&&(a=Mn(e,t,a,n)),e.length>80*n){s=c=e[0],u=l=e[1];for(var p=n;p<i;p+=n)f=e[p],d=e[p+1],f<s&&(s=f),d<u&&(u=d),f>c&&(c=f),d>l&&(l=d);h=Math.max(c-s,l-u),h=0!==h?1/h:0}return gn(a,o,n,s,u,h),o}},hd={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return hd.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];qn(e),Yn(n,e);var a=e.length;t.forEach(qn);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,Yn(n,t[o]);for(var s=dd.triangulate(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}},pd=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.type="ExtrudeBufferGeometry",r.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];for(var a=r,s=[],u=[],c=0,l=e.length;c<l;c++){var f=e[c];!function(e){function t(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function r(e,t,n){var r=void 0,i=void 0,a=void 0,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,c=n.y-e.y,l=o*o+s*s,f=o*c-s*u;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(l),h=Math.sqrt(u*u+c*c),p=t.x-s/d,v=t.y+o/d,m=n.x-c/h,g=n.y+u/h,y=((m-p)*c-(g-v)*u)/(o*c-s*u);r=p+o*y-e.x,i=v+s*y-e.y;var _=r*r+i*i;if(_<=2)return new Au(r,i);a=Math.sqrt(_/2)}else{var b=!1;o>Number.EPSILON?u>Number.EPSILON&&(b=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(b=!0):Math.sign(s)===Math.sign(c)&&(b=!0),b?(r=-s,i=o,a=Math.sqrt(l)):(r=o,i=s,a=Math.sqrt(l/2))}return new Au(r/a,i/a)}function i(e,t){for(var n=e.length;--n>=0;){var r=n,i=n-1;i<0&&(i=e.length-1);for(var a=0,o=v+2*x;a<o;a++){var s=U*a,u=U*(a+1);l(t+r+s,t+i+s,t+i+u,t+r+u)}}}function o(e,t,n){h.push(e),h.push(t),h.push(n)}function c(e,t,n){f(e),f(t),f(n);var r=s.length/3,i=w.generateTopUV(a,s,r-3,r-2,r-1);d(i[0]),d(i[1]),d(i[2])}function l(e,t,n,r){f(e),f(t),f(r),f(t),f(n),f(r);var i=s.length/3,o=w.generateSideWallUV(a,s,i-6,i-3,i-2,i-1);d(o[0]),d(o[1]),d(o[3]),d(o[1]),d(o[2]),d(o[3])}function f(e){s.push(h[3*e+0]),s.push(h[3*e+1]),s.push(h[3*e+2])}function d(e){u.push(e.x),u.push(e.y)}var h=[],p=void 0!==n.curveSegments?n.curveSegments:12,v=void 0!==n.steps?n.steps:1,m=void 0!==n.depth?n.depth:100,g=void 0===n.bevelEnabled||n.bevelEnabled,y=void 0!==n.bevelThickness?n.bevelThickness:6,_=void 0!==n.bevelSize?n.bevelSize:y-2,b=void 0!==n.bevelOffset?n.bevelOffset:0,x=void 0!==n.bevelSegments?n.bevelSegments:3,M=n.extrudePath,w=void 0!==n.UVGenerator?n.UVGenerator:vd;void 0!==n.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),m=n.amount);var S=void 0,P=!1,T=void 0,E=void 0,O=void 0,A=void 0;M&&(S=M.getSpacedPoints(v),P=!0,g=!1,T=M.computeFrenetFrames(v,!1),E=new Iu,O=new Iu,A=new Iu),g||(x=0,y=0,_=0,b=0);var L=e.extractPoints(p),R=L.shape,C=L.holes;if(!hd.isClockWise(R)){R=R.reverse();for(var j=0,k=C.length;j<k;j++){var N=C[j];hd.isClockWise(N)&&(C[j]=N.reverse())}}for(var I=hd.triangulateShape(R,C),D=R,B=0,z=C.length;B<z;B++){var F=C[B];R=R.concat(F)}for(var U=R.length,G=I.length,H=[],V=0,W=D.length,q=W-1,Y=V+1;V<W;V++,q++,Y++)q===W&&(q=0),Y===W&&(Y=0),H[V]=r(D[V],D[q],D[Y]);for(var X=[],Z=void 0,J=H.concat(),Q=0,K=C.length;Q<K;Q++){var $=C[Q];Z=[];for(var ee=0,te=$.length,ne=te-1,re=ee+1;ee<te;ee++,ne++,re++)ne===te&&(ne=0),re===te&&(re=0),Z[ee]=r($[ee],$[ne],$[re]);X.push(Z),J=J.concat(Z)}for(var ie=0;ie<x;ie++){for(var ae=ie/x,oe=y*Math.cos(ae*Math.PI/2),se=_*Math.sin(ae*Math.PI/2)+b,ue=0,ce=D.length;ue<ce;ue++){var le=t(D[ue],H[ue],se);o(le.x,le.y,-oe)}for(var fe=0,de=C.length;fe<de;fe++){var he=C[fe];Z=X[fe];for(var pe=0,ve=he.length;pe<ve;pe++){var me=t(he[pe],Z[pe],se);o(me.x,me.y,-oe)}}}for(var ge=_+b,ye=0;ye<U;ye++){var _e=g?t(R[ye],J[ye],ge):R[ye];P?(O.copy(T.normals[0]).multiplyScalar(_e.x),E.copy(T.binormals[0]).multiplyScalar(_e.y),A.copy(S[0]).add(O).add(E),o(A.x,A.y,A.z)):o(_e.x,_e.y,0)}for(var be=1;be<=v;be++)for(var xe=0;xe<U;xe++){var Me=g?t(R[xe],J[xe],ge):R[xe];P?(O.copy(T.normals[be]).multiplyScalar(Me.x),E.copy(T.binormals[be]).multiplyScalar(Me.y),A.copy(S[be]).add(O).add(E),o(A.x,A.y,A.z)):o(Me.x,Me.y,m/v*be)}for(var we=x-1;we>=0;we--){for(var Se=we/x,Pe=y*Math.cos(Se*Math.PI/2),Te=_*Math.sin(Se*Math.PI/2)+b,Ee=0,Oe=D.length;Ee<Oe;Ee++){var Ae=t(D[Ee],H[Ee],Te);o(Ae.x,Ae.y,m+Pe)}for(var Le=0,Re=C.length;Le<Re;Le++){var Ce=C[Le];Z=X[Le];for(var je=0,ke=Ce.length;je<ke;je++){var Ne=t(Ce[je],Z[je],Te);P?o(Ne.x,Ne.y+S[v-1].y,S[v-1].x+Pe):o(Ne.x,Ne.y,m+Pe)}}}!function(){var e=s.length/3;if(g){for(var t=0,n=U*t,r=0;r<G;r++){var i=I[r];c(i[2]+n,i[1]+n,i[0]+n)}t=v+2*x,n=U*t;for(var o=0;o<G;o++){var u=I[o];c(u[0]+n,u[1]+n,u[2]+n)}}else{for(var l=0;l<G;l++){var f=I[l];c(f[2],f[1],f[0])}for(var d=0;d<G;d++){var h=I[d];c(h[0]+U*v,h[1]+U*v,h[2]+U*v)}}a.addGroup(e,s.length/3-e,0)}(),function(){var e=s.length/3,t=0;i(D,t),t+=D.length;for(var n=0,r=C.length;n<r;n++){var o=C[n];i(o,t),t+=o.length}a.addGroup(e,s.length/3-e,1)}()}(f)}return r.setAttribute("position",new O(s,3)),r.setAttribute("uv",new O(u,2)),r.computeVertexNormals(),r}return a(t,e),ka(t,[{key:"toJSON",value:function(){var e=C.prototype.toJSON.call(this);return Xn(this.parameters.shapes,this.parameters.options,e)}}]),t}(C),vd={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],u=t[3*r+1],c=t[3*i],l=t[3*i+1];return[new Au(a,o),new Au(s,u),new Au(c,l)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],c=t[3*r],l=t[3*r+1],f=t[3*r+2],d=t[3*i],h=t[3*i+1],p=t[3*i+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-l)<.01?[new Au(o,1-u),new Au(c,1-f),new Au(d,1-p),new Au(v,1-g)]:[new Au(s,1-u),new Au(l,1-f),new Au(h,1-p),new Au(m,1-g)]}},md=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.type="ExtrudeGeometry",r.parameters={shapes:e,options:n},r.fromBufferGeometry(new pd(e,n)),r.mergeVertices(),r}return a(t,e),ka(t,[{key:"toJSON",value:function(){var e=ja(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this);return Zn(this.parameters.shapes,this.parameters.options,e)}}]),t}(pn),gd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,t);var r=(1+Math.sqrt(5))/2,a=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,s,e,n));return u.type="IcosahedronBufferGeometry",u.parameters={radius:e,detail:n},u}return a(t,e),t}(id),yd=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.type="IcosahedronGeometry",r.parameters={radius:e,detail:n},r.fromBufferGeometry(new gd(e,n)),r.mergeVertices(),r}return a(t,e),t}(pn),_d=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.type="LatheBufferGeometry",s.parameters={points:e,segments:n,phiStart:r,phiLength:a},n=Math.floor(n),a=Ou.clamp(a,0,2*Math.PI);for(var u=[],c=[],l=[],f=1/n,d=new Iu,h=new Au,p=0;p<=n;p++)for(var v=r+p*f*a,m=Math.sin(v),g=Math.cos(v),y=0;y<=e.length-1;y++)d.x=e[y].x*m,d.y=e[y].y,d.z=e[y].x*g,c.push(d.x,d.y,d.z),h.x=p/n,h.y=y/(e.length-1),l.push(h.x,h.y);for(var _=0;_<n;_++)for(var b=0;b<e.length-1;b++){var x=b+_*e.length,M=x,w=x+e.length,S=x+e.length+1,P=x+1;u.push(M,w,P),u.push(w,S,P)}if(s.setIndex(u),s.setAttribute("position",new O(c,3)),s.setAttribute("uv",new O(l,2)),s.computeVertexNormals(),a===2*Math.PI)for(var T=s.attributes.normal.array,E=new Iu,A=new Iu,L=new Iu,R=n*e.length*3,C=0,j=0;C<e.length;C++,j+=3)E.x=T[j+0],E.y=T[j+1],E.z=T[j+2],A.x=T[R+j+0],A.y=T[R+j+1],A.z=T[R+j+2],L.addVectors(E,A).normalize(),T[j+0]=T[R+j+0]=L.x,T[j+1]=T[R+j+1]=L.y,T[j+2]=T[R+j+2]=L.z;return s}return a(t,e),t}(C),bd=function(e){function t(e,n,r,a){o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.type="LatheGeometry",s.parameters={points:e,segments:n,phiStart:r,phiLength:a},s.fromBufferGeometry(new _d(e,n,r,a)),s.mergeVertices(),s}return a(t,e),t}(pn),xd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,t);var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,a,e,n));return s.type="OctahedronBufferGeometry",s.parameters={radius:e,detail:n},s}return a(t,e),t}(id),Md=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.type="OctahedronGeometry",r.parameters={radius:e,detail:n},r.fromBufferGeometry(new xd(e,n)),r.mergeVertices(),r}return a(t,e),t}(pn);Jn.prototype=Object.create(C.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(pn.prototype),Qn.prototype.constructor=Qn;var wd=function(e){function t(e,n,r,a){o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.type="PlaneGeometry",s.parameters={width:e,height:n,widthSegments:r,heightSegments:a},s.fromBufferGeometry(new Bl(e,n,r,a)),s.mergeVertices(),s}return a(t,e),t}(pn),Sd=function(e){function t(e,n,r,a){o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.type="PolyhedronGeometry",s.parameters={vertices:e,indices:n,radius:r,detail:a},s.fromBufferGeometry(new id(e,n,r,a)),s.mergeVertices(),s}return a(t,e),t}(pn),Pd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));c.type="RingBufferGeometry",c.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:a,thetaStart:s,thetaLength:u},r=Math.max(3,r),a=Math.max(1,a);for(var l=[],f=[],d=[],h=[],p=e,v=(n-e)/a,m=new Iu,g=new Au,y=0;y<=a;y++){for(var _=0;_<=r;_++){var b=s+_/r*u;m.x=p*Math.cos(b),m.y=p*Math.sin(b),f.push(m.x,m.y,m.z),d.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,h.push(g.x,g.y)}p+=v}for(var x=0;x<a;x++)for(var M=x*(r+1),w=0;w<r;w++){var S=w+M,P=S,T=S+r+1,E=S+r+2,A=S+1;l.push(P,T,A),l.push(T,E,A)}return c.setIndex(l),c.setAttribute("position",new O(f,3)),c.setAttribute("normal",new O(d,3)),c.setAttribute("uv",new O(h,2)),c}return a(t,e),t}(C),Td=function(e){function t(e,n,r,a,s,u){o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return c.type="RingGeometry",c.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:a,thetaStart:s,thetaLength:u},c.fromBufferGeometry(new Pd(e,n,r,a,s,u)),c.mergeVertices(),c}return a(t,e),t}(pn),Ed=function(e){function t(e){function n(e){var t=u.length/3,n=e.extractPoints(r),i=n.shape,a=n.holes;!1===hd.isClockWise(i)&&(i=i.reverse());for(var o=0,f=a.length;o<f;o++){var h=a[o];!0===hd.isClockWise(h)&&(a[o]=h.reverse())}for(var p=hd.triangulateShape(i,a),v=0,m=a.length;v<m;v++){var g=a[v];i=i.concat(g)}for(var y=0,_=i.length;y<_;y++){var b=i[y];u.push(b.x,b.y,0),c.push(0,0,1),l.push(b.x,b.y)}for(var x=0,M=p.length;x<M;x++){var w=p[x],S=w[0]+t,P=w[1]+t,T=w[2]+t;s.push(S,P,T),d+=3}}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.type="ShapeBufferGeometry",a.parameters={shapes:e,curveSegments:r};var s=[],u=[],c=[],l=[],f=0,d=0;if(!1===Array.isArray(e))n(e);else for(var h=0;h<e.length;h++)n(e[h]),a.addGroup(f,d,h),f+=d,d=0;return a.setIndex(s),a.setAttribute("position",new O(u,3)),a.setAttribute("normal",new O(c,3)),a.setAttribute("uv",new O(l,2)),a}return a(t,e),ka(t,[{key:"toJSON",value:function(){var e=C.prototype.toJSON.call(this);return Kn(this.parameters.shapes,e)}}]),t}(C),Od=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.type="ShapeGeometry","object"===(void 0===n?"undefined":Ca(n))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),n=n.curveSegments),r.parameters={shapes:e,curveSegments:n},r.fromBufferGeometry(new Ed(e,n)),r.mergeVertices(),r}return a(t,e),ka(t,[{key:"toJSON",value:function(){var e=pn.prototype.toJSON.call(this);return $n(this.parameters.shapes,e)}}]),t}(pn),Ad=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;o(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));l.type="SphereBufferGeometry",l.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:a,phiLength:s,thetaStart:u,thetaLength:c},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));for(var f=Math.min(u+c,Math.PI),d=0,h=[],p=new Iu,v=new Iu,m=[],g=[],y=[],_=[],b=0;b<=r;b++){var x=[],M=b/r,w=0;0==b&&0==u?w=.5/n:b==r&&f==Math.PI&&(w=-.5/n);for(var S=0;S<=n;S++){var P=S/n;p.x=-e*Math.cos(a+P*s)*Math.sin(u+M*c),p.y=e*Math.cos(u+M*c),p.z=e*Math.sin(a+P*s)*Math.sin(u+M*c),g.push(p.x,p.y,p.z),v.copy(p).normalize(),y.push(v.x,v.y,v.z),_.push(P+w,1-M),x.push(d++)}h.push(x)}for(var T=0;T<r;T++)for(var E=0;E<n;E++){var A=h[T][E+1],L=h[T][E],R=h[T+1][E],C=h[T+1][E+1];(0!==T||u>0)&&m.push(A,L,C),(T!==r-1||f<Math.PI)&&m.push(L,R,C)}return l.setIndex(m),l.setAttribute("position",new O(g,3)),l.setAttribute("normal",new O(y,3)),l.setAttribute("uv",new O(_,2)),l}return a(t,e),t}(C),Ld=function(e){function t(e,n,r,a,s,u,c){o(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.type="SphereGeometry",l.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:a,phiLength:s,thetaStart:u,thetaLength:c},l.fromBufferGeometry(new Ad(e,n,r,a,s,u,c)),l.mergeVertices(),l}return a(t,e),t}(pn),Rd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,t);var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1],s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,a,e,n));return s.type="TetrahedronBufferGeometry",s.parameters={radius:e,detail:n},s}return a(t,e),t}(id),Cd=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.type="TetrahedronGeometry",r.parameters={radius:e,detail:n},r.fromBufferGeometry(new Rd(e,n)),r.mergeVertices(),r}return a(t,e),t}(pn),jd=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var r=n.font;if(!r||!r.isFont){var a;return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),a=new C,i(u,a)}var s=r.generateShapes(e,n.size);n.depth=void 0!==n.height?n.height:50,void 0===n.bevelThickness&&(n.bevelThickness=10),void 0===n.bevelSize&&(n.bevelSize=8),void 0===n.bevelEnabled&&(n.bevelEnabled=!1);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,n));return u.type="TextBufferGeometry",u}return a(t,e),t}(pd),kd=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.type="TextGeometry",r.parameters={text:e,parameters:n},r.fromBufferGeometry(new jd(e,n)),r.mergeVertices(),r}return a(t,e),t}(pn),Nd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;o(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));u.type="TorusBufferGeometry",u.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:a,arc:s},r=Math.floor(r),a=Math.floor(a);for(var c=[],l=[],f=[],d=[],h=new Iu,p=new Iu,v=new Iu,m=0;m<=r;m++)for(var g=0;g<=a;g++){var y=g/a*s,_=m/r*Math.PI*2;p.x=(e+n*Math.cos(_))*Math.cos(y),p.y=(e+n*Math.cos(_))*Math.sin(y),p.z=n*Math.sin(_),l.push(p.x,p.y,p.z),h.x=e*Math.cos(y),h.y=e*Math.sin(y),v.subVectors(p,h).normalize(),f.push(v.x,v.y,v.z),d.push(g/a),d.push(m/r)}for(var b=1;b<=r;b++)for(var x=1;x<=a;x++){var M=(a+1)*b+x-1,w=(a+1)*(b-1)+x-1,S=(a+1)*(b-1)+x,P=(a+1)*b+x;c.push(M,w,P),c.push(w,S,P)}return u.setIndex(c),u.setAttribute("position",new O(l,3)),u.setAttribute("normal",new O(f,3)),u.setAttribute("uv",new O(d,2)),u}return a(t,e),t}(C),Id=function(e){function t(e,n,r,a,s){o(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.type="TorusGeometry",u.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:a,arc:s},u.fromBufferGeometry(new Nd(e,n,r,a,s)),u.mergeVertices(),u}return a(t,e),t}(pn),Dd=function(e){function t(){function e(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*a,i.y=r*(2+u)*o*.5,i.z=r*Math.sin(s)*.5}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;o(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));l.type="TorusKnotBufferGeometry",l.parameters={radius:n,tube:r,tubularSegments:a,radialSegments:s,p:u,q:c},a=Math.floor(a),s=Math.floor(s);for(var f=[],d=[],h=[],p=[],v=new Iu,m=new Iu,g=new Iu,y=new Iu,_=new Iu,b=new Iu,x=new Iu,M=0;M<=a;++M){var w=M/a*u*Math.PI*2;e(w,u,c,n,g),e(w+.01,u,c,n,y),b.subVectors(y,g),x.addVectors(y,g),_.crossVectors(b,x),x.crossVectors(_,b),_.normalize(),x.normalize();for(var S=0;S<=s;++S){var P=S/s*Math.PI*2,T=-r*Math.cos(P),E=r*Math.sin(P);v.x=g.x+(T*x.x+E*_.x),v.y=g.y+(T*x.y+E*_.y),v.z=g.z+(T*x.z+E*_.z),d.push(v.x,v.y,v.z),m.subVectors(v,g).normalize(),h.push(m.x,m.y,m.z),p.push(M/a),p.push(S/s)}}for(var A=1;A<=a;A++)for(var L=1;L<=s;L++){var R=(s+1)*(A-1)+(L-1),C=(s+1)*A+(L-1),j=(s+1)*A+L,k=(s+1)*(A-1)+L;f.push(R,C,k),f.push(C,j,k)}return l.setIndex(f),l.setAttribute("position",new O(d,3)),l.setAttribute("normal",new O(h,3)),l.setAttribute("uv",new O(p,2)),l}return a(t,e),t}(C),Bd=function(e){function t(e,n,r,a,s,u,c){o(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.type="TorusKnotGeometry",l.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:a,p:s,q:u},void 0!==c&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),l.fromBufferGeometry(new Dd(e,n,r,a,s,u)),l.mergeVertices(),l}return a(t,e),t}(pn),zd=function(e){function t(e){function n(t){m=e.getPointAt(t/s,m);for(var n=d.normals[t],r=d.binormals[t],i=0;i<=c;i++){var a=i/c*Math.PI*2,o=Math.sin(a),l=-Math.cos(a);p.x=l*n.x+o*r.x,p.y=l*n.y+o*r.y,p.z=l*n.z+o*r.z,p.normalize(),y.push(p.x,p.y,p.z),h.x=m.x+u*p.x,h.y=m.y+u*p.y,h.z=m.z+u*p.z,g.push(h.x,h.y,h.z)}}function r(){for(var e=1;e<=s;e++)for(var t=1;t<=c;t++){var n=(c+1)*(e-1)+(t-1),r=(c+1)*e+(t-1),i=(c+1)*e+t,a=(c+1)*(e-1)+t;b.push(n,r,a),b.push(r,i,a)}}function a(){for(var e=0;e<=s;e++)for(var t=0;t<=c;t++)v.x=e/s,v.y=t/c,_.push(v.x,v.y)}var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];o(this,t);var f=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));f.type="TubeBufferGeometry",f.parameters={path:e,tubularSegments:s,radius:u,radialSegments:c,closed:l};var d=e.computeFrenetFrames(s,l);f.tangents=d.tangents,f.normals=d.normals,f.binormals=d.binormals;var h=new Iu,p=new Iu,v=new Au,m=new Iu,g=[],y=[],_=[],b=[];return function(){for(var e=0;e<s;e++)n(e);n(!1===l?s:0),a(),r()}(),f.setIndex(b),f.setAttribute("position",new O(g,3)),f.setAttribute("normal",new O(y,3)),f.setAttribute("uv",new O(_,2)),f}return a(t,e),ka(t,[{key:"toJSON",value:function(){var e=C.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}]),t}(C),Fd=function(e){function t(e,n,r,a,s,u){o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));c.type="TubeGeometry",c.parameters={path:e,tubularSegments:n,radius:r,radialSegments:a,closed:s},void 0!==u&&console.warn("THREE.TubeGeometry: taper has been removed.");var l=new zd(e,n,r,a,s);return c.tangents=l.tangents,c.normals=l.normals,c.binormals=l.binormals,c.fromBufferGeometry(l),c.mergeVertices(),c}return a(t,e),t}(pn),Ud=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.type="WireframeGeometry";var r=[],a=[0,0],s={},u=["a","b","c"];if(e&&e.isGeometry){for(var c=e.faces,l=0,f=c.length;l<f;l++)for(var d=c[l],h=0;h<3;h++){var p=d[u[h]],v=d[u[(h+1)%3]];a[0]=Math.min(p,v),a[1]=Math.max(p,v);var m=a[0]+","+a[1];void 0===s[m]&&(s[m]={index1:a[0],index2:a[1]})}for(var g in s){var y=s[g],_=e.vertices[y.index1];r.push(_.x,_.y,_.z),_=e.vertices[y.index2],r.push(_.x,_.y,_.z)}}else if(e&&e.isBufferGeometry){var b=new Iu;if(null!==e.index){var x=e.attributes.position,M=e.index,w=e.groups;0===w.length&&(w=[{start:0,count:M.count,materialIndex:0}]);for(var S=0,P=w.length;S<P;++S)for(var T=w[S],E=T.start,A=T.count,L=E,R=E+A;L<R;L+=3)for(var C=0;C<3;C++){var j=M.getX(L+C),k=M.getX(L+(C+1)%3);a[0]=Math.min(j,k),a[1]=Math.max(j,k);var N=a[0]+","+a[1];void 0===s[N]&&(s[N]={index1:a[0],index2:a[1]})}for(var I in s){var D=s[I];b.fromBufferAttribute(x,D.index1),r.push(b.x,b.y,b.z),b.fromBufferAttribute(x,D.index2),r.push(b.x,b.y,b.z)}}else for(var B=e.attributes.position,z=0,F=B.count/3;z<F;z++)for(var U=0;U<3;U++){var G=3*z+U;b.fromBufferAttribute(B,G),r.push(b.x,b.y,b.z);var H=3*z+(U+1)%3;b.fromBufferAttribute(B,H),r.push(b.x,b.y,b.z)}}return n.setAttribute("position",new O(r,3)),n}return a(t,e),t}(C),Gd=Object.freeze({__proto__:null,BoxGeometry:Qf,BoxBufferGeometry:Al,CircleGeometry:$f,CircleBufferGeometry:Kf,ConeGeometry:nd,ConeBufferGeometry:rd,CylinderGeometry:td,CylinderBufferGeometry:ed,DodecahedronGeometry:od,DodecahedronBufferGeometry:ad,EdgesGeometry:fd,ExtrudeGeometry:md,ExtrudeBufferGeometry:pd,IcosahedronGeometry:yd,IcosahedronBufferGeometry:gd,LatheGeometry:bd,LatheBufferGeometry:_d,OctahedronGeometry:Md,OctahedronBufferGeometry:xd,ParametricGeometry:Qn,ParametricBufferGeometry:Jn,PlaneGeometry:wd,PlaneBufferGeometry:Bl,PolyhedronGeometry:Sd,PolyhedronBufferGeometry:id,RingGeometry:Td,RingBufferGeometry:Pd,ShapeGeometry:Od,ShapeBufferGeometry:Ed,SphereGeometry:Ld,SphereBufferGeometry:Ad,TetrahedronGeometry:Cd,TetrahedronBufferGeometry:Rd,TextGeometry:kd,TextBufferGeometry:jd,TorusGeometry:Id,TorusBufferGeometry:Nd,TorusKnotGeometry:Bd,TorusKnotBufferGeometry:Dd,TubeGeometry:Fd,TubeBufferGeometry:zd,WireframeGeometry:Ud});er.prototype=Object.create(g.prototype),er.prototype.constructor=er,er.prototype.isShadowMaterial=!0,er.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.color.copy(e.color),this},tr.prototype=Object.create(B.prototype),tr.prototype.constructor=tr,tr.prototype.isRawShaderMaterial=!0,nr.prototype=Object.create(g.prototype),nr.prototype.constructor=nr,nr.prototype.isMeshStandardMaterial=!0,nr.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},rr.prototype=Object.create(nr.prototype),rr.prototype.constructor=rr,rr.prototype.isMeshPhysicalMaterial=!0,rr.prototype.copy=function(e){return nr.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Kc).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},ir.prototype=Object.create(g.prototype),ir.prototype.constructor=ir,ir.prototype.isMeshPhongMaterial=!0,ir.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ar.prototype=Object.create(g.prototype),ar.prototype.constructor=ar,ar.prototype.isMeshToonMaterial=!0,ar.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},or.prototype=Object.create(g.prototype),or.prototype.constructor=or,or.prototype.isMeshNormalMaterial=!0,or.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},sr.prototype=Object.create(g.prototype),sr.prototype.constructor=sr,sr.prototype.isMeshLambertMaterial=!0,sr.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ur.prototype=Object.create(g.prototype),ur.prototype.constructor=ur,ur.prototype.isMeshMatcapMaterial=!0,ur.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},cr.prototype=Object.create(nn.prototype),cr.prototype.constructor=cr,cr.prototype.isLineDashedMaterial=!0,cr.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Hd=Object.freeze({__proto__:null,ShadowMaterial:er,SpriteMaterial:Xt,RawShaderMaterial:tr,ShaderMaterial:B,PointsMaterial:sn,MeshPhysicalMaterial:rr,MeshStandardMaterial:nr,MeshPhongMaterial:ir,MeshToonMaterial:ar,MeshNormalMaterial:or,MeshLambertMaterial:sr,MeshDepthMaterial:Ct,MeshDistanceMaterial:jt,MeshBasicMaterial:y,MeshMatcapMaterial:ur,LineDashedMaterial:cr,LineBasicMaterial:nn,Material:g}),Vd={arraySlice:function(e,t,n){return Vd.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{o=a[r],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[r],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{o=a[r],void 0!==o&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}},subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],c=u.getValueSize(),l=[],f=[],d=0;d<u.times.length;++d){var h=u.times[d]*i;if(!(h<n||h>=r)){l.push(u.times[d]);for(var p=0;p<c;++p)f.push(u.values[d*c+p])}}0!==l.length&&(u.times=Vd.convertArray(l,u.times.constructor),u.values=Vd.convertArray(f,u.values.constructor),o.push(u))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=0;o<i;++o){(function(t){var r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var o=e.tracks.find(function(e){return e.name===r.name&&e.ValueTypeName===i});if(void 0===o)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var c=0,l=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);var f=r.times.length-1,d=void 0;if(a<=r.times[0]){var h=s,p=u-s;d=Vd.arraySlice(r.values,h,p)}else if(a>=r.times[f]){var v=f*u+s,m=v+u-s;d=Vd.arraySlice(r.values,v,m)}else{var g=r.createInterpolant(),y=s,_=u-s;g.evaluate(a),d=Vd.arraySlice(g.resultBuffer,y,_)}if("quaternion"===i){(new Nu).fromArray(d).normalize().conjugate().toArray(d)}for(var b=o.times.length,x=0;x<b;++x){var M=x*l+c;if("quaternion"===i)Nu.multiplyQuaternionsFlat(o.values,M,d,0,o.values,M);else for(var w=l-2*c,S=0;S<w;++S)o.values[M+S]-=d[S]}})(o)}return e.blendMode=2501,e}};Object.assign(lr.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a=void 0;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}{if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0}}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(lr.prototype,{beforeStart_:lr.prototype.copySampleValue_,afterEnd_:lr.prototype.copySampleValue_}),fr.prototype=Object.assign(Object.create(lr.prototype),{constructor:fr,DefaultSettings_:{endingStart:ou,endingEnd:ou},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=e,o=2*t-n;break;case 2402:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=e,s=2*n-t;break;case 2402:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,f=this._weightPrev,d=this._weightNext,h=(n-t)/(r-t),p=h*h,v=p*h,m=-f*v+2*f*p-f*h,g=(1+f)*v+(-1.5-2*f)*p+(-.5+f)*h+1,y=(-1-d)*v+(1.5+d)*p+.5*h,_=d*v-d*p,b=0;b!==o;++b)i[b]=m*a[c+b]+g*a[u+b]+y*a[s+b]+_*a[l+b];return i}}),dr.prototype=Object.assign(Object.create(lr.prototype),{constructor:dr,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=(n-t)/(r-t),l=1-c,f=0;f!==o;++f)i[f]=a[u+f]*l+a[s+f]*c;return i}}),hr.prototype=Object.assign(Object.create(lr.prototype),{constructor:hr,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(pr,{toJSON:function(e){var t=e.constructor,n=void 0;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Vd.convertArray(e.times,Array),values:Vd.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}}),Object.assign(pr.prototype,{constructor:pr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new hr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new dr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new fr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t=void 0;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);var o=this.getValueSize();this.times=Vd.arraySlice(n,i,a),this.values=Vd.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&Vd.isTypedArray(r))for(var u=0,c=r.length;u!==c;++u){var l=r[u];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,l),e=!1;break}}return e},optimize:function(){for(var e=Vd.arraySlice(this.times),t=Vd.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==u[0]))if(r)s=!0;else for(var c=o*n,l=c-n,f=c+n,d=0;d!==n;++d){var h=t[c+d];if(h!==t[l+d]||h!==t[f+d]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,_=0;_!==n;++_)t[y+_]=t[g+_];++a}return a!==e.length?(this.times=Vd.arraySlice(e,0,a),this.values=Vd.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this},clone:function(){var e=Vd.arraySlice(this.times,0),t=Vd.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}),vr.prototype=Object.assign(Object.create(pr.prototype),{constructor:vr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),mr.prototype=Object.assign(Object.create(pr.prototype),{constructor:mr,ValueTypeName:"color"}),gr.prototype=Object.assign(Object.create(pr.prototype),{constructor:gr,ValueTypeName:"number"}),yr.prototype=Object.assign(Object.create(lr.prototype),{constructor:yr,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,c=u+o;u!==c;u+=4)Nu.slerpFlat(i,0,a,u-o,a,u,s);return i}}),_r.prototype=Object.assign(Object.create(pr.prototype),{constructor:_r,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new yr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),br.prototype=Object.assign(Object.create(pr.prototype),{constructor:br,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),xr.prototype=Object.assign(Object.create(pr.prototype),{constructor:xr,ValueTypeName:"vector"}),Object.assign(Mr,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Sr(n[i]).scale(r));var o=new Mr(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(pr.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var c=Vd.getKeyframeOrder(s);s=Vd.sortedArray(s,1,c),u=Vd.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new gr(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new Mr(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(s)}}var f=[];for(var d in r)f.push(Mr.CreateFromMorphTargetSequence(d,r[d],t,n));return f},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];Vd.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],c=0;c<u.length;c++){var l=u[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){var f={},d=void 0;for(d=0;d<l.length;d++)if(l[d].morphTargets)for(var h=0;h<l[d].morphTargets.length;h++)f[l[d].morphTargets[h]]=-1;for(var p in f){for(var v=[],m=[],g=0;g!==l[d].morphTargets.length;++g){var y=l[d];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new gr(".morphTargetInfluence["+p+"]",v,m))}s=f.length*(a||1)}else{var _=".bones["+t[c].name+"]";n(xr,_+".position",l,"pos",r),n(_r,_+".quaternion",l,"rot",r),n(xr,_+".scale",l,"scl",r)}}return 0===r.length?null:new Mr(i,s,r,o)}}),Object.assign(Mr.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Mr(this.name,this.duration,e,this.blendMode)},toJSON:function(){return Mr.toJSON(this)}});var Wd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},qd=new Pr;Object.assign(Tr.prototype,{load:function(){},loadAsync:function(e,t){var n=this;return new Promise(function(r,i){n.load(e,r,t,i)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var Yd={};Er.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Er,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Wd.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;if(void 0!==Yd[e])return void Yd[e].push({onLoad:t,onProgress:n,onError:r});var o=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(o),u=void 0;if(s){var c=s[1],l=!!s[2],f=s[3];f=decodeURIComponent(f),l&&(f=atob(f));try{var d=void 0,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var p=new Uint8Array(f.length),v=0;v<f.length;v++)p[v]=f.charCodeAt(v);d="blob"===h?new Blob([p.buffer],{type:c}):p.buffer;break;case"document":var m=new DOMParser;d=m.parseFromString(f,c);break;case"json":d=JSON.parse(f);break;default:d=f}setTimeout(function(){t&&t(d),i.manager.itemEnd(e)},0)}catch(t){setTimeout(function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{Yd[e]=[],Yd[e].push({onLoad:t,onProgress:n,onError:r}),u=new XMLHttpRequest,u.open("GET",e,!0),u.addEventListener("load",function(t){var n=this.response,r=Yd[e];if(delete Yd[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Wd.add(e,n);for(var a=0,o=r.length;a<o;a++){var s=r[a];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(var u=0,c=r.length;u<c;u++){var l=r[u];l.onError&&l.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),u.addEventListener("progress",function(t){for(var n=Yd[e],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(t)}},!1),u.addEventListener("error",function(t){var n=Yd[e];delete Yd[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),u.addEventListener("abort",function(t){var n=Yd[e];delete Yd[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),void 0!==this.responseType&&(u.responseType=this.responseType),void 0!==this.withCredentials&&(u.withCredentials=this.withCredentials),u.overrideMimeType&&u.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var g in this.requestHeader)u.setRequestHeader(g,this.requestHeader[g]);u.send(null)}return i.manager.itemStart(e),u},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Or.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Or,load:function(e,t,n,r){var i=this,a=new Er(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=Mr.parse(e[n]);t.push(r)}return t}}),Ar.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Ar,load:function(e,t,n,r){var i=this,a=[],o=new fn,s=new Er(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var u=0;if(Array.isArray(e))for(var c=0,l=e.length;c<l;++c)!function(c){s.load(e[c],function(e){var n=i.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(o.minFilter=Vo),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,r)}(c);else s.load(e,function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Vo),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}}),Lr.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Lr,load:function(e,t,n,r){function i(){u.removeEventListener("load",i,!1),u.removeEventListener("error",a,!1),Wd.add(e,this),t&&t(this),o.manager.itemEnd(e)}function a(t){u.removeEventListener("load",i,!1),u.removeEventListener("error",a,!1),r&&r(t),o.manager.itemError(e),o.manager.itemEnd(e)}void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var o=this,s=Wd.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");return u.addEventListener("load",i,!1),u.addEventListener("error",a,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}),Rr.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Rr,load:function(e,t,n,r){var i=new G,a=new Lr(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var o=0,s=0;s<e.length;++s)!function(n){a.load(e[n],function(e){i.images[n]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}(s);return i}}),Cr.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Cr,load:function(e,t,n,r){var i=this,a=new V,o=new Er(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,function(e){var n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:zo,a.wrapT=void 0!==n.wrapT?n.wrapT:zo,a.magFilter=void 0!==n.magFilter?n.magFilter:Vo,a.minFilter=void 0!==n.minFilter?n.minFilter:Vo,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=qo),1===n.mipmapCount&&(a.minFilter=Vo),a.needsUpdate=!0,t&&t(a,n))},n,r),a}}),jr.prototype=Object.assign(Object.create(Tr.prototype),{constructor:jr,load:function(e,t,n,r){var i=new u,a=new Lr(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?os:ss,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}),Object.assign(kr.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n=void 0,r=this.getPoint(0),i=0;t.push(0);for(var a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n=this.getLengths(),r=0,i=n.length,a=void 0;a=t||e*n[i-1];for(var o=0,s=i-1,u=void 0;o<=s;)if(r=Math.floor(o+(s-o)/2),(u=n[r]-a)<0)o=r+1;else{if(!(u>0)){s=r;break}s=r-1}if(r=s,n[r]===a)return r/(i-1);var c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)},getTangent:function(e,t){var n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),a=this.getPoint(r),o=t||(i.isVector2?new Au:new Iu);return o.copy(a).sub(i).normalize(),o},getTangentAt:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){for(var n=new Iu,r=[],i=[],a=[],o=new Iu,s=new cc,u=0;u<=e;u++){var c=u/e;r[u]=this.getTangentAt(c,new Iu),r[u].normalize()}i[0]=new Iu,a[0]=new Iu;var l=Number.MAX_VALUE,f=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);f<=l&&(l=f,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),h<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(Ou.clamp(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(r[p],i[p])}if(!0===t){var m=Math.acos(Ou.clamp(i[0].dot(i[e]),-1,1));m/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(m=-m);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Nr.prototype=Object.create(kr.prototype),Nr.prototype.constructor=Nr,Nr.prototype.isEllipseCurve=!0,Nr.prototype.getPoint=function(e,t){for(var n=t||new Au,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),f=s-this.aX,d=u-this.aY;s=f*c-d*l+this.aX,u=f*l+d*c+this.aY}return n.set(s,u)},Nr.prototype.copy=function(e){return kr.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Nr.prototype.toJSON=function(){var e=kr.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Nr.prototype.fromJSON=function(e){return kr.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ir.prototype=Object.create(Nr.prototype),Ir.prototype.constructor=Ir,Ir.prototype.isArcCurve=!0;var Xd=new Iu,Zd=new Dr,Jd=new Dr,Qd=new Dr;Br.prototype=Object.create(kr.prototype),Br.prototype.constructor=Br,Br.prototype.isCatmullRomCurve3=!0,Br.prototype.getPoint=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Iu,n=t,r=this.points,i=r.length,a=(i-(this.closed?0:1))*e,o=Math.floor(a),s=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:0===s&&o===i-1&&(o=i-2,s=1);var u=void 0,c=void 0;this.closed||o>0?u=r[(o-1)%i]:(Xd.subVectors(r[0],r[1]).add(r[0]),u=Xd);var l=r[o%i],f=r[(o+1)%i];if(this.closed||o+2<i?c=r[(o+2)%i]:(Xd.subVectors(r[i-1],r[i-2]).add(r[i-1]),c=Xd),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,h=Math.pow(u.distanceToSquared(l),d),p=Math.pow(l.distanceToSquared(f),d),v=Math.pow(f.distanceToSquared(c),d);p<1e-4&&(p=1),h<1e-4&&(h=p),v<1e-4&&(v=p),Zd.initNonuniformCatmullRom(u.x,l.x,f.x,c.x,h,p,v),Jd.initNonuniformCatmullRom(u.y,l.y,f.y,c.y,h,p,v),Qd.initNonuniformCatmullRom(u.z,l.z,f.z,c.z,h,p,v)}else"catmullrom"===this.curveType&&(Zd.initCatmullRom(u.x,l.x,f.x,c.x,this.tension),Jd.initCatmullRom(u.y,l.y,f.y,c.y,this.tension),Qd.initCatmullRom(u.z,l.z,f.z,c.z,this.tension));return n.set(Zd.calc(s),Jd.calc(s),Qd.calc(s)),n},Br.prototype.copy=function(e){kr.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Br.prototype.toJSON=function(){var e=kr.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Br.prototype.fromJSON=function(e){kr.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Iu).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Zr.prototype=Object.create(kr.prototype),Zr.prototype.constructor=Zr,Zr.prototype.isCubicBezierCurve=!0,Zr.prototype.getPoint=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Au,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Xr(e,r.x,i.x,a.x,o.x),Xr(e,r.y,i.y,a.y,o.y)),n},Zr.prototype.copy=function(e){return kr.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Zr.prototype.toJSON=function(){var e=kr.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Zr.prototype.fromJSON=function(e){return kr.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Jr.prototype=Object.create(kr.prototype),Jr.prototype.constructor=Jr,Jr.prototype.isCubicBezierCurve3=!0,Jr.prototype.getPoint=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Iu,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Xr(e,r.x,i.x,a.x,o.x),Xr(e,r.y,i.y,a.y,o.y),Xr(e,r.z,i.z,a.z,o.z)),n},Jr.prototype.copy=function(e){return kr.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Jr.prototype.toJSON=function(){var e=kr.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Jr.prototype.fromJSON=function(e){return kr.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Qr.prototype=Object.create(kr.prototype),Qr.prototype.constructor=Qr,Qr.prototype.isLineCurve=!0,Qr.prototype.getPoint=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Au,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Qr.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Qr.prototype.getTangent=function(e,t){var n=t||new Au;return n.copy(this.v2).sub(this.v1).normalize(),n},Qr.prototype.copy=function(e){return kr.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Qr.prototype.toJSON=function(){var e=kr.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Qr.prototype.fromJSON=function(e){return kr.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Kr.prototype=Object.create(kr.prototype),Kr.prototype.constructor=Kr,Kr.prototype.isLineCurve3=!0,Kr.prototype.getPoint=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Iu,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Kr.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Kr.prototype.copy=function(e){return kr.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Kr.prototype.toJSON=function(){var e=kr.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Kr.prototype.fromJSON=function(e){return kr.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},$r.prototype=Object.create(kr.prototype),$r.prototype.constructor=$r,$r.prototype.isQuadraticBezierCurve=!0,$r.prototype.getPoint=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Au,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Hr(e,r.x,i.x,a.x),Hr(e,r.y,i.y,a.y)),n},$r.prototype.copy=function(e){return kr.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},$r.prototype.toJSON=function(){var e=kr.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},$r.prototype.fromJSON=function(e){return kr.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ei.prototype=Object.create(kr.prototype),ei.prototype.constructor=ei,ei.prototype.isQuadraticBezierCurve3=!0,ei.prototype.getPoint=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Iu,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Hr(e,r.x,i.x,a.x),Hr(e,r.y,i.y,a.y),Hr(e,r.z,i.z,a.z)),n},ei.prototype.copy=function(e){return kr.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ei.prototype.toJSON=function(){var e=kr.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ei.prototype.fromJSON=function(e){return kr.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ti.prototype=Object.create(kr.prototype),ti.prototype.constructor=ti,ti.prototype.isSplineCurve=!0,ti.prototype.getPoint=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Au,n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],c=r[a>r.length-2?r.length-1:a+1],l=r[a>r.length-3?r.length-1:a+2];return n.set(zr(o,s.x,u.x,c.x,l.x),zr(o,s.y,u.y,c.y,l.y)),n},ti.prototype.copy=function(e){kr.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},ti.prototype.toJSON=function(){var e=kr.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},ti.prototype.fromJSON=function(e){kr.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Au).fromArray(r))}return this};var Kd=Object.freeze({__proto__:null,ArcCurve:Ir,CatmullRomCurve3:Br,CubicBezierCurve:Zr,CubicBezierCurve3:Jr,EllipseCurve:Nr,LineCurve:Qr,LineCurve3:Kr,QuadraticBezierCurve:$r,QuadraticBezierCurve3:ei,SplineCurve:ti});ni.prototype=Object.assign(Object.create(kr.prototype),{constructor:ni,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Qr(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t=[],n=void 0,r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),u=0;u<s.length;u++){var c=s[u];n&&n.equals(c)||(t.push(c),n=c)}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){kr.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=kr.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){kr.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Kd[r.type]).fromJSON(r))}return this}}),ri.prototype=Object.assign(Object.create(ni.prototype),{constructor:ri,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Qr(this.currentPoint.clone(),new Au(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){var i=new $r(this.currentPoint.clone(),new Au(e,t),new Au(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,a){var o=new Zr(this.currentPoint.clone(),new Au(e,t),new Au(n,r),new Au(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new ti(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this},absarc:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this},ellipse:function(e,t,n,r,i,a,o,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,r,i,a,o,s),this},absellipse:function(e,t,n,r,i,a,o,s){var u=new Nr(e,t,n,r,i,a,o,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);return this.currentPoint.copy(l),this},copy:function(e){return ni.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=ni.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return ni.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),ii.prototype=Object.assign(Object.create(ri.prototype),{constructor:ii,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){ri.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=ri.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){ri.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new ri).fromJSON(r))}return this}}),ai.prototype=Object.assign(Object.create(h.prototype),{constructor:ai,isLight:!0,copy:function(e){return h.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=h.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),oi.prototype=Object.assign(Object.create(ai.prototype),{constructor:oi,isHemisphereLight:!0,copy:function(e){return ai.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(si.prototype,{_projScreenMatrix:new cc,_lightPositionWorld:new Iu,_lookTarget:new Iu,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),ui.prototype=Object.assign(Object.create(si.prototype),{constructor:ui,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*Ou.RAD2DEG*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),si.prototype.updateMatrices.call(this,e)}}),ci.prototype=Object.assign(Object.create(ai.prototype),{constructor:ci,isSpotLight:!0,copy:function(e){return ai.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),li.prototype=Object.assign(Object.create(si.prototype),{constructor:li,isPointLightShadow:!0,updateMatrices:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),a.copy(n.position),a.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(a),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),fi.prototype=Object.assign(Object.create(ai.prototype),{constructor:fi,isPointLight:!0,copy:function(e){return ai.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),di.prototype=Object.assign(Object.create(z.prototype),{constructor:di,isOrthographicCamera:!0,copy:function(e,t){return z.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=u*this.view.offsetX,a=i+u*this.view.width,o-=c*this.view.offsetY,s=o-c*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){var t=h.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),hi.prototype=Object.assign(Object.create(si.prototype),{constructor:hi,isDirectionalLightShadow:!0,updateMatrices:function(e){si.prototype.updateMatrices.call(this,e)}}),pi.prototype=Object.assign(Object.create(ai.prototype),{constructor:pi,isDirectionalLight:!0,copy:function(e){return ai.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),vi.prototype=Object.assign(Object.create(ai.prototype),{constructor:vi,isAmbientLight:!0}),mi.prototype=Object.assign(Object.create(ai.prototype),{constructor:mi,isRectAreaLight:!0,copy:function(e){return ai.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=ai.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var $d=function(){function e(){o(this,e),Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Iu)}return ka(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();gi.prototype=Object.assign(Object.create(ai.prototype),{constructor:gi,isLightProbe:!0,copy:function(e){return ai.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){var t=ai.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),yi.prototype=Object.assign(Object.create(Tr.prototype),{constructor:yi,load:function(e,t,n,r){var i=this,a=new Er(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)},parse:function(e){function t(e){return void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),n[e]}var n=this.textures,r=new Hd[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new Kc).setHex(e.sheen)),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=t(a.value);break;case"c":r.uniforms[i].value=(new Kc).setHex(a.value);break;case"v2":r.uniforms[i].value=(new Au).fromArray(a.value);break;case"v3":r.uniforms[i].value=(new Iu).fromArray(a.value);break;case"v4":r.uniforms[i].value=(new ku).fromArray(a.value);break;case"m3":r.uniforms[i].value=(new Lu).fromArray(a.value);break;case"m4":r.uniforms[i].value=(new cc).fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)r.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=t(e.map)),void 0!==e.matcap&&(r.matcap=t(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=t(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=t(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new Au).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=t(e.specularMap)),void 0!==e.envMap&&(r.envMap=t(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=t(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=t(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=t(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=t(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Au).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.transmissionMap&&(r.transmissionMap=t(e.transmissionMap)),r},setTextures:function(e){return this.textures=e,this}});var eh={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};_i.prototype=Object.assign(Object.create(C.prototype),{constructor:_i,isInstancedBufferGeometry:!0,copy:function(e){return C.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=C.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),bi.prototype=Object.assign(Object.create(_.prototype),{constructor:bi,isInstancedBufferAttribute:!0,copy:function(e){return _.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=_.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),xi.prototype=Object.assign(Object.create(Tr.prototype),{constructor:xi,load:function(e,t,n,r){var i=this,a=new Er(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)},parse:function(e){function t(e,t){if(void 0!==r[t])return r[t];var i=e.interleavedBuffers,a=i[t],o=n(e,a.buffer),s=R(a.type,o),u=new qt(s,a.stride);return u.uuid=a.uuid,r[t]=u,u}function n(e,t){if(void 0!==i[t])return i[t];var n=e.arrayBuffers,r=n[t],a=new Uint32Array(r).buffer;return i[t]=a,a}var r={},i={},a=e.isInstancedBufferGeometry?new _i:new C,o=e.data.index;if(void 0!==o){var s=R(o.type,o.array);a.setIndex(new _(s,1))}var u=e.data.attributes;for(var c in u){var l=u[c],f=void 0;if(l.isInterleavedBufferAttribute){f=new Yt(t(e.data,l.data),l.itemSize,l.offset,l.normalized)}else{var d=R(l.type,l.array);f=new(l.isInstancedBufferAttribute?bi:_)(d,l.itemSize,l.normalized)}void 0!==l.name&&(f.name=l.name),a.setAttribute(c,f)}var h=e.data.morphAttributes;if(h)for(var p in h){for(var v=h[p],m=[],g=0,y=v.length;g<y;g++){var b=v[g],x=void 0;if(b.isInterleavedBufferAttribute){var M=t(e.data,b.data);x=new Yt(M,b.itemSize,b.offset,b.normalized)}else{var w=R(b.type,b.array);x=new _(w,b.itemSize,b.normalized)}void 0!==b.name&&(x.name=b.name),m.push(x)}a.morphAttributes[p]=m}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);var S=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==S)for(var P=0,T=S.length;P!==T;++P){var E=S[P];a.addGroup(E.start,E.count,E.materialIndex)}var O=e.data.boundingSphere;if(void 0!==O){var A=new Iu;void 0!==O.center&&A.fromArray(O.center),a.boundingSphere=new ec(A,O.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}});var th=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),ka(t,[{key:"load",value:function(e,t,n,r){var i=this,a=""===this.path?eh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new Er(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){var a=null;try{a=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(a,t)},n,r)}},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){void 0!==t&&t(u)}),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,i,s,n),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),void 0!==t){var l=!1;for(var f in a)if(a[f]instanceof HTMLImageElement){l=!0;break}!1===l&&t(u)}return u}},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new ii).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=(new en).fromJSON(e[i],r);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={},r=void 0;if(void 0!==e)for(var i=new xi,a=0,o=e.length;a<o;a++){var s=void 0,u=e[a];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Gd[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Gd[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Gd[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Gd[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Gd[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Gd[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Gd[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Gd[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Gd[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Gd[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Gd[u.type]((new Kd[u.path.type]).fromJSON(u.path),u.tubularSegments,u.radius,u.radialSegments,u.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Gd[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Gd[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(var c=0,l=u.shapes.length;c<l;c++){var f=t[u.shapes[c]];r.push(f)}s=new Gd[u.type](r,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(var d=0,h=u.shapes.length;d<h;d++){var p=t[u.shapes[d]];r.push(p)}var v=u.options.extrudePath;void 0!==v&&(u.options.extrudePath=(new Kd[v.type]).fromJSON(v)),s=new Gd[u.type](r,u.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(u);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),n[u.uuid]=s}return n}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new yi;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var l=s.materials[c];void 0===n[l.uuid]&&(n[l.uuid]=i.parse(l)),u.push(n[l.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=Mr.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){function n(e){return i.manager.itemStart(e),o.load(e,function(){i.manager.itemEnd(e)},void 0,function(){i.manager.itemError(e),i.manager.itemEnd(e)})}function r(e){if("string"==typeof e){var t=e;return n(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:R(e.type,e.data),width:e.width,height:e.height}:null}var i=this,a={},o=void 0;if(void 0!==e&&e.length>0){var s=new Pr(t);o=new Lr(s),o.setCrossOrigin(this.crossOrigin);for(var u=0,c=e.length;u<c;u++){var l=e[u],f=l.url;if(Array.isArray(f)){a[l.uuid]=[];for(var d=0,h=f.length;d<h;d++){var p=f[d],v=r(p);null!==v&&(v instanceof HTMLImageElement?a[l.uuid].push(v):a[l.uuid].push(new V(v.data,v.width,v.height)))}}else{var m=r(l.url);null!==m&&(a[l.uuid]=m)}}}return a}},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=void 0,c=t[o.image];Array.isArray(c)?(s=new G(c),6===c.length&&(s.needsUpdate=!0)):(s=c&&c.data?new V(c.data,c.width,c.height):new u(c),c&&(s.needsUpdate=!0)),s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,nh)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],rh),s.wrapT=n(o.wrap[1],rh)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,ih)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,ih)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),r[o.uuid]=s}return r}},{key:"parseObject",value:function(e,t,n,r){function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}var o=void 0,s=void 0,u=void 0;switch(e.type){case"Scene":o=new uf,void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new Kc(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new sf(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new of(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new F(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new di(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new vi(e.color,e.intensity);break;case"DirectionalLight":o=new pi(e.color,e.intensity);break;case"PointLight":o=new fi(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new mi(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new ci(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new oi(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new gi).fromJSON(e);break;case"SkinnedMesh":s=i(e.geometry),u=a(e.material),o=new Kt(s,u),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":s=i(e.geometry),u=a(e.material),o=new j(s,u);break;case"InstancedMesh":s=i(e.geometry),u=a(e.material);var c=e.count,l=e.instanceMatrix;o=new tn(s,u,c),o.instanceMatrix=new _(new Float32Array(l.array),16);break;case"LOD":o=new Qt;break;case"Line":o=new rn(i(e.geometry),a(e.material));break;case"LineLoop":o=new on(i(e.geometry),a(e.material));break;case"LineSegments":o=new an(i(e.geometry),a(e.material));break;case"PointCloud":case"Points":o=new un(i(e.geometry),a(e.material));break;case"Sprite":o=new Zt(a(e.material));break;case"Group":o=new zt;break;case"Bone":o=new $t;break;default:o=new h}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children)for(var f=e.children,d=0;d<f.length;d++)o.add(this.parseObject(f[d],t,n,r));if(void 0!==e.animations)for(var p=e.animations,v=0;v<p.length;v++){var m=p[v];o.animations.push(r[m])}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);for(var g=e.levels,y=0;y<g.length;y++){var b=g[y],x=o.getObjectByProperty("uuid",b.object);void 0!==x&&o.addLevel(x,b.distance)}}return o}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}},{key:"setTexturePath",value:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}]),t}(Tr),nh={UVMapping:300,CubeReflectionMapping:Co,CubeRefractionMapping:jo,EquirectangularReflectionMapping:ko,EquirectangularRefractionMapping:No,CubeUVReflectionMapping:Io,CubeUVRefractionMapping:Do},rh={RepeatWrapping:Bo,ClampToEdgeWrapping:zo,MirroredRepeatWrapping:Fo},ih={NearestFilter:Uo,NearestMipmapNearestFilter:Go,NearestMipmapLinearFilter:Ho,LinearFilter:Vo,LinearMipmapNearestFilter:Wo,LinearMipmapLinearFilter:qo};Mi.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Mi,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Wd.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(e,o).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(n){Wd.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)}}),Object.assign(wi.prototype,{moveTo:function(e,t){return this.currentPath=new ri,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new ii;a.curves=i.curves,t.push(a)}return t}var r=hd.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return n(i);var a=void 0,o=void 0,s=void 0,u=[];if(1===i.length)return o=i[0],s=new ii,s.curves=o.curves,u.push(s),u;var c=!r(i[0].getPoints());c=e?!c:c;var l=[],f=[],d=[],h=0,p=void 0;f[h]=void 0,d[h]=[];for(var v=0,m=i.length;v<m;v++)o=i[v],p=o.getPoints(),a=r(p),a=e?!a:a,a?(!c&&f[h]&&h++,f[h]={s:new ii,p:p},f[h].s.curves=o.curves,c&&h++,d[h]=[]):d[h].push({h:o,p:p[0]});if(!f[0])return n(i);if(f.length>1){for(var g=!1,y=[],_=0,b=f.length;_<b;_++)l[_]=[];for(var x=0,M=f.length;x<M;x++)for(var w=d[x],S=0;S<w.length;S++){for(var P=w[S],T=!0,E=0;E<f.length;E++)(function(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=t[a],u=-u,s=t[i],c=-c),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var l=c*(e.x-o.x)-u*(e.y-o.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r})(P.p,f[E].p)&&(x!==E&&y.push({froms:x,tos:E,hole:S}),T?(T=!1,l[E].push(P)):g=!0);T&&l[x].push(P)}y.length>0&&(g||(d=l))}for(var O=void 0,A=0,L=f.length;A<L;A++){s=f[A].s,u.push(s),O=d[A];for(var R=0,C=O.length;R<C;R++)s.holes.push(O[R].h)}return u}}),Object.assign(Si.prototype,{isFont:!0,generateShapes:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=Pi(e,t,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Ei.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Ei,load:function(e,t,n,r){var i=this,a=new Er(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(e){var n=void 0;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new Si(e)}});var ah=void 0,oh={getContext:function(){return void 0===ah&&(ah=new(window.AudioContext||window.webkitAudioContext)),ah},setContext:function(e){ah=e}};Oi.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Oi,load:function(e,t,n,r){var i=this,a=new Er(i.manager);a.setResponseType("arraybuffer"),a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{var a=n.slice(0);oh.getContext().decodeAudioData(a,function(e){t(e)})}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}}),Ai.prototype=Object.assign(Object.create(gi.prototype),{constructor:Ai,isHemisphereLightProbe:!0,copy:function(e){return gi.prototype.copy.call(this,e),this},toJSON:function(e){return gi.prototype.toJSON.call(this,e)}}),Li.prototype=Object.assign(Object.create(gi.prototype),{constructor:Li,isAmbientLightProbe:!0,copy:function(e){return gi.prototype.copy.call(this,e),this},toJSON:function(e){return gi.prototype.toJSON.call(this,e)}});var sh=new cc,uh=new cc;Object.assign(Ri.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n=e.projectionMatrix.clone(),r=t.eyeSep/2,i=r*t.near/t.focus,a=t.near*Math.tan(Ou.DEG2RAD*t.fov*.5)/t.zoom,o=void 0,s=void 0;uh.elements[12]=-r,sh.elements[12]=r,o=-a*t.aspect+i,s=a*t.aspect+i,n.elements[0]=2*t.near/(s-o),n.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(n),o=-a*t.aspect-i,s=a*t.aspect-i,n.elements[0]=2*t.near/(s-o),n.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(uh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(sh)}});var ch=function(){function e(t){o(this,e),this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return ka(e,[{key:"start",value:function(){this.startTime=Ci(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=Ci();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}(),lh=new Iu,fh=new Nu,dh=new Iu,hh=new Iu,ph=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type="AudioListener",e.context=oh.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new ch,e}return a(t,e),ka(t,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){ja(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateMatrixWorld",this).call(this,e);var n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(lh,fh,dh),hh.set(0,0,-1).applyQuaternion(fh),n.positionX){var i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(lh.x,i),n.positionY.linearRampToValueAtTime(lh.y,i),n.positionZ.linearRampToValueAtTime(lh.z,i),n.forwardX.linearRampToValueAtTime(hh.x,i),n.forwardY.linearRampToValueAtTime(hh.y,i),n.forwardZ.linearRampToValueAtTime(hh.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(lh.x,lh.y,lh.z),n.setOrientation(hh.x,hh.y,hh.z,r.x,r.y,r.z)}}]),t}(h),vh=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type="Audio",n.listener=e,n.context=e.context,n.gain=n.context.createGain(),n.gain.connect(e.getInput()),n.autoplay=!1,n.buffer=null,n.detune=0,n.loop=!1,n.loopStart=0,n.loopEnd=0,n.offset=0,n.duration=void 0,n.playbackRate=1,n.isPlaying=!1,n.hasPlaybackControl=!0,n.source=null,n.sourceType="empty",n._startedAt=0,n._progress=0,n._connected=!1,n.filters=[],n}return a(t,e),ka(t,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}},{key:"pause",value:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this)}},{key:"stop",value:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this)}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),t}(h),mh=new Iu,gh=new Nu,yh=new Iu,_h=new Iu,bh=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.panner=n.context.createPanner(),n.panner.panningModel="HRTF",n.panner.connect(n.gain),n}return a(t,e),ka(t,[{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(ja(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(mh,gh,yh),_h.set(0,0,1).applyQuaternion(gh);var n=this.panner;if(n.positionX){var r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(mh.x,r),n.positionY.linearRampToValueAtTime(mh.y,r),n.positionZ.linearRampToValueAtTime(mh.z,r),n.orientationX.linearRampToValueAtTime(_h.x,r),n.orientationY.linearRampToValueAtTime(_h.y,r),n.orientationZ.linearRampToValueAtTime(_h.z,r)}else n.setPosition(mh.x,mh.y,mh.z),n.setOrientation(_h.x,_h.y,_h.z)}}}]),t}(vh),xh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;o(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return ka(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}();Object.assign(ji.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a},accumulateAdditive:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,c=t+t;u!==c;++u)if(n[u]!==n[u+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r){Nu.slerpFlat(e,t,e,t,e,n,r)},_slerpAdditive:function(e,t,n,r,i){var a=this._workIndex*i;Nu.multiplyQuaternionsFlat(e,a,e,t,e,n),Nu.slerpFlat(e,t,e,t,e,a,r)},_lerp:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}},_lerpAdditive:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}});var Mh="\\[\\]\\.:\\/",wh=new RegExp("["+Mh+"]","g"),Sh="[^"+Mh+"]",Ph="[^"+Mh.replace("\\.","")+"]",Th=/((?:WC+[\/:])*)/.source.replace("WC",Sh),Eh=/(WCOD+)?/.source.replace("WCOD",Ph),Oh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Sh),Ah=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Sh),Lh=new RegExp("^"+Th+Eh+Oh+Ah+"$"),Rh=["material","materials","bones"];Object.assign(ki.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Ni,{Composite:ki,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Ni.Composite(e,t,n):new Ni(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(wh,"")},parseTrackName:function(e){var t=Lh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Rh.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}),Object.assign(Ni.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Ni.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[r];if(void 0===s){var u=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e)}var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ni.prototype,{_getValue_unbound:Ni.prototype.getValue,_setValue_unbound:Ni.prototype.setValue}),Object.assign(Ii.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,u=this.nCachedObjects_,c=0,l=arguments.length;c!==l;++c){var f=arguments[c],d=f.uuid,h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(f);for(var p=0,v=a;p!==v;++p)i[p].push(new Ni(f,n[p],r[p]))}else if(h<u){o=e[h];var m=--u,g=e[m];t[g.uuid]=h,e[h]=g,t[d]=m,e[m]=f;for(var y=0,_=a;y!==_;++y){var b=i[y],x=b[m],M=b[h];b[h]=x,void 0===M&&(M=new Ni(f,n[y],r[y])),b[m]=M}}else e[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u},remove:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,c=t[u];if(void 0!==c&&c>=i){var l=i++,f=e[l];t[f.uuid]=c,e[c]=f,t[u]=l,e[l]=s;for(var d=0,h=r;d!==h;++d){var p=n[d],v=p[l],m=p[c];p[c]=v,p[l]=m}}}this.nCachedObjects_=i},uncache:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],c=u.uuid,l=t[c];if(void 0!==l)if(delete t[c],l<i){var f=--i,d=e[f],h=--a,p=e[h];t[d.uuid]=l,e[l]=d,t[p.uuid]=f,e[f]=p,e.pop();for(var v=0,m=r;v!==m;++v){var g=n[v],y=g[f],_=g[h];g[l]=y,g[f]=_,g.pop()}}else{var b=--a,x=e[b];b>0&&(t[x.uuid]=l),e[l]=x,e.pop();for(var M=0,w=r;M!==w;++M){var S=n[M];S[l]=S[b],S.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(l);for(var f=c,d=s.length;f!==d;++f){var h=s[f];l[f]=new Ni(h,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}});var Ch=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;o(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,s=a.length,u=new Array(s),c={endingStart:ou,endingEnd:ou},l=0;l!==s;++l){var f=a[l].createInterpolant(null);u[l]=f,f.settings=c}this._interpolantSettings=c,this._interpolants=u,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=au,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return ka(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case 2501:for(var l=0,f=u.length;l!==f;++l)u[l].evaluate(o),c[l].accumulateAdditive(s);break;case su:default:for(var d=0,h=u.length;d!==h;++d)u[d].evaluate(o),c[d].accumulate(r,s)}}}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=2202===n;if(0===e)return-1===i?r:a&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1==(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:ou:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:ou:2402)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}();Di.prototype=Object.assign(Object.create(s.prototype),{constructor:Di,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var f=r[l],d=f.name,h=c[d];if(void 0!==h)a[l]=h;else{if(void 0!==(h=a[l])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,s,d));continue}var p=t&&t._propertyBindings[l].binding.parsedPath;h=new ji(Ni.create(n,d,p),f.ValueTypeName,f.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,s,d),a[l]=h}o[l].resultBuffer=h.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new dr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"==typeof e?Mr.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:su),void 0!==s){var c=s.actionByRoot[i];if(void 0!==c&&c.blendMode===n)return c;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var l=new Ch(this,a,t,n);return this._bindAction(l,u),this._addInactiveAction(l,o,i),l},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Mr.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o?o.actionByRoot[r]||null:null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions,n=t-1;n>=0;--n)e[n].stop();return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}for(var s=this._bindings,u=this._nActiveBindings,c=0;c!==u;++c)s[c].apply(a);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,a=i[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var u in s){var c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});var jh=function(){function e(t){o(this,e),"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return ka(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}();Bi.prototype=Object.assign(Object.create(qt.prototype),{constructor:Bi,isInstancedInterleavedBuffer:!0,copy:function(e){return qt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){var t=qt.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){var t=qt.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(zi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(zi.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(Fi.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)},intersectObject:function(e,t,n){var r=n||[];return Gi(e,this,r,t),r.sort(Ui),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,a=e.length;i<a;i++)Gi(e[i],this,r,t);return r.sort(Ui),r}});var kh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return o(this,e),this.radius=t,this.phi=n,this.theta=r,this}return ka(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ou.clamp(t/this.radius,-1,1))),this}}]),e}(),Nh=function(){function e(t,n,r){return o(this,e),this.radius=void 0!==t?t:1,this.theta=void 0!==n?n:0,this.y=void 0!==r?r:0,this}return ka(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}]),e}(),Ih=new Au,Dh=function(){function e(t,n){o(this,e),Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new Au(1/0,1/0),this.max=void 0!==n?n:new Au(-1/0,-1/0)}return ka(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Ih.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Au),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Au),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Au),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Au),t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Ih.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Bh=new Iu,zh=new Iu,Fh=function(){function e(t,n){o(this,e),this.start=void 0!==t?t:new Iu,this.end=void 0!==n?n:new Iu}return ka(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Iu),e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Iu),e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Iu),this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){Bh.subVectors(e,this.start),zh.subVectors(this.end,this.start);var n=zh.dot(zh),r=zh.dot(Bh),i=r/n;return t&&(i=Ou.clamp(i,0,1)),i}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Iu),this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}]),e}();Hi.prototype=Object.create(h.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isImmediateRenderObject=!0;var Uh=new Iu,Gh=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.light=e,r.light.updateMatrixWorld(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.color=n;for(var a=new C,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],u=0,c=1;u<32;u++,c++){var l=u/32*Math.PI*2,f=c/32*Math.PI*2;s.push(Math.cos(l),Math.sin(l),1,Math.cos(f),Math.sin(f),1)}a.setAttribute("position",new O(s,3));var d=new nn({fog:!1,toneMapped:!1});return r.cone=new an(a,d),r.add(r.cone),r.update(),r}return a(t,e),ka(t,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Uh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Uh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),t}(h),Hh=new Iu,Vh=new cc,Wh=new cc,qh=function(e){function t(e){o(this,t);for(var n=Vi(e),r=new C,a=[],s=[],u=new Kc(0,0,1),c=new Kc(0,1,0),l=0;l<n.length;l++){var f=n[l];f.parent&&f.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(u.r,u.g,u.b),s.push(c.r,c.g,c.b))}r.setAttribute("position",new O(a,3)),r.setAttribute("color",new O(s,3));var d=new nn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),h=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,d));return h.type="SkeletonHelper",h.isSkeletonHelper=!0,h.root=e,h.bones=n,h.matrix=e.matrixWorld,h.matrixAutoUpdate=!1,h}return a(t,e),ka(t,[{key:"updateMatrixWorld",value:function(e){var n=this.bones,r=this.geometry,i=r.getAttribute("position");Wh.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<n.length;a++){var s=n[a];s.parent&&s.parent.isBone&&(Vh.multiplyMatrices(Wh,s.matrixWorld),Hh.setFromMatrixPosition(Vh),i.setXYZ(o,Hh.x,Hh.y,Hh.z),Vh.multiplyMatrices(Wh,s.parent.matrixWorld),Hh.setFromMatrixPosition(Vh),i.setXYZ(o+1,Hh.x,Hh.y,Hh.z),o+=2)}r.getAttribute("position").needsUpdate=!0,ja(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateMatrixWorld",this).call(this,e)}}]),t}(an),Yh=function(e){function t(e,n,r){o(this,t);var a=new Ad(n,4,2),s=new y({wireframe:!0,fog:!1,toneMapped:!1}),u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,s));return u.light=e,u.light.updateMatrixWorld(),u.color=r,u.type="PointLightHelper",u.matrix=u.light.matrixWorld,u.matrixAutoUpdate=!1,u.update(),u}return a(t,e),ka(t,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),t}(j),Xh=new Iu,Zh=new Kc,Jh=new Kc,Qh=function(e){function t(e,n,r){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r;var s=new xd(n);s.rotateY(.5*Math.PI),a.material=new y({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var u=s.getAttribute("position"),c=new Float32Array(3*u.count);return s.setAttribute("color",new _(c,3)),a.add(new j(s,a.material)),a.update(),a}return a(t,e),ka(t,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Zh.copy(this.light.color),Jh.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Zh:Jh;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Xh.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),t}(h),Kh=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;o(this,t),r=new Kc(r),a=new Kc(a);for(var s=n/2,u=e/n,c=e/2,l=[],f=[],d=0,h=0,p=-c;d<=n;d++,p+=u){l.push(-c,0,p,c,0,p),l.push(p,0,-c,p,0,c);var v=d===s?r:a;v.toArray(f,h),h+=3,v.toArray(f,h),h+=3,v.toArray(f,h),h+=3,v.toArray(f,h),h+=3}var m=new C;m.setAttribute("position",new O(l,3)),m.setAttribute("color",new O(f,3));var g=new nn({vertexColors:!0,toneMapped:!1}),y=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,m,g));return y.type="GridHelper",y}return a(t,e),t}(an),$h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;o(this,t),s=new Kc(s),u=new Kc(u);for(var c=[],l=[],f=0;f<=n;f++){var d=f/n*(2*Math.PI),h=Math.sin(d)*e,p=Math.cos(d)*e;c.push(0,0,0),c.push(h,0,p);var v=1&f?s:u;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(var m=0;m<=r;m++)for(var g=1&m?s:u,y=e-e/r*m,_=0;_<a;_++){var b=_/a*(2*Math.PI),x=Math.sin(b)*y,M=Math.cos(b)*y;c.push(x,0,M),l.push(g.r,g.g,g.b),b=(_+1)/a*(2*Math.PI),x=Math.sin(b)*y,M=Math.cos(b)*y,c.push(x,0,M),l.push(g.r,g.g,g.b)}var w=new C;w.setAttribute("position",new O(c,3)),w.setAttribute("color",new O(l,3));var S=new nn({vertexColors:!0,toneMapped:!1}),P=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,w,S));return P.type="PolarGridHelper",P}return a(t,e),t}(an),ep=new Iu,tp=new Iu,np=new Iu,rp=function(e){function t(e,n,r){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r,void 0===n&&(n=1);var s=new C;s.setAttribute("position",new O([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));var u=new nn({fog:!1,toneMapped:!1});return a.lightPlane=new rn(s,u),a.add(a.lightPlane),s=new C,s.setAttribute("position",new O([0,0,0,0,0,1],3)),a.targetLine=new rn(s,u),a.add(a.targetLine),a.update(),a}return a(t,e),ka(t,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){ep.setFromMatrixPosition(this.light.matrixWorld),tp.setFromMatrixPosition(this.light.target.matrixWorld),np.subVectors(tp,ep),this.lightPlane.lookAt(tp),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(tp),this.targetLine.scale.z=np.length()}}]),t}(h),ip=new Iu,ap=new z,op=function(e){function t(e){function n(e,t,n){r(e,n),r(t,n)}function r(e,t){u.push(0,0,0),c.push(t.r,t.g,t.b),void 0===l[e]&&(l[e]=[]),l[e].push(u.length/3-1)}o(this,t);var a=new C,s=new nn({color:16777215,vertexColors:!0,toneMapped:!1}),u=[],c=[],l={},f=new Kc(16755200),d=new Kc(16711680),h=new Kc(43775),p=new Kc(16777215),v=new Kc(3355443);n("n1","n2",f),n("n2","n4",f),n("n4","n3",f),n("n3","n1",f),n("f1","f2",f),n("f2","f4",f),n("f4","f3",f),n("f3","f1",f),n("n1","f1",f),n("n2","f2",f),n("n3","f3",f),n("n4","f4",f),n("p","n1",d),n("p","n2",d),n("p","n3",d),n("p","n4",d),n("u1","u2",h),n("u2","u3",h),n("u3","u1",h),n("c","t",p),n("p","c",v),n("cn1","cn2",v),n("cn3","cn4",v),n("cf1","cf2",v),n("cf3","cf4",v),a.setAttribute("position",new O(u,3)),a.setAttribute("color",new O(c,3));var m=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,s));return m.type="CameraHelper",m.camera=e,m.camera.updateProjectionMatrix&&m.camera.updateProjectionMatrix(),m.matrix=e.matrixWorld,m.matrixAutoUpdate=!1,m.pointMap=l,m.update(),m}return a(t,e),ka(t,[{key:"update",value:function(){var e=this.geometry,t=this.pointMap;ap.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Wi("c",t,e,ap,0,0,-1),Wi("t",t,e,ap,0,0,1),Wi("n1",t,e,ap,-1,-1,-1),Wi("n2",t,e,ap,1,-1,-1),Wi("n3",t,e,ap,-1,1,-1),Wi("n4",t,e,ap,1,1,-1),Wi("f1",t,e,ap,-1,-1,1),Wi("f2",t,e,ap,1,-1,1),Wi("f3",t,e,ap,-1,1,1),Wi("f4",t,e,ap,1,1,1),Wi("u1",t,e,ap,.7,1.1,-1),Wi("u2",t,e,ap,-.7,1.1,-1),Wi("u3",t,e,ap,0,2,-1),Wi("cf1",t,e,ap,-1,0,1),Wi("cf2",t,e,ap,1,0,1),Wi("cf3",t,e,ap,0,-1,1),Wi("cf4",t,e,ap,0,1,1),Wi("cn1",t,e,ap,-1,0,-1),Wi("cn2",t,e,ap,1,0,-1),Wi("cn3",t,e,ap,0,-1,-1),Wi("cn4",t,e,ap,0,1,-1),e.getAttribute("position").needsUpdate=!0}}]),t}(an),sp=new zu,up=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;o(this,t);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new C;s.setIndex(new _(r,1)),s.setAttribute("position",new _(a,3));var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,new nn({color:n,toneMapped:!1})));return u.object=e,u.type="BoxHelper",u.matrixAutoUpdate=!1,u.update(),u}return a(t,e),ka(t,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&sp.setFromObject(this.object),!sp.isEmpty()){var t=sp.min,n=sp.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e){return an.prototype.copy.call(this,e),this.object=e.object,this}}]),t}(an),cp=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;o(this,t);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new C;s.setIndex(new _(r,1)),s.setAttribute("position",new O(a,3));var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,new nn({color:n,toneMapped:!1})));return u.box=e,u.type="Box3Helper",u.geometry.computeBoundingSphere(),u}return a(t,e),ka(t,[{key:"updateMatrixWorld",value:function(e){var n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),ja(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateMatrixWorld",this).call(this,e))}}]),t}(an),lp=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;o(this,t);var a=r,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],u=new C;u.setAttribute("position",new O(s,3)),u.computeBoundingSphere();var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u,new nn({color:a,toneMapped:!1})));c.type="PlaneHelper",c.plane=e,c.size=n;var l=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],f=new C;return f.setAttribute("position",new O(l,3)),f.computeBoundingSphere(),c.add(new j(f,new y({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),c}return a(t,e),ka(t,[{key:"updateMatrixWorld",value:function(e){var n=-this.plane.constant;Math.abs(n)<1e-8&&(n=1e-8),this.scale.set(.5*this.size,.5*this.size,n),this.children[0].material.side=n<0?Va:Ha,this.lookAt(this.plane.normal),ja(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateMatrixWorld",this).call(this,e)}}]),t}(rn),fp=new Iu,dp=void 0,hp=void 0,pp=function(e){function t(e,n,r,a,s,u){o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return c.type="ArrowHelper",void 0===e&&(e=new Iu(0,0,1)),void 0===n&&(n=new Iu(0,0,0)),void 0===r&&(r=1),void 0===a&&(a=16776960),void 0===s&&(s=.2*r),void 0===u&&(u=.2*s),void 0===dp&&(dp=new C,dp.setAttribute("position",new O([0,0,0,0,1,0],3)),hp=new ed(0,.5,1,5,1),hp.translate(0,-.5,0)),c.position.copy(n),c.line=new rn(dp,new nn({color:a,toneMapped:!1})),c.line.matrixAutoUpdate=!1,c.add(c.line),c.cone=new j(hp,new y({color:a,toneMapped:!1})),c.cone.matrixAutoUpdate=!1,c.add(c.cone),c.setDirection(e),c.setLength(r,s,u),c}return a(t,e),ka(t,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{fp.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(fp,t)}}},{key:"setLength",value:function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return ja(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),t}(h),vp=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o(this,t);var n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new C;a.setAttribute("position",new O(n,3)),a.setAttribute("color",new O(r,3));var s=new nn({vertexColors:!0,toneMapped:!1}),u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,s));return u.type="AxesHelper",u}return a(t,e),t}(an),mp=new Float32Array(1),gp=new Int32Array(mp.buffer),yp={toHalfFloat:function(e){mp[0]=e;var t=gp[0],n=t>>16&32768,r=t>>12&2047,i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1)):(n|=i-112<<10|r>>1,n+=1&r)}},_p=4,bp=8,xp=Math.pow(2,bp),Mp=[.125,.215,.35,.446,.526,.582],wp=bp-_p+1+Mp.length,Sp=20,Pp=(Ra={},r(Ra,uu,0),r(Ra,cu,1),r(Ra,fu,2),r(Ra,hu,3),r(Ra,pu,4),r(Ra,vu,5),r(Ra,lu,6),Ra),Tp=new di,Ep=function(){for(var e=[],t=[],n=[],r=bp,i=0;i<wp;i++){var a=Math.pow(2,r);t.push(a);var o=1/a;i>bp-_p?o=Mp[i-bp+_p-1]:0==i&&(o=0),n.push(o);for(var s=1/(a-1),u=-s/2,c=1+s/2,l=[u,u,c,u,c,c,u,u,c,c,u,c],f=new Float32Array(108),d=new Float32Array(72),h=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1,g=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];f.set(g,18*p),d.set(l,12*p);var y=[p,p,p,p,p,p];h.set(y,6*p)}var b=new C;b.setAttribute("position",new _(f,3)),b.setAttribute("uv",new _(d,2)),b.setAttribute("faceIndex",new _(h,1)),e.push(b),r>_p&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),Op=Ep._lodPlanes,Ap=Ep._sizeLods,Lp=Ep._sigmas,Rp=new Kc,Cp=null,jp=(1+Math.sqrt(5))/2,kp=1/jp,Np=[new Iu(1,1,1),new Iu(-1,1,1),new Iu(1,1,-1),new Iu(-1,1,-1),new Iu(0,jp,kp),new Iu(0,jp,-kp),new Iu(kp,0,jp),new Iu(-kp,0,jp),new Iu(jp,kp,0),new Iu(-jp,kp,0)],Ip=function(){function e(t){o(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=Zi(Sp),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return ka(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Cp=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=Qi(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=Ji(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<Op.length;e++)Op[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Cp),e.scissorTest=!1,Xi(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){Cp=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:Uo,minFilter:Uo,generateMipmaps:!1,type:Yo,format:ls,encoding:qi(e)?e.encoding:fu,depthBuffer:!1},n=Yi(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Yi(t),n}},{key:"_compileMaterial",value:function(e){var t=new j(Op[0],e);this._renderer.compile(t,Tp)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new F(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.outputEncoding,c=s.toneMapping;s.getClearColor(Rp);var l=s.getClearAlpha();s.toneMapping=To,s.outputEncoding=uu;var f=e.background;if(f&&f.isColor){f.convertSRGBToLinear();var d=Math.max(f.r,f.g,f.b),h=Math.min(Math.max(Math.ceil(Math.log2(d)),-128),127);f=f.multiplyScalar(Math.pow(2,-h));var p=(h+128)/255;s.setClearColor(f,p),e.background=null}for(var v=0;v<6;v++){var m=v%3;0==m?(i.up.set(0,a[v],0),i.lookAt(o[v],0,0)):1==m?(i.up.set(0,0,a[v]),i.lookAt(0,o[v],0)):(i.up.set(0,a[v],0),i.lookAt(0,0,o[v])),Xi(r,m*xp,v>2?xp:0,xp,xp),s.setRenderTarget(r),s.render(e,i)}s.toneMapping=c,s.outputEncoding=u,s.setClearColor(Rp,l)}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Qi()):null==this._equirectShader&&(this._equirectShader=Ji());var r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new j(Op[0],r),a=r.uniforms;a.envMap.value=e,e.isCubeTexture||a.texelSize.value.set(1/e.image.width,1/e.image.height),a.inputEncoding.value=Pp[e.encoding],a.outputEncoding.value=Pp[t.texture.encoding],Xi(t,0,0,3*xp,2*xp),n.setRenderTarget(t),n.render(i,Tp)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<wp;r++){var i=Math.sqrt(Lp[r]*Lp[r]-Lp[r-1]*Lp[r-1]),a=Np[(r-1)%Np.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new j(Op[r],u),l=u.uniforms,f=Ap[n]-1,d=isFinite(i)?Math.PI/(2*f):2*Math.PI/(2*Sp-1),h=i/d,p=isFinite(i)?1+Math.floor(3*h):Sp;p>Sp&&console.warn("sigmaRadians, "+i+", is too large and will clip, as it requested "+p+" samples when the maximum is set to "+Sp);for(var v=[],m=0,g=0;g<Sp;++g){var y=g/h,_=Math.exp(-y*y/2);v.push(_),0==g?m+=_:g<p&&(m+=2*_)}for(var b=0;b<v.length;b++)v[b]=v[b]/m;l.envMap.value=e.texture,l.samples.value=p,l.weights.value=v,l.latitudinal.value="latitudinal"===a,o&&(l.poleAxis.value=o),l.dTheta.value=d,l.mipInt.value=bp-n,l.inputEncoding.value=Pp[e.texture.encoding],l.outputEncoding.value=Pp[e.texture.encoding];var x=Ap[r];Xi(t,3*Math.max(0,xp-2*x),(0===r?0:2*xp)+2*x*(r>bp-_p?r-bp+_p:0),3*x,2*x),s.setRenderTarget(t),s.render(c,Tp)}}]),e}();kr.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(kr.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(ni.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new pn,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Iu(i.x,i.y,i.z||0))}return t}}),Object.assign(ri.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),ya.prototype=Object.create(Br.prototype),_a.prototype=Object.create(Br.prototype),ba.prototype=Object.create(Br.prototype),Object.assign(ba.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Kh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},qh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Tr.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),eh.extractUrlBase(e)}}),Tr.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Dh.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(zu.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(ec.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Dl.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Fh.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Ou,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ou.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ou.ceilPowerOfTwo(e)}}),Object.assign(Lu.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}}),Object.assign(cc.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Iu).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)},getInverse:function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}}),Dc.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Object.assign(Nu.prototype,{multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(uc.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Xc.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Xc,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Xc.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Xc.getNormal(e,t,n,r)}}),Object.assign(ii.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new md(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Od(this,e)}}),Object.assign(Au.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Iu.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ku.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(pn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(h.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(h.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(j.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(j.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Qt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(en.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Kt.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(kr.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),F.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(ai.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(_.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===wu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(wu)}}}),Object.assign(_.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?wu:Mu),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(C.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new _(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(C.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(_i.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(Fi.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(qt.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===wu},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(qt.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?wu:Mu),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(pd.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(uf.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(jh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(g.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Kc}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(ir.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(rr.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(B.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Vt.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Vt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?cu:uu}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(kt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(l.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(vh.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Oi).load(e,function(e){t.setBuffer(e)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),xh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},U.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},U.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)};var Dp={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r=void 0;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};Cu.crossOrigin=void 0,Cu.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new jr;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},Cu.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Rr;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},Cu.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Cu.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Bp={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"124"}})),t.ACESFilmicToneMapping=Lo,t.AddEquation=Ka,t.AddOperation=Po,t.AdditiveAnimationBlendMode=2501,t.AdditiveBlending=Xa,t.AlphaFormat=as,t.AlwaysDepth=mo,t.AlwaysStencilFunc=xu,t.AmbientLight=vi,t.AmbientLightProbe=Li,t.AnimationClip=Mr,t.AnimationLoader=Or,t.AnimationMixer=Di,t.AnimationObjectGroup=Ii,t.AnimationUtils=Vd,t.ArcCurve=Ir,t.ArrayCamera=Bt,t.ArrowHelper=pp,t.Audio=vh,t.AudioAnalyser=xh,t.AudioContext=oh,t.AudioListener=ph,t.AudioLoader=Oi,t.AxesHelper=vp,t.AxisHelper=xa,t.BackSide=Va,t.BasicDepthPacking=mu,t.BasicShadowMap=0,t.BinaryTextureLoader=Ta,t.Bone=$t,t.BooleanKeyframeTrack=vr,t.BoundingBoxHelper=Ma,t.Box2=Dh,t.Box3=zu,t.Box3Helper=cp,t.BoxBufferGeometry=Al,t.BoxGeometry=Qf,t.BoxHelper=up,t.BufferAttribute=_,t.BufferGeometry=C,t.BufferGeometryLoader=xi,t.ByteType=Xo,t.Cache=Wd,t.Camera=z,t.CameraHelper=op,t.CanvasRenderer=Oa,t.CanvasTexture=dn,t.CatmullRomCurve3=Br,t.CineonToneMapping=Ao,t.CircleBufferGeometry=Kf,t.CircleGeometry=$f,t.ClampToEdgeWrapping=zo,t.Clock=ch,t.ClosedSplineCurve3=ya,t.Color=Kc,t.ColorKeyframeTrack=mr,t.CompressedTexture=fn,t.CompressedTextureLoader=Ar,t.ConeBufferGeometry=rd,t.ConeGeometry=nd,t.CubeCamera=U,t.CubeGeometry=Qf,t.CubeReflectionMapping=Co,t.CubeRefractionMapping=jo,t.CubeTexture=G,t.CubeTextureLoader=Rr,t.CubeUVReflectionMapping=Io,t.CubeUVRefractionMapping=Do,t.CubicBezierCurve=Zr,t.CubicBezierCurve3=Jr,t.CubicInterpolant=fr,t.CullFaceBack=Ba,t.CullFaceFront=za,t.CullFaceFrontBack=3,t.CullFaceNone=Da,t.Curve=kr,t.CurvePath=ni,t.CustomBlending=Qa,t.CustomToneMapping=Ro,t.CylinderBufferGeometry=ed,t.CylinderGeometry=td,t.Cylindrical=Nh,t.DataTexture=V,t.DataTexture2DArray=se,t.DataTexture3D=ue,t.DataTextureLoader=Cr,t.DataUtils=yp,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=qd,t.DepthFormat=fs,t.DepthStencilFormat=ds,t.DepthTexture=hn,t.DirectionalLight=pi,t.DirectionalLightHelper=rp,t.DiscreteInterpolant=hr,t.DodecahedronBufferGeometry=ad,t.DodecahedronGeometry=od,t.DoubleSide=Wa,t.DstAlphaFactor=co,t.DstColorFactor=fo,t.DynamicBufferAttribute=ua,t.DynamicCopyUsage=35050,t.DynamicDrawUsage=wu,t.DynamicReadUsage=35049,t.EdgesGeometry=fd,t.EdgesHelper=wa,t.EllipseCurve=Nr,t.EqualDepth=_o,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=ko,t.EquirectangularRefractionMapping=No,t.Euler=gc,t.EventDispatcher=s,t.ExtrudeBufferGeometry=pd,t.ExtrudeGeometry=md,t.Face3=$c,t.Face4=Ki,t.FaceColors=1,t.FileLoader=Er,t.FlatShading=1,t.Float16BufferAttribute=E,t.Float32Attribute=ma,t.Float32BufferAttribute=O,t.Float64Attribute=ga,t.Float64BufferAttribute=A,t.FloatType=$o,t.Fog=sf,t.FogExp2=of,t.Font=Si,t.FontLoader=Ei,t.FrontSide=Ha,t.Frustum=Dl,t.GLBufferAttribute=zi,t.GLSL1="100",t.GLSL3=Su,t.GammaEncoding=lu,t.Geometry=pn,t.GeometryUtils=Dp,t.GreaterDepth=xo,t.GreaterEqualDepth=bo,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=Kh,t.Group=zt,t.HalfFloatType=es,t.HemisphereLight=oi,t.HemisphereLightHelper=Qh,t.HemisphereLightProbe=Ai,t.IcosahedronBufferGeometry=gd,t.IcosahedronGeometry=yd,t.ImageBitmapLoader=Mi,t.ImageLoader=Lr,t.ImageUtils=Cu,t.ImmediateRenderObject=Hi,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=bi,t.InstancedBufferGeometry=_i,t.InstancedInterleavedBuffer=Bi,t.InstancedMesh=tn,t.Int16Attribute=da,t.Int16BufferAttribute=w,t.Int32Attribute=pa,t.Int32BufferAttribute=P,t.Int8Attribute=ca,t.Int8BufferAttribute=b,t.IntType=Qo,t.InterleavedBuffer=qt,t.InterleavedBufferAttribute=Yt,t.Interpolant=lr,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.JSONLoader=Aa,t.KeepStencilOp=bu,t.KeyframeTrack=pr,t.LOD=Qt,t.LatheBufferGeometry=_d,t.LatheGeometry=bd,t.Layers=bc,t.LensFlare=La,t.LessDepth=go,t.LessEqualDepth=yo,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=ai,t.LightProbe=gi,t.Line=rn,t.Line3=Fh,t.LineBasicMaterial=nn,t.LineCurve=Qr,t.LineCurve3=Kr,t.LineDashedMaterial=cr,t.LineLoop=on,t.LinePieces=1,t.LineSegments=an,t.LineStrip=0;t.LinearEncoding=uu,t.LinearFilter=Vo,t.LinearInterpolant=dr,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=qo,t.LinearMipmapNearestFilter=Wo,t.LinearToneMapping=Eo,t.Loader=Tr,t.LoaderUtils=eh,t.LoadingManager=Pr,t.LogLuvEncoding=du,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=au,t.LuminanceAlphaFormat=cs,t.LuminanceFormat=us,t.MOUSE=Na,t.Material=g,t.MaterialLoader=yi,t.Math=Ou,t.MathUtils=Ou,t.Matrix3=Lu,t.Matrix4=cc,t.MaxEquation=no,t.Mesh=j,t.MeshBasicMaterial=y,t.MeshDepthMaterial=Ct,t.MeshDistanceMaterial=jt,t.MeshFaceMaterial=$i,t.MeshLambertMaterial=sr,t.MeshMatcapMaterial=ur,t.MeshNormalMaterial=or,t.MeshPhongMaterial=ir,t.MeshPhysicalMaterial=rr,t.MeshStandardMaterial=nr,t.MeshToonMaterial=ar,t.MinEquation=to,t.MirroredRepeatWrapping=Fo,t.MixOperation=So,t.MultiMaterial=ea,t.MultiplyBlending=Ja,t.MultiplyOperation=wo,t.NearestFilter=Uo,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=Ho,t.NearestMipmapNearestFilter=Go,t.NeverDepth=vo,t.NeverStencilFunc=512,t.NoBlending=qa,t.NoColors=0,t.NoToneMapping=To,t.NormalAnimationBlendMode=su,t.NormalBlending=Ya,t.NotEqualDepth=Mo,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=gr,t.Object3D=h,t.ObjectLoader=th,t.ObjectSpaceNormalMap=_u,t.OctahedronBufferGeometry=xd,t.OctahedronGeometry=Md,t.OneFactor=io,t.OneMinusDstAlphaFactor=lo,t.OneMinusDstColorFactor=ho,t.OneMinusSrcAlphaFactor=uo,t.OneMinusSrcColorFactor=oo,t.OrthographicCamera=di,t.PCFShadowMap=Fa,t.PCFSoftShadowMap=Ua,t.PMREMGenerator=Ip,t.ParametricBufferGeometry=Jn,t.ParametricGeometry=Qn,t.Particle=na,t.ParticleBasicMaterial=aa,t.ParticleSystem=ra,t.ParticleSystemMaterial=oa,t.Path=ri,t.PerspectiveCamera=F,t.Plane=Dc,t.PlaneBufferGeometry=Bl,t.PlaneGeometry=wd,t.PlaneHelper=lp,t.PointCloud=ta,t.PointCloudMaterial=ia,t.PointLight=fi,t.PointLightHelper=Yh,t.Points=un,t.PointsMaterial=sn,t.PolarGridHelper=$h,t.PolyhedronBufferGeometry=id,t.PolyhedronGeometry=Sd,t.PositionalAudio=bh,t.PropertyBinding=Ni,t.PropertyMixer=ji,t.QuadraticBezierCurve=$r,t.QuadraticBezierCurve3=ei,t.Quaternion=Nu,t.QuaternionKeyframeTrack=_r,t.QuaternionLinearInterpolant=yr,t.REVISION="124",t.RGBADepthPacking=gu,t.RGBAFormat=ss,t.RGBAIntegerFormat=ys,t.RGBA_ASTC_10x10_Format=Us,t.RGBA_ASTC_10x5_Format=Bs,t.RGBA_ASTC_10x6_Format=zs,t.RGBA_ASTC_10x8_Format=Fs,t.RGBA_ASTC_12x10_Format=Gs,t.RGBA_ASTC_12x12_Format=Hs,t.RGBA_ASTC_4x4_Format=Ls,t.RGBA_ASTC_5x4_Format=Rs,t.RGBA_ASTC_5x5_Format=Cs,t.RGBA_ASTC_6x5_Format=js,t.RGBA_ASTC_6x6_Format=ks,t.RGBA_ASTC_8x5_Format=Ns,t.RGBA_ASTC_8x6_Format=Is,t.RGBA_ASTC_8x8_Format=Ds,t.RGBA_BPTC_Format=Vs,t.RGBA_ETC2_EAC_Format=As,t.RGBA_PVRTC_2BPPV1_Format=Ts,t.RGBA_PVRTC_4BPPV1_Format=Ps,t.RGBA_S3TC_DXT1_Format=bs,t.RGBA_S3TC_DXT3_Format=xs,t.RGBA_S3TC_DXT5_Format=Ms,t.RGBDEncoding=vu,t.RGBEEncoding=fu,t.RGBEFormat=ls,t.RGBFormat=os,t.RGBIntegerFormat=gs,t.RGBM16Encoding=pu,t.RGBM7Encoding=hu,t.RGB_ETC1_Format=Es,t.RGB_ETC2_Format=Os,t.RGB_PVRTC_2BPPV1_Format=Ss,t.RGB_PVRTC_4BPPV1_Format=ws,t.RGB_S3TC_DXT1_Format=_s,t.RGFormat=vs,t.RGIntegerFormat=ms,t.RawShaderMaterial=tr,t.Ray=uc,t.Raycaster=Fi,t.RectAreaLight=mi,t.RedFormat=hs,t.RedIntegerFormat=ps,t.ReinhardToneMapping=Oo,t.RepeatWrapping=Bo,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=eo,t.RingBufferGeometry=Pd,t.RingGeometry=Td,t.SRGB8_ALPHA8_ASTC_10x10_Format=nu,t.SRGB8_ALPHA8_ASTC_10x5_Format=$s,t.SRGB8_ALPHA8_ASTC_10x6_Format=eu,t.SRGB8_ALPHA8_ASTC_10x8_Format=tu,t.SRGB8_ALPHA8_ASTC_12x10_Format=ru,t.SRGB8_ALPHA8_ASTC_12x12_Format=iu,t.SRGB8_ALPHA8_ASTC_4x4_Format=Ws,t.SRGB8_ALPHA8_ASTC_5x4_Format=qs,t.SRGB8_ALPHA8_ASTC_5x5_Format=Ys,t.SRGB8_ALPHA8_ASTC_6x5_Format=Xs,t.SRGB8_ALPHA8_ASTC_6x6_Format=Zs,t.SRGB8_ALPHA8_ASTC_8x5_Format=Js,t.SRGB8_ALPHA8_ASTC_8x6_Format=Qs,t.SRGB8_ALPHA8_ASTC_8x8_Format=Ks,t.Scene=uf,t.SceneUtils=Bp,t.ShaderChunk=zl,t.ShaderLib=Ul,t.ShaderMaterial=B,t.ShadowMaterial=er,t.Shape=ii,t.ShapeBufferGeometry=Ed,t.ShapeGeometry=Od,t.ShapePath=wi,t.ShapeUtils=hd,t.ShortType=Zo,t.Skeleton=en,t.SkeletonHelper=qh,t.SkinnedMesh=Kt,t.SmoothShading=2,t.Sphere=ec,t.SphereBufferGeometry=Ad,t.SphereGeometry=Ld,t.Spherical=kh,t.SphericalHarmonics3=$d,t.Spline=ba,t.SplineCurve=ti,t.SplineCurve3=_a,t.SpotLight=ci,t.SpotLightHelper=Gh,t.Sprite=Zt,t.SpriteMaterial=Xt,t.SrcAlphaFactor=so,t.SrcAlphaSaturateFactor=po,t.SrcColorFactor=ao,t.StaticCopyUsage=35046,t.StaticDrawUsage=Mu,t.StaticReadUsage=35045;t.StereoCamera=Ri,t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=br,t.SubtractEquation=$a,t.SubtractiveBlending=Za,t.TOUCH=Ia,t.TangentSpaceNormalMap=yu,t.TetrahedronBufferGeometry=Rd,t.TetrahedronGeometry=Cd,t.TextBufferGeometry=jd,t.TextGeometry=kd,t.Texture=u,t.TextureLoader=jr,t.TorusBufferGeometry=Nd,t.TorusGeometry=Id,t.TorusKnotBufferGeometry=Dd,t.TorusKnotGeometry=Bd,t.Triangle=Xc,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=zd,t.TubeGeometry=Fd,t.UVMapping=300,t.Uint16Attribute=ha,t.Uint16BufferAttribute=S,t.Uint32Attribute=va,t.Uint32BufferAttribute=T,t.Uint8Attribute=la,t.Uint8BufferAttribute=x,t.Uint8ClampedAttribute=fa,t.Uint8ClampedBufferAttribute=M,t.Uniform=jh,t.UniformsLib=Fl,t.UniformsUtils=Ll,t.UnsignedByteType=Yo,t.UnsignedInt248Type=is,t.UnsignedIntType=Ko,t.UnsignedShort4444Type=ts,t.UnsignedShort5551Type=ns,t.UnsignedShort565Type=rs,t.UnsignedShortType=Jo,t.VSMShadowMap=Ga,t.Vector2=Au,t.Vector3=Iu,t.Vector4=ku,t.VectorKeyframeTrack=xr,t.Vertex=sa,t.VertexColors=2,t.VideoTexture=ln,t.WebGL1Renderer=Wt,t.WebGLCubeRenderTarget=H,t.WebGLMultisampleRenderTarget=f,t.WebGLRenderTarget=l,t.WebGLRenderTargetCube=Ea,t.WebGLRenderer=Vt,t.WebGLUtils=Dt,t.WireframeGeometry=Ud,t.WireframeHelper=Sa,t.WrapAroundEnding=2402,t.XHRLoader=Pa,t.ZeroCurvatureEnding=ou,t.ZeroFactor=ro,t.ZeroSlopeEnding=2401,t.ZeroStencilOp=0,t.sRGBEncoding=cu},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(52);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(203);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(214);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}},function(e,t,n){"use strict";function r(e,t,n){var r,a,o;if(arguments.length>1)r=i(e,t,n);else for(a=0,r=new Array(o=e.arcs.length);a<o;++a)r[a]=a;return{type:"MultiLineString",arcs:(0,s.default)(e,r)}}function i(e,t,n){function r(e){var t=e<0?~e:e;(l[t]||(l[t]=[])).push({i:e,g:u})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function s(e){switch(u=e,e.type){case"GeometryCollection":e.geometries.forEach(s);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":a(e.arcs);break;case"MultiPolygon":o(e.arcs)}}var u,c=[],l=[];return s(t),l.forEach(null==n?function(e){c.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&c.push(e[0].i)}),c}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.object)(e,r.apply(this,arguments))},t.meshArcs=r;var a=n(54),o=n(100),s=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";function r(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[0]*i[1]-t[1]*i[0];return Math.abs(a)}function i(e,t){function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}}function i(e){e.forEach(function(t){t.forEach(function(t){(u[t=t<0?~t:t]||(u[t]=[])).push(e)})}),c.push(e)}function o(t){return r((0,a.object)(e,{type:"Polygon",arcs:[t]}).coordinates[0])}var u={},c=[],l=[];return t.forEach(n),c.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,l.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){u[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),c.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:l.map(function(t){var n,r=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){u[e<0?~e:e].length<2&&r.push(e)})})}),r=(0,s.default)(e,r),(n=r.length)>1)for(var i,a,c=1,l=o(r[0]);c<n;++c)(i=o(r[c]))>l&&(a=r[0],r[0]=r[c],r[c]=a,l=i);return r})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.object)(e,i.apply(this,arguments))},t.mergeArcs=i;var a=n(54),o=n(100),s=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e,t){e.forEach(function(e){e<0&&(e=~e);var n=a[e];n?n.push(t):a[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function r(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){r(e,t)}):e.type in s&&s[e.type](e.arcs,t)}var a={},o=e.map(function(){return[]}),s={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(r);for(var u in a)for(var c=a[u],l=c.length,f=0;f<l;++f)for(var d=f+1;d<l;++d){var h,p=c[f],v=c[d];(h=o[p])[u=(0,i.default)(h,v)]!==v&&h.splice(u,0,v),(h=o[v])[u=(0,i.default)(h,p)]!==p&&h.splice(u,0,p)}return o};var r=n(201),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e){return p(e)}function r(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(r)};break;case"Point":t={type:"Point",coordinates:n(e.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:e.coordinates.map(n)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function i(e){var t,n=0,r=1,i=e.length,a=new Array(i);for(a[0]=p(e[0],0);++n<i;)((t=p(e[n],n))[0]||t[1])&&(a[r++]=t);return 1===r&&(a[r++]=[0,0]),a.length=r,a}if(e.transform)throw new Error("already quantized");if(t&&t.scale)d=e.bbox;else{if(!((o=Math.floor(t))>=2))throw new Error("n must be ≥2");d=e.bbox||(0,a.default)(e);var o,u=d[0],c=d[1],l=d[2],f=d[3];t={scale:[l-u?(l-u)/(o-1):1,f-c?(f-c)/(o-1):1],translate:[u,c]}}var d,h,p=(0,s.default)(t),v=e.objects,m={};for(h in v)m[h]=r(v[h]);return{type:"Topology",bbox:d,transform:t,objects:m,arcs:e.arcs.map(i)}};var i=n(98),a=r(i),o=n(101),s=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(204);Object.defineProperty(t,"topology",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,n=e[0],r=e[1];return r<n&&(t=n,n=r,r=t),n+31*r}function a(e,t){var n,r=e[0],i=e[1],a=t[0],o=t[1];return i<r&&(n=r,r=i,i=n),o<a&&(n=a,a=o,o=n),r===a&&i===o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e){e&&y.hasOwnProperty(e.type)&&y[e.type](e)}function r(e){var t=[];do{var n=m.get(e);t.push(e[0]<e[1]?n:~n)}while(e=e.next);return t}function o(e){return e.map(r)}var u=(0,s.default)(e=(0,g.default)(e)),l=t>0&&u&&(0,x.default)(e,u,t),d=(0,f.default)((0,c.default)((0,v.default)(e))),p=d.coordinates,m=(0,_.default)(1.4*d.arcs.length,i,a);e=d.objects,d.bbox=u,d.arcs=d.arcs.map(function(e,t){return m.set(e,t),p.slice(e[0],e[1]+1)}),delete d.coordinates,p=null;var y={GeometryCollection:function(e){e.geometries.forEach(n)},LineString:function(e){e.arcs=r(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(r)},Polygon:function(e){e.arcs=e.arcs.map(r)},MultiPolygon:function(e){e.arcs=e.arcs.map(o)}};for(var b in e)n(e[b]);return l&&(d.transform=l,d.arcs=(0,h.default)(d.arcs)),d};var o=n(205),s=r(o),u=n(206),c=r(u),l=n(209),f=r(l),d=n(210),h=r(d),p=n(211),v=r(p),m=n(212),g=r(m),y=n(55),_=r(y),b=n(213),x=r(b)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){null!=e&&c.hasOwnProperty(e.type)&&c[e.type](e)}function n(e){var t=e[0],n=e[1];t<a&&(a=t),t>s&&(s=t),n<o&&(o=n),n>u&&(u=n)}function r(e){e.forEach(n)}function i(e){e.forEach(r)}var a=1/0,o=1/0,s=-1/0,u=-1/0,c={GeometryCollection:function(e){e.geometries.forEach(t)},Point:function(e){n(e.coordinates)},MultiPoint:function(e){e.coordinates.forEach(n)},LineString:function(e){r(e.arcs)},MultiLineString:function(e){e.arcs.forEach(r)},Polygon:function(e){e.arcs.forEach(r)},MultiPolygon:function(e){e.arcs.forEach(i)}};for(var l in e)t(e[l]);return s>=a&&u>=o?[a,o,s,u]:void 0}},function(e,t,n){"use strict";function r(e,t,n,r){i(e,t,n),i(e,t,t+r),i(e,t+r,n)}function i(e,t,n){for(var r,i=t+(n---t>>1);t<i;++t,--n)r=e[t],e[t]=e[n],e[n]=r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,i,a=(0,o.default)(e),s=e.coordinates,u=e.lines,c=e.rings;for(n=0,i=u.length;n<i;++n)for(var l=u[n],f=l[0],d=l[1];++f<d;)a.has(s[f])&&(t={0:f,1:l[1]},l[1]=f,l=l.next=t);for(n=0,i=c.length;n<i;++n)for(var h=c[n],p=h[0],v=p,m=h[1],g=a.has(s[p]);++v<m;)a.has(s[v])&&(g?(t={0:v,1:h[1]},h[1]=v,h=h.next=t):(r(s,p,m,m-v),s[m]=s[p],g=!0,v=p));return e};var a=n(207),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e,t,n,r){if(g[n]!==e){g[n]=e;var i=y[n];if(i>=0){var a=_[n];i===t&&a===r||i===r&&a===t||(++x,b[n]=1)}else y[n]=t,_[n]=r}}function n(e){return(0,f.default)(h[e])}function r(e,t){return(0,c.default)(h[e],h[t])}var i,o,u,l,d,h=e.coordinates,p=e.lines,v=e.rings,m=function(){for(var e=(0,s.default)(1.4*h.length,n,r,Int32Array,-1,Int32Array),t=new Int32Array(h.length),i=0,a=h.length;i<a;++i)t[i]=e.maybeSet(i,i);return t}(),g=new Int32Array(h.length),y=new Int32Array(h.length),_=new Int32Array(h.length),b=new Int8Array(h.length),x=0;for(i=0,o=h.length;i<o;++i)g[i]=y[i]=_[i]=-1;for(i=0,o=p.length;i<o;++i){var M=p[i],w=M[0],S=M[1];for(l=m[w],d=m[++w],++x,b[l]=1;++w<=S;)t(i,u=l,l=d,d=m[w]);++x,b[d]=1}for(i=0,o=h.length;i<o;++i)g[i]=-1;for(i=0,o=v.length;i<o;++i){var P=v[i],T=P[0]+1,E=P[1];for(u=m[E-1],l=m[T-1],d=m[T],t(i,u,l,d);++T<=E;)t(i,u=l,l=d,d=m[T])}g=y=_=null;var O,A=(0,a.default)(1.4*x,f.default,c.default);for(i=0,o=h.length;i<o;++i)b[O=m[i]]&&A.add(h[O]);return A};var i=n(208),a=r(i),o=n(55),s=r(o),u=n(102),c=r(u),l=n(103),f=r(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){function a(r){for(var a=t(r)&c,o=u[a],s=0;o!=i;){if(n(o,r))return!0;if(++s>=e)throw new Error("full hashset");o=u[a=a+1&c]}return u[a]=r,!0}function o(r){for(var a=t(r)&c,o=u[a],s=0;o!=i;){if(n(o,r))return!0;if(++s>=e)break;o=u[a=a+1&c]}return!1}function s(){for(var e=[],t=0,n=u.length;t<n;++t){var r=u[t];r!=i&&e.push(r)}return e}3===arguments.length&&(r=Array,i=null);for(var u=new r(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),c=e-1,l=0;l<e;++l)u[l]=i;return{add:a,has:o,values:s}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){var t,i,a,o,s,u,c,l;if(a=y.get(t=p[e[0]]))for(c=0,l=a.length;c<l;++c)if(o=a[c],n(o,e))return e[0]=o[0],void(e[1]=o[1]);if(s=y.get(i=p[e[1]]))for(c=0,l=s.length;c<l;++c)if(u=s[c],r(u,e))return e[1]=u[0],void(e[0]=u[1]);a?a.push(e):y.set(t,[e]),s?s.push(e):y.set(i,[e]),_.push(e)}function n(e,t){var n=e[0],r=t[0],i=e[1];if(n-i!=r-t[1])return!1;for(;n<=i;++n,++r)if(!(0,s.default)(p[n],p[r]))return!1;return!0}function r(e,t){var n=e[0],r=t[0],i=e[1],a=t[1];if(n-i!=r-a)return!1;for(;n<=i;++n,--a)if(!(0,s.default)(p[n],p[a]))return!1;return!0}function i(e,t){var n=e[0],r=t[0],i=e[1],a=t[1],o=i-n;if(o!==a-r)return!1;for(var c=u(e),l=u(t),f=0;f<o;++f)if(!(0,s.default)(p[n+(f+c)%o],p[r+(f+l)%o]))return!1;return!0}function o(e,t){var n=e[0],r=t[0],i=e[1],a=t[1],o=i-n;if(o!==a-r)return!1;for(var c=u(e),l=o-u(t),f=0;f<o;++f)if(!(0,s.default)(p[n+(f+c)%o],p[a-(f+l)%o]))return!1;return!0}function u(e){for(var t=e[0],n=e[1],r=t,i=r,a=p[r];++r<n;){var o=p[r];(o[0]<a[0]||o[0]===a[0]&&o[1]<a[1])&&(i=r,a=o)}return i-t}var l,f,d,h,p=e.coordinates,v=e.lines,m=e.rings,g=v.length+m.length;for(delete e.lines,delete e.rings,d=0,h=v.length;d<h;++d)for(l=v[d];l=l.next;)++g;for(d=0,h=m.length;d<h;++d)for(f=m[d];f=f.next;)++g;var y=(0,a.default)(2*g*1.4,c.default,s.default),_=e.arcs=[];for(d=0,h=v.length;d<h;++d){l=v[d];do{t(l)}while(l=l.next)}for(d=0,h=m.length;d<h;++d)if(f=m[d],f.next)do{t(f)}while(f=f.next);else!function(e){var t,n,r,a,s;if(n=y.get(t=p[e[0]]))for(a=0,s=n.length;a<s;++a){if(r=n[a],i(r,e))return e[0]=r[0],void(e[1]=r[1]);if(o(r,e))return e[0]=r[1],void(e[1]=r[0])}if(n=y.get(t=p[e[0]+u(e)]))for(a=0,s=n.length;a<s;++a){if(r=n[a],i(r,e))return e[0]=r[0],void(e[1]=r[1]);if(o(r,e))return e[0]=r[1],void(e[1]=r[0])}n?n.push(e):y.set(t,[e]),_.push(e)}(f);return e};var i=n(55),a=r(i),o=n(102),s=r(o),u=n(103),c=r(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=-1,n=e.length;++t<n;){for(var r,i,a=e[t],o=0,s=1,u=a.length,c=a[0],l=c[0],f=c[1];++o<u;)c=a[o],r=c[0],i=c[1],r===l&&i===f||(a[s++]=[r-l,i-f],l=r,f=i);1===s&&(a[s++]=[0,0]),a.length=s}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){e&&c.hasOwnProperty(e.type)&&c[e.type](e)}function n(e){for(var t=0,n=e.length;t<n;++t)u[++a]=e[t];var r={0:a-n+1,1:a};return o.push(r),r}function r(e){for(var t=0,n=e.length;t<n;++t)u[++a]=e[t];var r={0:a-n+1,1:a};return s.push(r),r}function i(e){return e.map(r)}var a=-1,o=[],s=[],u=[],c={GeometryCollection:function(e){e.geometries.forEach(t)},LineString:function(e){e.arcs=n(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(n)},Polygon:function(e){e.arcs=e.arcs.map(r)},MultiPolygon:function(e){e.arcs=e.arcs.map(i)}};for(var l in e)t(e[l]);return{type:"Topology",coordinates:u,lines:o,rings:s,objects:e}}},function(e,t,n){"use strict";function r(e){return null==e?{type:null}:("FeatureCollection"===e.type?i:"Feature"===e.type?a:o)(e)}function i(e){var t={type:"GeometryCollection",geometries:e.features.map(a)};return null!=e.bbox&&(t.bbox=e.bbox),t}function a(e){var t,n=o(e.geometry);null!=e.id&&(n.id=e.id),null!=e.bbox&&(n.bbox=e.bbox);for(t in e.properties){n.properties=e.properties;break}return n}function o(e){if(null==e)return{type:null};var t="GeometryCollection"===e.type?{type:"GeometryCollection",geometries:e.geometries.map(o)}:"Point"===e.type||"MultiPoint"===e.type?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return null!=e.bbox&&(t.bbox=e.bbox),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n={};for(t in e)n[t]=r(e[t]);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){function r(e){return[Math.round((e[0]-c)*h),Math.round((e[1]-l)*p)]}function i(e,t){for(var n,r,i,a,o,s=-1,u=0,f=e.length,d=new Array(f);++s<f;)n=e[s],a=Math.round((n[0]-c)*h),o=Math.round((n[1]-l)*p),a===r&&o===i||(d[u++]=[r=a,i=o]);for(d.length=u;u<t;)u=d.push([d[0][0],d[0][1]]);return d}function a(e){return i(e,2)}function o(e){return i(e,4)}function s(e){return e.map(o)}function u(e){null!=e&&v.hasOwnProperty(e.type)&&v[e.type](e)}var c=t[0],l=t[1],f=t[2],d=t[3],h=f-c?(n-1)/(f-c):1,p=d-l?(n-1)/(d-l):1,v={GeometryCollection:function(e){e.geometries.forEach(u)},Point:function(e){e.coordinates=r(e.coordinates)},MultiPoint:function(e){e.coordinates=e.coordinates.map(r)},LineString:function(e){e.arcs=a(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(a)},Polygon:function(e){e.arcs=s(e.arcs)},MultiPolygon:function(e){e.arcs=e.arcs.map(s)}};for(var m in e)u(e[m]);return{scale:[1/h,1/p],translate:[c,l]}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(215);Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return r(i).default}});var a=n(104);Object.defineProperty(t,"filterAttached",{enumerable:!0,get:function(){return r(a).default}});var o=n(217);Object.defineProperty(t,"filterAttachedWeight",{enumerable:!0,get:function(){return r(o).default}});var s=n(105);Object.defineProperty(t,"filterWeight",{enumerable:!0,get:function(){return r(s).default}});var u=n(56);Object.defineProperty(t,"planarRingArea",{enumerable:!0,get:function(){return u.planarRingArea}}),Object.defineProperty(t,"planarTriangleArea",{enumerable:!0,get:function(){return u.planarTriangleArea}});var c=n(218);Object.defineProperty(t,"presimplify",{enumerable:!0,get:function(){return r(c).default}});var l=n(220);Object.defineProperty(t,"quantile",{enumerable:!0,get:function(){return r(l).default}});var f=n(221);Object.defineProperty(t,"simplify",{enumerable:!0,get:function(){return r(f).default}});var d=n(222);Object.defineProperty(t,"sphericalRingArea",{enumerable:!0,get:function(){return d.sphericalRingArea}}),Object.defineProperty(t,"sphericalTriangleArea",{enumerable:!0,get:function(){return d.sphericalTriangleArea}})},function(e,t,n){"use strict";function r(){return!0}function i(e){return e}function a(e){return null!=e.type}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e){var t,r;switch(e.type){case"Polygon":r=o(e.arcs),t=r?{type:"Polygon",arcs:r}:{type:null};break;case"MultiPolygon":r=e.arcs.map(o).filter(i),t=r.length?{type:"MultiPolygon",arcs:r}:{type:null};break;case"GeometryCollection":r=e.geometries.map(n).filter(a),t=r.length?{type:"GeometryCollection",geometries:r}:{type:null};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function o(e){return e.length&&u(e[0])?[e[0]].concat(e.slice(1).filter(c)):null}function u(e){return t(e,!1)}function c(e){return t(e,!0)}var l,f=e.objects,d={};null==t&&(t=r);for(l in f)d[l]=n(f[l]);return(0,s.default)({type:"Topology",bbox:e.bbox,transform:e.transform,objects:d,arcs:e.arcs})};var o=n(216),s=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":r(e.arcs);break;case"MultiLineString":case"Polygon":e.arcs.forEach(r);break;case"MultiPolygon":e.arcs.forEach(i)}}function n(e){e<0&&(e=~e),m[e]||(m[e]=1,++g)}function r(e){e.forEach(n)}function i(e){e.forEach(r)}function a(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(a)};break;case"LineString":t={type:"LineString",arcs:s(e.arcs)};break;case"MultiLineString":t={type:"MultiLineString",arcs:e.arcs.map(s)};break;case"Polygon":t={type:"Polygon",arcs:e.arcs.map(s)};break;case"MultiPolygon":t={type:"MultiPolygon",arcs:e.arcs.map(u)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function o(e){return e<0?~m[~e]:m[e]}function s(e){return e.map(o)}function u(e){return e.map(s)}var c,l,f=e.objects,d={},h=e.arcs,p=h.length,v=-1,m=new Array(p),g=0,y=-1;for(l in f)t(f[l]);for(c=new Array(g);++v<p;)m[v]&&(m[v]=++y,c[y]=h[v]);for(l in f)d[l]=a(f[l]);return{type:"Topology",bbox:e.bbox,transform:e.transform,objects:d,arcs:c}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,a.default)(e),i=(0,s.default)(e,t,n);return function(e,t){return r(e,t)||i(e,t)}};var i=n(104),a=r(i),o=n(105),s=r(o)},function(e,t,n){"use strict";function r(e){return[e[0],e[1],0]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e){u.remove(e),e[1][2]=t(e),u.push(e)}var a=e.transform?(0,i.transform)(e.transform):r,u=(0,o.default)();null==t&&(t=s.planarTriangleArea);var c=e.arcs.map(function(e){var r,i,o,s=[],c=0;for(e=e.map(a),i=1,o=e.length-1;i<o;++i)r=[e[i-1],e[i],e[i+1]],r[1][2]=t(r),s.push(r),u.push(r);for(e[0][2]=e[o][2]=1/0,i=0,o=s.length;i<o;++i)r=s[i],r.previous=s[i-1],r.next=s[i+1];for(;r=u.pop();){var l=r.previous,f=r.next;r[1][2]<c?r[1][2]=c:c=r[1][2],l&&(l.next=f,l[2]=r[2],n(l)),f&&(f.previous=l,f[0]=r[0],n(f))}return e});return{type:"Topology",bbox:e.bbox,objects:e.objects,arcs:c}};var i=n(52),a=n(219),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(56)},function(e,t,n){"use strict";function r(e,t){return e[1][2]-t[1][2]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t){for(;t>0;){var n=(t+1>>1)-1,a=i[n];if(r(e,a)>=0)break;i[a._=t]=a,i[e._=t=n]=e}}function t(e,t){for(;;){var n=t+1<<1,o=n-1,s=t,u=i[s];if(o<a&&r(i[o],u)<0&&(u=i[s=o]),n<a&&r(i[n],u)<0&&(u=i[s=n]),s===t)break;i[u._=t]=u,i[e._=t=s]=e}}var n={},i=[],a=0;return n.push=function(t){return e(i[t._=a]=t,a++),a},n.pop=function(){if(!(a<=0)){var e,n=i[0];return--a>0&&(e=i[a],t(i[e._=0]=e,0)),n}},n.remove=function(n){var o,s=n._;if(i[s]===n)return s!==--a&&(o=i[a],(r(o,n)<0?e:t)(i[o._=s]=o,s)),s},n}},function(e,t,n){"use strict";function r(e,t){if(n=e.length){if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];var n,r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}}function i(e,t){return t-e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=[];return e.arcs.forEach(function(e){e.forEach(function(e){isFinite(e[2])&&n.push(e[2])})}),n.length&&r(n.sort(i),t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=null==t?Number.MIN_VALUE:+t;var n=e.arcs.map(function(e){for(var n,r=-1,i=0,a=e.length,o=new Array(a);++r<a;)(n=e[r])[2]>=t&&(o[i++]=[n[0],n[1]]);return o.length=i,o});return{type:"Topology",transform:e.transform,bbox:e.bbox,objects:e.objects,arcs:n}}},function(e,t,n){"use strict";function r(e,t){for(var n,r,i,a=0,o=e.length,s=0,l=e[t?a++:o-1],p=l[0]*c,v=l[1]*c/2+u,m=d(v),g=h(v);a<o;++a){l=e[a],n=p,p=l[0]*c,v=l[1]*c/2+u,r=m,m=d(v),i=g,g=h(v);var y=p-n,_=y>=0?1:-1,b=_*y,x=i*g,M=r*m+x*d(b),w=x*_*h(b);s+=f(w,M)}return s}function i(e,t){var n=r(e,!0);return t&&(n*=-1),2*(n<0?s+n:n)}function a(e){return 2*l(r(e,!1))}Object.defineProperty(t,"__esModule",{value:!0}),t.sphericalRingArea=i,t.sphericalTriangleArea=a;var o=Math.PI,s=2*o,u=o/4,c=o/180,l=Math.abs,f=Math.atan2,d=Math.cos,h=Math.sin},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(224);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return r.version}});var i=n(3);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(241);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var o=n(245);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=n(338);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var u=n(40);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var c=n(9);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var l=n(349);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var f=n(22);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})});var d=n(58);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})});var h=n(142);Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}})});var p=n(136);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})});var v=n(359);Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}})});var m=n(366);Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}})});var g=n(78);Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}})});var y=n(397);Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}})});var _=n(426);Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}})});var b=n(11);Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}})});var x=n(16);Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}})});var M=n(448);Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return M[e]}})});var w=n(76);Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}})});var S=n(455);Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}})});var P=n(460);Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}})});var T=n(485);Object.keys(T).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}})});var E=n(4);Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}})});var O=n(529);Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}})});var A=n(47);Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return A[e]}})});var L=n(90);Object.keys(L).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return L[e]}})});var R=n(39);Object.keys(R).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}})});var C=n(70);Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}})});var j=n(554);Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}})});var k=n(559);Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.name="d3",t.version="5.0.0",t.description="Data-Driven Documents",t.keywords=["dom","visualization","svg","animation","canvas"],t.homepage="https://d3js.org",t.license="BSD-3-Clause",t.author={name:"Mike Bostock",url:"https://bost.ocks.org/mike"},t.main="dist/d3.node.js",t.unpkg="dist/d3.min.js",t.jsdelivr="dist/d3.min.js";t.module="index";t.repository={type:"git",url:"https://github.com/d3/d3.git"},t.scripts={pretest:"rimraf dist && mkdir dist && json2module package.json > dist/package.js && node rollup.node",test:"tape 'test/**/*-test.js'",prepublishOnly:'npm run test && rollup -c --banner "$(preamble)" && uglifyjs -b beautify=false,preamble="\'$(preamble)\'" dist/d3.js -c negate_iife=false -m -o dist/d3.min.js',postpublish:'git push && git push --tags && cd ../d3.github.com && git pull && cp ../d3/dist/d3.js d3.v5.js && cp ../d3/dist/d3.min.js d3.v5.min.js && git add d3.v5.js d3.v5.min.js && git commit -m "d3 ${npm_package_version}" && git push && cd - && cd ../d3-bower && git pull && cp ../d3/LICENSE ../d3/README.md ../d3/dist/d3.js ../d3/dist/d3.min.js . && git add -- LICENSE README.md d3.js d3.min.js && git commit -m "${npm_package_version}" && git tag -am "${npm_package_version}" v${npm_package_version} && git push && git push --tags && cd - && zip -j dist/d3.zip -- LICENSE README.md API.md CHANGES.md dist/d3.js dist/d3.min.js'},t.devDependencies={json2module:"0.0","package-preamble":"0.1",rimraf:"2",rollup:"0.57","rollup-plugin-ascii":"0.0","rollup-plugin-node-resolve":"3",tape:"4","uglify-js":"3.2"},t.dependencies={"d3-array":"1","d3-axis":"1","d3-brush":"1","d3-chord":"1","d3-collection":"1","d3-color":"1","d3-contour":"1","d3-dispatch":"1","d3-drag":"1","d3-dsv":"1","d3-ease":"1","d3-fetch":"1","d3-force":"1","d3-format":"1","d3-geo":"1","d3-hierarchy":"1","d3-interpolate":"1","d3-path":"1","d3-polygon":"1","d3-quadtree":"1","d3-random":"1","d3-scale":"2","d3-scale-chromatic":"1","d3-selection":"1","d3-shape":"1","d3-time":"1","d3-time-format":"2","d3-timer":"1","d3-transition":"1","d3-voronoi":"1","d3-zoom":"1"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i,a,o,s,u=e.length,c=t.length,l=new Array(u*c);for(null==n&&(n=r.pair),i=o=0;i<u;++i)for(s=e[i],a=0;a<c;++a,++o)l[o]=n(s,t[a]);return l};var r=n(108)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var i,a,s=e.length,u=new Array(s);for(i=0;i<s;++i)u[i]=t(e[i],i,e);var c=n(u),l=c[0],f=c[1],d=r(u,l,f);Array.isArray(d)||(d=(0,v.tickStep)(l,f,d),d=(0,p.default)(Math.ceil(l/d)*d,f,d));for(var h=d.length;d[0]<=l;)d.shift(),--h;for(;d[h-1]>f;)d.pop(),--h;var m,g=new Array(h+1);for(i=0;i<=h;++i)m=g[i]=[],m.x0=i>0?d[i-1]:l,m.x1=i<h?d[i]:f;for(i=0;i<s;++i)a=u[i],l<=a&&a<=f&&g[(0,o.default)(d,a,0,h)].push(e[i]);return g}var t=d.default,n=l.default,r=g.default;return e.value=function(n){return arguments.length?(t="function"==typeof n?n:(0,u.default)(n),e):t},e.domain=function(t){return arguments.length?(n="function"==typeof t?t:(0,u.default)([t[0],t[1]]),e):n},e.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?(0,u.default)(i.slice.call(t)):(0,u.default)(t),e):r},e};var i=n(112),a=n(106),o=r(a),s=n(228),u=r(s),c=n(111),l=r(c),f=n(229),d=r(f),h=n(113),p=r(h),v=n(114),m=n(115),g=r(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return e=i.map.call(e,u.default).sort(o.default),Math.ceil((n-t)/(2*((0,l.default)(e,.75)-(0,l.default)(e,.25))*Math.pow(e.length,-1/3)))};var i=n(112),a=n(21),o=r(a),s=n(27),u=r(s),c=n(57),l=r(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return Math.ceil((n-t)/(3.5*(0,i.default)(e)*Math.pow(e.length,-1/3)))};var r=n(109),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r=e.length,a=r,o=-1,s=0;if(null==t)for(;++o<r;)isNaN(n=(0,i.default)(e[o]))?--a:s+=n;else for(;++o<r;)isNaN(n=(0,i.default)(t(e[o],o,e)))?--a:s+=n;if(a)return s/a};var r=n(27),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r=e.length,i=-1,o=[];if(null==t)for(;++i<r;)isNaN(n=(0,s.default)(e[i]))||o.push(n);else for(;++i<r;)isNaN(n=(0,s.default)(t(e[i],i,e)))||o.push(n);return(0,c.default)(o.sort(a.default),.5)};var i=n(21),a=r(i),o=n(27),s=r(o),u=n(57),c=r(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(n=e.length){var n,r,a=0,o=0,s=e[o];for(null==t&&(t=i.default);++a<n;)(t(r=e[a],s)<0||0!==t(s,s))&&(s=r,o=a);return 0===t(s,s)?o:void 0}};var r=n(21),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){for(var r,i,a=(null==n?e.length:n)-(t=null==t?0:+t);a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.default)(arguments)};var r=n(117),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(242);Object.defineProperty(t,"axisTop",{enumerable:!0,get:function(){return r.axisTop}}),Object.defineProperty(t,"axisRight",{enumerable:!0,get:function(){return r.axisRight}}),Object.defineProperty(t,"axisBottom",{enumerable:!0,get:function(){return r.axisBottom}}),Object.defineProperty(t,"axisLeft",{enumerable:!0,get:function(){return r.axisLeft}})},function(e,t,n){"use strict";function r(e){return"translate("+(e+.5)+",0)"}function i(e){return"translate(0,"+(e+.5)+")"}function a(e){return function(t){return+e(t)}}function o(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function s(){return!this.__axis}function u(e,t){function n(n){var r=null==c?t.ticks?t.ticks.apply(t,u):t.domain():c,i=null==l?t.tickFormat?t.tickFormat.apply(t,u):v.default:l,h=Math.max(f,0)+p,S=t.range(),P=+S[0]+.5,T=+S[S.length-1]+.5,E=(t.bandwidth?o:a)(t.copy()),O=n.selection?n.selection():n,A=O.selectAll(".domain").data([null]),L=O.selectAll(".tick").data(r,t).order(),R=L.exit(),C=L.enter().append("g").attr("class","tick"),j=L.select("line"),k=L.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),L=L.merge(C),j=j.merge(C.append("line").attr("stroke","currentColor").attr(M+"2",x*f)),k=k.merge(C.append("text").attr("fill","currentColor").attr(M,x*h).attr("dy",e===m?"0em":e===y?"0.71em":"0.32em")),n!==O&&(A=A.transition(n),L=L.transition(n),j=j.transition(n),k=k.transition(n),R=R.transition(n).attr("opacity",b).attr("transform",function(e){return isFinite(e=E(e))?w(e):this.getAttribute("transform")}),C.attr("opacity",b).attr("transform",function(e){var t=this.parentNode.__axis;return w(t&&isFinite(t=t(e))?t:E(e))})),R.remove(),A.attr("d",e===_||e==g?d?"M"+x*d+","+P+"H0.5V"+T+"H"+x*d:"M0.5,"+P+"V"+T:d?"M"+P+","+x*d+"V0.5H"+T+"V"+x*d:"M"+P+",0.5H"+T),L.attr("opacity",1).attr("transform",function(e){return w(E(e))}),j.attr(M+"2",x*f),k.attr(M,x*h).text(i),O.filter(s).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===g?"start":e===_?"end":"middle"),O.each(function(){this.__axis=E})}var u=[],c=null,l=null,f=6,d=6,p=3,x=e===m||e===_?-1:1,M=e===_||e===g?"x":"y",w=e===m||e===y?r:i;return n.scale=function(e){return arguments.length?(t=e,n):t},n.ticks=function(){return u=h.slice.call(arguments),n},n.tickArguments=function(e){return arguments.length?(u=null==e?[]:h.slice.call(e),n):u.slice()},n.tickValues=function(e){return arguments.length?(c=null==e?null:h.slice.call(e),n):c&&c.slice()},n.tickFormat=function(e){return arguments.length?(l=e,n):l},n.tickSize=function(e){return arguments.length?(f=d=+e,n):f},n.tickSizeInner=function(e){return arguments.length?(f=+e,n):f},n.tickSizeOuter=function(e){return arguments.length?(d=+e,n):d},n.tickPadding=function(e){return arguments.length?(p=+e,n):p},n}function c(e){return u(m,e)}function l(e){return u(g,e)}function f(e){return u(y,e)}function d(e){return u(_,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.axisTop=c,t.axisRight=l,t.axisBottom=f,t.axisLeft=d;var h=n(243),p=n(244),v=function(e){return e&&e.__esModule?e:{default:e}}(p),m=1,g=2,y=3,_=4,b=1e-6},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.slice=Array.prototype.slice},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(246);Object.defineProperty(t,"brush",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(t,"brushX",{enumerable:!0,get:function(){return i.brushX}}),Object.defineProperty(t,"brushY",{enumerable:!0,get:function(){return i.brushY}}),Object.defineProperty(t,"brushSelection",{enumerable:!0,get:function(){return i.brushSelection}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return[+e[0],+e[1]]}function a(e){return[i(e[0]),i(e[1])]}function o(e){return function(t){return(0,b.touch)(t,b.event.touches,e)}}function s(e){return{type:e}}function u(){return!b.event.ctrlKey&&!b.event.button}function c(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function l(){return navigator.maxTouchPoints||"ontouchstart"in this}function f(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function d(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function h(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function p(){return m(C)}function v(){return m(j)}function m(e){function t(t){var r=t.property("__brush",m).selectAll(".overlay").data([s("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",N.overlay).merge(r).each(function(){var e=f(this).extent;(0,b.select)(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),t.selectAll(".selection").data([s("selection")]).enter().append("rect").attr("class","selection").attr("cursor",N.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,function(e){return e.type});i.exit().remove(),i.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return N[e.type]}),t.each(n).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(F).on("touchstart.brush",h).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){var e=(0,b.select)(this),t=f(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-H/2:t[0][0]-H/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-H/2:t[0][1]-H/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+H:H}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+H:H})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function r(e,t,n){var r=e.__brush.emitter;return!r||n&&r.clean?new i(e,t,n):r}function i(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function h(){function t(){var e=ne(F);!te||S||P||(Math.abs(e[0]-ie[0])>Math.abs(e[1]-ie[1])?P=!0:S=!0),ie=e,w=!0,(0,E.default)(),i()}function i(){var e;switch($=ie[0]-re[0],ee=ie[1]-re[1],H){case A:case O:V&&($=Math.max(Z-c,Math.min(Q-v,$)),l=c+$,m=v+$),W&&(ee=Math.max(J-h,Math.min(K-g,ee)),p=h+ee,_=g+ee);break;case L:V<0?($=Math.max(Z-c,Math.min(Q-c,$)),l=c+$,m=v):V>0&&($=Math.max(Z-v,Math.min(Q-v,$)),l=c,m=v+$),W<0?(ee=Math.max(J-h,Math.min(K-h,ee)),p=h+ee,_=g):W>0&&(ee=Math.max(J-g,Math.min(K-g,ee)),p=h,_=g+ee);break;case R:V&&(l=Math.max(Z,Math.min(Q,c-$*V)),m=Math.max(Z,Math.min(Q,v+$*V))),W&&(p=Math.max(J,Math.min(K,h-ee*W)),_=Math.max(J,Math.min(K,g+ee*W)))}m<l&&(V*=-1,e=c,c=v,v=e,e=l,l=m,m=e,G in I&&se.attr("cursor",N[G=I[G]])),_<p&&(W*=-1,e=h,h=g,g=e,e=p,p=_,_=e,G in D&&se.attr("cursor",N[G=D[G]])),q.selection&&(X=q.selection),S&&(l=X[0][0],m=X[1][0]),P&&(p=X[0][1],_=X[1][1]),X[0][0]===l&&X[0][1]===p&&X[1][0]===m&&X[1][1]===_||(q.selection=[[l,p],[m,_]],n.call(F),ae.brush())}function a(){if((0,T.nopropagation)(),b.event.touches){if(b.event.touches.length)return;M&&clearTimeout(M),M=setTimeout(function(){M=null},500)}else(0,y.dragEnable)(b.event.view,w),ue.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);oe.attr("pointer-events","all"),se.attr("cursor",N.overlay),q.selection&&(X=q.selection),d(X)&&(q.selection=null,n.call(F)),ae.end()}function s(){switch(b.event.keyCode){case 16:te=V&&W;break;case 18:H===L&&(V&&(v=m-$*V,c=l+$*V),W&&(g=_-ee*W,h=p+ee*W),H=R,i());break;case 32:H!==L&&H!==R||(V<0?v=m-$:V>0&&(c=l-$),W<0?g=_-ee:W>0&&(h=p-ee),H=A,se.attr("cursor",N.selection),i());break;default:return}(0,E.default)()}function u(){switch(b.event.keyCode){case 16:te&&(S=P=te=!1,i());break;case 18:H===R&&(V<0?v=m:V>0&&(c=l),W<0?g=_:W>0&&(h=p),H=L,i());break;case 32:H===A&&(b.event.altKey?(V&&(v=m-$*V,c=l+$*V),W&&(g=_-ee*W,h=p+ee*W),H=R):(V<0?v=m:V>0&&(c=l),W<0?g=_:W>0&&(h=p),H=L),se.attr("cursor",N[G]),i());break;default:return}(0,E.default)()}if((!M||b.event.touches)&&k.apply(this,arguments)){var c,l,h,p,v,m,g,_,w,S,P,F=this,G=b.event.target.__data__.type,H="selection"===(U&&b.event.metaKey?G="overlay":G)?O:U&&b.event.altKey?R:L,V=e===j?null:B[G],W=e===C?null:z[G],q=f(F),Y=q.extent,X=q.selection,Z=Y[0][0],J=Y[0][1],Q=Y[1][0],K=Y[1][1],$=0,ee=0,te=V&&W&&U&&b.event.shiftKey,ne=b.event.touches?o(b.event.changedTouches[0].identifier):b.mouse,re=ne(F),ie=re,ae=r(F,arguments,!0).beforestart();"overlay"===G?(X&&(w=!0),q.selection=X=[[c=e===j?Z:re[0],h=e===C?J:re[1]],[v=e===j?Q:c,g=e===C?K:h]]):(c=X[0][0],h=X[0][1],v=X[1][0],g=X[1][1]),l=c,p=h,m=v,_=g;var oe=(0,b.select)(F).attr("pointer-events","none"),se=oe.selectAll(".overlay").attr("cursor",N[G]);if(b.event.touches)ae.moved=t,ae.ended=a;else{var ue=(0,b.select)(b.event.view).on("mousemove.brush",t,!0).on("mouseup.brush",a,!0);U&&ue.on("keydown.brush",s,!0).on("keyup.brush",u,!0),(0,y.dragDisable)(b.event.view)}(0,T.nopropagation)(),(0,x.interrupt)(F),n.call(F),ae.start()}}function p(){r(this,arguments).moved()}function v(){r(this,arguments).ended()}function m(){var t=this.__brush||{selection:null};return t.extent=a(S.apply(this,arguments)),t.dim=e,t}var M,S=c,k=u,F=l,U=!0,G=(0,g.dispatch)("start","brush","end"),H=6;return t.move=function(t,i){t.selection?t.on("start.brush",function(){r(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){r(this,arguments).end()}).tween("brush",function(){function t(e){o.selection=1===e&&null===c?null:l(e),n.call(a),s.brush()}var a=this,o=a.__brush,s=r(a,arguments),u=o.selection,c=e.input("function"==typeof i?i.apply(this,arguments):i,o.extent),l=(0,_.interpolate)(u,c);return null!==u&&null!==c?t:t(1)}):t.each(function(){var t=this,a=arguments,o=t.__brush,s=e.input("function"==typeof i?i.apply(t,a):i,o.extent),u=r(t,a).beforestart();(0,x.interrupt)(t),o.selection=null===s?null:s,n.call(t),u.start().brush().end()})},t.clear=function(e){t.move(e,null)},i.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(n){(0,b.customEvent)(new P.default(t,n,e.output(this.state.selection)),G.apply,G,[n,this.that,this.args])}},t.extent=function(e){return arguments.length?(S="function"==typeof e?e:(0,w.default)(a(e)),t):S},t.filter=function(e){return arguments.length?(k="function"==typeof e?e:(0,w.default)(!!e),t):k},t.touchable=function(e){return arguments.length?(F="function"==typeof e?e:(0,w.default)(!!e),t):F},t.handleSize=function(e){return arguments.length?(H=+e,t):H},t.keyModifiers=function(e){return arguments.length?(U=!!e,t):U},t.on=function(){var e=G.on.apply(G,arguments);return e===G?t:e},t}Object.defineProperty(t,"__esModule",{value:!0}),t.brushSelection=h,t.brushX=p,t.brushY=v,t.default=function(){return m(k)};var g=n(22),y=n(58),_=n(11),b=n(4),x=n(70),M=n(335),w=r(M),S=n(336),P=r(S),T=n(337),E=r(T),O={name:"drag"},A={name:"space"},L={name:"handle"},R={name:"center"},C={name:"x",handles:["w","e"].map(s),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},j={name:"y",handles:["n","s"].map(s),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},k={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(s),input:function(e){return null==e?null:a(e)},output:function(e){return e}},N={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},I={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},D={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},B={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},z={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1}},function(e,t,n){"use strict";function r(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new i(r)}function i(e){this._=e}function a(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function o(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function s(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=u,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Object.defineProperty(t,"__esModule",{value:!0});var u={value:function(){}};i.prototype=r.prototype={constructor:i,on:function(e,t){var n,r=this._,i=a(e+"",r),u=-1,c=i.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++u<c;)if(n=(e=i[u]).type)r[n]=s(r[n],e.name,t);else if(null==t)for(n in r)r[n]=s(r[n],e.name,null);return this}for(;++u<c;)if((n=(e=i[u]).type)&&(n=o(r[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new i(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}},t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return!c.event.ctrlKey&&!c.event.button}function a(){return this.parentNode}function o(e){return null==e?{x:c.event.x,y:c.event.y}:e}function s(){return navigator.maxTouchPoints||"ontouchstart"in this}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){e.on("mousedown.drag",t).filter(E).on("touchstart.drag",p).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function t(){if(!w&&S.apply(this,arguments)){var e=_("mouse",P.apply(this,arguments),c.mouse,this,arguments);e&&((0,c.select)(c.event.view).on("mousemove.drag",n,!0).on("mouseup.drag",r,!0),(0,f.default)(c.event.view),(0,d.nopropagation)(),M=!1,b=c.event.clientX,x=c.event.clientY,e("start"))}}function n(){if((0,h.default)(),!M){var e=c.event.clientX-b,t=c.event.clientY-x;M=e*e+t*t>R}O.mouse("drag")}function r(){(0,c.select)(c.event.view).on("mousemove.drag mouseup.drag",null),(0,l.yesdrag)(c.event.view,M),(0,h.default)(),O.mouse("end")}function p(){if(S.apply(this,arguments)){var e,t,n=c.event.changedTouches,r=P.apply(this,arguments),i=n.length;for(e=0;e<i;++e)(t=_(n[e].identifier,r,c.touch,this,arguments))&&((0,d.nopropagation)(),t("start"))}}function m(){var e,t,n=c.event.changedTouches,r=n.length;for(e=0;e<r;++e)(t=O[n[e].identifier])&&((0,h.default)(),t("drag"))}function y(){var e,t,n=c.event.changedTouches,r=n.length;for(w&&clearTimeout(w),w=setTimeout(function(){w=null},500),e=0;e<r;++e)(t=O[n[e].identifier])&&((0,d.nopropagation)(),t("end"))}function _(t,n,r,i,a){var o,s,u,l=r(n,t),f=A.copy();if((0,c.customEvent)(new g.default(e,"beforestart",o,t,L,l[0],l[1],0,0,f),function(){return null!=(c.event.subject=o=T.apply(i,a))&&(s=o.x-l[0]||0,u=o.y-l[1]||0,!0)}))return function d(h){var p,v=l;switch(h){case"start":O[t]=d,p=L++;break;case"end":delete O[t],--L;case"drag":l=r(n,t),p=L}(0,c.customEvent)(new g.default(e,h,o,t,p,l[0]+s,l[1]+u,l[0]-v[0],l[1]-v[1],f),f.apply,f,[h,i,a])}}var b,x,M,w,S=i,P=a,T=o,E=s,O={},A=(0,u.dispatch)("start","drag","end"),L=0,R=0;return e.filter=function(t){return arguments.length?(S="function"==typeof t?t:(0,v.default)(!!t),e):S},e.container=function(t){return arguments.length?(P="function"==typeof t?t:(0,v.default)(t),e):P},e.subject=function(t){return arguments.length?(T="function"==typeof t?t:(0,v.default)(t),e):T},e.touchable=function(t){return arguments.length?(E="function"==typeof t?t:(0,v.default)(!!t),e):E},e.on=function(){var t=A.on.apply(A,arguments);return t===A?e:t},e.clickDistance=function(t){return arguments.length?(R=(t=+t)*t,e):Math.sqrt(R)},e};var u=n(22),c=n(4),l=n(124),f=r(l),d=n(125),h=r(d),p=n(284),v=r(p),m=n(285),g=r(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.default)((0,a.default)(e).call(document.documentElement))};var i=n(35),a=r(i),o=n(118),s=r(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"function"!=typeof e&&(e=(0,a.default)(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var s,u,c=t[o],l=c.length,f=i[o]=new Array(l),d=0;d<l;++d)(s=c[d])&&(u=e.call(s,s.__data__,d,c))&&("__data__"in s&&(u.__data__=s.__data__),f[d]=u);return new r.Selection(i,this._parents)};var r=n(8),i=n(61),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"function"!=typeof e&&(e=(0,a.default)(e));for(var t=this._groups,n=t.length,i=[],o=[],s=0;s<n;++s)for(var u,c=t[s],l=c.length,f=0;f<l;++f)(u=c[f])&&(i.push(e.call(u,u.__data__,f,c)),o.push(u));return new r.Selection(i,o)};var r=n(8),i=n(119),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"function"!=typeof e&&(e=(0,a.default)(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var s,u=t[o],c=u.length,l=i[o]=[],f=0;f<c;++f)(s=u[f])&&e.call(s,s.__data__,f,u)&&l.push(s);return new r.Selection(i,this._parents)};var r=n(8),i=n(120),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e,t,n,r,i,a){for(var s,u=0,c=t.length,l=a.length;u<l;++u)(s=t[u])?(s.__data__=a[u],r[u]=s):n[u]=new o.EnterNode(e,a[u]);for(;u<c;++u)(s=t[u])&&(i[u]=s)}function i(e,t,n,r,i,a,s){var u,l,f,d={},h=t.length,p=a.length,v=new Array(h);for(u=0;u<h;++u)(l=t[u])&&(v[u]=f=c+s.call(l,l.__data__,u,t),f in d?i[u]=l:d[f]=l);for(u=0;u<p;++u)f=c+s.call(e,a[u],u,a),(l=d[f])?(r[u]=l,l.__data__=a[u],d[f]=null):n[u]=new o.EnterNode(e,a[u]);for(u=0;u<h;++u)(l=t[u])&&d[v[u]]===l&&(i[u]=l)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)return g=new Array(this.size()),h=-1,this.each(function(e){g[++h]=e}),g;var n=t?i:r,o=this._parents,s=this._groups;"function"!=typeof e&&(e=(0,u.default)(e));for(var c=s.length,l=new Array(c),f=new Array(c),d=new Array(c),h=0;h<c;++h){var p=o[h],v=s[h],m=v.length,g=e.call(p,p&&p.__data__,h,o),y=g.length,_=f[h]=new Array(y),b=l[h]=new Array(y);n(p,v,_,b,d[h]=new Array(m),g,t);for(var x,M,w=0,S=0;w<y;++w)if(x=_[w]){for(w>=S&&(S=w+1);!(M=b[S])&&++S<y;);x._next=M||null}}return l=new a.Selection(l,o),l._enter=f,l._exit=d,l};var a=n(8),o=n(121),s=n(254),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c="$"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new a.Selection(this._exit||this._groups.map(i.default),this._parents)};var r=n(122),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=this._groups,n=e._groups,i=t.length,a=n.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var c,l=t[u],f=n[u],d=l.length,h=s[u]=new Array(d),p=0;p<d;++p)(c=l[p]||f[p])&&(h[p]=c);for(;u<i;++u)s[u]=t[u];return new r.Selection(s,this._parents)};var r=n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this}},function(e,t,n){"use strict";function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=r);for(var n=this._groups,a=n.length,o=new Array(a),s=0;s<a;++s){for(var u,c=n[s],l=c.length,f=o[s]=new Array(l),d=0;d<l;++d)(u=c[d])&&(f[d]=u);f.sort(t)}return new i.Selection(o,this._parents).order()};var i=n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0;return this.each(function(){++e}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!this.node()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this}},function(e,t,n){"use strict";function r(e){return function(){this.removeAttribute(e)}}function i(e){return function(){this.removeAttributeNS(e.space,e.local)}}function a(e,t){return function(){this.setAttribute(e,t)}}function o(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function s(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function u(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,l.default)(e);if(arguments.length<2){var c=this.node();return n.local?c.getAttributeNS(n.space,n.local):c.getAttribute(n)}return this.each((null==t?n.local?i:r:"function"==typeof t?n.local?u:s:n.local?o:a)(n,t))};var c=n(59),l=function(e){return e&&e.__esModule?e:{default:e}}(c)},function(e,t,n){"use strict";function r(e){return function(){delete this[e]}}function i(e,t){return function(){this[e]=t}}function a(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return arguments.length>1?this.each((null==t?r:"function"==typeof t?a:i)(e,t)):this.node()[e]}},function(e,t,n){"use strict";function r(e){return e.trim().split(/^|\s+/)}function i(e){return e.classList||new a(e)}function a(e){this._node=e,this._names=r(e.getAttribute("class")||"")}function o(e,t){for(var n=i(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function s(e,t){for(var n=i(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function u(e){return function(){o(this,e)}}function c(e){return function(){s(this,e)}}function l(e,t){return function(){(t.apply(this,arguments)?o:s)(this,e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=r(e+"");if(arguments.length<2){for(var a=i(this.node()),o=-1,s=n.length;++o<s;)if(!a.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?l:t?u:c)(n,t))},a.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}}},function(e,t,n){"use strict";function r(){this.textContent=""}function i(e){return function(){this.textContent=e}}function a(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return arguments.length?this.each(null==e?r:("function"==typeof e?a:i)(e)):this.node().textContent}},function(e,t,n){"use strict";function r(){this.innerHTML=""}function i(e){return function(){this.innerHTML=e}}function a(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return arguments.length?this.each(null==e?r:("function"==typeof e?a:i)(e)):this.node().innerHTML}},function(e,t,n){"use strict";function r(){this.nextSibling&&this.parentNode.appendChild(this)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return this.each(r)}},function(e,t,n){"use strict";function r(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return this.each(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="function"==typeof e?e:(0,i.default)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})};var r=n(35),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="function"==typeof e?e:(0,o.default)(e),r=null==t?i:"function"==typeof t?t:(0,u.default)(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})};var a=n(35),o=r(a),s=n(61),u=r(s)},function(e,t,n){"use strict";function r(){var e=this.parentNode;e&&e.removeChild(this)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return this.each(r)}},function(e,t,n){"use strict";function r(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function i(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return this.select(e?i:r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return arguments.length?this.property("__data__",e):this.node().__data__}},function(e,t,n){"use strict";function r(e,t,n){var r=(0,s.default)(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function i(e,t){return function(){return r(this,e,t)}}function a(e,t){return function(){return r(this,e,t.apply(this,arguments))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return this.each(("function"==typeof t?a:i)(e,t))};var o=n(62),s=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";function r(){return new i}function i(){this._="@"+(++a).toString(36)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=0;i.prototype=r.prototype={constructor:i,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.default)();return t.changedTouches&&(t=t.changedTouches[0]),(0,s.default)(e,t)};var i=n(64),a=r(i),o=n(36),s=r(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e?new r.Selection([document.querySelectorAll(e)],[document.documentElement]):new r.Selection([null==e?[]:e],r.root)};var r=n(8)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){arguments.length<3&&(n=t,t=(0,a.default)().changedTouches);for(var r,i=0,o=t?t.length:0;i<o;++i)if((r=t[i]).identifier===n)return(0,s.default)(e,r);return null};var i=n(64),a=r(i),o=n(36),s=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){null==t&&(t=(0,a.default)().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=(0,s.default)(e,t[n]);return i};var i=n(64),a=r(i),o=n(36),s=r(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o,s,u,c){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=u,this._=c}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e}},function(e,t,n){"use strict";function r(e){if(e instanceof o)return new o(e.l,e.a,e.b,e.opacity);if(e instanceof p)return v(e);e instanceof y.Rgb||(e=(0,y.rgbConvert)(e));var t,n,r=l(e.r),i=l(e.g),a=l(e.b),u=s((.2225045*r+.7168786*i+.0606169*a)/x);return r===i&&i===a?t=n=u:(t=s((.4360747*r+.3850649*i+.1430804*a)/b),n=s((.0139322*r+.0971045*i+.7141733*a)/M)),new o(116*u-16,500*(t-u),200*(u-n),e.opacity)}function i(e,t){return new o(e,0,0,null==t?1:t)}function a(e,t,n,i){return 1===arguments.length?r(e):new o(e,t,n,null==i?1:i)}function o(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function s(e){return e>T?Math.pow(e,1/3):e/P+w}function u(e){return e>S?e*e*e:P*(e-w)}function c(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function l(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function f(e){if(e instanceof p)return new p(e.h,e.c,e.l,e.opacity);if(e instanceof o||(e=r(e)),0===e.a&&0===e.b)return new p(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*_.rad2deg;return new p(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function d(e,t,n,r){return 1===arguments.length?f(e):new p(n,t,e,null==r?1:r)}function h(e,t,n,r){return 1===arguments.length?f(e):new p(e,t,n,null==r?1:r)}function p(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function v(e){if(isNaN(e.h))return new o(e.l,0,0,e.opacity);var t=e.h*_.deg2rad;return new o(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Object.defineProperty(t,"__esModule",{value:!0}),t.gray=i,t.default=a,t.Lab=o,t.lch=d,t.hcl=h,t.Hcl=p;var m=n(67),g=function(e){return e&&e.__esModule?e:{default:e}}(m),y=n(66),_=n(126),b=.96422,x=1,M=.82521,w=4/29,S=6/29,P=3*S*S,T=S*S*S;(0,g.default)(o,a,(0,m.extend)(y.Color,{brighter:function(e){return new o(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new o(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=b*u(t),e=x*u(e),n=M*u(n),new y.Rgb(c(3.1338561*t-1.6168667*e-.4906146*n),c(-.9787684*t+1.9161415*e+.033454*n),c(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),(0,g.default)(p,h,(0,m.extend)(y.Color,{brighter:function(e){return new p(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new p(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return v(this).rgb()}}))},function(e,t,n){"use strict";function r(e){if(e instanceof a)return new a(e.h,e.s,e.l,e.opacity);e instanceof u.Rgb||(e=(0,u.rgbConvert)(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(g*r+v*t-m*n)/(g+v-m),o=r-i,s=(p*(n-i)-d*o)/h,l=Math.sqrt(s*s+o*o)/(p*i*(1-i)),f=l?Math.atan2(s,o)*c.rad2deg-120:NaN;return new a(f<0?f+360:f,l,i,e.opacity)}function i(e,t,n,i){return 1===arguments.length?r(e):new a(e,t,n,null==i?1:i)}function a(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.Cubehelix=a;var o=n(67),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=n(66),c=n(126),l=-.14861,f=1.78277,d=-.29227,h=-.90649,p=1.97294,v=p*h,m=p*f,g=f*d-h*l;(0,s.default)(a,i,(0,o.extend)(u.Color,{brighter:function(e){return e=null==e?u.brighter:Math.pow(u.brighter,e),new a(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?u.darker:Math.pow(u.darker,e),new a(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*c.deg2rad,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new u.Rgb(255*(t+n*(l*r+f*i)),255*(t+n*(d*r+h*i)),255*(t+n*(p*r)),this.opacity)}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,r.hue)(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}};var r=n(23)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}},function(e,t,n){"use strict";function r(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function o(e,r,i,o,s,u){if(e!==i||r!==o){var c=s.push("translate(",null,t,null,n);u.push({i:c-4,x:(0,a.default)(e,i)},{i:c-2,x:(0,a.default)(r,o)})}else(i||o)&&s.push("translate("+i+t+o+n)}function s(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:(0,a.default)(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function u(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:(0,a.default)(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function c(e,t,n,r,o,s){if(e!==n||t!==r){var u=o.push(i(o)+"scale(",null,",",null,")");s.push({i:u-4,x:(0,a.default)(e,n)},{i:u-2,x:(0,a.default)(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),o(t.translateX,t.translateY,n.translateX,n.translateY,r,i),s(t.rotate,n.rotate,r,i),u(t.skewX,n.skewX,r,i),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t,n=-1,a=i.length;++n<a;)r[(t=i[n]).i]=t.x(e);return r.join("")}}}Object.defineProperty(t,"__esModule",{value:!0}),t.interpolateTransformSvg=t.interpolateTransformCss=void 0;var i=n(37),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(292);t.interpolateTransformCss=r(o.parseCss,"px, ","px)","deg)"),t.interpolateTransformSvg=r(o.parseSvg,", ",")",")")},function(e,t,n){"use strict";function r(e){return"none"===e?c.identity:(a||(a=document.createElement("DIV"),o=document.documentElement,s=document.defaultView),a.style.transform=e,e=s.getComputedStyle(o.appendChild(a),null).getPropertyValue("transform"),o.removeChild(a),e=e.slice(7,-1).split(","),(0,l.default)(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function i(e){return null==e?c.identity:(u||(u=document.createElementNS("http://www.w3.org/2000/svg","g")),u.setAttribute("transform",e),(e=u.transform.baseVal.consolidate())?(e=e.matrix,(0,l.default)(e.a,e.b,e.c,e.d,e.e,e.f)):c.identity)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseCss=r,t.parseSvg=i;var a,o,s,u,c=n(293),l=function(e){return e&&e.__esModule?e:{default:e}}(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,a,o){var s,u,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,c/=u),e*i<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*r,skewX:Math.atan(c)*r,scaleX:s,scaleY:u}};var r=180/Math.PI;t.identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}},function(e,t,n){"use strict";function r(e){return((e=Math.exp(e))+1/e)/2}function i(e){return((e=Math.exp(e))-1/e)/2}function a(e){return((e=Math.exp(2*e))-1)/(e+1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,l,f=e[0],d=e[1],h=e[2],p=t[0],v=t[1],m=t[2],g=p-f,y=v-d,_=g*g+y*y;if(_<c)l=Math.log(m/h)/o,n=function(e){return[f+e*g,d+e*y,h*Math.exp(o*e*l)]};else{var b=Math.sqrt(_),x=(m*m-h*h+u*_)/(2*h*s*b),M=(m*m-h*h-u*_)/(2*m*s*b),w=Math.log(Math.sqrt(x*x+1)-x),S=Math.log(Math.sqrt(M*M+1)-M);l=(S-w)/o,n=function(e){var t=e*l,n=r(w),u=h/(s*b)*(n*a(o*t+w)-i(w));return[f+u*g,d+u*y,h*n/r(o*t+w)]}}return n.duration=1e3*l,n};var o=Math.SQRT2,s=2,u=4,c=1e-12},function(e,t,n){"use strict";function r(e){return function(t,n){var r=e((t=(0,i.hsl)(t)).h,(n=(0,i.hsl)(n)).h),a=(0,o.default)(t.s,n.s),s=(0,o.default)(t.l,n.l),u=(0,o.default)(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=s(e),t.opacity=u(e),t+""}}}Object.defineProperty(t,"__esModule",{value:!0}),t.hslLong=void 0;var i=n(9),a=n(23),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r(a.hue);t.hslLong=r(o.default)},function(e,t,n){"use strict";function r(e,t){var n=(0,o.default)((e=(0,i.lab)(e)).l,(t=(0,i.lab)(t)).l),r=(0,o.default)(e.a,t.a),a=(0,o.default)(e.b,t.b),s=(0,o.default)(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=s(t),e+""}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(9),a=n(23),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){return function(t,n){var r=e((t=(0,i.hcl)(t)).h,(n=(0,i.hcl)(n)).h),a=(0,o.default)(t.c,n.c),s=(0,o.default)(t.l,n.l),u=(0,o.default)(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=s(e),t.opacity=u(e),t+""}}}Object.defineProperty(t,"__esModule",{value:!0}),t.hclLong=void 0;var i=n(9),a=n(23),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r(a.hue);t.hclLong=r(o.default)},function(e,t,n){"use strict";function r(e){return function t(n){function r(t,r){var a=e((t=(0,i.cubehelix)(t)).h,(r=(0,i.cubehelix)(r)).h),s=(0,o.default)(t.s,r.s),u=(0,o.default)(t.l,r.l),c=(0,o.default)(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=s(e),t.l=u(Math.pow(e,n)),t.opacity=c(e),t+""}}return n=+n,r.gamma=t,r}(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.cubehelixLong=void 0;var i=n(9),a=n(23),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r(a.hue);t.cubehelixLong=r(o.default)},function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}},function(e,t,n){"use strict";function r(e){return function(){this.removeAttribute(e)}}function i(e){return function(){this.removeAttributeNS(e.space,e.local)}}function a(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function o(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function s(e,t,n){var r,i,a;return function(){var o,s,u=n(this);return null==u?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function u(e,t,n){var r,i,a;return function(){var o,s,u=n(this);return null==u?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,l.namespace)(e),d="transform"===n?c.interpolateTransformSvg:h.default;return this.attrTween(e,"function"==typeof t?(n.local?u:s)(n,d,(0,f.tweenValue)(this,"attr."+e,t)):null==t?(n.local?i:r)(n):(n.local?o:a)(n,d,t))};var c=n(11),l=n(4),f=n(38),d=n(134),h=function(e){return e&&e.__esModule?e:{default:e}}(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=new r.Timer;return t=null==t?0:+t,i.restart(function(n){i.stop(),e(n+t)},t,n),i};var r=n(71)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=new r.Timer,a=t;return null==t?(i.restart(e,t,n),i):(t=+t,n=null==n?(0,r.now)():+n,i.restart(function r(o){o+=a,i.restart(r,a+=t,n),e(o)},t,n),i)};var r=n(71)},function(e,t,n){"use strict";function r(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function i(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function a(e,t){function n(){var n=t.apply(this,arguments);return n!==a&&(r=(a=n)&&i(e,n)),r}var r,a;return n._value=t,n}function o(e,t){function n(){var n=t.apply(this,arguments);return n!==a&&(i=(a=n)&&r(e,n)),i}var i,a;return n._value=t,n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=(0,s.namespace)(e);return this.tween(n,(r.local?a:o)(r,t))};var s=n(4)},function(e,t,n){"use strict";function r(e,t){return function(){(0,a.init)(this,e).delay=+t.apply(this,arguments)}}function i(e,t){return t=+t,function(){(0,a.init)(this,e).delay=t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?r:i)(t,e)):(0,a.get)(this.node(),t).delay};var a=n(7)},function(e,t,n){"use strict";function r(e,t){return function(){(0,a.set)(this,e).duration=+t.apply(this,arguments)}}function i(e,t){return t=+t,function(){(0,a.set)(this,e).duration=t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?r:i)(t,e)):(0,a.get)(this.node(),t).duration};var a=n(7)},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof t)throw new Error;return function(){(0,i.set)(this,e).ease=t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this._id;return arguments.length?this.each(r(t,e)):(0,i.get)(this.node(),t).ease};var i=n(7)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"function"!=typeof e&&(e=(0,r.matcher)(e));for(var t=this._groups,n=t.length,a=new Array(n),o=0;o<n;++o)for(var s,u=t[o],c=u.length,l=a[o]=[],f=0;f<c;++f)(s=u[f])&&e.call(s,s.__data__,f,u)&&l.push(s);return new i.Transition(a,this._parents,this._name,this._id)};var r=n(4),i=n(13)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var c,l=t[u],f=n[u],d=l.length,h=s[u]=new Array(d),p=0;p<d;++p)(c=l[p]||f[p])&&(h[p]=c);for(;u<i;++u)s[u]=t[u];return new r.Transition(s,this._parents,this._name,this._id)};var r=n(13)},function(e,t,n){"use strict";function r(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function i(e,t,n){var i,o,s=r(t)?a.init:a.set;return function(){var r=s(this,e),a=r.on;a!==i&&(o=(i=a).copy()).on(t,n),r.on=o}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=this._id;return arguments.length<2?(0,a.get)(this.node(),n).on.on(e):this.each(i(n,e,t))};var a=n(7)},function(e,t,n){"use strict";function r(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return this.on("end.remove",r(this._id))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,r.selector)(e));for(var s=this._groups,u=s.length,c=new Array(u),l=0;l<u;++l)for(var f,d,h=s[l],p=h.length,v=c[l]=new Array(p),m=0;m<p;++m)(f=h[m])&&(d=e.call(f,f.__data__,m,h))&&("__data__"in f&&(d.__data__=f.__data__),v[m]=d,(0,o.default)(v[m],t,n,m,v,(0,a.get)(f,n)));return new i.Transition(c,this._parents,t,n)};var r=n(4),i=n(13),a=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=(0,r.selectorAll)(e));for(var s=this._groups,u=s.length,c=[],l=[],f=0;f<u;++f)for(var d,h=s[f],p=h.length,v=0;v<p;++v)if(d=h[v]){for(var m,g=e.call(d,d.__data__,v,h),y=(0,a.get)(d,n),_=0,b=g.length;_<b;++_)(m=g[_])&&(0,o.default)(m,t,n,_,g,y);c.push(g),l.push(d)}return new i.Transition(c,l,t,n)};var r=n(4),i=n(13),a=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new i(this._groups,this._parents)};var r=n(4),i=r.selection.prototype.constructor},function(e,t,n){"use strict";function r(e,t){var n,r,i;return function(){var a=(0,c.style)(this,e),o=(this.style.removeProperty(e),(0,c.style)(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function i(e){return function(){this.style.removeProperty(e)}}function a(e,t,n){var r,i,a=n+"";return function(){var o=(0,c.style)(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}function o(e,t,n){var r,i,a;return function(){var o=(0,c.style)(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=(0,c.style)(this,e)),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}function s(e,t){var n,r,a,o,s="style."+t,u="end."+s;return function(){var c=(0,l.set)(this,e),f=c.on,d=null==c.value[s]?o||(o=i(t)):void 0;f===n&&a===d||(r=(n=f).copy()).on(u,a=d),c.on=r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var c="transform"==(e+="")?u.interpolateTransformCss:h.default;return null==t?this.styleTween(e,r(e,c)).on("end.style."+e,i(e)):"function"==typeof t?this.styleTween(e,o(e,c,(0,f.tweenValue)(this,"style."+e,t))).each(s(this._id,e)):this.styleTween(e,a(e,c,t),n).on("end.style."+e,null)};var u=n(11),c=n(4),l=n(7),f=n(38),d=n(134),h=function(e){return e&&e.__esModule?e:{default:e}}(d)},function(e,t,n){"use strict";function r(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function i(e,t,n){function i(){var i=t.apply(this,arguments);return i!==o&&(a=(o=i)&&r(e,i,n)),a}var a,o;return i._value=t,i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,i(e,t,null==n?"":n))}},function(e,t,n){"use strict";function r(e){return function(){this.textContent=e}}function i(e){return function(){var t=e(this);this.textContent=null==t?"":t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return this.tween("text","function"==typeof e?i((0,a.tweenValue)(this,"text",e)):r(null==e?"":e+""))};var a=n(38)},function(e,t,n){"use strict";function r(e){return function(t){this.textContent=e.call(this,t)}}function i(e){function t(){var t=e.apply(this,arguments);return t!==i&&(n=(i=t)&&r(t)),n}var n,i;return t._value=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,i(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=this._name,t=this._id,n=(0,r.newId)(),o=this._groups,s=o.length,u=0;u<s;++u)for(var c,l=o[u],f=l.length,d=0;d<f;++d)if(c=l[d]){var h=(0,i.get)(c,t);(0,a.default)(c,e,n,d,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new r.Transition(o,this._parents,e,n)};var r=n(13),i=n(7),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(o,s){var u={value:s},c={value:function(){0==--a&&o()}};n.each(function(){var n=(0,r.set)(this,i),a=n.on;a!==e&&(t=(e=a).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(c)),n.on=t})})};var r=n(7)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,o,s=e.__transition;if(s){t=null==t?null:t+"";for(o in s)if((n=s[o]).state>i.SCHEDULED&&n.name===t)return new r.Transition([[e]],a,t,+o)}return null};var r=n(13),i=n(7),a=[null]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(4),a=n(323),o=r(a),s=n(324),u=r(s);i.selection.prototype.interrupt=o.default,i.selection.prototype.transition=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return this.each(function(){(0,i.default)(this,e)})};var r=n(135),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return c.time=(0,u.now)(),c;return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n;e instanceof i.Transition?(t=e._id,e=e._name):(t=(0,i.newId)(),(n=c).time=(0,u.now)(),e=null==e?null:e+"");for(var a=this._groups,s=a.length,l=0;l<s;++l)for(var f,d=a[l],h=d.length,p=0;p<h;++p)(f=d[p])&&(0,o.default)(f,e,t,p,d,n||r(f,t));return new i.Transition(a,this._parents,e,t)};var i=n(13),a=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(136),u=n(39),c={time:null,delay:0,duration:250,ease:s.easeCubicInOut}},function(e,t,n){"use strict";function r(e){return+e}Object.defineProperty(t,"__esModule",{value:!0}),t.linear=r},function(e,t,n){"use strict";function r(e){return e*e}function i(e){return e*(2-e)}function a(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}Object.defineProperty(t,"__esModule",{value:!0}),t.quadIn=r,t.quadOut=i,t.quadInOut=a},function(e,t,n){"use strict";function r(e){return e*e*e}function i(e){return--e*e*e+1}function a(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Object.defineProperty(t,"__esModule",{value:!0}),t.cubicIn=r,t.cubicOut=i,t.cubicInOut=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.polyIn=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),t.polyOut=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),t.polyInOut=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3)},function(e,t,n){"use strict";function r(e){return 1==+e?1:1-Math.cos(e*s)}function i(e){return Math.sin(e*s)}function a(e){return(1-Math.cos(o*e))/2}Object.defineProperty(t,"__esModule",{value:!0}),t.sinIn=r,t.sinOut=i,t.sinInOut=a;var o=Math.PI,s=o/2},function(e,t,n){"use strict";function r(e){return(0,o.tpmt)(1-+e)}function i(e){return 1-(0,o.tpmt)(e)}function a(e){return((e*=2)<=1?(0,o.tpmt)(1-e):2-(0,o.tpmt)(e-1))/2}Object.defineProperty(t,"__esModule",{value:!0}),t.expIn=r,t.expOut=i,t.expInOut=a;var o=n(137)},function(e,t,n){"use strict";function r(e){return 1-Math.sqrt(1-e*e)}function i(e){return Math.sqrt(1- --e*e)}function a(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}Object.defineProperty(t,"__esModule",{value:!0}),t.circleIn=r,t.circleOut=i,t.circleInOut=a},function(e,t,n){"use strict";function r(e){return 1-i(1-e)}function i(e){return(e=+e)<o?v*e*e:e<u?v*(e-=s)*e+c:e<f?v*(e-=l)*e+d:v*(e-=h)*e+p}function a(e){return((e*=2)<=1?1-i(1-e):i(e-1)+1)/2}Object.defineProperty(t,"__esModule",{value:!0}),t.bounceIn=r,t.bounceOut=i,t.bounceInOut=a;var o=4/11,s=6/11,u=8/11,c=.75,l=9/11,f=10/11,d=.9375,h=21/22,p=63/64,v=1/o/o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.backIn=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),t.backOut=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),t.backInOut=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elasticInOut=t.elasticOut=t.elasticIn=void 0;var r=n(137),i=2*Math.PI;t.elasticIn=function e(t,n){function a(e){return t*(0,r.tpmt)(- --e)*Math.sin((o-e)/n)}var o=Math.asin(1/(t=Math.max(1,t)))*(n/=i);return a.amplitude=function(t){return e(t,n*i)},a.period=function(n){return e(t,n)},a}(1,.3),t.elasticOut=function e(t,n){function a(e){return 1-t*(0,r.tpmt)(e=+e)*Math.sin((e+o)/n)}var o=Math.asin(1/(t=Math.max(1,t)))*(n/=i);return a.amplitude=function(t){return e(t,n*i)},a.period=function(n){return e(t,n)},a}(1,.3),t.elasticInOut=function e(t,n){function a(e){return((e=2*e-1)<0?t*(0,r.tpmt)(-e)*Math.sin((o-e)/n):2-t*(0,r.tpmt)(e)*Math.sin((o+e)/n))/2}var o=Math.asin(1/(t=Math.max(1,t)))*(n/=i);return a.amplitude=function(t){return e(t,n*i)},a.period=function(n){return e(t,n)},a}(1,.3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){this.target=e,this.type=t,this.selection=n}},function(e,t,n){"use strict";function r(){i.event.stopImmediatePropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.nopropagation=r,t.default=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()};var i=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(339);Object.defineProperty(t,"chord",{enumerable:!0,get:function(){return r(i).default}});var a=n(340);Object.defineProperty(t,"ribbon",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){return function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var r,u,c,l,f,d,h=e.length,p=[],v=(0,i.range)(h),m=[],g=[],y=g.groups=new Array(h),_=new Array(h*h);for(r=0,f=-1;++f<h;){for(u=0,d=-1;++d<h;)u+=e[f][d];p.push(u),m.push((0,i.range)(h)),r+=u}for(n&&v.sort(function(e,t){return n(p[e],p[t])}),o&&m.forEach(function(t,n){t.sort(function(t,r){return o(e[n][t],e[n][r])})}),r=(0,a.max)(0,a.tau-t*h)/r,l=r?t:a.tau/h,u=0,f=-1;++f<h;){for(c=u,d=-1;++d<h;){var b=v[f],x=m[b][d],M=e[b][x],w=u,S=u+=M*r;_[x*h+b]={index:b,subindex:x,startAngle:w,endAngle:S,value:M}}y[b]={index:b,startAngle:c,endAngle:u,value:p[b]},u+=l}for(f=-1;++f<h;)for(d=f-1;++d<h;){var P=_[d*h+f],T=_[f*h+d];(P.value||T.value)&&g.push(P.value<T.value?{source:T,target:P}:{source:P,target:T})}return s?g.sort(s):g}var t=0,n=null,o=null,s=null;return e.padAngle=function(n){return arguments.length?(t=(0,a.max)(0,n),e):t},e.sortGroups=function(t){return arguments.length?(n=t,e):n},e.sortSubgroups=function(t){return arguments.length?(o=t,e):o},e.sortChords=function(t){return arguments.length?(null==t?s=null:(s=r(t))._=t,e):s&&s._},e};var i=n(3),a=n(138)},function(e,t,n){"use strict";function r(e){return e.source}function i(e){return e.target}function a(e){return e.radius}function o(e){return e.startAngle}function s(e){return e.endAngle}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){var e,r=u.slice.call(arguments),i=t.apply(this,r),a=n.apply(this,r),o=+c.apply(this,(r[0]=i,r)),s=h.apply(this,r)-f.halfPi,l=p.apply(this,r)-f.halfPi,m=o*(0,f.cos)(s),g=o*(0,f.sin)(s),y=+c.apply(this,(r[0]=a,r)),_=h.apply(this,r)-f.halfPi,b=p.apply(this,r)-f.halfPi;if(v||(v=e=(0,d.path)()),v.moveTo(m,g),v.arc(0,0,o,s,l),s===_&&l===b||(v.quadraticCurveTo(0,0,y*(0,f.cos)(_),y*(0,f.sin)(_)),v.arc(0,0,y,_,b)),v.quadraticCurveTo(0,0,m,g),v.closePath(),e)return v=null,e+""||null}var t=r,n=i,c=a,h=o,p=s,v=null;return e.radius=function(t){return arguments.length?(c="function"==typeof t?t:(0,l.default)(+t),e):c},e.startAngle=function(t){return arguments.length?(h="function"==typeof t?t:(0,l.default)(+t),e):h},e.endAngle=function(t){return arguments.length?(p="function"==typeof t?t:(0,l.default)(+t),e):p},e.source=function(n){return arguments.length?(t=n,e):t},e.target=function(t){return arguments.length?(n=t,e):n},e.context=function(t){return arguments.length?(v=null==t?null:t,e):v},e};var u=n(341),c=n(342),l=function(e){return e&&e.__esModule?e:{default:e}}(c),f=n(138),d=n(16)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.slice=Array.prototype.slice},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";function r(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new r}Object.defineProperty(t,"__esModule",{value:!0});var a=Math.PI,o=2*a,s=o-1e-6;r.prototype=i.prototype={constructor:r,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,u=n-e,c=r-t,l=o-e,f=s-t,d=l*l+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>1e-6)if(Math.abs(f*u-c*l)>1e-6&&i){var h=n-o,p=r-s,v=u*u+c*c,m=h*h+p*p,g=Math.sqrt(v),y=Math.sqrt(d),_=i*Math.tan((a-Math.acos((v+d-m)/(2*g*y)))/2),b=_/y,x=_/g;Math.abs(b-1)>1e-6&&(this._+="L"+(e+b*l)+","+(t+b*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>l*p)+","+(this._x1=e+x*u)+","+(this._y1=t+x*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,u){e=+e,t=+t,n=+n,u=!!u;var c=n*Math.cos(r),l=n*Math.sin(r),f=e+c,d=t+l,h=1^u,p=u?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+f+","+d:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-d)>1e-6)&&(this._+="L"+f+","+d),n&&(p<0&&(p=p%o+o),p>s?this._+="A"+n+","+n+",0,1,"+h+","+(e-c)+","+(t-l)+"A"+n+","+n+",0,1,"+h+","+(this._x1=f)+","+(this._y1=d):p>1e-6&&(this._+="A"+n+","+n+",0,"+ +(p>=a)+","+h+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.default=i},function(e,t,n){"use strict";function r(){return{}}function i(e,t,n){e[t]=n}function a(){return(0,u.default)()}function o(e,t,n){e.set(t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(t,r,i,a){if(r>=l.length)return null!=n&&t.sort(n),null!=s?s(t):t;for(var o,c,f,d=-1,h=t.length,p=l[r++],v=(0,u.default)(),m=i();++d<h;)(f=v.get(o=p(c=t[d])+""))?f.push(c):v.set(o,[c]);return v.each(function(t,n){a(m,n,e(t,r,i,a))}),m}function t(e,n){if(++n>l.length)return e;var r,i=f[n-1];return null!=s&&n>=l.length?r=e.entries():(r=[],e.each(function(e,i){r.push({key:i,values:t(e,n)})})),null!=i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,s,c,l=[],f=[];return c={object:function(t){return e(t,0,r,i)},map:function(t){return e(t,0,a,o)},entries:function(n){return t(e(n,0,a,o),0)},key:function(e){return l.push(e),c},sortKeys:function(e){return f[l.length-1]=e,c},sortValues:function(e){return n=e,c},rollup:function(e){return s=e,c}}};var s=n(72),u=function(e){return e&&e.__esModule?e:{default:e}}(s)},function(e,t,n){"use strict";function r(){}function i(e,t){var n=new r;if(e instanceof r)e.each(function(e){n.add(e)});else if(e){var i=-1,a=e.length;if(null==t)for(;++i<a;)n.add(e[i]);else for(;++i<a;)n.add(t(e[i],i,e))}return n}Object.defineProperty(t,"__esModule",{value:!0});var a=n(72),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=o.default.prototype;r.prototype=i.prototype={constructor:r,has:s.has,add:function(e){return e+="",this[a.prefix+e]=e,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];for(var n in e)t.push(e[n]);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(139);Object.defineProperty(t,"contours",{enumerable:!0,get:function(){return r(i).default}});var a=n(354);Object.defineProperty(t,"contourDensity",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e-t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}},function(e,t,n){"use strict";function r(e,t){for(var n=t[0],r=t[1],a=-1,o=0,s=e.length,u=s-1;o<s;u=o++){var c=e[o],l=c[0],f=c[1],d=e[u],h=d[0],p=d[1];if(i(c,d,t))return 0;f>r!=p>r&&n<(h-l)*(r-f)/(p-f)+l&&(a=-a)}return a}function i(e,t,n){var r;return a(e,t,n)&&o(e[r=+(e[0]===t[0])],n[r],t[r])}function a(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}function o(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n,i=-1,a=t.length;++i<a;)if(n=r(e,t[i]))return n;return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e[0]}function a(e){return e[1]}function o(){return 1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var n=new Float32Array(M*w),r=new Float32Array(M*w);e.forEach(function(e,t,r){var i=+p(e,t,r)+x>>b,a=+v(e,t,r)+x>>b,o=+m(e,t,r);i>=0&&i<M&&a>=0&&a<w&&(n[i+a*M]+=o)}),(0,c.blurX)({width:M,height:w,data:n},{width:M,height:w,data:r},_>>b),(0,c.blurY)({width:M,height:w,data:r},{width:M,height:w,data:n},_>>b),(0,c.blurX)({width:M,height:w,data:n},{width:M,height:w,data:r},_>>b),(0,c.blurY)({width:M,height:w,data:r},{width:M,height:w,data:n},_>>b),(0,c.blurX)({width:M,height:w,data:n},{width:M,height:w,data:r},_>>b),(0,c.blurY)({width:M,height:w,data:r},{width:M,height:w,data:n},_>>b);var i=S(n);if(!Array.isArray(i)){var a=(0,s.max)(n);i=(0,s.tickStep)(0,a,i),i=(0,s.range)(0,Math.floor(a/i)*i,i),i.shift()}return(0,h.default)().thresholds(i).size([M,w])(n).map(t)}function t(e){return e.value*=Math.pow(2,-2*b),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(l)}function l(e){e[0]=e[0]*Math.pow(2,b)-x,e[1]=e[1]*Math.pow(2,b)-x}function d(){return x=3*_,M=g+2*x>>b,w=y+2*x>>b,e}var p=i,v=a,m=o,g=960,y=500,_=20,b=2,x=3*_,M=g+2*x>>b,w=y+2*x>>b,S=(0,f.default)(20);return e.x=function(t){return arguments.length?(p="function"==typeof t?t:(0,f.default)(+t),e):p},e.y=function(t){return arguments.length?(v="function"==typeof t?t:(0,f.default)(+t),e):v},e.weight=function(t){return arguments.length?(m="function"==typeof t?t:(0,f.default)(+t),e):m},e.size=function(e){if(!arguments.length)return[g,y];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return g=t,y=n,d()},e.cellSize=function(e){if(!arguments.length)return 1<<b;if(!((e=+e)>=1))throw new Error("invalid cell size");return b=Math.floor(Math.log(e)/Math.LN2),d()},e.thresholds=function(t){return arguments.length?(S="function"==typeof t?t:Array.isArray(t)?(0,f.default)(u.slice.call(t)):(0,f.default)(t),e):S},e.bandwidth=function(e){if(!arguments.length)return Math.sqrt(_*(_+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return _=Math.round((Math.sqrt(4*e*e+1)-1)/2),d()},e};var s=n(3),u=n(140),c=n(355),l=n(141),f=r(l),d=n(139),h=r(d)},function(e,t,n){"use strict";function r(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=e.data[s+o*r]),s>=n&&(s>=a&&(u-=e.data[s-a+o*r]),t.data[s-n+o*r]=u/Math.min(s+1,r-1+a-s,a))}function i(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=e.data[o+s*r]),s>=n&&(s>=a&&(u-=e.data[o+(s-a)*r]),t.data[o+(s-n)*r]=u/Math.min(s+1,i-1+a-s,a))}Object.defineProperty(t,"__esModule",{value:!0}),t.blurX=r,t.blurY=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.csvFormatValue=t.csvFormatRow=t.csvFormatRows=t.csvFormatBody=t.csvFormat=t.csvParseRows=t.csvParse=void 0;var r=n(73),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=(0,i.default)(",");t.csvParse=a.parse,t.csvParseRows=a.parseRows,t.csvFormat=a.format,t.csvFormatBody=a.formatBody,t.csvFormatRows=a.formatRows,t.csvFormatRow=a.formatRow,t.csvFormatValue=a.formatValue},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tsvFormatValue=t.tsvFormatRow=t.tsvFormatRows=t.tsvFormatBody=t.tsvFormat=t.tsvParseRows=t.tsvParse=void 0;var r=n(73),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=(0,i.default)("\t");t.tsvParse=a.parse,t.tsvParseRows=a.parseRows,t.tsvFormat=a.format,t.tsvFormatBody=a.formatBody,t.tsvFormatRows=a.formatRows,t.tsvFormatRow=a.formatRow,t.tsvFormatValue=a.formatValue},function(e,t,n){"use strict";function r(e){for(var t in e){var n,r,a=e[t].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(n=+a)){if(!(r=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;i&&r[4]&&!r[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=n;else a=null;e[t]=a}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(360);Object.defineProperty(t,"blob",{enumerable:!0,get:function(){return r(i).default}});var a=n(361);Object.defineProperty(t,"buffer",{enumerable:!0,get:function(){return r(a).default}});var o=n(362);Object.defineProperty(t,"dsv",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(t,"csv",{enumerable:!0,get:function(){return o.csv}}),Object.defineProperty(t,"tsv",{enumerable:!0,get:function(){return o.tsv}});var s=n(363);Object.defineProperty(t,"image",{enumerable:!0,get:function(){return r(s).default}});var u=n(364);Object.defineProperty(t,"json",{enumerable:!0,get:function(){return r(u).default}});var c=n(74);Object.defineProperty(t,"text",{enumerable:!0,get:function(){return r(c).default}});var l=n(365);Object.defineProperty(t,"xml",{enumerable:!0,get:function(){return r(l).default}}),Object.defineProperty(t,"html",{enumerable:!0,get:function(){return l.html}}),Object.defineProperty(t,"svg",{enumerable:!0,get:function(){return l.svg}})},function(e,t,n){"use strict";function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return fetch(e,t).then(r)}},function(e,t,n){"use strict";function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return fetch(e,t).then(r)}},function(e,t,n){"use strict";function r(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),(0,s.default)(t,n).then(function(t){return e(t,r)})}}function i(e,t,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=(0,a.dsvFormat)(e);return(0,s.default)(t,n).then(function(e){return i.parse(e,r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.tsv=t.csv=void 0,t.default=i;var a=n(142),o=n(74),s=function(e){return e&&e.__esModule?e:{default:e}}(o);t.csv=r(a.csvParse),t.tsv=r(a.tsvParse)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise(function(n,r){var i=new Image;for(var a in t)i[a]=t[a];i.onerror=r,i.onload=function(){n(i)},i.src=e})}},function(e,t,n){"use strict";function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return fetch(e,t).then(r)}},function(e,t,n){"use strict";function r(e){return function(t,n){return(0,a.default)(t,n).then(function(t){return(new DOMParser).parseFromString(t,e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.svg=t.html=void 0;var i=n(74),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r("application/xml");t.html=r("text/html"),t.svg=r("image/svg+xml")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(367);Object.defineProperty(t,"forceCenter",{enumerable:!0,get:function(){return r(i).default}});var a=n(368);Object.defineProperty(t,"forceCollide",{enumerable:!0,get:function(){return r(a).default}});var o=n(382);Object.defineProperty(t,"forceLink",{enumerable:!0,get:function(){return r(o).default}});var s=n(383);Object.defineProperty(t,"forceManyBody",{enumerable:!0,get:function(){return r(s).default}});var u=n(384);Object.defineProperty(t,"forceRadial",{enumerable:!0,get:function(){return r(u).default}});var c=n(143);Object.defineProperty(t,"forceSimulation",{enumerable:!0,get:function(){return r(c).default}});var l=n(385);Object.defineProperty(t,"forceX",{enumerable:!0,get:function(){return r(l).default}});var f=n(386);Object.defineProperty(t,"forceY",{enumerable:!0,get:function(){return r(f).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(){var n,i,a=r.length,o=0,s=0;for(n=0;n<a;++n)i=r[n],o+=i.x,s+=i.y;for(o=o/a-e,s=s/a-t,n=0;n<a;++n)i=r[n],i.x-=o,i.y-=s}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.x+e.vx}function a(e){return e.y+e.vy}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(){function e(e,t,n,r,i){var a=e.data,o=e.r,u=v+o;{if(!a)return t>h+u||r<h-u||n>p+u||i<p-u;if(a.index>s.index){var l=h-a.x-a.vx,d=p-a.y-a.vy,g=l*l+d*d;g<u*u&&(0===l&&(l=(0,c.default)(),g+=l*l),0===d&&(d=(0,c.default)(),g+=d*d),g=(u-(g=Math.sqrt(g)))/g*f,s.vx+=(l*=g)*(u=(o*=o)/(m+o)),s.vy+=(d*=g)*u,a.vx-=l*(u=1-u),a.vy-=d*u)}}}for(var t,r,s,h,p,v,m,g=o.length,y=0;y<d;++y)for(r=(0,l.quadtree)(o,i,a).visitAfter(n),t=0;t<g;++t)s=o[t],v=u[s.index],m=v*v,h=s.x+s.vx,p=s.y+s.vy,r.visit(e)}function n(e){if(e.data)return e.r=u[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function r(){if(o){var t,n,r=o.length;for(u=new Array(r),t=0;t<r;++t)n=o[t],u[n.index]=+e(n,t,o)}}var o,u,f=1,d=1;return"function"!=typeof e&&(e=(0,s.default)(null==e?1:+e)),t.initialize=function(e){o=e,r()},t.iterations=function(e){return arguments.length?(d=+e,t):d},t.strength=function(e){return arguments.length?(f=+e,t):f},t.radius=function(n){return arguments.length?(e="function"==typeof n?n:(0,s.default)(+n),r(),t):e},t};var o=n(24),s=r(o),u=n(75),c=r(u),l=n(76)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r=new a(null==t?E.defaultX:t,null==n?A.defaultY:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function a(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function o(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var s=n(370),u=r(s),c=n(371),l=r(c),f=n(372),d=r(f),h=n(373),p=r(h),v=n(374),m=r(v),g=n(375),y=r(g),_=n(376),b=r(_),x=n(377),M=r(x),w=n(378),S=r(w),P=n(379),T=r(P),E=n(380),O=r(E),A=n(381),L=r(A),R=i.prototype=a.prototype;R.copy=function(){var e,t,n=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=o(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=o(t));return n},R.add=u.default,R.addAll=s.addAll,R.cover=l.default,R.data=d.default,R.extent=p.default,R.find=m.default,R.remove=y.default,R.removeAll=g.removeAll,R.root=b.default,R.size=M.default,R.visit=S.default,R.visitAfter=T.default,R.x=O.default,R.y=L.default},function(e,t,n){"use strict";function r(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,s,u,c,l,f,d,h=e._root,p={data:r},v=e._x0,m=e._y0,g=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((c=t>=(a=(v+g)/2))?v=a:g=a,(l=n>=(o=(m+y)/2))?m=o:y=o,i=h,!(h=h[f=l<<1|c]))return i[f]=p,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(c=t>=(a=(v+g)/2))?v=a:g=a,(l=n>=(o=(m+y)/2))?m=o:y=o}while((f=l<<1|c)==(d=(u>=o)<<1|s>=a));return i[d]=h,i[f]=p,e}function i(e){var t,n,i,a,o=e.length,s=new Array(o),u=new Array(o),c=1/0,l=1/0,f=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=i,u[n]=a,i<c&&(c=i),i>f&&(f=i),a<l&&(l=a),a>d&&(d=a));if(c>f||l>d)return this;for(this.cover(c,l).cover(f,d),n=0;n<o;++n)r(this,s[n],u[n],e[n]);return this}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return r(this.cover(t,n),t,n,e)},t.addAll=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o,s,u=i-n,c=this._root;n>e||e>=i||r>t||t>=a;)switch(s=(t<r)<<1|e<n,o=new Array(4),o[s]=c,c=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,a,o,s,u,c,l,f=this._x0,d=this._y0,h=this._x1,p=this._y1,v=[],m=this._root;for(m&&v.push(new i.default(m,f,d,h,p)),null==n?n=1/0:(f=e-n,d=t-n,h=e+n,p=t+n,n*=n);c=v.pop();)if(!(!(m=c.node)||(a=c.x0)>h||(o=c.y0)>p||(s=c.x1)<f||(u=c.y1)<d))if(m.length){var g=(a+s)/2,y=(o+u)/2;v.push(new i.default(m[3],g,y,s,u),new i.default(m[2],a,y,g,u),new i.default(m[1],g,o,s,y),new i.default(m[0],a,o,g,y)),(l=(t>=y)<<1|e>=g)&&(c=v[v.length-1],v[v.length-1]=v[v.length-1-l],v[v.length-1-l]=c)}else{var _=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=_*_+b*b;if(x<n){var M=Math.sqrt(n=x);f=e-M,d=t-M,h=e+M,p=t+M,r=m.data}}return r};var r=n(77),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,s,u,c,l,f,d,h=this._root,p=this._x0,v=this._y0,m=this._x1,g=this._y1;if(!h)return this;if(h.length)for(;;){if((c=a>=(s=(p+m)/2))?p=s:m=s,(l=o>=(u=(v+g)/2))?v=u:g=u,t=h,!(h=h[f=l<<1|c]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},t.removeAll=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return this._root}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r,a,o,s,u=[],c=this._root;for(c&&u.push(new i.default(c,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(c=t.node,r=t.x0,a=t.y0,o=t.x1,s=t.y1)&&c.length){var l=(r+o)/2,f=(a+s)/2;(n=c[3])&&u.push(new i.default(n,l,f,o,s)),(n=c[2])&&u.push(new i.default(n,r,f,l,s)),(n=c[1])&&u.push(new i.default(n,l,a,o,f)),(n=c[0])&&u.push(new i.default(n,r,a,l,f))}return this};var r=n(77),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=[],r=[];for(this._root&&n.push(new i.default(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var o,s=t.x0,u=t.y0,c=t.x1,l=t.y1,f=(s+c)/2,d=(u+l)/2;(o=a[0])&&n.push(new i.default(o,s,u,f,d)),(o=a[1])&&n.push(new i.default(o,f,u,c,d)),(o=a[2])&&n.push(new i.default(o,s,d,f,l)),(o=a[3])&&n.push(new i.default(o,f,d,c,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this};var r=n(77),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultX=r,t.default=function(e){return arguments.length?(this._x=e,this):this._x}},function(e,t,n){"use strict";function r(e){return e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultY=r,t.default=function(e){return arguments.length?(this._y=e,this):this._y}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.index}function a(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){function t(e){return 1/Math.min(v[e.source.index],v[e.target.index])}function n(t){for(var n=0,r=e.length;n<b;++n)for(var i,a,o,s,u,c,f,p=0;p<r;++p)i=e[p],a=i.source,o=i.target,s=o.x+o.vx-a.x-a.vx||(0,l.default)(),u=o.y+o.vy-a.y-a.vy||(0,l.default)(),c=Math.sqrt(s*s+u*u),c=(c-h[p])/c*t*d[p],s*=c,u*=c,o.vx-=s*(f=m[p]),o.vy-=u*f,a.vx+=s*(f=1-f),a.vy+=u*f}function r(){if(p){var t,n,r=p.length,i=e.length,u=(0,f.map)(p,g);for(t=0,v=new Array(r);t<i;++t)n=e[t],n.index=t,"object"!==o(n.source)&&(n.source=a(u,n.source)),"object"!==o(n.target)&&(n.target=a(u,n.target)),v[n.source.index]=(v[n.source.index]||0)+1,v[n.target.index]=(v[n.target.index]||0)+1;for(t=0,m=new Array(i);t<i;++t)n=e[t],m[t]=v[n.source.index]/(v[n.source.index]+v[n.target.index]);d=new Array(i),s(),h=new Array(i),c()}}function s(){if(p)for(var t=0,n=e.length;t<n;++t)d[t]=+y(e[t],t,e)}function c(){if(p)for(var t=0,n=e.length;t<n;++t)h[t]=+_(e[t],t,e)}var d,h,p,v,m,g=i,y=t,_=(0,u.default)(30),b=1;return null==e&&(e=[]),n.initialize=function(e){p=e,r()},n.links=function(t){return arguments.length?(e=t,r(),n):e},n.id=function(e){return arguments.length?(g=e,n):g},n.iterations=function(e){return arguments.length?(b=+e,n):b},n.strength=function(e){return arguments.length?(y="function"==typeof e?e:(0,u.default)(+e),s(),n):y},n.distance=function(e){return arguments.length?(_="function"==typeof e?e:(0,u.default)(+e),c(),n):_},n};var s=n(24),u=r(s),c=n(75),l=r(c),f=n(40)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var t,a=i.length,s=(0,u.quadtree)(i,c.x,c.y).visitAfter(n);for(l=e,t=0;t<a;++t)o=i[t],s.visit(r)}function t(){if(i){var e,t,n=i.length;for(f=new Array(n),e=0;e<n;++e)t=i[e],f[t.index]=+d(t,e,i)}}function n(e){var t,n,r,i,a,o=0,s=0;if(e.length){for(r=i=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else{t=e,t.x=t.data.x,t.y=t.data.y;do{o+=f[t.data.index]}while(t=t.next)}e.value=o}function r(e,t,n,r){if(!e.value)return!0;var i=e.x-o.x,a=e.y-o.y,u=r-t,c=i*i+a*a;if(u*u/v<c)return c<p&&(0===i&&(i=(0,s.default)(),c+=i*i),0===a&&(a=(0,s.default)(),c+=a*a),c<h&&(c=Math.sqrt(h*c)),o.vx+=i*e.value*l/c,o.vy+=a*e.value*l/c),!0;if(!(e.length||c>=p)){(e.data!==o||e.next)&&(0===i&&(i=(0,s.default)(),c+=i*i),0===a&&(a=(0,s.default)(),c+=a*a),c<h&&(c=Math.sqrt(h*c)));do{e.data!==o&&(u=f[e.data.index]*l/c,o.vx+=i*u,o.vy+=a*u)}while(e=e.next)}}var i,o,l,f,d=(0,a.default)(-30),h=1,p=1/0,v=.81;return e.initialize=function(e){i=e,t()},e.strength=function(n){return arguments.length?(d="function"==typeof n?n:(0,a.default)(+n),t(),e):d},e.distanceMin=function(t){return arguments.length?(h=t*t,e):Math.sqrt(h)},e.distanceMax=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e.theta=function(t){return arguments.length?(v=t*t,e):Math.sqrt(v)},e};var i=n(24),a=r(i),o=n(75),s=r(o),u=n(76),c=n(143)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){function r(e){for(var r=0,i=o.length;r<i;++r){var a=o[r],c=a.x-t||1e-6,l=a.y-n||1e-6,f=Math.sqrt(c*c+l*l),d=(u[r]-f)*s[r]*e/f;a.vx+=c*d,a.vy+=l*d}}function a(){if(o){var t,n=o.length;for(s=new Array(n),u=new Array(n),t=0;t<n;++t)u[t]=+e(o[t],t,o),s[t]=isNaN(u[t])?0:+c(o[t],t,o)}}var o,s,u,c=(0,i.default)(.1);return"function"!=typeof e&&(e=(0,i.default)(+e)),null==t&&(t=0),null==n&&(n=0),r.initialize=function(e){o=e,a()},r.strength=function(e){return arguments.length?(c="function"==typeof e?e:(0,i.default)(+e),a(),r):c},r.radius=function(t){return arguments.length?(e="function"==typeof t?t:(0,i.default)(+t),a(),r):e},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(e){return arguments.length?(n=+e,r):n},r};var r=n(24),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){for(var t,n=0,i=r.length;n<i;++n)t=r[n],t.vx+=(o[n]-t.x)*a[n]*e}function n(){if(r){var t,n=r.length;for(a=new Array(n),o=new Array(n),t=0;t<n;++t)a[t]=isNaN(o[t]=+e(r[t],t,r))?0:+s(r[t],t,r)}}var r,a,o,s=(0,i.default)(.1);return"function"!=typeof e&&(e=(0,i.default)(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(s="function"==typeof e?e:(0,i.default)(+e),n(),t):s},t.x=function(r){return arguments.length?(e="function"==typeof r?r:(0,i.default)(+r),n(),t):e},t};var r=n(24),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){for(var t,n=0,i=r.length;n<i;++n)t=r[n],t.vy+=(o[n]-t.y)*a[n]*e}function n(){if(r){var t,n=r.length;for(a=new Array(n),o=new Array(n),t=0;t<n;++t)a[t]=isNaN(o[t]=+e(r[t],t,r))?0:+s(r[t],t,r)}}var r,a,o,s=(0,i.default)(.1);return"function"!=typeof e&&(e=(0,i.default)(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(s="function"==typeof e?e:(0,i.default)(+e),n(),t):s},t.y=function(r){return arguments.length?(e="function"==typeof r?r:(0,i.default)(+r),n(),t):e},t};var r=n(24),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return i=(0,o.default)(e),t.format=s=i.format,t.formatPrefix=u=i.formatPrefix,i}Object.defineProperty(t,"__esModule",{value:!0}),t.formatPrefix=t.format=void 0,t.default=r;var i,a=n(144),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=t.format=void 0,u=t.formatPrefix=void 0;r({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(42),a=r(i),o=n(146),s=r(o),u=n(392),c=r(u);t.default={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:a.default,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return(0,c.default)(100*e,t)},r:c.default,s:s.default,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,r.formatDecimalParts)(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")};var r=n(42)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.max(0,-(0,i.default)(Math.abs(e)))};var r=n(41),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,i.default)(t)/3)))-(0,i.default)(Math.abs(e)))};var r=n(41),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,i.default)(t)-(0,i.default)(e))+1};var r=n(41),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(147);Object.defineProperty(t,"geoArea",{enumerable:!0,get:function(){return r(i).default}});var a=n(398);Object.defineProperty(t,"geoBounds",{enumerable:!0,get:function(){return r(a).default}});var o=n(399);Object.defineProperty(t,"geoCentroid",{enumerable:!0,get:function(){return r(o).default}});var s=n(148);Object.defineProperty(t,"geoCircle",{enumerable:!0,get:function(){return r(s).default}});var u=n(150);Object.defineProperty(t,"geoClipAntimeridian",{enumerable:!0,get:function(){return r(u).default}});var c=n(156);Object.defineProperty(t,"geoClipCircle",{enumerable:!0,get:function(){return r(c).default}});var l=n(401);Object.defineProperty(t,"geoClipExtent",{enumerable:!0,get:function(){return r(l).default}});var f=n(44);Object.defineProperty(t,"geoClipRectangle",{enumerable:!0,get:function(){return r(f).default}});var d=n(403);Object.defineProperty(t,"geoContains",{enumerable:!0,get:function(){return r(d).default}});var h=n(157);Object.defineProperty(t,"geoDistance",{enumerable:!0,get:function(){return r(h).default}});var p=n(404);Object.defineProperty(t,"geoGraticule",{enumerable:!0,get:function(){return r(p).default}}),Object.defineProperty(t,"geoGraticule10",{enumerable:!0,get:function(){return p.graticule10}});var v=n(405);Object.defineProperty(t,"geoInterpolate",{enumerable:!0,get:function(){return r(v).default}});var m=n(158);Object.defineProperty(t,"geoLength",{enumerable:!0,get:function(){return r(m).default}});var g=n(406);Object.defineProperty(t,"geoPath",{enumerable:!0,get:function(){return r(g).default}});var y=n(160);Object.defineProperty(t,"geoAlbers",{enumerable:!0,get:function(){return r(y).default}});var _=n(414);Object.defineProperty(t,"geoAlbersUsa",{enumerable:!0,get:function(){return r(_).default}});var b=n(415);Object.defineProperty(t,"geoAzimuthalEqualArea",{enumerable:!0,get:function(){return r(b).default}}),Object.defineProperty(t,"geoAzimuthalEqualAreaRaw",{enumerable:!0,get:function(){return b.azimuthalEqualAreaRaw}});var x=n(416);Object.defineProperty(t,"geoAzimuthalEquidistant",{enumerable:!0,get:function(){return r(x).default}}),Object.defineProperty(t,"geoAzimuthalEquidistantRaw",{enumerable:!0,get:function(){return x.azimuthalEquidistantRaw}});var M=n(417);Object.defineProperty(t,"geoConicConformal",{enumerable:!0,get:function(){return r(M).default}}),Object.defineProperty(t,"geoConicConformalRaw",{enumerable:!0,get:function(){return M.conicConformalRaw}});var w=n(80);Object.defineProperty(t,"geoConicEqualArea",{enumerable:!0,get:function(){return r(w).default}}),Object.defineProperty(t,"geoConicEqualAreaRaw",{enumerable:!0,get:function(){return w.conicEqualAreaRaw}});var S=n(418);Object.defineProperty(t,"geoConicEquidistant",{enumerable:!0,get:function(){return r(S).default}}),Object.defineProperty(t,"geoConicEquidistantRaw",{enumerable:!0,get:function(){return S.conicEquidistantRaw}});var P=n(419);Object.defineProperty(t,"geoEqualEarth",{enumerable:!0,get:function(){return r(P).default}}),Object.defineProperty(t,"geoEqualEarthRaw",{enumerable:!0,get:function(){return P.equalEarthRaw}});var T=n(161);Object.defineProperty(t,"geoEquirectangular",{enumerable:!0,get:function(){return r(T).default}}),Object.defineProperty(t,"geoEquirectangularRaw",{enumerable:!0,get:function(){return T.equirectangularRaw}});var E=n(420);Object.defineProperty(t,"geoGnomonic",{enumerable:!0,get:function(){return r(E).default}}),Object.defineProperty(t,"geoGnomonicRaw",{enumerable:!0,get:function(){return E.gnomonicRaw}});var O=n(421);Object.defineProperty(t,"geoIdentity",{enumerable:!0,get:function(){return r(O).default}});var A=n(10);Object.defineProperty(t,"geoProjection",{enumerable:!0,get:function(){return r(A).default}}),Object.defineProperty(t,"geoProjectionMutator",{enumerable:!0,get:function(){return A.projectionMutator}});var L=n(83);Object.defineProperty(t,"geoMercator",{enumerable:!0,get:function(){return r(L).default}}),Object.defineProperty(t,"geoMercatorRaw",{enumerable:!0,get:function(){return L.mercatorRaw}});var R=n(422);Object.defineProperty(t,"geoNaturalEarth1",{enumerable:!0,get:function(){return r(R).default}}),Object.defineProperty(t,"geoNaturalEarth1Raw",{enumerable:!0,get:function(){return R.naturalEarth1Raw}});var C=n(423);Object.defineProperty(t,"geoOrthographic",{enumerable:!0,get:function(){return r(C).default}}),Object.defineProperty(t,"geoOrthographicRaw",{enumerable:!0,get:function(){return C.orthographicRaw}});var j=n(424);Object.defineProperty(t,"geoStereographic",{enumerable:!0,get:function(){return r(j).default}}),Object.defineProperty(t,"geoStereographicRaw",{enumerable:!0,get:function(){return j.stereographicRaw}});var k=n(425);Object.defineProperty(t,"geoTransverseMercator",{enumerable:!0,get:function(){return r(k).default}}),Object.defineProperty(t,"geoTransverseMercatorRaw",{enumerable:!0,get:function(){return k.transverseMercatorRaw}});var N=n(43);Object.defineProperty(t,"geoRotation",{enumerable:!0,get:function(){return r(N).default}});var I=n(17);Object.defineProperty(t,"geoStream",{enumerable:!0,get:function(){return r(I).default}});var D=n(45);Object.defineProperty(t,"geoTransform",{enumerable:!0,get:function(){return r(D).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){M.push(w=[p=e,m=e]),t<v&&(v=t),t>g&&(g=t)}function a(e,t){var n=(0,E.cartesian)([e*O.radians,t*O.radians]);if(x){var r=(0,E.cartesianCross)(x,n),i=[r[1],-r[0],0],a=(0,E.cartesianCross)(i,r);(0,E.cartesianNormalizeInPlace)(a),a=(0,E.spherical)(a);var o,s=e-y,u=s>0?1:-1,c=a[0]*O.degrees*u,l=(0,O.abs)(s)>180;l^(u*y<c&&c<u*e)?(o=a[1]*O.degrees)>g&&(g=o):(c=(c+360)%360-180,l^(u*y<c&&c<u*e)?(o=-a[1]*O.degrees)<v&&(v=o):(t<v&&(v=t),t>g&&(g=t))),l?e<y?f(p,e)>f(p,m)&&(m=e):f(e,m)>f(p,m)&&(p=e):m>=p?(e<p&&(p=e),e>m&&(m=e)):e>y?f(p,e)>f(p,m)&&(m=e):f(e,m)>f(p,m)&&(p=e)}else M.push(w=[p=e,m=e]);t<v&&(v=t),t>g&&(g=t),x=n,y=e}function o(){C.point=a}function s(){w[0]=p,w[1]=m,C.point=i,x=null}function u(e,t){if(x){var n=e-y;R.add((0,O.abs)(n)>180?n+(n>0?360:-360):n)}else _=e,b=t;T.areaStream.point(e,t),a(e,t)}function c(){T.areaStream.lineStart()}function l(){u(_,b),T.areaStream.lineEnd(),(0,O.abs)(R)>O.epsilon&&(p=-(m=180)),w[0]=p,w[1]=m,x=null}function f(e,t){return(t-=e)<0?t+360:t}function d(e,t){return e[0]-t[0]}function h(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r,i,a,o,s;if(g=m=-(p=v=1/0),M=[],(0,L.default)(e,C),n=M.length){for(M.sort(d),t=1,r=M[0],a=[r];t<n;++t)i=M[t],h(r,i[0])||h(r,i[1])?(f(r[0],i[1])>f(r[0],r[1])&&(r[1]=i[1]),f(i[0],r[1])>f(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,n=a.length-1,t=0,r=a[n];t<=n;r=i,++t)i=a[t],(s=f(r[1],i[0]))>o&&(o=s,p=i[0],m=r[1])}return M=w=null,p===1/0||v===1/0?[[NaN,NaN],[NaN,NaN]]:[[p,v],[m,g]]};var p,v,m,g,y,_,b,x,M,w,S=n(25),P=r(S),T=n(147),E=n(28),O=n(0),A=n(17),L=r(A),R=(0,P.default)(),C={point:i,lineStart:o,lineEnd:s,polygonStart:function(){C.point=u,C.lineStart=c,C.lineEnd=l,R.reset(),T.areaStream.polygonStart()},polygonEnd:function(){T.areaStream.polygonEnd(),C.point=i,C.lineStart=o,C.lineEnd=s,T.areaRingSum<0?(p=-(m=180),v=-(g=90)):R>O.epsilon?g=90:R<-O.epsilon&&(v=-90),w[0]=p,w[1]=m},sphere:function(){p=-(m=180),v=-(g=90)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){e*=L.radians,t*=L.radians;var n=(0,L.cos)(t);a(n*(0,L.cos)(e),n*(0,L.sin)(e),(0,L.sin)(t))}function a(e,t,n){++p,m+=(e-m)/p,g+=(t-g)/p,y+=(n-y)/p}function o(){N.point=s}function s(e,t){e*=L.radians,t*=L.radians;var n=(0,L.cos)(t);E=n*(0,L.cos)(e),O=n*(0,L.sin)(e),A=(0,L.sin)(t),N.point=u,a(E,O,A)}function u(e,t){e*=L.radians,t*=L.radians;var n=(0,L.cos)(t),r=n*(0,L.cos)(e),i=n*(0,L.sin)(e),o=(0,L.sin)(t),s=(0,L.atan2)((0,L.sqrt)((s=O*o-A*i)*s+(s=A*r-E*o)*s+(s=E*i-O*r)*s),E*r+O*i+A*o);v+=s,_+=s*(E+(E=r)),b+=s*(O+(O=i)),x+=s*(A+(A=o)),a(E,O,A)}function c(){N.point=i}function l(){N.point=d}function f(){h(P,T),N.point=i}function d(e,t){P=e,T=t,e*=L.radians,t*=L.radians,N.point=h;var n=(0,L.cos)(t);E=n*(0,L.cos)(e),O=n*(0,L.sin)(e),A=(0,L.sin)(t),a(E,O,A)}function h(e,t){e*=L.radians,t*=L.radians;var n=(0,L.cos)(t),r=n*(0,L.cos)(e),i=n*(0,L.sin)(e),o=(0,L.sin)(t),s=O*o-A*i,u=A*r-E*o,c=E*i-O*r,l=(0,L.sqrt)(s*s+u*u+c*c),f=(0,L.asin)(l),d=l&&-f/l;M+=d*s,w+=d*u,S+=d*c,v+=f,_+=f*(E+(E=r)),b+=f*(O+(O=i)),x+=f*(A+(A=o)),a(E,O,A)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){p=v=m=g=y=_=b=x=M=w=S=0,(0,k.default)(e,N);var t=M,n=w,r=S,i=t*t+n*n+r*r;return i<L.epsilon2&&(t=_,n=b,r=x,v<L.epsilon&&(t=m,n=g,r=y),(i=t*t+n*n+r*r)<L.epsilon2)?[NaN,NaN]:[(0,L.atan2)(n,t)*L.degrees,(0,L.asin)(r/(0,L.sqrt)(i))*L.degrees]};var p,v,m,g,y,_,b,x,M,w,S,P,T,E,O,A,L=n(0),R=n(14),C=r(R),j=n(17),k=r(j),N={sphere:C.default,point:i,lineStart:o,lineEnd:c,polygonStart:function(){N.lineStart=l,N.lineEnd=f},polygonEnd:function(){N.lineStart=o,N.lineEnd=c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t,n,r=0,a=0,o=960,s=500;return n={stream:function(n){return e&&t===n?e:e=(0,i.default)(r,a,o,s)(t=n)},extent:function(i){return arguments.length?(r=+i[0][0],a=+i[0][1],o=+i[1][0],s=+i[1][1],e=t=null,n):[[r,a],[o,s]]}}};var r=n(44),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i,a){var o,s=e[0],u=e[1],c=t[0],l=t[1],f=0,d=1,h=c-s,p=l-u;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>f&&(f=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<d&&(d=o)}if(o=r-u,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>f&&(f=o)}if(o=a-u,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<d&&(d=o)}return f>0&&(e[0]=s+f*h,e[1]=u+f*p),d<1&&(t[0]=s+d*h,t[1]=u+d*p),!0}}}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return!(!e||!m.hasOwnProperty(e.type))&&m[e.type](e,t)}function a(e,t){return 0===(0,h.default)(e,t)}function o(e,t){for(var n,r,i,a=0,o=e.length;a<o;a++){if(0===(r=(0,h.default)(e[a],t)))return!0;if(a>0&&(i=(0,h.default)(e[a],e[a-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<p.epsilon2*i)return!0;n=r}return!1}function s(e,t){return!!(0,f.default)(e.map(u),c(t))}function u(e){return e=e.map(c),e.pop(),e}function c(e){return[e[0]*p.radians,e[1]*p.radians]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(e&&v.hasOwnProperty(e.type)?v[e.type]:i)(e,t)};var l=n(155),f=r(l),d=n(157),h=r(d),p=n(0),v={Feature:function(e,t){return i(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)if(i(n[r].geometry,t))return!0;return!1}},m={Sphere:function(){return!0},Point:function(e,t){return a(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(a(n[r],t))return!0;return!1},LineString:function(e,t){return o(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(o(n[r],t))return!0;return!1},Polygon:function(e,t){return s(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(s(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)if(i(n[r],t))return!0;return!1}}},function(e,t,n){"use strict";function r(e,t,n){var r=(0,s.range)(e,t-u.epsilon,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function i(e,t,n){var r=(0,s.range)(e,t-u.epsilon,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function a(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return(0,s.range)((0,u.ceil)(c/b)*b,o,b).map(m).concat((0,s.range)((0,u.ceil)(h/x)*x,d,x).map(g)).concat((0,s.range)((0,u.ceil)(a/y)*y,n,y).filter(function(e){return(0,u.abs)(e%b)>u.epsilon}).map(p)).concat((0,s.range)((0,u.ceil)(f/_)*_,l,_).filter(function(e){return(0,u.abs)(e%x)>u.epsilon}).map(v))}var n,a,o,c,l,f,d,h,p,v,m,g,y=10,_=y,b=90,x=360,M=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[m(c).concat(g(d).slice(1),m(o).reverse().slice(1),g(h).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(c=+t[0][0],o=+t[1][0],h=+t[0][1],d=+t[1][1],c>o&&(t=c,c=o,o=t),h>d&&(t=h,h=d,d=t),e.precision(M)):[[c,h],[o,d]]},e.extentMinor=function(t){return arguments.length?(a=+t[0][0],n=+t[1][0],f=+t[0][1],l=+t[1][1],a>n&&(t=a,a=n,n=t),f>l&&(t=f,f=l,l=t),e.precision(M)):[[a,f],[n,l]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(b=+t[0],x=+t[1],e):[b,x]},e.stepMinor=function(t){return arguments.length?(y=+t[0],_=+t[1],e):[y,_]},e.precision=function(t){return arguments.length?(M=+t,p=r(f,l,90),v=i(a,n,M),m=r(h,d,90),g=i(c,o,M),e):M},e.extentMajor([[-180,-90+u.epsilon],[180,90-u.epsilon]]).extentMinor([[-180,-80-u.epsilon],[180,80+u.epsilon]])}function o(){return a()()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.graticule10=o;var s=n(3),u=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e[0]*r.radians,i=e[1]*r.radians,a=t[0]*r.radians,o=t[1]*r.radians,s=(0,r.cos)(i),u=(0,r.sin)(i),c=(0,r.cos)(o),l=(0,r.sin)(o),f=s*(0,r.cos)(n),d=s*(0,r.sin)(n),h=c*(0,r.cos)(a),p=c*(0,r.sin)(a),v=2*(0,r.asin)((0,r.sqrt)((0,r.haversin)(o-i)+s*c*(0,r.haversin)(a-n))),m=(0,r.sin)(v),g=v?function(e){var t=(0,r.sin)(e*=v)/m,n=(0,r.sin)(v-e)/m,i=n*f+t*h,a=n*d+t*p,o=n*u+t*l;return[(0,r.atan2)(a,i)*r.degrees,(0,r.atan2)(o,(0,r.sqrt)(i*i+a*a))*r.degrees]}:function(){return[n*r.degrees,i*r.degrees]};return g.distance=v,g};var r=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e){return e&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),(0,s.default)(e,r(i))),i.result()}var r,i,o=4.5;return n.area=function(e){return(0,s.default)(e,r(c.default)),c.default.result()},n.measure=function(e){return(0,s.default)(e,r(g.default)),g.default.result()},n.bounds=function(e){return(0,s.default)(e,r(f.default)),f.default.result()},n.centroid=function(e){return(0,s.default)(e,r(h.default)),h.default.result()},n.projection=function(t){return arguments.length?(r=null==t?(e=null,a.default):(e=t).stream,n):e},n.context=function(e){return arguments.length?(i=null==e?(t=null,new _.default):new v.default(t=e),"function"!=typeof o&&i.pointRadius(o),n):t},n.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(i.pointRadius(+e),+e),n):o},n.projection(e).context(t)};var i=n(79),a=r(i),o=n(17),s=r(o),u=n(407),c=r(u),l=n(159),f=r(l),d=n(408),h=r(d),p=n(409),v=r(p),m=n(410),g=r(m),y=n(411),_=r(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){_.point=a}function a(e,t){_.point=o,u=l=e,c=f=t}function o(e,t){y.add(f*e-l*t),l=e,f=t}function s(){o(u,c)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,l,f,d=n(25),h=r(d),p=n(0),v=n(14),m=r(v),g=(0,h.default)(),y=(0,h.default)(),_={point:m.default,lineStart:m.default,lineEnd:m.default,polygonStart:function(){_.lineStart=i,_.lineEnd=s},polygonEnd:function(){_.lineStart=_.lineEnd=_.point=m.default,g.add((0,p.abs)(y)),y.reset()},result:function(){var e=g/2;return g.reset(),e}};t.default=_},function(e,t,n){"use strict";function r(e,t){g+=e,y+=t,++_}function i(){T.point=a}function a(e,t){T.point=o,r(p=e,v=t)}function o(e,t){var n=e-p,i=t-v,a=(0,m.sqrt)(n*n+i*i);b+=a*(p+e)/2,x+=a*(v+t)/2,M+=a,r(p=e,v=t)}function s(){T.point=r}function u(){T.point=l}function c(){f(d,h)}function l(e,t){T.point=f,r(d=p=e,h=v=t)}function f(e,t){var n=e-p,i=t-v,a=(0,m.sqrt)(n*n+i*i);b+=a*(p+e)/2,x+=a*(v+t)/2,M+=a,a=v*e-p*t,w+=a*(p+e),S+=a*(v+t),P+=3*a,r(p=e,v=t)}Object.defineProperty(t,"__esModule",{value:!0});var d,h,p,v,m=n(0),g=0,y=0,_=0,b=0,x=0,M=0,w=0,S=0,P=0,T={point:r,lineStart:i,lineEnd:s,polygonStart:function(){T.lineStart=u,T.lineEnd=c},polygonEnd:function(){T.point=r,T.lineStart=i,T.lineEnd=s},result:function(){var e=P?[w/P,S/P]:M?[b/M,x/M]:_?[g/_,y/_]:[NaN,NaN];return g=y=_=b=x=M=w=S=P=0,e}};t.default=T},function(e,t,n){"use strict";function r(e){this._context=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(0),a=n(14),o=function(e){return e&&e.__esModule?e:{default:e}}(a);r.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,i.tau)}},result:o.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){g.point=a,s=c=e,u=l=t}function a(e,t){c-=e,l-=t,m.add((0,h.sqrt)(c*c+l*l)),c=e,l=t}Object.defineProperty(t,"__esModule",{value:!0});var o,s,u,c,l,f=n(25),d=r(f),h=n(0),p=n(14),v=r(p),m=(0,d.default)(),g={point:v.default,lineStart:function(){g.point=i},lineEnd:function(){o&&a(s,u),g.point=v.default},polygonStart:function(){o=!0},polygonEnd:function(){o=null},result:function(){var e=+m;return m.reset(),e}};t.default=g},function(e,t,n){"use strict";function r(){this._string=[]}function i(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.prototype={_radius:4.5,_circle:i(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=i(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}}},function(e,t,n){"use strict";function r(e){return(0,s.transformer)({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function i(e,t){function n(r,i,a,s,u,l,f,d,h,p,v,m,g,y){var _=f-r,b=d-i,x=_*_+b*b;if(x>4*t&&g--){var M=s+p,w=u+v,S=l+m,P=(0,o.sqrt)(M*M+w*w+S*S),T=(0,o.asin)(S/=P),E=(0,o.abs)((0,o.abs)(S)-1)<o.epsilon||(0,o.abs)(a-h)<o.epsilon?(a+h)/2:(0,o.atan2)(w,M),O=e(E,T),A=O[0],L=O[1],R=A-r,C=L-i,j=b*R-_*C;(j*j/x>t||(0,o.abs)((_*R+b*C)/x-.5)>.3||s*p+u*v+l*m<c)&&(n(r,i,a,s,u,l,A,L,E,M/=P,w/=P,S,g,y),y.point(A,L),n(A,L,E,M,w,S,f,d,h,p,v,m,g,y))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){_=NaN,S.point=o,t.lineStart()}function o(r,i){var o=(0,a.cartesian)([r,i]),s=e(r,i);n(_,b,y,x,M,w,_=s[0],b=s[1],y=r,x=o[0],M=o[1],w=o[2],u,t),t.point(_,b)}function s(){S.point=r,t.lineEnd()}function c(){i(),S.point=l,S.lineEnd=f}function l(e,t){o(d=e,t),h=_,p=b,v=x,m=M,g=w,S.point=o}function f(){n(_,b,y,x,M,w,h,p,d,v,m,g,u,t),S.lineEnd=s,s()}var d,h,p,v,m,g,y,_,b,x,M,w,S={point:r,lineStart:i,lineEnd:s,polygonStart:function(){t.polygonStart(),S.lineStart=c},polygonEnd:function(){t.polygonEnd(),S.lineStart=i}};return S}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return+t?i(e,t):r(e)};var a=n(28),o=n(0),s=n(45),u=16,c=(0,o.cos)(30*o.radians)},function(e,t,n){"use strict";function r(e){function t(e,t){return[e*n,(0,i.sin)(t)/n]}var n=(0,i.cos)(e);return t.invert=function(e,t){return[e/n,(0,i.asin)(t*n)]},t}Object.defineProperty(t,"__esModule",{value:!0}),t.cylindricalEqualAreaRaw=r;var i=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var t=e[0],n=e[1];return d=null,o.point(t,n),d||(u.point(t,n),d)||(f.point(t,n),d)}function t(){return n=r=null,e}var n,r,o,u,f,d,h=(0,s.default)(),p=(0,c.default)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),v=(0,c.default)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),m={point:function(e,t){d=[e,t]}};return e.invert=function(e){var t=h.scale(),n=h.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?p:i>=.166&&i<.234&&r>=-.214&&r<-.115?v:h).invert(e)},e.stream=function(e){return n&&r===e?n:n=i([h.stream(r=e),p.stream(e),v.stream(e)])},e.precision=function(e){return arguments.length?(h.precision(e),p.precision(e),v.precision(e),t()):h.precision()},e.scale=function(t){return arguments.length?(h.scale(t),p.scale(.35*t),v.scale(t),e.translate(h.translate())):h.scale()},e.translate=function(e){if(!arguments.length)return h.translate();var n=h.scale(),r=+e[0],i=+e[1];return o=h.translate(e).clipExtent([[r-.455*n,i-.238*n],[r+.455*n,i+.238*n]]).stream(m),u=p.translate([r-.307*n,i+.201*n]).clipExtent([[r-.425*n+a.epsilon,i+.12*n+a.epsilon],[r-.214*n-a.epsilon,i+.234*n-a.epsilon]]).stream(m),f=v.translate([r-.205*n,i+.212*n]).clipExtent([[r-.214*n+a.epsilon,i+.166*n+a.epsilon],[r-.115*n-a.epsilon,i+.234*n-a.epsilon]]).stream(m),t()},e.fitExtent=function(t,n){return(0,l.fitExtent)(e,t,n)},e.fitSize=function(t,n){return(0,l.fitSize)(e,t,n)},e.fitWidth=function(t,n){return(0,l.fitWidth)(e,t,n)},e.fitHeight=function(t,n){return(0,l.fitHeight)(e,t,n)},e.scale(1070)};var a=n(0),o=n(160),s=r(o),u=n(80),c=r(u),l=n(82)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azimuthalEqualAreaRaw=void 0,t.default=function(){return(0,o.default)(s).scale(124.75).clipAngle(179.999)};var r=n(0),i=n(29),a=n(10),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=t.azimuthalEqualAreaRaw=(0,i.azimuthalRaw)(function(e){return(0,r.sqrt)(2/(1+e))});s.invert=(0,i.azimuthalInvert)(function(e){return 2*(0,r.asin)(e/2)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azimuthalEquidistantRaw=void 0,t.default=function(){return(0,o.default)(s).scale(79.4188).clipAngle(179.999)};var r=n(0),i=n(29),a=n(10),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=t.azimuthalEquidistantRaw=(0,i.azimuthalRaw)(function(e){return(e=(0,r.acos)(e))&&e/(0,r.sin)(e)});s.invert=(0,i.azimuthalInvert)(function(e){return e})},function(e,t,n){"use strict";function r(e){return(0,a.tan)((a.halfPi+e)/2)}function i(e,t){function n(e,t){u>0?t<-a.halfPi+a.epsilon&&(t=-a.halfPi+a.epsilon):t>a.halfPi-a.epsilon&&(t=a.halfPi-a.epsilon);var n=u/(0,a.pow)(r(t),o);return[n*(0,a.sin)(o*e),u-n*(0,a.cos)(o*e)]}var i=(0,a.cos)(e),o=e===t?(0,a.sin)(e):(0,a.log)(i/(0,a.cos)(t))/(0,a.log)(r(t)/r(e)),u=i*(0,a.pow)(r(e),o)/o;return o?(n.invert=function(e,t){var n=u-t,r=(0,a.sign)(o)*(0,a.sqrt)(e*e+n*n),i=(0,a.atan2)(e,(0,a.abs)(n))*(0,a.sign)(n);return n*o<0&&(i-=a.pi*(0,a.sign)(e)*(0,a.sign)(n)),[i/o,2*(0,a.atan)((0,a.pow)(u/r,1/o))-a.halfPi]},n):s.mercatorRaw}Object.defineProperty(t,"__esModule",{value:!0}),t.conicConformalRaw=i,t.default=function(){return(0,o.conicProjection)(i).scale(109.5).parallels([30,30])};var a=n(0),o=n(81),s=n(83)},function(e,t,n){"use strict";function r(e,t){function n(e,t){var n=s-t,r=a*e;return[n*(0,i.sin)(r),s-n*(0,i.cos)(r)]}var r=(0,i.cos)(e),a=e===t?(0,i.sin)(e):(r-(0,i.cos)(t))/(t-e),s=r/a+e;return(0,i.abs)(a)<i.epsilon?o.equirectangularRaw:(n.invert=function(e,t){var n=s-t,r=(0,i.atan2)(e,(0,i.abs)(n))*(0,i.sign)(n);return n*a<0&&(r-=i.pi*(0,i.sign)(e)*(0,i.sign)(n)),[r/a,s-(0,i.sign)(a)*(0,i.sqrt)(e*e+n*n)]},n)}Object.defineProperty(t,"__esModule",{value:!0}),t.conicEquidistantRaw=r,t.default=function(){return(0,a.conicProjection)(r).scale(131.154).center([0,13.9389])};var i=n(0),a=n(81),o=n(161)},function(e,t,n){"use strict";function r(e,t){var n=(0,o.asin)(f*(0,o.sin)(t)),r=n*n,i=r*r*r;return[e*(0,o.cos)(n)/(f*(s+3*u*r+i*(7*c+9*l*r))),n*(s+u*r+i*(c+l*r))]}Object.defineProperty(t,"__esModule",{value:!0}),t.equalEarthRaw=r,t.default=function(){return(0,a.default)(r).scale(177.158)};var i=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(0),s=1.340264,u=-.081106,c=893e-6,l=.003796,f=(0,o.sqrt)(3)/2;r.invert=function(e,t){for(var n,r,i,a=t,d=a*a,h=d*d*d,p=0;p<12&&(r=a*(s+u*d+h*(c+l*d))-t,i=s+3*u*d+h*(7*c+9*l*d),a-=n=r/i,d=a*a,h=d*d*d,!((0,o.abs)(n)<o.epsilon2));++p);return[f*e*(s+3*u*d+h*(7*c+9*l*d))/(0,o.cos)(a),(0,o.asin)((0,o.sin)(a)/f)]}},function(e,t,n){"use strict";function r(e,t){var n=(0,i.cos)(t),r=(0,i.cos)(e)*n;return[n*(0,i.sin)(e)/r,(0,i.sin)(t)/r]}Object.defineProperty(t,"__esModule",{value:!0}),t.gnomonicRaw=r,t.default=function(){return(0,s.default)(r).scale(144.049).clipAngle(60)};var i=n(0),a=n(29),o=n(10),s=function(e){return e&&e.__esModule?e:{default:e}}(o);r.invert=(0,a.azimuthalInvert)(i.atan)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){return x=p*g,M=p*y,d=h=null,t}function t(e){var t=e[0]*x,i=e[1]*M;if(_){var a=i*n-t*r;t=t*n+i*r,i=a}return[t+v,i+m]}var n,r,i,o,f,d,h,p=1,v=0,m=0,g=1,y=1,_=0,b=null,x=1,M=1,w=(0,u.transformer)({point:function(e,n){var r=t([e,n]);this.stream.point(r[0],r[1])}}),S=s.default;return t.invert=function(e){var t=e[0]-v,i=e[1]-m;if(_){var a=i*n+t*r;t=t*n-i*r,i=a}return[t/x,i/M]},t.stream=function(e){return d&&h===e?d:d=w(S(h=e))},t.postclip=function(t){return arguments.length?(S=t,b=i=o=f=null,e()):S},t.clipExtent=function(t){return arguments.length?(S=null==t?(b=i=o=f=null,s.default):(0,a.default)(b=+t[0][0],i=+t[0][1],o=+t[1][0],f=+t[1][1]),e()):null==b?null:[[b,i],[o,f]]},t.scale=function(t){return arguments.length?(p=+t,e()):p},t.translate=function(t){return arguments.length?(v=+t[0],m=+t[1],e()):[v,m]},t.angle=function(t){return arguments.length?(_=t%360*l.radians,r=(0,l.sin)(_),n=(0,l.cos)(_),e()):_*l.degrees},t.reflectX=function(t){return arguments.length?(g=t?-1:1,e()):g<0},t.reflectY=function(t){return arguments.length?(y=t?-1:1,e()):y<0},t.fitExtent=function(e,n){return(0,c.fitExtent)(t,e,n)},t.fitSize=function(e,n){return(0,c.fitSize)(t,e,n)},t.fitWidth=function(e,n){return(0,c.fitWidth)(t,e,n)},t.fitHeight=function(e,n){return(0,c.fitHeight)(t,e,n)},t};var i=n(44),a=r(i),o=n(79),s=r(o),u=n(45),c=n(82),l=n(0)},function(e,t,n){"use strict";function r(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Object.defineProperty(t,"__esModule",{value:!0}),t.naturalEarth1Raw=r,t.default=function(){return(0,a.default)(r).scale(175.295)};var i=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(0);r.invert=function(e,t){var n,r=t,i=25;do{var a=r*r,s=a*a;r-=n=(r*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-t)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))}while((0,o.abs)(n)>o.epsilon&&--i>0);return[e/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]}},function(e,t,n){"use strict";function r(e,t){return[(0,i.cos)(t)*(0,i.sin)(e),(0,i.sin)(t)]}Object.defineProperty(t,"__esModule",{value:!0}),t.orthographicRaw=r,t.default=function(){return(0,s.default)(r).scale(249.5).clipAngle(90+i.epsilon)};var i=n(0),a=n(29),o=n(10),s=function(e){return e&&e.__esModule?e:{default:e}}(o);r.invert=(0,a.azimuthalInvert)(i.asin)},function(e,t,n){"use strict";function r(e,t){var n=(0,i.cos)(t),r=1+(0,i.cos)(e)*n;return[n*(0,i.sin)(e)/r,(0,i.sin)(t)/r]}Object.defineProperty(t,"__esModule",{value:!0}),t.stereographicRaw=r,t.default=function(){return(0,s.default)(r).scale(250).clipAngle(142)};var i=n(0),a=n(29),o=n(10),s=function(e){return e&&e.__esModule?e:{default:e}}(o);r.invert=(0,a.azimuthalInvert)(function(e){return 2*(0,i.atan)(e)})},function(e,t,n){"use strict";function r(e,t){return[(0,i.log)((0,i.tan)((i.halfPi+t)/2)),-e]}Object.defineProperty(t,"__esModule",{value:!0}),t.transverseMercatorRaw=r,t.default=function(){var e=(0,a.mercatorProjection)(r),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)};var i=n(0),a=n(83);r.invert=function(e,t){return[-t,2*(0,i.atan)((0,i.exp)(e))-i.halfPi]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(427);Object.defineProperty(t,"cluster",{enumerable:!0,get:function(){return r(i).default}});var a=n(84);Object.defineProperty(t,"hierarchy",{enumerable:!0,get:function(){return r(a).default}});var o=n(439);Object.defineProperty(t,"pack",{enumerable:!0,get:function(){return r(o).default}});var s=n(162);Object.defineProperty(t,"packSiblings",{enumerable:!0,get:function(){return r(s).default}});var u=n(163);Object.defineProperty(t,"packEnclose",{enumerable:!0,get:function(){return r(u).default}});var c=n(441);Object.defineProperty(t,"partition",{enumerable:!0,get:function(){return r(c).default}});var l=n(442);Object.defineProperty(t,"stratify",{enumerable:!0,get:function(){return r(l).default}});var f=n(443);Object.defineProperty(t,"tree",{enumerable:!0,get:function(){return r(f).default}});var d=n(444);Object.defineProperty(t,"treemap",{enumerable:!0,get:function(){return r(d).default}});var h=n(445);Object.defineProperty(t,"treemapBinary",{enumerable:!0,get:function(){return r(h).default}});var p=n(30);Object.defineProperty(t,"treemapDice",{enumerable:!0,get:function(){return r(p).default}});var v=n(46);Object.defineProperty(t,"treemapSlice",{enumerable:!0,get:function(){return r(v).default}});var m=n(446);Object.defineProperty(t,"treemapSliceDice",{enumerable:!0,get:function(){return r(m).default}});var g=n(86);Object.defineProperty(t,"treemapSquarify",{enumerable:!0,get:function(){return r(g).default}});var y=n(447);Object.defineProperty(t,"treemapResquarify",{enumerable:!0,get:function(){return r(y).default}})},function(e,t,n){"use strict";function r(e,t){return e.parent===t.parent?1:2}function i(e){return e.reduce(a,0)/e.length}function a(e,t){return e+t.x}function o(e){return 1+e.reduce(s,0)}function s(e,t){return Math.max(e,t.y)}function u(e){for(var t;t=e.children;)e=t[0];return e}function c(e){for(var t;t=e.children;)e=t[t.length-1];return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var r,l=0;e.eachAfter(function(e){var n=e.children;n?(e.x=i(n),e.y=o(n)):(e.x=r?l+=t(e,r):0,e.y=0,r=e)});var f=u(e),d=c(e),h=f.x-t(f,d)/2,p=d.x+t(d,f)/2;return e.eachAfter(s?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*a}:function(t){t.x=(t.x-h)/(p-h)*n,t.y=(1-(e.y?t.y/e.y:1))*a})}var t=r,n=1,a=1,s=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(s=!1,n=+t[0],a=+t[1],e):s?null:[n,a]},e.nodeSize=function(t){return arguments.length?(s=!0,n=+t[0],a=+t[1],e):s?[n,a]:null},e}},function(e,t,n){"use strict";function r(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return this.eachAfter(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r,i,a=this,o=[a];do{for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}},function(e,t,n){"use strict";function r(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=this,n=r(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var a=i.length;e!==n;)i.splice(a,0,e),e=e.parent;return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=[];return this.each(function(t){e.push(t)}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}},function(e,t,n){"use strict";function r(e){return Math.sqrt(e.value)}function i(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function a(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,u=e(n)*t||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=(0,s.packEnclose)(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function o(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){return e.x=n/2,e.y=s/2,t?e.eachBefore(i(t)).eachAfter(a(f,.5)).eachBefore(o(1)):e.eachBefore(i(r)).eachAfter(a(c.constantZero,1)).eachAfter(a(f,e.r/Math.min(n,s))).eachBefore(o(Math.min(n,s)/(2*e.r))),e}var t=null,n=1,s=1,f=c.constantZero;return e.radius=function(n){return arguments.length?(t=(0,u.optional)(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],s=+t[1],e):[n,s]},e.padding=function(t){return arguments.length?(f="function"==typeof t?t:(0,l.default)(+t),e):f},e};var s=n(162),u=n(85),c=n(164),l=function(e){return e&&e.__esModule?e:{default:e}}(c)},function(e,t,n){"use strict";function r(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.shuffle=r;t.slice=Array.prototype.slice},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var s=e.height+1;return e.x0=e.y0=i,e.x1=n,e.y1=r/s,e.eachBefore(t(r,s)),o&&e.eachBefore(a.default),e}function t(e,t){return function(n){n.children&&(0,s.default)(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var r=n.x0,a=n.y0,o=n.x1-i,u=n.y1-i;o<r&&(r=o=(r+o)/2),u<a&&(a=u=(a+u)/2),n.x0=r,n.y0=a,n.x1=o,n.y1=u}}var n=1,r=1,i=0,o=!1;return e.round=function(t){return arguments.length?(o=!!t,e):o},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i=+t,e):i},e};var i=n(165),a=r(i),o=n(30),s=r(o)},function(e,t,n){"use strict";function r(e){return e.id}function i(e){return e.parentId}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var r,i,a,l,f,d,h,p=e.length,v=new Array(p),m={};for(i=0;i<p;++i)r=e[i],f=v[i]=new o.Node(r),null!=(d=t(r,i,e))&&(d+="")&&(h=s+(f.id=d),m[h]=h in m?c:f);for(i=0;i<p;++i)if(f=v[i],null!=(d=n(e[i],i,e))&&(d+="")){if(!(l=m[s+d]))throw new Error("missing: "+d);if(l===c)throw new Error("ambiguous: "+d);l.children?l.children.push(f):l.children=[f],f.parent=l}else{if(a)throw new Error("multiple roots");a=f}if(!a)throw new Error("no root");if(a.parent=u,a.eachBefore(function(e){e.depth=e.parent.depth+1,--p}).eachBefore(o.computeHeight),a.parent=null,p>0)throw new Error("cycle");return a}var t=r,n=i;return e.id=function(n){return arguments.length?(t=(0,a.required)(n),e):t},e.parentId=function(t){return arguments.length?(n=(0,a.required)(t),e):n},e};var a=n(85),o=n(84),s="$",u={depth:-1},c={}},function(e,t,n){"use strict";function r(e,t){return e.parent===t.parent?1:2}function i(e){var t=e.children;return t?t[0]:e.t}function a(e){var t=e.children;return t?t[t.length-1]:e.t}function o(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function s(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function u(e,t,n){return e.a.parent===t.parent?e.a:n}function c(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function l(e){for(var t,n,r,i,a,o=new c(e,0),s=[o];t=s.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=t.children[i]=new c(r[i],i)),n.parent=t;return(o.parent=new c(null,0)).children=[o],o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var r=l(e);if(r.eachAfter(t),r.parent.m=-r.z,r.eachBefore(n),v)e.eachBefore(f);else{var i=e,a=e,o=e;e.eachBefore(function(e){e.x<i.x&&(i=e),e.x>a.x&&(a=e),e.depth>o.depth&&(o=e)});var s=i===a?1:d(i,a)/2,u=s-i.x,c=h/(a.x+s+u),m=p/(o.depth||1);e.eachBefore(function(e){e.x=(e.x+u)*c,e.y=e.depth*m})}return e}function t(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t){s(e);var i=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+d(e._,r._),e.m=e.z-i):e.z=i}else r&&(e.z=r.z+d(e._,r._));e.parent.A=c(e,r,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function c(e,t,n){if(t){for(var r,s=e,c=e,l=t,f=s.parent.children[0],h=s.m,p=c.m,v=l.m,m=f.m;l=a(l),s=i(s),l&&s;)f=i(f),c=a(c),c.a=e,r=l.z+v-s.z-h+d(l._,s._),r>0&&(o(u(l,e,n),e,r),h+=r,p+=r),v+=l.m,h+=s.m,m+=f.m,p+=c.m;l&&!a(c)&&(c.t=l,c.m+=v-p),s&&!i(f)&&(f.t=s,f.m+=h-m,n=e)}return n}function f(e){e.x*=h,e.y=e.depth*p}var d=r,h=1,p=1,v=null;return e.separation=function(t){return arguments.length?(d=t,e):d},e.size=function(t){return arguments.length?(v=!1,h=+t[0],p=+t[1],e):v?null:[h,p]},e.nodeSize=function(t){return arguments.length?(v=!0,h=+t[0],p=+t[1],e):v?[h,p]:null},e};var f=n(84);c.prototype=Object.create(f.Node.prototype)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=o,e.eachBefore(t),f=[0],r&&e.eachBefore(a.default),e}function t(e){var t=f[e.depth],r=e.x0+t,i=e.y0+t,a=e.x1-t,o=e.y1-t;a<r&&(r=a=(r+a)/2),o<i&&(i=o=(i+o)/2),e.x0=r,e.y0=i,e.x1=a,e.y1=o,e.children&&(t=f[e.depth+1]=d(e)/2,r+=m(e)-t,i+=h(e)-t,a-=p(e)-t,o-=v(e)-t,a<r&&(r=a=(r+a)/2),o<i&&(i=o=(i+o)/2),n(e,r,i,a,o))}var n=s.default,r=!1,i=1,o=1,f=[0],d=c.constantZero,h=c.constantZero,p=c.constantZero,v=c.constantZero,m=c.constantZero;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(i=+t[0],o=+t[1],e):[i,o]},e.tile=function(t){return arguments.length?(n=(0,u.required)(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(d="function"==typeof t?t:(0,l.default)(+t),e):d},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(h="function"==typeof t?t:(0,l.default)(+t),e):h},e.paddingRight=function(t){return arguments.length?(p="function"==typeof t?t:(0,l.default)(+t),e):p},e.paddingBottom=function(t){return arguments.length?(v="function"==typeof t?t:(0,l.default)(+t),e):v},e.paddingLeft=function(t){return arguments.length?(m="function"==typeof t?t:(0,l.default)(+t),e):m},e};var i=n(165),a=r(i),o=n(86),s=r(o),u=n(85),c=n(164),l=r(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){function a(e,t,n,r,i,o,s){if(e>=t-1){var c=u[e];return c.x0=r,c.y0=i,c.x1=o,c.y1=s,void 0}for(var f=l[e],d=n/2+f,h=e+1,p=t-1;h<p;){var v=h+p>>>1;l[v]<d?h=v+1:p=v}d-l[h-1]<l[h]-d&&e+1<h&&--h;var m=l[h]-f,g=n-m;if(o-r>s-i){var y=(r*g+o*m)/n;a(e,h,m,r,i,y,s),a(h,t,g,y,i,o,s)}else{var _=(i*g+s*m)/n;a(e,h,m,r,i,o,_),a(h,t,g,r,_,o,s)}}var o,s,u=e.children,c=u.length,l=new Array(c+1);for(l[0]=s=o=0;o<c;++o)l[o+1]=s+=u[o].value;a(0,c,e.value,t,n,r,i)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){(1&e.depth?s.default:a.default)(e,t,n,r,i)};var i=n(30),a=r(i),o=n(46),s=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),a=r(i),o=n(46),s=r(o),u=n(86);t.default=function e(t){function n(e,n,r,i,o){if((c=e._squarify)&&c.ratio===t)for(var c,l,f,d,h,p=-1,v=c.length,m=e.value;++p<v;){for(l=c[p],f=l.children,d=l.value=0,h=f.length;d<h;++d)l.value+=f[d].value;l.dice?(0,a.default)(l,n,r,i,r+=(o-r)*l.value/m):(0,s.default)(l,n,r,n+=(i-n)*l.value/m,o),m-=l.value}else e._squarify=c=(0,u.squarifyRatio)(t,e,n,r,i,o),c.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(u.phi)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(449);Object.defineProperty(t,"polygonArea",{enumerable:!0,get:function(){return r(i).default}});var a=n(450);Object.defineProperty(t,"polygonCentroid",{enumerable:!0,get:function(){return r(a).default}});var o=n(451);Object.defineProperty(t,"polygonHull",{enumerable:!0,get:function(){return r(o).default}});var s=n(453);Object.defineProperty(t,"polygonContains",{enumerable:!0,get:function(){return r(s).default}});var u=n(454);Object.defineProperty(t,"polygonLength",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[1]*i[0]-t[0]*i[1];return a/2}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n,r=-1,i=e.length,a=0,o=0,s=e[i-1],u=0;++r<i;)t=s,s=e[r],u+=n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return u*=3,[a/u,o/u]}},function(e,t,n){"use strict";function r(e,t){return e[0]-t[0]||e[1]-t[1]}function i(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;++i){for(;r>1&&(0,o.default)(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((n=e.length)<3)return null;var t,n,a=new Array(n),o=new Array(n);for(t=0;t<n;++t)a[t]=[+e[t][0],+e[t][1],t];for(a.sort(r),t=0;t<n;++t)o[t]=[a[t][0],-a[t][1]];var s=i(a),u=i(o),c=u[0]===s[0],l=u[u.length-1]===s[s.length-1],f=[];for(t=s.length-1;t>=0;--t)f.push(e[a[s[t]][2]]);for(t=+c;t<u.length-l;++t)f.push(e[a[u[t]][2]]);return f};var a=n(452),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n,r,i=e.length,a=e[i-1],o=t[0],s=t[1],u=a[0],c=a[1],l=!1,f=0;f<i;++f)a=e[f],n=a[0],r=a[1],r>s!=c>s&&o<(u-n)*(s-r)/(c-r)+n&&(l=!l),u=n,c=r;return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n,r=-1,i=e.length,a=e[i-1],o=a[0],s=a[1],u=0;++r<i;)t=o,n=s,a=e[r],o=a[0],s=a[1],t-=o,n-=s,u+=Math.sqrt(t*t+n*n);return u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(456);Object.defineProperty(t,"randomUniform",{enumerable:!0,get:function(){return r(i).default}});var a=n(166);Object.defineProperty(t,"randomNormal",{enumerable:!0,get:function(){return r(a).default}});var o=n(457);Object.defineProperty(t,"randomLogNormal",{enumerable:!0,get:function(){return r(o).default}});var s=n(458);Object.defineProperty(t,"randomBates",{enumerable:!0,get:function(){return r(s).default}});var u=n(167);Object.defineProperty(t,"randomIrwinHall",{enumerable:!0,get:function(){return r(u).default}});var c=n(459);Object.defineProperty(t,"randomExponential",{enumerable:!0,get:function(){return r(c).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(i.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26),a=r(i),o=n(166),s=r(o);t.default=function e(t){function n(){var e=s.default.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(a.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26),a=r(i),o=n(167),s=r(o);t.default=function e(t){function n(e){var n=s.default.source(t)(e);return function(){return n()/e}}return n.source=e,n}(a.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(i.default)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(461);Object.defineProperty(t,"scaleBand",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(t,"scalePoint",{enumerable:!0,get:function(){return i.point}});var a=n(462);Object.defineProperty(t,"scaleIdentity",{enumerable:!0,get:function(){return r(a).default}});var o=n(19);Object.defineProperty(t,"scaleLinear",{enumerable:!0,get:function(){return r(o).default}});var s=n(87);Object.defineProperty(t,"scaleLog",{enumerable:!0,get:function(){return r(s).default}});var u=n(88);Object.defineProperty(t,"scaleSymlog",{enumerable:!0,get:function(){return r(u).default}});var c=n(168);Object.defineProperty(t,"scaleOrdinal",{enumerable:!0,get:function(){return r(c).default}}),Object.defineProperty(t,"scaleImplicit",{enumerable:!0,get:function(){return c.implicit}});var l=n(89);Object.defineProperty(t,"scalePow",{enumerable:!0,get:function(){return r(l).default}}),Object.defineProperty(t,"scaleSqrt",{enumerable:!0,get:function(){return l.sqrt}});var f=n(464);Object.defineProperty(t,"scaleQuantile",{enumerable:!0,get:function(){return r(f).default}});var d=n(465);Object.defineProperty(t,"scaleQuantize",{enumerable:!0,get:function(){return r(d).default}});var h=n(466);Object.defineProperty(t,"scaleThreshold",{enumerable:!0,get:function(){return r(h).default}});var p=n(172);Object.defineProperty(t,"scaleTime",{enumerable:!0,get:function(){return r(p).default}});var v=n(482);Object.defineProperty(t,"scaleUtc",{enumerable:!0,get:function(){return r(v).default}});var m=n(175);Object.defineProperty(t,"scaleSequential",{enumerable:!0,get:function(){return r(m).default}}),Object.defineProperty(t,"scaleSequentialLog",{enumerable:!0,get:function(){return m.sequentialLog}}),Object.defineProperty(t,"scaleSequentialPow",{enumerable:!0,get:function(){return m.sequentialPow}}),Object.defineProperty(t,"scaleSequentialSqrt",{enumerable:!0,get:function(){return m.sequentialSqrt}}),Object.defineProperty(t,"scaleSequentialSymlog",{enumerable:!0,get:function(){return m.sequentialSymlog}});var g=n(483);Object.defineProperty(t,"scaleSequentialQuantile",{enumerable:!0,get:function(){return r(g).default}});var y=n(484);Object.defineProperty(t,"scaleDiverging",{enumerable:!0,get:function(){return r(y).default}}),Object.defineProperty(t,"scaleDivergingLog",{enumerable:!0,get:function(){return y.divergingLog}}),Object.defineProperty(t,"scaleDivergingPow",{enumerable:!0,get:function(){return y.divergingPow}}),Object.defineProperty(t,"scaleDivergingSqrt",{enumerable:!0,get:function(){return y.divergingSqrt}}),Object.defineProperty(t,"scaleDivergingSymlog",{enumerable:!0,get:function(){return y.divergingSymlog}});var _=n(170);Object.defineProperty(t,"tickFormat",{enumerable:!0,get:function(){return r(_).default}})},function(e,t,n){"use strict";function r(){function e(){var e=a().length,r=l[1]<l[0],i=l[r-0],s=l[1-r];t=(s-i)/Math.max(1,e-d+2*h),f&&(t=Math.floor(t)),i+=(s-i-t*(e-d))*p,n=t*(1-d),f&&(i=Math.round(i),n=Math.round(n));var c=(0,o.range)(e).map(function(e){return i+t*e});return u(r?c.reverse():c)}var t,n,i=(0,c.default)().unknown(void 0),a=i.domain,u=i.range,l=[0,1],f=!1,d=0,h=0,p=.5;return delete i.unknown,i.domain=function(t){return arguments.length?(a(t),e()):a()},i.range=function(t){return arguments.length?(l=[+t[0],+t[1]],e()):l.slice()},i.rangeRound=function(t){return l=[+t[0],+t[1]],f=!0,e()},i.bandwidth=function(){return n},i.step=function(){return t},i.round=function(t){return arguments.length?(f=!!t,e()):f},i.padding=function(t){return arguments.length?(d=Math.min(1,h=+t),e()):d},i.paddingInner=function(t){return arguments.length?(d=Math.min(1,t),e()):d},i.paddingOuter=function(t){return arguments.length?(h=+t,e()):h},i.align=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),e()):p},i.copy=function(){return r(a(),l).round(f).paddingInner(d).paddingOuter(h).align(p)},s.initRange.apply(e(),arguments)}function i(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return i(t())},e}function a(){return i(r.apply(null,arguments).paddingInner(1))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.point=a;var o=n(3),s=n(6),u=n(168),c=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e){function t(e){return isNaN(e=+e)?n:e}var n;return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=i.map.call(n,s.default),t):e.slice()},t.unknown=function(e){return arguments.length?(n=e,t):n},t.copy=function(){return r(e).unknown(n)},e=arguments.length?i.map.call(e,s.default):[0,1],(0,a.linearish)(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(18),a=n(19),o=n(169),s=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";function r(){function e(){var e=0,n=Math.max(1,u.length);for(c=new Array(n-1);++e<n;)c[e-1]=(0,i.quantile)(s,e/n);return t}function t(e){return isNaN(e=+e)?n:u[(0,i.bisect)(c,e)]}var n,s=[],u=[],c=[];return t.invertExtent=function(e){var t=u.indexOf(e);return t<0?[NaN,NaN]:[t>0?c[t-1]:s[0],t<c.length?c[t]:s[s.length-1]]},t.domain=function(t){if(!arguments.length)return s.slice();s=[];for(var n,r=0,a=t.length;r<a;++r)null==(n=t[r])||isNaN(n=+n)||s.push(n);return s.sort(i.ascending),e()},t.range=function(t){return arguments.length?(u=a.slice.call(t),e()):u.slice()},t.unknown=function(e){return arguments.length?(n=e,t):n},t.quantiles=function(){return c.slice()},t.copy=function(){return r().domain(s).range(u).unknown(n)},o.initRange.apply(t,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(3),a=n(18),o=n(6)},function(e,t,n){"use strict";function r(){function e(e){return e<=e?d[(0,i.bisect)(f,e,0,l)]:n}function t(){var t=-1;for(f=new Array(l);++t<l;)f[t]=((t+1)*c-(t-l)*u)/(l+1);return e}var n,u=0,c=1,l=1,f=[.5],d=[0,1];return e.domain=function(e){return arguments.length?(u=+e[0],c=+e[1],t()):[u,c]},e.range=function(e){return arguments.length?(l=(d=a.slice.call(e)).length-1,t()):d.slice()},e.invertExtent=function(e){var t=d.indexOf(e);return t<0?[NaN,NaN]:t<1?[u,f[0]]:t>=l?[f[l-1],c]:[f[t-1],f[t]]},e.unknown=function(t){return arguments.length?(n=t,e):e},e.thresholds=function(){return f.slice()},e.copy=function(){return r().domain([u,c]).range(d).unknown(n)},s.initRange.apply((0,o.linearish)(e),arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(3),a=n(18),o=n(19),s=n(6)},function(e,t,n){"use strict";function r(){function e(e){return e<=e?s[(0,i.bisect)(n,e,0,u)]:t}var t,n=[.5],s=[0,1],u=1;return e.domain=function(t){return arguments.length?(n=a.slice.call(t),u=Math.min(n.length,s.length-1),e):n.slice()},e.range=function(t){return arguments.length?(s=a.slice.call(t),u=Math.min(n.length,s.length-1),e):s.slice()},e.invertExtent=function(e){var t=s.indexOf(e);return[n[t-1],n[t]]},e.unknown=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return r().domain(n).range(s).unknown(t)},o.initRange.apply(e,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(3),a=n(18),o=n(6)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.milliseconds=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=(0,i.default)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,i.default)(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):a:null},t.default=a;t.milliseconds=a.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seconds=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(12),o=(0,i.default)(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*a.durationSecond)},function(e,t){return(t-e)/a.durationSecond},function(e){return e.getUTCSeconds()});t.default=o;t.seconds=o.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.minutes=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(12),o=(0,i.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a.durationSecond)},function(e,t){e.setTime(+e+t*a.durationMinute)},function(e,t){return(t-e)/a.durationMinute},function(e){return e.getMinutes()});t.default=o;t.minutes=o.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hours=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(12),o=(0,i.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a.durationSecond-e.getMinutes()*a.durationMinute)},function(e,t){e.setTime(+e+t*a.durationHour)},function(e,t){return(t-e)/a.durationHour},function(e){return e.getHours()});t.default=o;t.hours=o.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.days=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(12),o=(0,i.default)(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a.durationMinute)/a.durationDay},function(e){return e.getDate()-1});t.default=o;t.days=o.range},function(e,t,n){"use strict";function r(e){return(0,a.default)(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o.durationMinute)/o.durationWeek})}Object.defineProperty(t,"__esModule",{value:!0}),t.saturdays=t.fridays=t.thursdays=t.wednesdays=t.tuesdays=t.mondays=t.sundays=t.saturday=t.friday=t.thursday=t.wednesday=t.tuesday=t.monday=t.sunday=void 0;var i=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(12),s=t.sunday=r(0),u=t.monday=r(1),c=t.tuesday=r(2),l=t.wednesday=r(3),f=t.thursday=r(4),d=t.friday=r(5),h=t.saturday=r(6);t.sundays=s.range,t.mondays=u.range,t.tuesdays=c.range,t.wednesdays=l.range,t.thursdays=f.range,t.fridays=d.range,t.saturdays=h.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.months=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=(0,i.default)(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()});t.default=a;t.months=a.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.years=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=(0,i.default)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});a.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,i.default)(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null},t.default=a;t.years=a.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utcMinutes=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(12),o=(0,i.default)(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*a.durationMinute)},function(e,t){return(t-e)/a.durationMinute},function(e){return e.getUTCMinutes()});t.default=o;t.utcMinutes=o.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utcHours=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(12),o=(0,i.default)(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*a.durationHour)},function(e,t){return(t-e)/a.durationHour},function(e){return e.getUTCHours()});t.default=o;t.utcHours=o.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utcDays=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(12),o=(0,i.default)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/a.durationDay},function(e){return e.getUTCDate()-1});t.default=o;t.utcDays=o.range},function(e,t,n){"use strict";function r(e){return(0,a.default)(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/o.durationWeek})}Object.defineProperty(t,"__esModule",{value:!0}),t.utcSaturdays=t.utcFridays=t.utcThursdays=t.utcWednesdays=t.utcTuesdays=t.utcMondays=t.utcSundays=t.utcSaturday=t.utcFriday=t.utcThursday=t.utcWednesday=t.utcTuesday=t.utcMonday=t.utcSunday=void 0;var i=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(12),s=t.utcSunday=r(0),u=t.utcMonday=r(1),c=t.utcTuesday=r(2),l=t.utcWednesday=r(3),f=t.utcThursday=r(4),d=t.utcFriday=r(5),h=t.utcSaturday=r(6);t.utcSundays=s.range,t.utcMondays=u.range,t.utcTuesdays=c.range,t.utcWednesdays=l.range,t.utcThursdays=f.range,t.utcFridays=d.range,t.utcSaturdays=h.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utcMonths=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=(0,i.default)(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()});t.default=a;t.utcMonths=a.range},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utcYears=void 0;var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=(0,i.default)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});a.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,i.default)(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null},t.default=a;t.utcYears=a.range},function(e,t,n){"use strict";function r(e){var t=new Date(e);return isNaN(t)?null:t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(174),a=n(91),o=+new Date("2000-01-01T00:00:00.000Z")?r:(0,a.utcParse)(i.isoSpecifier);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.initRange.apply((0,r.calendar)(a.utcYear,a.utcMonth,a.utcWeek,a.utcDay,a.utcHour,a.utcMinute,a.utcSecond,a.utcMillisecond,i.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};var r=n(172),i=n(90),a=n(47),o=n(6)},function(e,t,n){"use strict";function r(){function e(e){if(!isNaN(e=+e))return n(((0,i.bisect)(t,e)-1)/(t.length-1))}var t=[],n=a.identity;return e.domain=function(n){if(!arguments.length)return t.slice();t=[];for(var r,a=0,o=n.length;a<o;++a)null==(r=n[a])||isNaN(r=+r)||t.push(r);return t.sort(i.ascending),e},e.interpolator=function(t){return arguments.length?(n=t,e):n},e.copy=function(){return r(n).domain(t)},o.initInterpolator.apply(e,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(3),a=n(15),o=n(6)},function(e,t,n){"use strict";function r(){function e(e){return isNaN(e=+e)?s:(e=.5+((e=+o(e))-n)*(e<n?i:a),d(h?Math.max(0,Math.min(1,e)):e))}var t,n,r,i,a,o,s,u=0,l=.5,f=1,d=c.identity,h=!1;return e.domain=function(s){return arguments.length?(t=o(u=+s[0]),n=o(l=+s[1]),r=o(f=+s[2]),i=t===n?0:.5/(n-t),a=n===r?0:.5/(r-n),e):[u,l,f]},e.clamp=function(t){return arguments.length?(h=!!t,e):h},e.interpolator=function(t){return arguments.length?(d=t,e):d},e.unknown=function(t){return arguments.length?(s=t,e):s},function(s){return o=s,t=s(u),n=s(l),r=s(f),i=t===n?0:.5/(n-t),a=n===r?0:.5/(r-n),e}}function i(){var e=(0,f.linearish)(r()(c.identity));return e.copy=function(){return(0,h.copy)(e,i())},l.initInterpolator.apply(e,arguments)}function a(){var e=(0,d.loggish)(r()).domain([.1,1,10]);return e.copy=function(){return(0,h.copy)(e,a()).base(e.base())},l.initInterpolator.apply(e,arguments)}function o(){var e=(0,p.symlogish)(r());return e.copy=function(){return(0,h.copy)(e,o()).constant(e.constant())},l.initInterpolator.apply(e,arguments)}function s(){var e=(0,v.powish)(r());return e.copy=function(){return(0,h.copy)(e,s()).exponent(e.exponent())},l.initInterpolator.apply(e,arguments)}function u(){return s.apply(null,arguments).exponent(.5)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.divergingLog=a,t.divergingSymlog=o,t.divergingPow=s,t.divergingSqrt=u;var c=n(15),l=n(6),f=n(19),d=n(87),h=n(175),p=n(88),v=n(89)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(486);Object.defineProperty(t,"schemeCategory10",{enumerable:!0,get:function(){return r(i).default}});var a=n(487);Object.defineProperty(t,"schemeAccent",{enumerable:!0,get:function(){return r(a).default}});var o=n(488);Object.defineProperty(t,"schemeDark2",{enumerable:!0,get:function(){return r(o).default}});var s=n(489);Object.defineProperty(t,"schemePaired",{enumerable:!0,get:function(){return r(s).default}});var u=n(490);Object.defineProperty(t,"schemePastel1",{enumerable:!0,get:function(){return r(u).default}});var c=n(491);Object.defineProperty(t,"schemePastel2",{enumerable:!0,get:function(){return r(c).default}});var l=n(492);Object.defineProperty(t,"schemeSet1",{enumerable:!0,get:function(){return r(l).default}});var f=n(493);Object.defineProperty(t,"schemeSet2",{enumerable:!0,get:function(){return r(f).default}});var d=n(494);Object.defineProperty(t,"schemeSet3",{enumerable:!0,get:function(){return r(d).default}});var h=n(495);Object.defineProperty(t,"schemeTableau10",{enumerable:!0,get:function(){return r(h).default}});var p=n(496);Object.defineProperty(t,"interpolateBrBG",{enumerable:!0,get:function(){return r(p).default}}),Object.defineProperty(t,"schemeBrBG",{enumerable:!0,get:function(){return p.scheme}});var v=n(497);Object.defineProperty(t,"interpolatePRGn",{enumerable:!0,get:function(){return r(v).default}}),Object.defineProperty(t,"schemePRGn",{enumerable:!0,get:function(){return v.scheme}});var m=n(498);Object.defineProperty(t,"interpolatePiYG",{enumerable:!0,get:function(){return r(m).default}}),Object.defineProperty(t,"schemePiYG",{enumerable:!0,get:function(){return m.scheme}});var g=n(499);Object.defineProperty(t,"interpolatePuOr",{enumerable:!0,get:function(){return r(g).default}}),Object.defineProperty(t,"schemePuOr",{enumerable:!0,get:function(){return g.scheme}});var y=n(500);Object.defineProperty(t,"interpolateRdBu",{enumerable:!0,get:function(){return r(y).default}}),Object.defineProperty(t,"schemeRdBu",{enumerable:!0,get:function(){return y.scheme}});var _=n(501);Object.defineProperty(t,"interpolateRdGy",{enumerable:!0,get:function(){return r(_).default}}),Object.defineProperty(t,"schemeRdGy",{enumerable:!0,get:function(){return _.scheme}});var b=n(502);Object.defineProperty(t,"interpolateRdYlBu",{enumerable:!0,get:function(){return r(b).default}}),Object.defineProperty(t,"schemeRdYlBu",{enumerable:!0,get:function(){return b.scheme}});var x=n(503);Object.defineProperty(t,"interpolateRdYlGn",{enumerable:!0,get:function(){return r(x).default}}),Object.defineProperty(t,"schemeRdYlGn",{enumerable:!0,get:function(){return x.scheme}});var M=n(504);Object.defineProperty(t,"interpolateSpectral",{enumerable:!0,get:function(){return r(M).default}}),Object.defineProperty(t,"schemeSpectral",{enumerable:!0,get:function(){return M.scheme}});var w=n(505);Object.defineProperty(t,"interpolateBuGn",{enumerable:!0,get:function(){return r(w).default}}),Object.defineProperty(t,"schemeBuGn",{enumerable:!0,get:function(){return w.scheme}});var S=n(506);Object.defineProperty(t,"interpolateBuPu",{enumerable:!0,get:function(){return r(S).default}}),Object.defineProperty(t,"schemeBuPu",{enumerable:!0,get:function(){return S.scheme}});var P=n(507);Object.defineProperty(t,"interpolateGnBu",{enumerable:!0,get:function(){return r(P).default}}),Object.defineProperty(t,"schemeGnBu",{enumerable:!0,get:function(){return P.scheme}});var T=n(508);Object.defineProperty(t,"interpolateOrRd",{enumerable:!0,get:function(){return r(T).default}}),Object.defineProperty(t,"schemeOrRd",{enumerable:!0,get:function(){return T.scheme}});var E=n(509);Object.defineProperty(t,"interpolatePuBuGn",{enumerable:!0,get:function(){return r(E).default}}),Object.defineProperty(t,"schemePuBuGn",{enumerable:!0,get:function(){return E.scheme}});var O=n(510);Object.defineProperty(t,"interpolatePuBu",{enumerable:!0,get:function(){return r(O).default}}),Object.defineProperty(t,"schemePuBu",{enumerable:!0,get:function(){return O.scheme}});var A=n(511);Object.defineProperty(t,"interpolatePuRd",{enumerable:!0,get:function(){return r(A).default}}),Object.defineProperty(t,"schemePuRd",{enumerable:!0,get:function(){return A.scheme}});var L=n(512);Object.defineProperty(t,"interpolateRdPu",{enumerable:!0,get:function(){return r(L).default}}),Object.defineProperty(t,"schemeRdPu",{enumerable:!0,get:function(){return L.scheme}});var R=n(513);Object.defineProperty(t,"interpolateYlGnBu",{enumerable:!0,get:function(){return r(R).default}}),Object.defineProperty(t,"schemeYlGnBu",{enumerable:!0,get:function(){return R.scheme}});var C=n(514);Object.defineProperty(t,"interpolateYlGn",{enumerable:!0,get:function(){return r(C).default}}),Object.defineProperty(t,"schemeYlGn",{enumerable:!0,get:function(){return C.scheme}});var j=n(515);Object.defineProperty(t,"interpolateYlOrBr",{enumerable:!0,get:function(){return r(j).default}}),Object.defineProperty(t,"schemeYlOrBr",{enumerable:!0,get:function(){return j.scheme}});var k=n(516);Object.defineProperty(t,"interpolateYlOrRd",{enumerable:!0,get:function(){return r(k).default}}),Object.defineProperty(t,"schemeYlOrRd",{enumerable:!0,get:function(){return k.scheme}});var N=n(517);Object.defineProperty(t,"interpolateBlues",{enumerable:!0,get:function(){return r(N).default}}),Object.defineProperty(t,"schemeBlues",{enumerable:!0,get:function(){return N.scheme}});var I=n(518);Object.defineProperty(t,"interpolateGreens",{enumerable:!0,get:function(){return r(I).default}}),Object.defineProperty(t,"schemeGreens",{enumerable:!0,get:function(){return I.scheme}});var D=n(519);Object.defineProperty(t,"interpolateGreys",{enumerable:!0,get:function(){return r(D).default}}),Object.defineProperty(t,"schemeGreys",{enumerable:!0,get:function(){return D.scheme}});var B=n(520);Object.defineProperty(t,"interpolatePurples",{enumerable:!0,get:function(){return r(B).default}}),Object.defineProperty(t,"schemePurples",{enumerable:!0,get:function(){return B.scheme}});var z=n(521);Object.defineProperty(t,"interpolateReds",{enumerable:!0,get:function(){return r(z).default}}),Object.defineProperty(t,"schemeReds",{enumerable:!0,get:function(){return z.scheme}});var F=n(522);Object.defineProperty(t,"interpolateOranges",{enumerable:!0,get:function(){return r(F).default}}),Object.defineProperty(t,"schemeOranges",{enumerable:!0,get:function(){return F.scheme}});var U=n(523);Object.defineProperty(t,"interpolateCividis",{enumerable:!0,get:function(){return r(U).default}});var G=n(524);Object.defineProperty(t,"interpolateCubehelixDefault",{enumerable:!0,get:function(){return r(G).default}});var H=n(525);Object.defineProperty(t,"interpolateRainbow",{enumerable:!0,get:function(){return r(H).default}}),Object.defineProperty(t,"interpolateWarm",{enumerable:!0,get:function(){return H.warm}}),Object.defineProperty(t,"interpolateCool",{enumerable:!0,get:function(){return H.cool}});var V=n(526);Object.defineProperty(t,"interpolateSinebow",{enumerable:!0,get:function(){return r(V).default}});var W=n(527);Object.defineProperty(t,"interpolateTurbo",{enumerable:!0,get:function(){return r(W).default}});var q=n(528);Object.defineProperty(t,"interpolateViridis",{enumerable:!0,get:function(){return r(q).default}}),Object.defineProperty(t,"interpolateMagma",{enumerable:!0,get:function(){return q.magma}}),Object.defineProperty(t,"interpolateInferno",{enumerable:!0,get:function(){return q.inferno}}),Object.defineProperty(t,"interpolatePlasma",{enumerable:!0,get:function(){return q.plasma}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,i.default)("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.scheme=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),u=t.scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(a.default);t.default=(0,s.default)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(11);t.default=(0,i.interpolateCubehelixLong)((0,r.cubehelix)(300,.5,0),(0,r.cubehelix)(-240,.5,1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cool=t.warm=void 0,t.default=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return a.h=360*e-100,a.s=1.5-1.5*t,a.l=.8-.9*t,a+""};var r=n(9),i=n(11),a=(t.warm=(0,i.interpolateCubehelixLong)((0,r.cubehelix)(-100,.75,.35),(0,r.cubehelix)(80,1.5,.8)),t.cool=(0,i.interpolateCubehelixLong)((0,r.cubehelix)(260,.75,.35),(0,r.cubehelix)(80,1.5,.8)),(0,r.cubehelix)())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;return e=(.5-e)*Math.PI,i.r=255*(t=Math.sin(e))*t,i.g=255*(t=Math.sin(e+a))*t,i.b=255*(t=Math.sin(e+o))*t,i+""};var r=n(9),i=(0,r.rgb)(),a=Math.PI/3,o=2*Math.PI/3},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}},function(e,t,n){"use strict";function r(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}Object.defineProperty(t,"__esModule",{value:!0}),t.plasma=t.inferno=t.magma=void 0;var i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r((0,a.default)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));t.magma=r((0,a.default)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),t.inferno=r((0,a.default)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),t.plasma=r((0,a.default)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(530);Object.defineProperty(t,"arc",{enumerable:!0,get:function(){return r(i).default}});var a=n(176);Object.defineProperty(t,"area",{enumerable:!0,get:function(){return r(a).default}});var o=n(92);Object.defineProperty(t,"line",{enumerable:!0,get:function(){return r(o).default}});var s=n(531);Object.defineProperty(t,"pie",{enumerable:!0,get:function(){return r(s).default}});var u=n(534);Object.defineProperty(t,"areaRadial",{enumerable:!0,get:function(){return r(u).default}}),Object.defineProperty(t,"radialArea",{enumerable:!0,get:function(){return r(u).default}});var c=n(178);Object.defineProperty(t,"lineRadial",{enumerable:!0,get:function(){return r(c).default}}),Object.defineProperty(t,"radialLine",{enumerable:!0,get:function(){return r(c).default}});var l=n(179);Object.defineProperty(t,"pointRadial",{enumerable:!0,get:function(){return r(l).default}});var f=n(535);Object.defineProperty(t,"linkHorizontal",{enumerable:!0,get:function(){return f.linkHorizontal}}),Object.defineProperty(t,"linkVertical",{enumerable:!0,get:function(){return f.linkVertical}}),Object.defineProperty(t,"linkRadial",{enumerable:!0,get:function(){return f.linkRadial}});var d=n(536);Object.defineProperty(t,"symbol",{enumerable:!0,get:function(){return r(d).default}}),Object.defineProperty(t,"symbols",{enumerable:!0,get:function(){return d.symbols}});var h=n(181);Object.defineProperty(t,"symbolCircle",{enumerable:!0,get:function(){return r(h).default}});var p=n(182);Object.defineProperty(t,"symbolCross",{enumerable:!0,get:function(){return r(p).default}});var v=n(183);Object.defineProperty(t,"symbolDiamond",{enumerable:!0,get:function(){return r(v).default}});var m=n(185);Object.defineProperty(t,"symbolSquare",{enumerable:!0,get:function(){return r(m).default}});var g=n(184);Object.defineProperty(t,"symbolStar",{enumerable:!0,get:function(){return r(g).default}});var y=n(186);Object.defineProperty(t,"symbolTriangle",{enumerable:!0,get:function(){return r(y).default}});var _=n(187);Object.defineProperty(t,"symbolWye",{enumerable:!0,get:function(){return r(_).default}});var b=n(537);Object.defineProperty(t,"curveBasisClosed",{enumerable:!0,get:function(){return r(b).default}});var x=n(538);Object.defineProperty(t,"curveBasisOpen",{enumerable:!0,get:function(){return r(x).default}});var M=n(50);Object.defineProperty(t,"curveBasis",{enumerable:!0,get:function(){return r(M).default}});var w=n(539);Object.defineProperty(t,"curveBundle",{enumerable:!0,get:function(){return r(w).default}});var S=n(188);Object.defineProperty(t,"curveCardinalClosed",{enumerable:!0,get:function(){return r(S).default}});var P=n(189);Object.defineProperty(t,"curveCardinalOpen",{enumerable:!0,get:function(){return r(P).default}});var T=n(51);Object.defineProperty(t,"curveCardinal",{enumerable:!0,get:function(){return r(T).default}});var E=n(540);Object.defineProperty(t,"curveCatmullRomClosed",{enumerable:!0,get:function(){return r(E).default}});var O=n(541);Object.defineProperty(t,"curveCatmullRomOpen",{enumerable:!0,get:function(){return r(O).default}});var A=n(94);Object.defineProperty(t,"curveCatmullRom",{enumerable:!0,get:function(){return r(A).default}});var L=n(542);Object.defineProperty(t,"curveLinearClosed",{enumerable:!0,get:function(){return r(L).default}});var R=n(48);Object.defineProperty(t,"curveLinear",{enumerable:!0,get:function(){return r(R).default}});var C=n(543);Object.defineProperty(t,"curveMonotoneX",{enumerable:!0,get:function(){return C.monotoneX}}),Object.defineProperty(t,"curveMonotoneY",{enumerable:!0,get:function(){return C.monotoneY}});var j=n(544);Object.defineProperty(t,"curveNatural",{enumerable:!0,get:function(){return r(j).default}});var k=n(545);Object.defineProperty(t,"curveStep",{enumerable:!0,get:function(){return r(k).default}}),Object.defineProperty(t,"curveStepAfter",{enumerable:!0,get:function(){return k.stepAfter}}),Object.defineProperty(t,"curveStepBefore",{enumerable:!0,get:function(){return k.stepBefore}});var N=n(546);Object.defineProperty(t,"stack",{enumerable:!0,get:function(){return r(N).default}});var I=n(547);Object.defineProperty(t,"stackOffsetExpand",{enumerable:!0,get:function(){return r(I).default}});var D=n(548);Object.defineProperty(t,"stackOffsetDiverging",{enumerable:!0,get:function(){return r(D).default}});var B=n(32);Object.defineProperty(t,"stackOffsetNone",{enumerable:!0,get:function(){return r(B).default}});var z=n(549);Object.defineProperty(t,"stackOffsetSilhouette",{enumerable:!0,get:function(){return r(z).default}});var F=n(550);Object.defineProperty(t,"stackOffsetWiggle",{enumerable:!0,get:function(){return r(F).default}});var U=n(190);Object.defineProperty(t,"stackOrderAppearance",{enumerable:!0,get:function(){return r(U).default}});var G=n(95);Object.defineProperty(t,"stackOrderAscending",{enumerable:!0,get:function(){return r(G).default}});var H=n(551);Object.defineProperty(t,"stackOrderDescending",{enumerable:!0,get:function(){return r(H).default}});var V=n(552);Object.defineProperty(t,"stackOrderInsideOut",{enumerable:!0,get:function(){return r(V).default}});var W=n(33);Object.defineProperty(t,"stackOrderNone",{enumerable:!0,get:function(){return r(W).default}});var q=n(553);Object.defineProperty(t,"stackOrderReverse",{enumerable:!0,get:function(){return r(q).default}})},function(e,t,n){"use strict";function r(e){return e.innerRadius}function i(e){return e.outerRadius}function a(e){return e.startAngle}function o(e){return e.endAngle}function s(e){return e&&e.padAngle}function u(e,t,n,r,i,a,o,s){var u=n-e,c=r-t,l=o-i,f=s-a,d=f*u-l*c;if(!(d*d<h.epsilon))return d=(l*(t-a)-f*(e-i))/d,[e+d*u,t+d*c]}function c(e,t,n,r,i,a,o){var s=e-n,u=t-r,c=(o?a:-a)/(0,h.sqrt)(s*s+u*u),l=c*u,f=-c*s,d=e+l,p=t+f,v=n+l,m=r+f,g=(d+v)/2,y=(p+m)/2,_=v-d,b=m-p,x=_*_+b*b,M=i-a,w=d*m-v*p,S=(b<0?-1:1)*(0,h.sqrt)((0,h.max)(0,M*M*x-w*w)),P=(w*b-_*S)/x,T=(-w*_-b*S)/x,E=(w*b+_*S)/x,O=(-w*_+b*S)/x,A=P-g,L=T-y,R=E-g,C=O-y;return A*A+L*L>R*R+C*C&&(P=E,T=O),{cx:P,cy:T,x01:-l,y01:-f,x11:P*(i/M-1),y11:T*(i/M-1)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){var e,r,i=+t.apply(this,arguments),a=+n.apply(this,arguments),o=v.apply(this,arguments)-h.halfPi,s=m.apply(this,arguments)-h.halfPi,d=(0,h.abs)(s-o),_=s>o;if(y||(y=e=(0,l.path)()),a<i&&(r=a,a=i,i=r),a>h.epsilon)if(d>h.tau-h.epsilon)y.moveTo(a*(0,h.cos)(o),a*(0,h.sin)(o)),y.arc(0,0,a,o,s,!_),i>h.epsilon&&(y.moveTo(i*(0,h.cos)(s),i*(0,h.sin)(s)),y.arc(0,0,i,s,o,_));else{var b,x,M=o,w=s,S=o,P=s,T=d,E=d,O=g.apply(this,arguments)/2,A=O>h.epsilon&&(p?+p.apply(this,arguments):(0,h.sqrt)(i*i+a*a)),L=(0,h.min)((0,h.abs)(a-i)/2,+f.apply(this,arguments)),R=L,C=L;if(A>h.epsilon){var j=(0,h.asin)(A/i*(0,h.sin)(O)),k=(0,h.asin)(A/a*(0,h.sin)(O));(T-=2*j)>h.epsilon?(j*=_?1:-1,S+=j,P-=j):(T=0,S=P=(o+s)/2),(E-=2*k)>h.epsilon?(k*=_?1:-1,M+=k,w-=k):(E=0,M=w=(o+s)/2)}var N=a*(0,h.cos)(M),I=a*(0,h.sin)(M),D=i*(0,h.cos)(P),B=i*(0,h.sin)(P);if(L>h.epsilon){var z,F=a*(0,h.cos)(w),U=a*(0,h.sin)(w),G=i*(0,h.cos)(S),H=i*(0,h.sin)(S);if(d<h.pi&&(z=u(N,I,G,H,F,U,D,B))){var V=N-z[0],W=I-z[1],q=F-z[0],Y=U-z[1],X=1/(0,h.sin)((0,h.acos)((V*q+W*Y)/((0,h.sqrt)(V*V+W*W)*(0,h.sqrt)(q*q+Y*Y)))/2),Z=(0,h.sqrt)(z[0]*z[0]+z[1]*z[1]);R=(0,h.min)(L,(i-Z)/(X-1)),C=(0,h.min)(L,(a-Z)/(X+1))}}E>h.epsilon?C>h.epsilon?(b=c(G,H,N,I,a,C,_),x=c(F,U,D,B,a,C,_),y.moveTo(b.cx+b.x01,b.cy+b.y01),C<L?y.arc(b.cx,b.cy,C,(0,h.atan2)(b.y01,b.x01),(0,h.atan2)(x.y01,x.x01),!_):(y.arc(b.cx,b.cy,C,(0,h.atan2)(b.y01,b.x01),(0,h.atan2)(b.y11,b.x11),!_),y.arc(0,0,a,(0,h.atan2)(b.cy+b.y11,b.cx+b.x11),(0,h.atan2)(x.cy+x.y11,x.cx+x.x11),!_),y.arc(x.cx,x.cy,C,(0,h.atan2)(x.y11,x.x11),(0,h.atan2)(x.y01,x.x01),!_))):(y.moveTo(N,I),y.arc(0,0,a,M,w,!_)):y.moveTo(N,I),i>h.epsilon&&T>h.epsilon?R>h.epsilon?(b=c(D,B,F,U,i,-R,_),x=c(N,I,G,H,i,-R,_),y.lineTo(b.cx+b.x01,b.cy+b.y01),R<L?y.arc(b.cx,b.cy,R,(0,h.atan2)(b.y01,b.x01),(0,h.atan2)(x.y01,x.x01),!_):(y.arc(b.cx,b.cy,R,(0,h.atan2)(b.y01,b.x01),(0,h.atan2)(b.y11,b.x11),!_),y.arc(0,0,i,(0,h.atan2)(b.cy+b.y11,b.cx+b.x11),(0,h.atan2)(x.cy+x.y11,x.cx+x.x11),_),y.arc(x.cx,x.cy,R,(0,h.atan2)(x.y11,x.x11),(0,h.atan2)(x.y01,x.x01),!_))):y.arc(0,0,i,P,S,_):y.lineTo(D,B)}else y.moveTo(0,0);if(y.closePath(),e)return y=null,e+""||null}var t=r,n=i,f=(0,d.default)(0),p=null,v=a,m=o,g=s,y=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+v.apply(this,arguments)+ +m.apply(this,arguments))/2-h.pi/2;return[(0,h.cos)(r)*e,(0,h.sin)(r)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:(0,d.default)(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:(0,d.default)(+t),e):n},e.cornerRadius=function(t){return arguments.length?(f="function"==typeof t?t:(0,d.default)(+t),e):f},e.padRadius=function(t){return arguments.length?(p=null==t?null:"function"==typeof t?t:(0,d.default)(+t),e):p},e.startAngle=function(t){return arguments.length?(v="function"==typeof t?t:(0,d.default)(+t),e):v},e.endAngle=function(t){return arguments.length?(m="function"==typeof t?t:(0,d.default)(+t),e):m},e.padAngle=function(t){return arguments.length?(g="function"==typeof t?t:(0,d.default)(+t),e):g},e.context=function(t){return arguments.length?(y=null==t?null:t,e):y},e};var l=n(16),f=n(20),d=function(e){return e&&e.__esModule?e:{default:e}}(f),h=n(31)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var a,s,c,f,d,h=e.length,p=0,v=new Array(h),m=new Array(h),g=+i.apply(this,arguments),y=Math.min(l.tau,Math.max(-l.tau,o.apply(this,arguments)-g)),_=Math.min(Math.abs(y)/h,u.apply(this,arguments)),b=_*(y<0?-1:1);for(a=0;a<h;++a)(d=m[v[a]=a]=+t(e[a],a,e))>0&&(p+=d);for(null!=n?v.sort(function(e,t){return n(m[e],m[t])}):null!=r&&v.sort(function(t,n){return r(e[t],e[n])}),a=0,c=p?(y-h*b)/p:0;a<h;++a,g=f)s=v[a],d=m[s],f=g+(d>0?d*c:0)+b,m[s]={data:e[s],index:a,value:d,startAngle:g,endAngle:f,padAngle:_};return m}var t=c.default,n=s.default,r=null,i=(0,a.default)(0),o=(0,a.default)(l.tau),u=(0,a.default)(0);return e.value=function(n){return arguments.length?(t="function"==typeof n?n:(0,a.default)(+n),e):t},e.sortValues=function(t){return arguments.length?(n=t,r=null,e):n},e.sort=function(t){return arguments.length?(r=t,n=null,e):r},e.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:(0,a.default)(+t),e):i},e.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:(0,a.default)(+t),e):o},e.padAngle=function(t){return arguments.length?(u="function"==typeof t?t:(0,a.default)(+t),e):u},e};var i=n(20),a=r(i),o=n(532),s=r(o),u=n(533),c=r(u),l=n(31)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,s.default)().curve(i.curveRadialLinear),t=e.curve,n=e.lineX0,r=e.lineX1,o=e.lineY0,c=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return(0,u.lineRadial)(n())},delete e.lineX0,e.lineEndAngle=function(){return(0,u.lineRadial)(r())},delete e.lineX1,e.lineInnerRadius=function(){return(0,u.lineRadial)(o())},delete e.lineY0,e.lineOuterRadius=function(){return(0,u.lineRadial)(c())},delete e.lineY1,e.curve=function(e){return arguments.length?t((0,a.default)(e)):t()._curve},e};var i=n(177),a=r(i),o=n(176),s=r(o),u=n(178)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.source}function a(e){return e.target}function o(e){function t(){var t,i=p.slice.call(arguments),a=n.apply(this,i),c=r.apply(this,i);if(u||(u=t=(0,h.path)()),e(u,+o.apply(this,(i[0]=a,i)),+s.apply(this,i),+o.apply(this,(i[0]=c,i)),+s.apply(this,i)),t)return u=null,t+""||null}var n=i,r=a,o=g.x,s=g.y,u=null;return t.source=function(e){return arguments.length?(n=e,t):n},t.target=function(e){return arguments.length?(r=e,t):r},t.x=function(e){return arguments.length?(o="function"==typeof e?e:(0,m.default)(+e),t):o},t.y=function(e){return arguments.length?(s="function"==typeof e?e:(0,m.default)(+e),t):s},t.context=function(e){return arguments.length?(u=null==e?null:e,t):u},t}function s(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function u(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+i)/2,r,n,r,i)}function c(e,t,n,r,i){var a=(0,_.default)(t,n),o=(0,_.default)(t,n=(n+i)/2),s=(0,_.default)(r,n),u=(0,_.default)(r,i);e.moveTo(a[0],a[1]),e.bezierCurveTo(o[0],o[1],s[0],s[1],u[0],u[1])}function l(){return o(s)}function f(){return o(u)}function d(){var e=o(c);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}Object.defineProperty(t,"__esModule",{value:!0}),t.linkHorizontal=l,t.linkVertical=f,t.linkRadial=d;var h=n(16),p=n(180),v=n(20),m=r(v),g=n(93),y=n(179),_=r(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.symbols=void 0,t.default=function(){function e(){var e;if(r||(r=e=(0,i.path)()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),e)return r=null,e+""||null}var t=(0,b.default)(o.default),n=(0,b.default)(64),r=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:(0,b.default)(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:(0,b.default)(+t),e):n},e.context=function(t){return arguments.length?(r=null==t?null:t,e):r},e};var i=n(16),a=n(181),o=r(a),s=n(182),u=r(s),c=n(183),l=r(c),f=n(184),d=r(f),h=n(185),p=r(h),v=n(186),m=r(v),g=n(187),y=r(g),_=n(20),b=r(_);t.symbols=[o.default,u.default,l.default,p.default,d.default,m.default,y.default]},function(e,t,n){"use strict";function r(e){this._context=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new r(e)};var i=n(49),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(50);r.prototype={areaStart:a.default,areaEnd:a.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:(0,o.point)(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}},function(e,t,n){"use strict";function r(e){this._context=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new r(e)};var i=n(50);r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:(0,i.point)(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}},function(e,t,n){"use strict";function r(e,t){this._basis=new i.Basis(e),this._beta=t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(50);r.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,s=t[n]-a,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+r*o),this._beta*t[u]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}},t.default=function e(t){function n(e){return 1===t?new i.Basis(e):new r(e,t)}return n.beta=function(t){return e(+t)},n}(.85)},function(e,t,n){"use strict";function r(e,t){this._context=e,this._alpha=t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(188),a=n(49),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(94);r.prototype={areaStart:o.default,areaEnd:o.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:(0,s.point)(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t.default=function e(t){function n(e){return t?new r(e,t):new i.CardinalClosed(e,0)}return n.alpha=function(t){return e(+t)},n}(.5)},function(e,t,n){"use strict";function r(e,t){this._context=e,this._alpha=t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(189),a=n(94);r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,a.point)(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},t.default=function e(t){function n(e){return t?new r(e,t):new i.CardinalOpen(e,0)}return n.alpha=function(t){return e(+t)},n}(.5)},function(e,t,n){"use strict";function r(e){this._context=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new r(e)};var i=n(49),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.prototype={areaStart:a.default,areaEnd:a.default,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}}},function(e,t,n){"use strict";function r(e){return e<0?-1:1}function i(e,t,n){var i=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(i||a<0&&-0),s=(n-e._y1)/(a||i<0&&-0),u=(o*a+s*i)/(i+a);return(r(o)+r(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(u))||0}function a(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function o(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function s(e){this._context=e}function u(e){this._context=new c(e)}function c(e){this._context=e}function l(e){return new s(e)}function f(e){return new u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.monotoneX=l,t.monotoneY=f,s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o(this,this._t0,a(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,o(this,a(this,n=i(this,e,t)),n);break;default:o(this,this._t0,n=i(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(u.prototype=Object.create(s.prototype)).point=function(e,t){s.prototype.point.call(this,t,e)},c.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}}},function(e,t,n){"use strict";function r(e){this._context=e}function i(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new r(e)},r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=i(e),a=i(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],a[0][o],r[1][o],a[1][o],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}}},function(e,t,n){"use strict";function r(e,t){this._context=e,this._t=t}function i(e){return new r(e,0)}function a(e){return new r(e,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new r(e,.5)},t.stepBefore=i,t.stepAfter=a,r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var i,a,s=t.apply(this,arguments),u=e.length,c=s.length,l=new Array(c);for(i=0;i<c;++i){for(var f,d=s[i],h=l[i]=new Array(u),p=0;p<u;++p)h[p]=f=[0,+o(e[p],d,p,e)],f.data=e[p];h.key=d}for(i=0,a=n(l);i<c;++i)l[a[i]].index=i;return r(l,a),l}var t=(0,s.default)([]),n=f.default,r=c.default,o=i;return e.keys=function(n){return arguments.length?(t="function"==typeof n?n:(0,s.default)(a.slice.call(n)),e):t},e.value=function(t){return arguments.length?(o="function"==typeof t?t:(0,s.default)(+t),e):o},e.order=function(t){return arguments.length?(n=null==t?f.default:"function"==typeof t?t:(0,s.default)(a.slice.call(t)),e):n},e.offset=function(t){return arguments.length?(r=null==t?c.default:t,e):r},e};var a=n(180),o=n(20),s=r(o),u=n(32),c=r(u),l=n(33),f=r(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((r=e.length)>0){for(var n,r,a,o=0,s=e[0].length;o<s;++o){for(a=n=0;n<r;++n)a+=e[n][o][1]||0;if(a)for(n=0;n<r;++n)e[n][o][1]/=a}(0,i.default)(e,t)}};var r=n(32),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((s=e.length)>0)for(var n,r,i,a,o,s,u=0,c=e[t[0]].length;u<c;++u)for(a=o=0,n=0;n<s;++n)(i=(r=e[t[n]][u])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],o=a.length;r<o;++r){for(var s=0,u=0;s<n;++s)u+=e[s][r][1]||0;a[r][1]+=a[r][0]=-u/2}(0,i.default)(e,t)}};var r=n(32),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,o=0,s=1;s<r;++s){for(var u=0,c=0,l=0;u<a;++u){for(var f=e[t[u]],d=f[s][1]||0,h=f[s-1][1]||0,p=(d-h)/2,v=0;v<u;++v){var m=e[t[v]];p+=(m[s][1]||0)-(m[s-1][1]||0)}c+=d,l+=p*d}n[s-1][1]+=n[s-1][0]=o,c&&(o-=l/c)}n[s-1][1]+=n[s-1][0]=o,(0,i.default)(e,t)}};var r=n(32),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e).reverse()};var r=n(95),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r=e.length,o=e.map(a.sum),s=(0,i.default)(e),u=0,c=0,l=[],f=[];for(t=0;t<r;++t)n=s[t],u<c?(u+=o[n],l.push(n)):(c+=o[n],f.push(n));return f.reverse().concat(l)};var r=n(190),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(95)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e).reverse()};var r=n(33),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(555);Object.defineProperty(t,"voronoi",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){return new u.default(e.map(function(r,i){var a=[Math.round(t(r,i,e)/s.epsilon)*s.epsilon,Math.round(n(r,i,e)/s.epsilon)*s.epsilon];return a.index=i,a.data=r,a}),r)}var t=o.x,n=o.y,r=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:(0,a.default)(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:(0,a.default)(+t),e):n},e.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},e.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],e):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},e};var i=n(556),a=r(i),o=n(557),s=n(34),u=r(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";function r(e){return e[0]}function i(e){return e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.x=r,t.y=i},function(e,t,n){"use strict";function r(){(0,l.RedBlackNode)(this),this.edge=this.site=this.circle=null}function i(e){var t=v.pop()||new r;return t.site=e,t}function a(e){(0,d.detachCircle)(e),p.beaches.remove(e),v.push(e),(0,l.RedBlackNode)(e)}function o(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],o=e.P,s=e.N,u=[e];a(e);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<p.epsilon&&Math.abs(r-c.circle.cy)<p.epsilon;)o=c.P,u.unshift(c),a(c),c=o;u.unshift(c),(0,d.detachCircle)(c);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<p.epsilon&&Math.abs(r-l.circle.cy)<p.epsilon;)s=l.N,u.push(l),a(l),l=s;u.push(l),(0,d.detachCircle)(l);var f,v=u.length;for(f=1;f<v;++f)l=u[f],c=u[f-1],(0,h.setEdgeEnd)(l.edge,c.site,l.site,i);c=u[0],l=u[v-1],l.edge=(0,h.createEdge)(c.site,l.site,null,i),(0,d.attachCircle)(c),(0,d.attachCircle)(l)}function s(e){for(var t,n,r,a,o=e[0],s=e[1],l=p.beaches._;l;)if((r=u(l,s)-o)>p.epsilon)l=l.L;else{if(!((a=o-c(l,s))>p.epsilon)){r>-p.epsilon?(t=l.P,n=l):a>-p.epsilon?(t=l,n=l.N):t=n=l;break}if(!l.R){t=l;break}l=l.R}(0,f.createCell)(e);var v=i(e);if(p.beaches.insert(t,v),t||n){if(t===n)return(0,d.detachCircle)(t),n=i(t.site),p.beaches.insert(v,n),v.edge=n.edge=(0,h.createEdge)(t.site,v.site),(0,d.attachCircle)(t),void(0,d.attachCircle)(n);if(!n)return void(v.edge=(0,h.createEdge)(t.site,v.site));(0,d.detachCircle)(t),(0,d.detachCircle)(n);var m=t.site,g=m[0],y=m[1],_=e[0]-g,b=e[1]-y,x=n.site,M=x[0]-g,w=x[1]-y,S=2*(_*w-b*M),P=_*_+b*b,T=M*M+w*w,E=[(w*P-b*T)/S+g,(_*T-M*P)/S+y];(0,h.setEdgeEnd)(n.edge,m,x,E),v.edge=(0,h.createEdge)(m,e,null,E),n.edge=(0,h.createEdge)(e,x,null,E),(0,d.attachCircle)(t),(0,d.attachCircle)(n)}}function u(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;n=o.site;var s=n[0],u=n[1],c=u-t;if(!c)return s;var l=s-r,f=1/a-1/c,d=l/c;return f?(-d+Math.sqrt(d*d-2*f*(l*l/(-2*c)-u+c/2+i-a/2)))/f+r:(r+s)/2}function c(e,t){var n=e.N;if(n)return u(n,t);var r=e.site;return r[1]===t?r[0]:1/0}Object.defineProperty(t,"__esModule",{value:!0}),t.removeBeach=o,t.addBeach=s;var l=n(96),f=n(191),d=n(192),h=n(97),p=n(34),v=[]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(560);Object.defineProperty(t,"zoom",{enumerable:!0,get:function(){return r(i).default}});var a=n(193);Object.defineProperty(t,"zoomTransform",{enumerable:!0,get:function(){return r(a).default}}),Object.defineProperty(t,"zoomIdentity",{enumerable:!0,get:function(){return a.identity}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return!h.event.ctrlKey&&!h.event.button}function a(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function o(){return this.__zoom||_.identity}function s(){return-h.event.deltaY*(1===h.event.deltaMode?.05:h.event.deltaMode?1:.002)}function u(){return navigator.maxTouchPoints||"ontouchstart"in this}function c(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){e.property("__zoom",o).on("wheel.zoom",w).on("mousedown.zoom",S).on("dblclick.zoom",P).filter(N).on("touchstart.zoom",T).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function t(e,t){return t=Math.max(I[0],Math.min(I[1],t)),t===e.k?e:new _.Transform(t,e.x,e.y)}function n(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new _.Transform(e.k,r,i)}function r(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function v(e,t,n){e.on("start.zoom",function(){g(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){g(this,arguments).end()}).tween("zoom",function(){var e=this,i=arguments,a=g(e,i),o=C.apply(e,i),s=null==n?r(o):"function"==typeof n?n.apply(e,i):n,u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=e.__zoom,l="function"==typeof t?t.apply(e,i):t,f=z(c.invert(s).concat(u/c.k),l.invert(s).concat(u/l.k));return function(e){if(1===e)e=l;else{var t=f(e),n=u/t[2];e=new _.Transform(n,s[0]-t[0]*n,s[1]-t[1]*n)}a.zoom(null,e)}})}function g(e,t,n){return!n&&e.__zooming||new M(e,t)}function M(e,t){this.that=e,this.args=t,this.active=0,this.extent=C.apply(e,t),this.taps=0}function w(){function e(){r.wheel=null,r.end()}if(R.apply(this,arguments)){var r=g(this,arguments),i=this.__zoom,a=Math.max(I[0],Math.min(I[1],i.k*Math.pow(2,k.apply(this,arguments)))),o=(0,h.mouse)(this);if(r.wheel)r.mouse[0][0]===o[0]&&r.mouse[0][1]===o[1]||(r.mouse[1]=i.invert(r.mouse[0]=o)),clearTimeout(r.wheel);else{if(i.k===a)return;r.mouse=[o,i.invert(o)],(0,p.interrupt)(this),r.start()}(0,x.default)(),r.wheel=setTimeout(e,G),r.zoom("mouse",j(n(t(i,a),r.mouse[0],r.mouse[1]),r.extent,D))}}function S(){function e(){if((0,x.default)(),!r.moved){var e=h.event.clientX-o,t=h.event.clientY-s;r.moved=e*e+t*t>H}r.zoom("mouse",j(n(r.that.__zoom,r.mouse[0]=(0,h.mouse)(r.that),r.mouse[1]),r.extent,D))}function t(){i.on("mousemove.zoom mouseup.zoom",null),(0,f.dragEnable)(h.event.view,r.moved),(0,x.default)(),r.end()}if(!L&&R.apply(this,arguments)){var r=g(this,arguments,!0),i=(0,h.select)(h.event.view).on("mousemove.zoom",e,!0).on("mouseup.zoom",t,!0),a=(0,h.mouse)(this),o=h.event.clientX,s=h.event.clientY;(0,f.dragDisable)(h.event.view),(0,b.nopropagation)(),r.mouse=[a,this.__zoom.invert(a)],(0,p.interrupt)(this),r.start()}}function P(){if(R.apply(this,arguments)){var r=this.__zoom,i=(0,h.mouse)(this),a=r.invert(i),o=r.k*(h.event.shiftKey?.5:2),s=j(n(t(r,o),i,a),C.apply(this,arguments),D);(0,x.default)(),B>0?(0,h.select)(this).transition().duration(B).call(v,s,i):(0,h.select)(this).call(e.transform,s)}}function T(){if(R.apply(this,arguments)){var e,t,n,r,i=h.event.touches,a=i.length,o=g(this,arguments,h.event.changedTouches.length===a);for((0,b.nopropagation)(),t=0;t<a;++t)n=i[t],r=(0,h.touch)(this,i,n.identifier),r=[r,this.__zoom.invert(r),n.identifier],o.touch0?o.touch1||o.touch0[2]===r[2]||(o.touch1=r,o.taps=0):(o.touch0=r,e=!0,o.taps=1+!!A);A&&(A=clearTimeout(A)),e&&(o.taps<2&&(A=setTimeout(function(){A=null},U)),(0,p.interrupt)(this),o.start())}}function E(){if(this.__zooming){var e,r,i,a,o=g(this,arguments),s=h.event.changedTouches,u=s.length;for((0,x.default)(),A&&(A=clearTimeout(A)),o.taps=0,e=0;e<u;++e)r=s[e],i=(0,h.touch)(this,s,r.identifier),o.touch0&&o.touch0[2]===r.identifier?o.touch0[0]=i:o.touch1&&o.touch1[2]===r.identifier&&(o.touch1[0]=i);if(r=o.that.__zoom,o.touch1){var c=o.touch0[0],l=o.touch0[1],f=o.touch1[0],d=o.touch1[1],p=(p=f[0]-c[0])*p+(p=f[1]-c[1])*p,v=(v=d[0]-l[0])*v+(v=d[1]-l[1])*v;r=t(r,Math.sqrt(p/v)),i=[(c[0]+f[0])/2,(c[1]+f[1])/2],a=[(l[0]+d[0])/2,(l[1]+d[1])/2]}else{if(!o.touch0)return;i=o.touch0[0],a=o.touch0[1]}o.zoom("touch",j(n(r,i,a),o.extent,D))}}function O(){if(this.__zooming){var e,t,n=g(this,arguments),r=h.event.changedTouches,i=r.length;for((0,b.nopropagation)(),L&&clearTimeout(L),L=setTimeout(function(){L=null},U),e=0;e<i;++e)t=r[e],n.touch0&&n.touch0[2]===t.identifier?delete n.touch0:n.touch1&&n.touch1[2]===t.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),2===n.taps){var a=(0,h.select)(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}}var A,L,R=i,C=a,j=c,k=s,N=u,I=[0,1/0],D=[[-1/0,-1/0],[1/0,1/0]],B=250,z=d.interpolateZoom,F=(0,l.dispatch)("start","zoom","end"),U=500,G=150,H=0;return e.transform=function(e,t,n){var r=e.selection?e.selection():e;r.property("__zoom",o),e!==r?v(e,t,n):r.interrupt().each(function(){g(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},e.scaleBy=function(t,n,r){e.scaleTo(t,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)},r)},e.scaleTo=function(i,a,o){e.transform(i,function(){var e=C.apply(this,arguments),i=this.__zoom,s=null==o?r(e):"function"==typeof o?o.apply(this,arguments):o,u=i.invert(s),c="function"==typeof a?a.apply(this,arguments):a;return j(n(t(i,c),s,u),e,D)},o)},e.translateBy=function(t,n,r){e.transform(t,function(){return j(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),C.apply(this,arguments),D)})},e.translateTo=function(t,n,i,a){e.transform(t,function(){var e=C.apply(this,arguments),t=this.__zoom,o=null==a?r(e):"function"==typeof a?a.apply(this,arguments):a;return j(_.identity.translate(o[0],o[1]).scale(t.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof i?-i.apply(this,arguments):-i),e,D)},a)},M.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){(0,h.customEvent)(new y.default(e,t,this.that.__zoom),F.apply,F,[t,this.that,this.args])}},e.wheelDelta=function(t){return arguments.length?(k="function"==typeof t?t:(0,m.default)(+t),e):k},e.filter=function(t){return arguments.length?(R="function"==typeof t?t:(0,m.default)(!!t),e):R},e.touchable=function(t){return arguments.length?(N="function"==typeof t?t:(0,m.default)(!!t),e):N},e.extent=function(t){return arguments.length?(C="function"==typeof t?t:(0,m.default)([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):C},e.scaleExtent=function(t){return arguments.length?(I[0]=+t[0],I[1]=+t[1],e):[I[0],I[1]]},e.translateExtent=function(t){return arguments.length?(D[0][0]=+t[0][0],D[1][0]=+t[1][0],D[0][1]=+t[0][1],D[1][1]=+t[1][1],e):[[D[0][0],D[0][1]],[D[1][0],D[1][1]]]},e.constrain=function(t){return arguments.length?(j=t,e):j},e.duration=function(t){return arguments.length?(B=+t,e):B},e.interpolate=function(t){return arguments.length?(z=t,e):z},e.on=function(){var t=F.on.apply(F,arguments);return t===F?e:t},e.clickDistance=function(t){return arguments.length?(H=(t=+t)*t,e):Math.sqrt(H)},e};var l=n(22),f=n(58),d=n(11),h=n(4),p=n(70),v=n(561),m=r(v),g=n(562),y=r(g),_=n(193),b=n(563),x=r(b)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return e}}},function(e,t,n){"use strict";function r(e,t,n){this.target=e,this.type=t,this.transform=n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(){i.event.stopImmediatePropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.nopropagation=r,t.default=function(){i.event.preventDefault(),i.event.stopImmediatePropagation()};var i=n(4)},function(e,t,n){"use strict";(function(n){var r,i,a=("function"==typeof Symbol&&Symbol.iterator,function(){this._tweens={},this._tweensAddedDuringUpdate={}});a.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:o.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]];i&&!1===i.update(e)&&(i._isPlaying=!1,t||delete this._tweens[n[r]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var o=new a;o.Group=a,o._nextId=0,o.nextId=function(){return o._nextId++},"undefined"==typeof window&&void 0!==n?o.now=function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?o.now=window.performance.now.bind(window.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()},o.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=o.Easing.Linear.None,this._interpolationFunction=o.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||o,this._id=o.nextId()},o.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},start:function(e){this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?o.now()+parseFloat(e):e:o.now(),this._startTime+=this._delayTime;for(var t in this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==!1&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,r;if(e<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=n>1?1:n,r=this._easingFunction(n);for(t in this._valuesEnd)if(void 0!==this._valuesStart[t]){var i=this._valuesStart[t]||0,a=this._valuesEnd[t];a instanceof Array?this._object[t]=this._interpolationFunction(a,r):("string"==typeof a&&(a="+"===a.charAt(0)||"-"===a.charAt(0)?i+parseFloat(a):parseFloat(a)),"number"==typeof a&&(this._object[t]=i+(a-i)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===n){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(t in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var o=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=o}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},o.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Easing.Bounce.In(2*e):.5*o.Easing.Bounce.Out(2*e-1)+.5}}},o.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-t,r-s)*i(t,s)*e[s]*a(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),a(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=o.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var a=.5*(n-e),o=.5*(r-t),s=i*i;return(2*t-2*n+a+o)*(i*s)+(-3*t+3*n-2*a-o)*s+a*i+t}}},function(n){r=[],void 0!==(i=function(){return o}.apply(t,r))&&(e.exports=i)}()}).call(t,n(565))},function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?v=p.concat(v):g=-1,v.length&&u())}function u(){if(!m){var e=a(s);m=!0;for(var t=v.length;t;){for(p=v,v=[];++g<t;)p&&p[g].run();g=-1,t=v.length}p=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var f,d,h=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var p,v=[],m=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new c(e,t)),1!==v.length||m||a(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return{search:function(t,n){for(var r=void 0,a=void 0,o=0;o<e.length;o++)if(r=e[o],"Polygon"===r.geometry.type){if(i(r.geometry.coordinates[0],[n,t]))return{code:e[o].id}}else if("MultiPolygon"===r.geometry.type){a=r.geometry.coordinates;for(var s=0;s<a.length;s++)if(i(a[s][0],[n,t]))return{code:e[o].id}}return null}}}Object.defineProperty(t,"__esModule",{value:!0}),t.geo=r;var i=function(e,t){for(var n=t[0],r=t[1],i=!1,a=void 0,o=void 0,s=void 0,u=void 0,c=0,l=e.length-1;c<e.length;l=c++)a=e[c][0],s=e[c][1],o=e[l][0],u=e[l][1],s>r!=u>r&&n<(o-a)*(r-s)/(u-s)+a&&(i=!i);return i}}]).default});